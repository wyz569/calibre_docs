<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="comparetccs" />
<meta name="abstract" content="This command loads two TCC matrices and computes two metrics of their difference: maximum difference and average absolute difference for all non-zero values." />
<meta name="description" content="This command loads two TCC matrices and computes two metrics of their difference: maximum difference and average absolute difference for all non-zero values." />
<meta name="prodname" content="Calibre WORKbench User's and Reference Manual" />
<meta name="version" content="2017.3" />
<meta name="release" content="v2017.3" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Calibre WORKbench User's and Reference Manual" />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-18" />
<meta name="Topline" content="Siemens EDA" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="HighlightChanges" content="yes" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_wbench_useref" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="IncludeDraftCommentsInChangeLog" content="all;show" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 20, 2021" />
<meta name="Draft" content="NONE" />
<meta name="DocumentTitle" content="Calibre® WORKbench™ User’s and Reference Manual" />
<meta name="ConditionFiltering" content="XML" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10115,product.id.P10120" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id98cb1cc5-c2da-4bbd-9c05-067f24a96bbd" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>comparetccs</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="comparetccs" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10115,product.id.P10120" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="id98cb1cc5-c2da-4bbd-9c05-067f24a96bbd">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">comparetccs</h1>
<div class="body refbody CommandRefBody"><div class="abstract CommandRefAbstract"><p class="p ContextMGC"><a class="xref fm:HeadingOnly" href="Contain_OpticalModelingCommands_idf531f086.html#idf531f086-0616-4eeb-97b7-accb0f1f55ee__Contain_OpticalModelingCommands_idf531f086.xml#idf531f086-0616-4eeb-97b7-accb0f1f55ee" title="Optical model file commands require specific inputs and parameters in order to produce optical model-related files.">Optical Model Commands</a></p>
<p class="shortdesc">This command loads two TCC matrices
and computes two metrics of their difference: maximum difference
and average absolute difference for all non-zero values. </p>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName Required">comparetccs -tcc1</span> {<span class="keyword ParameterName RequiredReplaceable">optical_model</span> | <span class="keyword ParameterName RequiredReplaceable">sparse_tcc_file</span>} <span class="keyword ParameterName Required">-tcc2</span> {<span class="keyword ParameterName RequiredReplaceable">optical_model</span> | <span class="keyword ParameterName RequiredReplaceable">sparse_tcc_file</span>} <br />
[-scale1 <span class="keyword ParameterName OptionalReplaceable">s1</span>] [-scale2 <span class="keyword ParameterName OptionalReplaceable">s2</span>] [-allowBackupSocsTcc]</p>
</div>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="id98cb1cc5-c2da-4bbd-9c05-067f24a96bbd__id6baf3e10-43ec-4fb7-b733-e64ff92f6477"><span class="keyword ParameterName Required">-tcc1</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument specifying
either an optical model directory or a sparse TCC filename.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id98cb1cc5-c2da-4bbd-9c05-067f24a96bbd__idbcf2bfca-f1e2-429e-880b-a0ea831829e2"><span class="keyword ParameterName Required">-tcc2</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument specifying
either an optical model directory or a sparse TCC filename.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id98cb1cc5-c2da-4bbd-9c05-067f24a96bbd__id29278f92-5e70-4430-a103-22b29c09eaf7">-scale1 <span class="keyword ParameterName OptionalReplaceable">s1</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument specifying a floating
point value to scale the -tcc1 matrix by.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id98cb1cc5-c2da-4bbd-9c05-067f24a96bbd__id61c9a044-9c12-485f-bbda-1c8e5fdec603">-scale2 <span class="keyword ParameterName OptionalReplaceable">s2</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument specifying a floating
point value to scale the -tcc2 matrix by. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="id98cb1cc5-c2da-4bbd-9c05-067f24a96bbd__id6fe950bc-8bf3-4721-b37e-7af5e4829e5c">-allowBackupSocsTcc</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional parameter that instructs the
command to search for the Fourier SOCS kernels to create a backup
TCC matrix, in case the original binary TCC is not present in the
model. Binary TCCs are not normally written to the optical directory
by the <a class="xref fm:HeadingOnly" href="Command_Opticsgen_id3e891955.html#id3e891955-c2bf-4dc9-90be-6af511310ec6__Command_Opticsgen_id3e891955.xml#id3e891955-c2bf-4dc9-90be-6af511310ec6" title="Creates an optical model and associated source map file from an optical parameters file.">opticsgen</a> command,
unless specifically requested during building of the optical model.
Use this flag to approximate the original TCC with the truncated
kernels for use in comparing two models.</p>
</dd>
</dl>
</div>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">This command is useful when making
decisions about convergence and accuracy between different optical
engines (such as rapidTCC versus TCCcalc) and different accuracy settings
(such as TCCcalc_integorder or rapidTCC_uf). Note that this command
is more generic and can compare any two TCC matrices, even though
they may correspond to completely different optical conditions (such
as comparing TCC matrices resulting from a dipole source and an
annular source).</p>
<p class="p">This command produces screen-output
(stdout) and also logs the results in the file TCCdiff_L1Linf. The
inputs can be either optical model directories or text files that
contain the TCC matrix in a sparse form (see “<a class="xref fm:HeadingAndPage" href="FileRef_SparseTccMatrixFileFormat_id510cbe68.html#id510cbe68-c45f-4f05-9f95-9dec4a739779__FileRef_SparseTccMatrixFileFormat_id510cbe68.xml#id510cbe68-c45f-4f05-9f95-9dec4a739779" title="Contains a description of a TCC matrix associated with an optical model.">Sparse TCC Matrix File Format</a>”). </p>
<p class="p">If the input is an optical model
directory, the TCC matrix is read in from the binary file <span class="keyword ParameterName OptionalReplaceable">*_tccsp.omf</span>.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">In 2017.4, the writetcctxt command is used to generate
a <span class="keyword ParameterName OptionalReplaceable">tcc.txt</span> file.
The <span class="keyword ParameterName OptionalReplaceable">tcc.txt</span> file
is no longer automatically generated when using comparetccs.</p>
</div>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">When
comparing a rapidTCC model versus a TCCcalc model, you must ensure that
both models include the normalization setting (<a class="xref fm:HeadingOnly" href="Command_ImageNormalization_id63741dc3.html#id63741dc3-9294-4ba4-8734-8bfb9fe9f2fe__Command_ImageNormalization_id63741dc3.xml#id63741dc3-9294-4ba4-8734-8bfb9fe9f2fe" title="Normalizes the image created by the optical model.">image_normalization</a> TCC0000).</p>
</div>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><div class="section Subsection" id="id98cb1cc5-c2da-4bbd-9c05-067f24a96bbd__id297181ab-89bb-4a2c-a271-ba37252c7c61"><h2 class="title Subheading sectiontitle">Example 1</h2><p class="p">Two optical models (om1 and om2) have
been precomputed using the <a class="xref fm:HeadingOnly" href="Command_Opticsgen_id3e891955.html#id3e891955-c2bf-4dc9-90be-6af511310ec6__Command_Opticsgen_id3e891955.xml#id3e891955-c2bf-4dc9-90be-6af511310ec6" title="Creates an optical model and associated source map file from an optical parameters file.">opticsgen</a> command. The optical settings
are identical except for the NA, which is 0.8 in om1 and 0.95 in
om2. Running comparetccs looks like this: </p>
<pre class="pre codeblock leveled"><code>% comparetccs -tcc1 om1 -tcc2 om2 
Comparing TCC matrices: 
Size of first (17,17)^2 - Number of nonzero elements 29977 
Size of second (21,21)^2 - Number of nonzero elements 63101 
L1_norm = 0.0889563 
Linf_norm = 0.21704 at position (-5,-4,-5,-4) </code></pre><p class="p">The resulting log file looks like
this: </p>
<pre class="pre codeblock leveled"><code>% more TCCdiff_L1Linf 
L1_norm = 8.895627044163271e-02 from 63101 TCCs
Linf_norm = 2.170396000146866e-01 at n1 = -5 n2 = -4 n3 = -5 n4 = -4 </code></pre><p class="p">The maximum absolute difference (reported
as Linf_norm) is the TCC element at (-5,-4,-5,-4) and is ~22%. This
is expected, given that the two TCC matrices being compared are
the outcome of very different optical conditions (NA 0.8 and 0.95).
The average of the absolute difference for all 63101 non-zero TCCs
(reported as L1_norm) is ~9%. Note that the average is computed
using the number of non-zero elements instead of the total number
of elements.</p>
</div>
<div class="section Subsection" id="id98cb1cc5-c2da-4bbd-9c05-067f24a96bbd__id245e4304-b8ae-4051-84ba-6c248a2dcc5c"><h2 class="title Subheading sectiontitle">Example 2</h2><p class="p">Here comparetccs is used to judge
whether an acceptable accuracy has been reached in the computation
of TCCs using TCCcalc. A reference model with a very high integration
order (TCCcalc_integorder 256) is compared with a model with the
default integration order (TCCcalc_integorder 16). Running comparetccs
looks like this: </p>
<pre class="pre codeblock leveled"><code>% comparetccs -tcc1 om_ref -tcc2 om_default 
Comparing TCC matrices: 
Size of first (11,11)^2 - Number of nonzero elements 1735 
Size of second (11,11)^2 - Number of nonzero elements 1735 
L1_norm = 0.000357101 
Linf_norm = 0.00405008 at position (-1,-1,- 1,-1) </code></pre><p class="p">The log file looks like this: </p>
<pre class="pre codeblock leveled"><code>% more TCCdiff_L1Linf 
L1_norm = 3.571014310641173e-04 from 1735 TCCs 
Linf_norm = 4.050076007843018e-03 at n1 = -1 n2 = -1 n3 = -1 n4 = -1 </code></pre><p class="p">The maximum absolute difference (reported
as Linf_norm) is the TCC element (-1,-1,-1,-1) and is ~0.4%. The
average of the absolute difference for all 1735 non-zero TCCs (reported
as L1_norm) is ~0.04%. These differences are considered small in
all practical cases. Therefore, in this example, you would conclude
that the default integration order in TCCcalc is sufficient to obtain
a result with acceptable accuracy. Upon command completion, a file <span class="ph filepath">tcc.txt</span> with
the respective TCC matrix in sparse format has been written in both
model directories om_ref and om_default. </p>
</div>
<div class="section Subsection" id="id98cb1cc5-c2da-4bbd-9c05-067f24a96bbd__idbbb662fb-830b-4f1a-aeed-d9858a830768"><h2 class="title Subheading sectiontitle">Example 3</h2><p class="p">For demonstration purposes, you can
invoke comparetccs with the input being the same TCC matrix, once
as a binary file from the model directory and once as the text file
from a previous comparetccs run. The TCC differences in this case
are negligible, and can be attributed to numerical precision differences
of the two files. The screen output and the log file look like this: </p>
<pre class="pre codeblock leveled"><code>% comparetccs -tcc1 om_ref -tcc2 om_ref/tcc.txt 
Comparing TCC matrices: 
Size of first (11,11)^2 - Number of nonzero elements 1735 
Size of second (9,9)^2 - Number of non-zero elements 1735
L1_norm = 8.99693e-09 
Linf_norm = 2.38419e-07 at position (0,0,0,0) </code></pre><pre class="pre codeblock leveled"><code>% more TCCdiff_L1Linf 
L1_norm = 8.996933357964272e-09 from 1735 TCCs Linf_norm = 2.384185791015625e-07 at n1 = 0 n2 = 0 n3 = 0 n4 = 0 </code></pre><p class="p">Note that the screen output appears
to report inconsistent sizes (9^4 and 11^4) for the TCC matrices.
This is an artifact of pasting the TCC matrix, when loading from
the binary file, on a grid that is the next odd size up from the
native size of the TCC matrix and it is inconsequential in the result.</p>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_OpticalModelingCommands_idf531f086.html" title="Optical model file commands require specific inputs and parameters in order to produce optical model-related files.">Optical Model Commands</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../topics/Command_Opticsgen_id3e891955.html" title="Creates an optical model and associated source map file from an optical parameters file.">opticsgen</a></div>
<div><a class="link" href="../topics/FileRef_SparseTccMatrixFileFormat_id510cbe68.html" title="Contains a description of a TCC matrix associated with an optical model.">Sparse TCC Matrix File Format</a></div>
<div><a class="link" href="../topics/Command_Writetcctxt_id151bd9c8.html" title="Loads the sparse TCC matrix inside an input optical directory and writes the sparse TCC matrix as a text file.">writetcctxt</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_wbench_useref"
                DocTitle = "Calibre® WORKbench™ User’s and Reference Manual"
                PageTitle = "comparetccs"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_Comparetccs_id98cb1cc5.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® WORKbench™ User’s and Reference Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>