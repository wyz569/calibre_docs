<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="perc::set_annotation" />
<meta name="abstract" content="Attaches a user annotation to a device or a net. This allows testing of the annotation value in another rule check." />
<meta name="description" content="Attaches a user annotation to a device or a net. This allows testing of the annotation value in another rule check." />
<meta name="prodname" content="Calibre PERC User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-25" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_perc_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="HighlightChanges" content="yes" />
<meta name="EclipsePluginName" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2;show" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® PERC™ User’s Manual" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P11493,product.id.P10099,product.id.P11347,product.id.P10084,product.id.P11427,product.id.P10116,product.id.P10096" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idc65a020e-4293-4c51-b80d-f16209616d89" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>perc::set_annotation</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="perc::set_annotation" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P11493,product.id.P10099,product.id.P11347,product.id.P10084,product.id.P11427,product.id.P10116,product.id.P10096" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="idc65a020e-4293-4c51-b80d-f16209616d89">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">perc::set_annotation</h1>
<div class="body refbody CommandRefBody-Var1"><div class="abstract CommandRefAbstract"><p class="p ContextMGC">Calibre PERC annotation command.</p>
<p class="shortdesc">Attaches a user annotation to a device or a net. This
allows testing of the annotation value in another rule check.</p>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName Required">perc::set_annotation</span> {<span class="keyword ParameterName RequiredReplaceable">instance_iterator</span> | <span class="keyword ParameterName RequiredReplaceable">net_iterator</span>} <span class="keyword ParameterName Required">-name</span> <span class="keyword ParameterName RequiredReplaceable">annotation_name</span> <br />
<span class="keyword ParameterName Required">-value</span> <span class="keyword ParameterName RequiredReplaceable">annotation_value</span> <span class="keyword ParameterName Required">-dataType</span> {<span class="keyword ParameterName Required">double</span> | <span class="keyword ParameterName Required">long</span> | <span class="keyword ParameterName Required">string</span>}</p>
</div>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">Enables attachment of a name-value pair annotation to a device
instance or a net in the design. Annotations are more efficient
than generation and use of external global tables or other temporary
storage schemes for looking up values.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p"><a class="xref fm:HeadingOnly" href="Concept_CollectionsAndCollectionIterators_id866db00e.html#id866db00e-656e-419c-a896-5a75bd7c1d9f__id390d2a25-2197-4a32-9c75-7210466b15b9">Hash Collections</a> offer a similar
capability to annotations and can be both created and called from
within the same rule check, which is not true of annotations. Collections
have no dependency on assignment to iterators. Collections also
allow device iterators or net iterators to be stored in addition
to text (although these objects cannot be mixed in the same collection). However,
annotating device instances or nets based upon topological context,
such as in pattern recognition, may be easier to implement using
annotations.</p>
</div>
<p class="p">This command is used in conjunction with <a class="xref fm:HeadingOnly" href="Command_PercgetAnnotation_idfc6449ea.html#idfc6449ea-7be9-48a4-a6fb-adb519ca6ce0__Command_PercgetAnnotation_idfc6449ea.xml#idfc6449ea-7be9-48a4-a6fb-adb519ca6ce0" title="Returns an annotation value from a device or a net.">perc::get_annotation</a> and <a class="xref fm:HeadingOnly" href="Command_PerchasAnnotation_id19c7d1ea.html#id19c7d1ea-5cc9-4017-ba85-919c4e6c6955__Command_PerchasAnnotation_id19c7d1ea.xml#id19c7d1ea-5cc9-4017-ba85-919c4e6c6955" title="Returns TRUE if a device or a net has an annotation meeting specified criteria.">perc::has_annotation</a>. You cannot
both set an annotation value and retrieve it from within the context
of the same rule check (doing so causes an error). The annotation
must be set first in one check and then retrieved in another. For
example you might create an annotation named qfet_fin_count and label
a certain collection of devices with the value of fin counts computed
by a rule. Then, in another rule, the presence of the qfet_fin_count
annotation is queried using perc::has_annotation, and it is retrieved
(if it exists) using perc::get_annotation for comparison with externally-specified
values. </p>
<p class="p">Typically, perc::set_annotation is invoked inside the -condition
proc of a <a class="xref fm:HeadingOnly" href="Command_PerccheckDevice_id3faa8842.html#id3faa8842-b865-4759-8041-19b4db0d1f9a__Command_PerccheckDevice_id3faa8842.xml#id3faa8842-b865-4759-8041-19b4db0d1f9a" title="Matches each primitive device in the design by default. Devices that are selectively matched can be configured using the options.">perc::check_device</a> or <a class="xref fm:HeadingOnly" href="Command_PerccheckNet_id75162cb0.html#id75162cb0-c882-4d1d-9273-9095a7dd5b64__Command_PerccheckNet_id75162cb0.xml#id75162cb0-c882-4d1d-9273-9095a7dd5b64" title="Checks nets in the design for nets that match the specified conditions. By default, all nets are matched.">perc::check_net</a> command.
These commands provide a device or net iterator argument to the ‑condition
proc, and this argument may be passed directly as the iterator argument
to perc::set_annotation. </p>
<p class="p">The input iterator must agree with the current placement context
that perc::set_annotation operates in or an error results. The <a class="xref fm:HeadingOnly" href="Command_Percdescend_idbba0a66e.html#idbba0a66e-fb1a-4939-ac12-602ab0543c29__Command_Percdescend_idbba0a66e.xml#idbba0a66e-fb1a-4939-ac12-602ab0543c29" title="Creates an iterator that points to a cell placement representative or to a net in a cell.">perc::descend</a> command’s
output net iterator in particular may not meet this condition.</p>
<p class="p">Only primitive devices may be annotated. Annotation of an instance
which itself references other instances or devices is not permitted.
Devices with annotations can be counted using <a class="xref fm:HeadingOnly" href="Command_Percexists_id24411517.html#id24411517-3545-4fa0-971f-ef3671ac5edc__Command_Percexists_id24411517.xml#id24411517-3545-4fa0-971f-ef3671ac5edc" title="Indicates whether the number of devices in a list meets a constraint interval.">perc::exists</a> or <a class="xref fm:HeadingOnly" href="Command_Perccount_iddc2be6a2.html#iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__Command_Perccount_iddc2be6a2.xml#iddc2be6a2-af8b-4db2-a0a4-eebebc591bad" title="Returns the number of devices meeting the conditions of the command.">perc::count</a> with
the -annotation option.</p>
<p class="p">If this command is specified in a rule check that is selected
for a multithreaded run using <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'PERC Load', 'svrf_ur'); return false;">PERC Load</a> PARALLEL,
then the rule check that defines the annotation must be in the same
parallel group as the rule check that accesses the annotation. Failure
to meet this condition results in an error.</p>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="idc65a020e-4293-4c51-b80d-f16209616d89__idec6d6bf7-ed2a-472f-ab8c-cb69957f2bd2"><span class="keyword ParameterName RequiredReplaceable">instance_iterator</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An argument that is an instance
iterator. Either this argument or <span class="keyword ParameterName RequiredReplaceable">net_iterator</span> must
be specified. See <a class="xref fm:HeadingOnly" href="Command_PerccheckDevice_id3faa8842.html#id3faa8842-b865-4759-8041-19b4db0d1f9a__Command_PerccheckDevice_id3faa8842.xml#id3faa8842-b865-4759-8041-19b4db0d1f9a" title="Matches each primitive device in the design by default. Devices that are selectively matched can be configured using the options.">perc::check_device</a> -condition, <a class="xref fm:HeadingOnly" href="Command_PercgetInstances_ida25f2cc5.html#ida25f2cc5-1190-4526-9b5b-902fd708e689__Command_PercgetInstances_ida25f2cc5.xml#ida25f2cc5-1190-4526-9b5b-902fd708e689" title="Creates an instance iterator.">perc::get_instances</a> and <a class="xref fm:HeadingOnly" href="Command_PercgetInstancesInPattern_idaa4801f2.html#idaa4801f2-6232-41a4-8661-57ec3ea1aaee__Command_PercgetInstancesInPattern_idaa4801f2.xml#idaa4801f2-6232-41a4-8661-57ec3ea1aaee" title="Returns a list of instance iterators from a matched pattern.">perc::get_instances_in_pattern</a>.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idc65a020e-4293-4c51-b80d-f16209616d89__id9ebc3e4b-96a4-452f-8110-4af308b8b482"><span class="keyword ParameterName RequiredReplaceable">net_iterator</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An argument which must be a
net iterator. Either this argument or <span class="keyword ParameterName RequiredReplaceable">instance_iterator</span> must
be specified. See <a class="xref fm:HeadingOnly" href="Command_PerccheckNet_id75162cb0.html#id75162cb0-c882-4d1d-9273-9095a7dd5b64__Command_PerccheckNet_id75162cb0.xml#id75162cb0-c882-4d1d-9273-9095a7dd5b64" title="Checks nets in the design for nets that match the specified conditions. By default, all nets are matched.">perc::check_net</a> ‑condition, <a class="xref fm:HeadingOnly" href="Command_PercgetNets_id591349e2.html#id591349e2-717e-4ca8-aad7-1a22ad2a4aea__Command_PercgetNets_id591349e2.xml#id591349e2-717e-4ca8-aad7-1a22ad2a4aea" title="Creates a net iterator.">perc::get_nets</a>, <a class="xref fm:HeadingOnly" href="Command_PercgetNetsInPattern_id57a3e94b.html#id57a3e94b-bbd0-4389-86de-6ccb8d6b8137__Command_PercgetNetsInPattern_id57a3e94b.xml#id57a3e94b-bbd0-4389-86de-6ccb8d6b8137" title="Returns a list of net iterators from a matched pattern.">perc::get_nets_in_pattern</a>, <a class="xref fm:HeadingOnly" href="Command_PercgetOtherNetOnInstance_id85c3d2b2.html#id85c3d2b2-1b55-49a9-ae53-4cda904a9176__Command_PercgetOtherNetOnInstance_id85c3d2b2.xml#id85c3d2b2-1b55-49a9-ae53-4cda904a9176" title="Creates a net iterator.">perc::get_other_net_on_instance</a>, or <a class="xref fm:HeadingOnly" href="Command_Percdescend_idbba0a66e.html#idbba0a66e-fb1a-4939-ac12-602ab0543c29__Command_Percdescend_idbba0a66e.xml#idbba0a66e-fb1a-4939-ac12-602ab0543c29" title="Creates an iterator that points to a cell placement representative or to a net in a cell.">perc::descend</a>.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idc65a020e-4293-4c51-b80d-f16209616d89__idfd4d0e16-80e8-40cd-af02-dafeca0ef600"><span class="keyword ParameterName Required">-name</span> <span class="keyword ParameterName RequiredReplaceable">annotation_name</span></dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument set that specifies the
name of the annotation. The <span class="keyword ParameterName RequiredReplaceable">annotation_name</span> is a
string of characters with no spaces.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idc65a020e-4293-4c51-b80d-f16209616d89__id2f6c2b8d-7ecf-41f2-a324-3a4d0e18569a"><span class="keyword ParameterName Required">-value</span> <span class="keyword ParameterName RequiredReplaceable">annotation_value</span></dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument set that specifies the
value of the annotation. The <span class="keyword ParameterName RequiredReplaceable">annotation_value</span> is a
non-null string that matches the form specified by the <span class="keyword ParameterName Required">-dataType</span> argument.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idc65a020e-4293-4c51-b80d-f16209616d89__idac329608-0844-4268-8060-4193795d6133"><span class="keyword ParameterName Required">-dataType</span> [<span class="keyword ParameterName Required">double</span> | <span class="keyword ParameterName Required">long</span> | <span class="keyword ParameterName Required">string</span>]</dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument set that specifies the
form of the <span class="keyword ParameterName RequiredReplaceable">annotation_value</span>.
The keyword arguments are defined as follows:</p>
<p class="p BlockIndent"><span class="keyword ParameterName Required">double</span> —
floating-point number.</p>
<p class="p BlockIndent"><span class="keyword ParameterName Required">long</span> —
integer.</p>
<p class="p BlockIndent"><span class="keyword ParameterName Required">string</span> —
Tcl string.</p>
</dd>
</dl>
</div>
</div>
<div class="section ReturnedValues"><h2 class="title Subheading sectiontitle">Return Values</h2><p class="p">None.</p>
</div>
<div class="section Examples" id="idc65a020e-4293-4c51-b80d-f16209616d89__id63bc0fad-06f6-4091-bfb7-12131d4076e3"><h2 class="title Subheading sectiontitle">Examples</h2><pre class="pre codeblock" id="idc65a020e-4293-4c51-b80d-f16209616d89__iddd48fb34-53c2-427c-af6a-0aea5458458d"><code>TVF FUNCTION test_annotation [/* 
  package require CalibreLVS_PERC 

# iterate over all nets setting a netName annotation
  proc rule1 {} {
    perc::check_net -condition cond_rule1
  }
 
# set the annotation name and value for nets. in this case, their names
  proc cond_rule1 {net} {
    set annotation_name "netName"
    set annotation_value [perc::name $net]
    set format "string"
    perc::set_annotation $net -name $annotation_name \
      -value $annotation_value -dataType $format
# return 0 to suppress net reporting; return 1 for testing
    return 1
  }
 
# iterate over all nets checking for the netName annotation
  proc rule2 {} {
    perc::check_net -condition cond_rule2 -comment "from rule2"
  }
 
# find and return netName annotation values
  proc cond_rule2 {net} {
    set annotation_name "netName"
    set rule_name "rule1"
    if { [<a class="xref fm:HeadingOnly" href="Command_PerchasAnnotation_id19c7d1ea.html#id19c7d1ea-5cc9-4017-ba85-919c4e6c6955__Command_PerchasAnnotation_id19c7d1ea.xml#id19c7d1ea-5cc9-4017-ba85-919c4e6c6955" title="Returns TRUE if a device or a net has an annotation meeting specified criteria.">perc::has_annotation</a> $net -name $annotation_name \
      -rule $rule_name] } {
      set value [<a class="xref fm:HeadingOnly" href="Command_PercgetAnnotation_idfc6449ea.html#idfc6449ea-7be9-48a4-a6fb-adb519ca6ce0__Command_PercgetAnnotation_idfc6449ea.xml#idfc6449ea-7be9-48a4-a6fb-adb519ca6ce0" title="Returns an annotation value from a device or a net.">perc::get_annotation</a> $net -name $annotation_name \
        -rule $rule_name]
      <a class="xref fm:HeadingOnly" href="Command_PercreportBaseResult_idb3fbfdac.html#idb3fbfdac-f8a1-4f80-9abb-5451cd2ee978__Command_PercreportBaseResult_idb3fbfdac.xml#idb3fbfdac-f8a1-4f80-9abb-5451cd2ee978" title="Writes user-defined content to the PERC Report file or to the Mask SVDB Directory. This command must be called in the context of a high-level rule check command.">perc::report_base_result</a> -title "cond_rule2: perc::get_annotation \
net=[perc::name $net] -name=$annotation_name -rule=$rule_name \
value=$value"
    } else {
      perc::report_base_result -title "cond_rule2: perc::has_annotation \
returns false for net=[perc::name $net] -name=$annotation_name \
-rule=$rule_name"
    }
    return 1
  }</code></pre><p class="p">Tcl proc rule1 iterates over all nets and sets netName annotations
as string-valued net names. The annotation occurs in proc cond_rule1.
The rule2 proc then queries all nets for the netName annotation
set by rule1. Depending on whether the annotation is present, proc
cond_rule2 writes the appropriate message to the report.</p>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_RuleCheckCommands_id9b3d8e0b.html" title="Rule check commands appear in rule check procs and are used to check the design. Some rule check commands may be used in init procs. These are annotated in the notes to the tables in this section.">Rule Check Commands</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_perc_user"
                DocTitle = "Calibre® PERC™ User’s Manual"
                PageTitle = "perc::set_annotation"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_PercsetAnnotation_idc65a020e.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® PERC™ User’s Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>