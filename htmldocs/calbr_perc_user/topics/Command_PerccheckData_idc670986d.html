<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="perc::check_data" />
<meta name="abstract" content="Calls a user-provided procedure to perform a check." />
<meta name="description" content="Calls a user-provided procedure to perform a check." />
<meta name="prodname" content="Calibre PERC User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-25" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_perc_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="HighlightChanges" content="yes" />
<meta name="EclipsePluginName" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2;show" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® PERC™ User’s Manual" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P11493,product.id.P10099,product.id.P11347,product.id.P10084,product.id.P11427,product.id.P10116,product.id.P10096" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idc670986d-b894-4123-8cd4-29430c23fb66" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>perc::check_data</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="perc::check_data" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P11493,product.id.P10099,product.id.P11347,product.id.P10084,product.id.P11427,product.id.P10116,product.id.P10096" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="idc670986d-b894-4123-8cd4-29430c23fb66">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">perc::check_data </h1>
<div class="body refbody CommandRefBody-Var1"><div class="abstract CommandRefAbstract"><p class="p ContextMGC">Calibre
PERC high-level command.</p>
<p class="shortdesc">Calls a user-provided procedure
to perform a check.</p>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName Required">perc::check_data</span> <span class="keyword ParameterName Required">‑condition</span><span class="keyword ParameterName Optional"> </span><span class="keyword ParameterName RequiredReplaceable">cond_proc</span> [<span class="keyword ParameterName Optional">‑comment</span> <span class="keyword ParameterName OptionalReplaceable">comment_str</span>]<br />
[<span class="keyword ParameterName Optional">-opaqueCell</span> <span class="keyword ParameterName OptionalReplaceable">cell_name_list</span>] </p>
</div>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">The function of this command
depends on the <span class="keyword ParameterName Required">-condition</span> proc
that it calls. Results from this command are with respect to the
top-level cell.</p>
<p class="p">Unlike the <a class="xref fm:HeadingOnly" href="Command_PerccheckNet_id75162cb0.html#id75162cb0-c882-4d1d-9273-9095a7dd5b64__Command_PerccheckNet_id75162cb0.xml#id75162cb0-c882-4d1d-9273-9095a7dd5b64" title="Checks nets in the design for nets that match the specified conditions. By default, all nets are matched.">perc::check_net</a> or <a class="xref fm:HeadingOnly" href="Command_PerccheckDevice_id3faa8842.html#id3faa8842-b865-4759-8041-19b4db0d1f9a__Command_PerccheckDevice_id3faa8842.xml#id3faa8842-b865-4759-8041-19b4db0d1f9a" title="Matches each primitive device in the design by default. Devices that are selectively matched can be configured using the options.">perc::check_device</a> commands, this command does not automatically
output results to the report file. Hence, <a class="xref fm:HeadingOnly" href="Command_PercreportBaseResult_idb3fbfdac.html#idb3fbfdac-f8a1-4f80-9abb-5451cd2ee978__Command_PercreportBaseResult_idb3fbfdac.xml#idb3fbfdac-f8a1-4f80-9abb-5451cd2ee978" title="Writes user-defined content to the PERC Report file or to the Mask SVDB Directory. This command must be called in the context of a high-level rule check command.">perc::report_base_result</a> is also needed when such reporting
is desired.</p>
<p class="p">By default,
this command traverses the design cell-by-cell until it reaches
the lowest cell in the hierarchy required to return a proper result,
as discussed under “<a class="xref fm:HeadingAndPage" href="Concept_HierarchyTraversalByRuleCheckCommands_id73bf23be.html#id73bf23be-1f78-46a5-accc-56357a93c933__Concept_HierarchyTraversalByRuleCheckCommands_id73bf23be.xml#id73bf23be-1f78-46a5-accc-56357a93c933" title="Certain Calibre PERC rule check commands traverse hierarchy. They process nets on a per-cell basis, and they proceed through the hierarchy as needed to return their outputs. How this is done is important to understand when coding and evaluating rule checks.">Hierarchy Traversal by Rule Check Commands</a>”. The -opaqueCell option changes
this behavior for nets as described under “<a class="xref fm:HeadingAndPage" href="Concept_HierarchyTraversalOpaquecell_id81e7e878.html#id81e7e878-7e09-46c9-acf7-1ddda1873aeb__Concept_HierarchyTraversalOpaquecell_id81e7e878.xml#id81e7e878-7e09-46c9-acf7-1ddda1873aeb" title="The high-level commands like perc::check_device, perc::check_net, perc::check_device_and_net check, and perc::check_data check objects cell-by-cell by default. When nets are processed in the context of these commands, they automatically perform net traversal across cell boundaries when needed in the context of the lowest cell in the hierarchy that completely contains a net.">Hierarchy Traversal and -opaqueCell</a>”.</p>
<p class="p">If <a class="xref fm:HeadingOnly" href="Command_Perccount_iddc2be6a2.html#iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__Command_Perccount_iddc2be6a2.xml#iddc2be6a2-af8b-4db2-a0a4-eebebc591bad" title="Returns the number of devices meeting the conditions of the command.">perc::count</a> or <a class="xref fm:HeadingOnly" href="Command_Percexists_id24411517.html#id24411517-3545-4fa0-971f-ef3671ac5edc__Command_Percexists_id24411517.xml#id24411517-3545-4fa0-971f-ef3671ac5edc" title="Indicates whether the number of devices in a list meets a constraint interval.">perc::exists</a> use the -net option in the context of a perc::check_data
-condition procedure, then perc::count or perc::exists must use
the -opaqueCell "*" option.</p>
<p class="p">This command does not employ the concept of placement signatures
as discussed under “<a class="xref fm:HeadingAndPage" href="Concept_CellPlacementSignaturesRepresentatives_id015da209.html#id015da209-9330-41f9-b618-69215ce6f044__Concept_CellPlacementSignaturesRepresentatives_id015da209.xml#id015da209-9330-41f9-b618-69215ce6f044" title="When processing each PERC Load statement, the tool initializes the netlist before executing any rule checks selected by the statement. As the last part of the initialization phase, Calibre PERC computes cell placement signatures for every hcell in the design. If the optional initialization Tcl proc is specified, Calibre PERC executes this Tcl proc first before computing placement signatures.">Cell Placement Signatures and Representatives</a>” in the
way other commands do. Therefore, perc::check_data can be used to
process all instances of things like devices without using the optimization
of a representative instance. This has the potential disadvantage
of greater processing overhead to cover all the instances, but in
cases where doing so is desirable, perc::check_data offers that
capability.</p>
<p class="p">This command can be called at
most once in any Tcl proc. If called, it must be the only high-level
“check” command used in the Tcl proc.</p>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="idc670986d-b894-4123-8cd4-29430c23fb66__id33b292d9-555d-49de-93ac-70eff8b5d8d9"><span class="keyword ParameterName Required">-condition</span> <span class="keyword ParameterName RequiredReplaceable">cond_proc</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument set, where <span class="keyword ParameterName RequiredReplaceable">cond_proc</span> must
be a Tcl proc with no arguments. </p>
<p class="p">The command executes <span class="keyword ParameterName RequiredReplaceable">cond_proc</span> once.
Any output to the report file must be handled by the Tcl proc <span class="keyword ParameterName RequiredReplaceable">cond_proc</span><span class="keyword ParameterName OptionalReplaceable">.</span></p>
</dd>
<dt class="dt ArgumentName dlterm" id="idc670986d-b894-4123-8cd4-29430c23fb66__idb5b1dad4-1064-41f2-8061-9d6d5c203bc1">-comment <span class="keyword ParameterName OptionalReplaceable">comment_str</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set, where <span class="keyword ParameterName OptionalReplaceable">comment_str</span> must
be a string. </p>
<p class="p">The string <span class="keyword ParameterName OptionalReplaceable">comment_str</span> is
written to the report file along with the results.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idc670986d-b894-4123-8cd4-29430c23fb66__idc05e356c-09ee-462d-ac3c-41c23d6d23a0">-opaqueCell <span class="keyword ParameterName OptionalReplaceable">cell_name_list</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set that
causes the specified cells to be treated in isolation, with no element
promotions. The <span class="keyword ParameterName OptionalReplaceable">cell_name_list</span> must
be a Tcl list consisting of one or more cell names, and possibly
starting with the exclamation point (!), such as {cell_1 cell_2}
or {! cell_3 cell_4}. If the exclamation point is not present, then
the command applies only to the listed cells. However, if the exclamation
point is specified, then the command applies to all cells except
the ones listed. One or more asterisk (*) wildcards are allowed
in a cell name. This wildcard matches zero or more characters.</p>
</dd>
</dl>
</div>
</div>
<div class="section ReturnedValues"><h2 class="title Subheading sectiontitle">Return Values</h2><p class="p">None. </p>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><div class="section Subsection" id="idc670986d-b894-4123-8cd4-29430c23fb66__id3521e008-c305-445c-843d-6aa2798be781"><h2 class="title Subheading sectiontitle">Example 1</h2><pre class="pre codeblock leveled"><code>TVF FUNCTION test_check_data [/* 
  package require CalibreLVS_PERC 
 
  proc work_horse {} { 
  # Get the maximum length of all MOS devices 
    set max [perc::max -param L -type {MP MN}] 
    <a class="xref fm:HeadingOnly" href="Command_PercreportBaseResult_idb3fbfdac.html#idb3fbfdac-f8a1-4f80-9abb-5451cd2ee978__Command_PercreportBaseResult_idb3fbfdac.xml#idb3fbfdac-f8a1-4f80-9abb-5451cd2ee978" title="Writes user-defined content to the PERC Report file or to the Mask SVDB Directory. This command must be called in the context of a high-level rule check command.">perc::report_base_result</a> -title "Found max length:" -value "$max" 
 
  # Find the MP devices in power domain VDD25 
    set pair [<a class="xref fm:HeadingOnly" href="Command_Perccount_iddc2be6a2.html#iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__Command_Perccount_iddc2be6a2.xml#iddc2be6a2-af8b-4db2-a0a4-eebebc591bad" title="Returns the number of devices meeting the conditions of the command.">perc::count</a> -type MP -pinPathType {{s d} {VDD25}} -list] 
    set mp_dev_list [lindex $pair 1] 
 
  # Loop over the MP devices 
    foreach mos $mp_dev_list { 
      set gate_net [<a class="xref fm:HeadingOnly" href="Command_PercgetNets_id591349e2.html#id591349e2-717e-4ca8-aad7-1a22ad2a4aea__Command_PercgetNets_id591349e2.xml#id591349e2-717e-4ca8-aad7-1a22ad2a4aea" title="Creates a net iterator.">perc::get_nets</a> $mos -name G] 
      if {[<a class="xref fm:HeadingOnly" href="Command_Percexists_id24411517.html#id24411517-3545-4fa0-971f-ef3671ac5edc__Command_Percexists_id24411517.xml#id24411517-3545-4fa0-971f-ef3671ac5edc" title="Indicates whether the number of devices in a list meets a constraint interval.">perc::exists</a> -constraint "&gt; 1" -net $gate_net -type R] == 1} { 
  # Too many resistors on the gate, error 
        perc::report_base_result -value "Too many resistors connected \
          to gate of [<a class="xref fm:HeadingOnly" href="Command_Percname_idfec10dd1.html#idfec10dd1-a4a4-4a94-ad9f-1da475b6a82d__Command_Percname_idfec10dd1.xml#idfec10dd1-a4a4-4a94-ad9f-1da475b6a82d" title="Returns the name of the element pointed to by the iterator argument.">perc::name</a> $mos]" 
      } 
    } 
  } 
 
  proc check_data_1 {} { 
    perc::check_data -condition work_horse \
      -comment "Maximum length of MOS devices in the design and \
                VDD25 checking" 
  } 
*/] </code></pre><p class="p">Tcl proc check_data_1 executes the
procedure work_horse, which finds the maximum length of all MOS
devices in the design and writes the result to the report file.
It also reports devices of the VDD25 domain that have too many connecting
resistors.</p>
</div>
<div class="section Subsection" id="idc670986d-b894-4123-8cd4-29430c23fb66__idf267d02b-94ca-4eb0-9d9d-297b0799fcb0"><h2 class="title Subheading sectiontitle">Example 2</h2><p class="p">This example shows how to get device
counts from your design listed by type and subtype.</p>
<pre class="pre codeblock leveled"><code>PERC LOAD dev_count SELECT get_devices print_devices SELECTTYPE INFO get_devices print_devices
PERC REPORT OPTION skip_passed_cell 

TVF FUNCTION dev_count [/*
  package require CalibreLVS_PERC
  package require struct::matrix

# get counts of all device models
  proc cond_get_devices {ins} {
    set dev_coll_handle [<a class="xref fm:HeadingOnly" href="Command_Perccollection_id01127e08.html#id01127e08-7773-4f86-9c93-f48a26bfd673__Command_Perccollection_id01127e08.xml#id01127e08-7773-4f86-9c93-f48a26bfd673" title="Returns data from a collection iterator. Creates a hash collection, adds data to it, returns data from it, and can delete it. Returns a collection iterator from a hash collection.">perc::collection</a> -get -name "Device models"]
  # classify the instance by type and subtype.
  # a null subtype indicates a fall-through model for a given type.
    set type    [<a class="xref fm:HeadingOnly" href="Command_Perctype_id19c43fdf.html#id19c43fdf-9288-4113-8906-7d1cf825ce84__Command_Perctype_id19c43fdf.xml#id19c43fdf-9288-4113-8906-7d1cf825ce84" title="Returns the type of the referenced instance, the net, or a pin’s net types or path types. For a cell instance, it returns the cell name.">perc::type</a> $ins]
    set subtype [<a class="xref fm:HeadingOnly" href="Command_Percsubtype_id4e5bb46a.html#id4e5bb46a-159a-49ba-beca-e803701fb8a1__Command_Percsubtype_id4e5bb46a.xml#id4e5bb46a-159a-49ba-beca-e803701fb8a1" title="Returns the device subtype, if the argument points to a primitive device.">perc::subtype</a> $ins]
    if {$subtype ne ""} {
      set model "$type\($subtype\)"
    } else {
      set model $type
    }

    set count [perc::name $ins -fromTop -countOnly]

    if { ! [perc::collection $dev_coll_handle -hasKey $model] } {
            perc::collection $dev_coll_handle -add -key $model \
        -value $count
    } else {
      set prevCount [perc::collection $dev_coll_handle -key $model]
      set newCount [expr $prevCount + $count]
      perc::collection $dev_coll_handle -add -key $model \
        -value $newCount
    }
    return 0
  }

# set up collection and iterate over all devices
  proc get_devices {} {
    perc::collection -create -name "Device models" -lifetime currentLoad
    perc::check_device  -condition cond_get_devices \
      -comment "Find devices by type and subtype"
  }</code></pre><pre class="pre codeblock leveled"><code>  proc cond_print {} {
    puts "\n    DEVICE COUNTS"
    puts "    -------------------"

    set dev_coll_handle [perc::collection -get -name "Device models"]
    set dev_coll_itr [perc::collection $dev_coll_handle -begin]
    set total 0

    while {$dev_coll_itr ne ""} {
      set model [perc::collection $dev_coll_itr -key]
      set devCount [perc::collection $dev_coll_itr -value]
      lappend model_list "{   } $model $devCount"
      incr total $devCount 
      perc::inc dev_coll_itr
    }

    # create a matrix for output
    struct::matrix m
    m add columns 3
    set sort_model_list [lsort $model_list]
    set list_length [llength $sort_model_list]

    for {set i 0} {$i &lt; $list_length} {incr i} {
      m add row "   [lindex $sort_model_list $i]"
    }

    # formatted output
    m format 2chan;
    puts "\n\n    Total devices = $total"
    puts "    ------------------\n"
  }

# print the counts
  proc print_devices {} {
    perc::check_data -condition cond_print \
     -comment "Device counts by device type and subtype"
  }
*/] </code></pre><p class="p">Tcl proc get_devices sets up a hash
collection and finds all devices. The cond_get_devices proc populates
the collection by device model and count. The print_devices proc
causes the collection’s contents to be printed out to the transcript
through the cond_print proc like this:</p>
<pre class="pre codeblock leveled"><code>    Checking RULE: Device counts by device type and subtype

    DEVICE COUNTS
    -------------------
    C(cp)          34
    MN(nmos_thkox) 45
    MN(nmos_vtl)   118320
    MP(pmos_thkox) 55
    MP(pmos_vth)   2
    MP(pmos_vtl)   94423
    R(rp)          111

    Total devices = 212990
    -------------------</code></pre></div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_RuleCheckCommands_id9b3d8e0b.html" title="Rule check commands appear in rule check procs and are used to check the design. Some rule check commands may be used in init procs. These are annotated in the notes to the tables in this section.">Rule Check Commands</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_perc_user"
                DocTitle = "Calibre® PERC™ User’s Manual"
                PageTitle = "perc::check_data"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_PerccheckData_idc670986d.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® PERC™ User’s Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>