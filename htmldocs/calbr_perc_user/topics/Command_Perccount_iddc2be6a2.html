<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="perc::count" />
<meta name="abstract" content="Returns the number of devices meeting the conditions of the command." />
<meta name="description" content="Returns the number of devices meeting the conditions of the command." />
<meta name="prodname" content="Calibre PERC User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-25" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_perc_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="HighlightChanges" content="yes" />
<meta name="EclipsePluginName" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2;show" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® PERC™ User’s Manual" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P11493,product.id.P10099,product.id.P11347,product.id.P10084,product.id.P11427,product.id.P10116,product.id.P10096" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>perc::count</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="perc::count" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P11493,product.id.P10099,product.id.P11347,product.id.P10084,product.id.P11427,product.id.P10116,product.id.P10096" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">perc::count</h1>
<div class="body refbody CommandRefBody-Var1"><div class="abstract CommandRefAbstract"><p class="p ContextMGC">Calibre
PERC math command.</p>
<p class="shortdesc">Returns the number of devices
meeting the conditions of the command.</p>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName Required">perc::count <br />
</span>[-net <span class="keyword ParameterName OptionalReplaceable">net_iterator </span>[-pinAtNet <span class="keyword ParameterName OptionalReplaceable">net_pin_list</span>]] <br />
[-type <span class="keyword ParameterName OptionalReplaceable">type_list</span>] <br />
[-subtype <span class="keyword ParameterName OptionalReplaceable">subtype_list</span>] <br />
[-property “<span class="keyword ParameterName OptionalReplaceable">constraint_str</span>”]<br />
[-pinNetType { {<span class="keyword ParameterName OptionalReplaceable">pin_name_list</span>} {<span class="keyword ParameterName OptionalReplaceable">net_type_condition_list</span>} … }] <br />
[-pinPathType { {<span class="keyword ParameterName OptionalReplaceable">pin_name_list</span>} {<span class="keyword ParameterName OptionalReplaceable">path_type_condition_list</span>} …}] <br />
[-condition <span class="keyword ParameterName OptionalReplaceable">cond_proc</span>] <br />
<span class="keyword ParameterName Optional">[-instanceAlso | -instanceOnly]<br />
</span>[{{-list [-groupByPinConnections <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> [-groupBySubtype] <br />
  [‑maxPerGroup <span class="keyword ParameterName OptionalReplaceable">count</span>]]} | -listPin} [‑sortInParallel [‑parallelPins <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span>] <br />
  [-groupBySubtype]]] | <br />
  [‑collection [-pinAlso]]<br />
<span class="keyword ParameterName Optional">[-opaqueCell </span><span class="keyword ParameterName OptionalReplaceable">cell_name_list</span><span class="keyword ParameterName Optional">]<br />
</span>[-annotation ‘{’<span class="keyword ParameterName OptionalReplaceable">annotation_name</span> <span class="keyword ParameterName OptionalReplaceable">rule_check</span>‘}’]</p>
</div>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">Performs a count of devices (instances)
meeting the conditions of the command’s argument set. An instance
must meet all of the specified conditions in order to be counted.
If no optional arguments are used, then all instances are counted.
If no instances are selected, the computation result is NaN.</p>
<p class="p">This command can be called any
number of times in a Tcl proc.</p>
<div class="note tip"><span class="tiptitle">Tip</span> <p class="p">In cases
where you simply want to test for the existence of numbers of devices,
use <a class="xref fm:HeadingOnly" href="Command_Percexists_id24411517.html#id24411517-3545-4fa0-971f-ef3671ac5edc__Command_Percexists_id24411517.xml#id24411517-3545-4fa0-971f-ef3671ac5edc" title="Indicates whether the number of devices in a list meets a constraint interval.">perc::exists</a> instead
of perc::count. Also, if you test for an exact number of devices,
using perc::exists with two bounding constraints is usually faster,
but never slower, than perc::count.</p>
</div>
<p class="p">By default, the command applies
only to primitive devices. If -instanceAlso is specified, then cell
instances that meet the specified criteria are also considered.
If -instanceOnly is specified, then only cell instances that meet
the specified criteria are considered.</p>
<p class="p">When the ‑pinAtNet option is
specified with at least two pins and the -pinNetType option is also used,
if a <span class="keyword ParameterName OptionalReplaceable">net_pin_list </span>pin
connecting an instance to the net referenced by <span class="keyword ParameterName OptionalReplaceable">net_iterator </span>is
also in the -pinNetType <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span>,
then this pin name is temporarily removed from <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> when
checking the <span class="keyword ParameterName OptionalReplaceable">net_type_condition_list </span>criteria.
A similar interaction occurs between ‑pinAtNet and ‑pinPathType.</p>
<p class="p">The motivation for the preceding
behavior is as follows. Suppose you want to find “M” devices that
are connected to a net at their S or D pins. Further suppose that
you want to detect whether both of these pins are connected to the
same net type. This is possible by specifying ‑pinAtNet {S D} ‑pinNetType
{{S D} “type”}}. So if S is connected to the net, it is removed temporarily
from the ‑pinNetType pin list and only D is checked for its type.
If this did not occur, S could be checked for the net type as well,
and that test could succeed without D being connected to the net
type. The consequence would be the device pins would satisfy the
criteria incorrectly. Similar reasoning applies if D is connected
to the net.</p>
<p class="p">When the -net option is used,
by default, this command traverses nets cell-by-cell until it reaches
the lowest cell in the hierarchy that completely contains the net,
as discussed under “<a class="xref fm:HeadingAndPage" href="Concept_HierarchyTraversalByRuleCheckCommands_id73bf23be.html#id73bf23be-1f78-46a5-accc-56357a93c933__Concept_HierarchyTraversalByRuleCheckCommands_id73bf23be.xml#id73bf23be-1f78-46a5-accc-56357a93c933" title="Certain Calibre PERC rule check commands traverse hierarchy. They process nets on a per-cell basis, and they proceed through the hierarchy as needed to return their outputs. How this is done is important to understand when coding and evaluating rule checks.">Hierarchy Traversal by Rule Check Commands</a>”. The -opaqueCell option changes this
behavior as described under “<a class="xref fm:HeadingAndPage" href="Concept_HierarchyTraversalOpaquecell_id81e7e878.html#id81e7e878-7e09-46c9-acf7-1ddda1873aeb__Concept_HierarchyTraversalOpaquecell_id81e7e878.xml#id81e7e878-7e09-46c9-acf7-1ddda1873aeb" title="The high-level commands like perc::check_device, perc::check_net, perc::check_device_and_net check, and perc::check_data check objects cell-by-cell by default. When nets are processed in the context of these commands, they automatically perform net traversal across cell boundaries when needed in the context of the lowest cell in the hierarchy that completely contains a net.">Hierarchy Traversal and -opaqueCell</a>”. The ‑opaqueCell option is
only useful when nets are being processed. Because net traversal
behavior is not available at initialization time, perc::count -net
is not allowed in an initialization procedure without the ‑opaqueCell
"*" option.</p>
<p class="p">If a high-level command specifies
‑opaqueCell and perc::count is called in the high-level command’s
‑condition proc, then perc::count may not specify -opaqueCell. If
the high-level command does not specify ‑opaqueCell, then perc::count
may specify it, and the <span class="keyword ParameterName OptionalReplaceable">cell_name_list</span> must
be uniform throughout the rule check. </p>
<p class="p">When -list is used without any
of its modifying options, the command returns an instance count followed
by a list of instance iterators, like this:</p>
<pre class="pre codeblock leveled"><code>{9 {A1 B2 C2 A2 A3 B4 C1 C5 C7}} </code></pre><p class="p">Each instance iterator is of
length 1. The order of iterators is undefined.</p>
<p class="p">If -groupByPinConnections is specified, then the second argument
of the output list is a list of lists containing instance iterators
of the same SPICE device element type, and whose pin connections
are the same, respectively, within each group (pin swapping is permitted
with equality of connections). Here is an example:</p>
<pre class="pre codeblock leveled"><code>{ 9 { {B2 B4} {C1 C2 C5 C7} {A1 A2 A3} } }</code></pre><p class="p">The instances in each group are the same type and have the same
pin connections, respectively. The order of the sub-lists containing
instance iterators is undefined. </p>
<p class="p">When -groupByPinConnections is specified, all instances found
by the command must have a homogeneous set of pins matching the
ones specified by the option, or an error results. For example,
if -groupByPinConnections {pos neg} is specified and the command
finds a built-in MOS device, this produces an error because MOS
devices lack pins of these names. For this reason, specifying -type
with -groupByPinConnections is nearly obligatory in normal use.</p>
<p class="p">If -groupBySubtype is specified in addition to -groupByPinConnections,
then the output sub-lists are classified by subtype (or model) in
addition to type and pin connections. For example, if there are
R devices defined with no subtype, a “poly” subtype, and a “diff”
subtype, and all three subtypes are found in the design, then the
output could look like this:</p>
<pre class="pre codeblock leveled"><code>{ 8 { {R4} {R1 R2 R5 R7} {R0 R3 R6} } }</code></pre><p class="p">Here, the R devices in each sub-list have the same subtype and
same pin connections, respectively. But no subtype is represented
in more than one sub-list with instances having the same pin connections.</p>
<p class="p">By default, all instances meeting the conditions of the command
are output per group. If ‑maxPerGroup is specified in addition to
-groupByPinConnections, then the number of output iterators in each
sub-list does not exceed the -maxPerGroup <span class="keyword ParameterName OptionalReplaceable">count</span> parameter
value. </p>
<p class="p">The -sortInParallel option groups
device instances connected in parallel in list option outputs. “Parallel”
is defined for -sortInParallel in the same way as <a class="xref fm:HeadingOnly" href="Command_PercgetInstancesInParallel_idb1ea3d7e.html#idb1ea3d7e-5223-448f-ae87-6456a062a7d0__Command_PercgetInstancesInParallel_idb1ea3d7e.xml#idb1ea3d7e-5223-448f-ae87-6456a062a7d0" title="Returns a list of instance iterators containing instances connected in parallel.">perc::get_instances_in_parallel</a>; that is, devices must have the
same type and with all corresponding pins connected to the same
nets. (Pin swapping is permitted, the same as perc::get_instances_in_parallel.)
Additionally, any constraints on perc::count (like -subtype or -instanceOnly)
apply equally to the result when ‑sortInParallel is specified.</p>
<p class="p">When -sortInParallel is specified,
the list output of instance iterators is composed of sub-lists, with
each sub-list containing instances that are in parallel. The output
could appear like this:</p>
<pre class="pre codeblock leveled"><code>{9 { {C1 C2 C5 C7} {A1 A2 A3} {B2 B4} } } </code></pre><p class="p">Sub-lists are included in descending
order of the number of parallel instances (in the preceding list,
the {C*} sublist precedes the others because it has the greatest
number of parallel devices). Instances that are not parallel to
any other instances reside in their own sub-lists. Among other things,
the existence of sub-lists makes it easy to check whether there
are any parallel instances. See “<a class="xref fm:HeadingAndPage" href="#iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__id80096c9c-51fa-4681-a8d1-7d5e470ad8fe">Example 2</a>” for code
that handles these lists.</p>
<p class="p">The -groupBySubtype option causes
sub-lists to reference devices having the same type and subtype.
By default, subtype is ignored when constructing the sub-lists.</p>
<p class="p">The -parallelPins option can
be used with -sortInParallel to specify a set of pins to be matched when
checking if devices are in parallel. When this option is used, any
unspecified pins are ignored when determining parallel connections.</p>
<p class="p">When -listPin is specified, a list of lists of pins is included
in the output, like this:</p>
<pre class="pre codeblock"><code>{9 {A1 B2 C2 A2 A3 B4 C1 C5 C7} {g {b s} {b d} g g {b d} {b s} g g} }</code></pre><p class="p">Each instance iterator in the iterator list has a corresponding
sub-list of pins from the pin list. So in this case, instance A1
corresponds to pin g, instance B2 corresponds to pins {b s}, and
so forth.</p>
<p class="p">With -listPin -sortInParallel
specified, the instance list becomes a list of lists, just as with
-list. The pin list is then grouped corresponding to the structure
of the instance list of lists.</p>
<p class="p">The -list and -listPin options are suitable for handling lists
of up to approximately 4E5 elements. The -collection option is useful
for even greater numbers of elements and is mutually exclusive of
-list and -listPin.</p>
<p class="p">The -collection option enables access to an internal data structure
as described under “<a class="xref fm:HeadingAndPage" href="Concept_CollectionsAndCollectionIterators_id866db00e.html#id866db00e-656e-419c-a896-5a75bd7c1d9f__Concept_CollectionsAndCollectionIterators_id866db00e.xml#id866db00e-656e-419c-a896-5a75bd7c1d9f" title="A collection is a data structure that is especially useful in two situations. The first is to get around the inherent Tcl limit on list size. The second is to save data internally for lookup during the run. This second usage can circumvent file I/O issues associated with saving runtime data to disk. Collection iterators reference objects in collections and behave mostly as other Calibre PERC iterators do.">Collections and Collection Iterators</a>”. When
‑collection is used, the command returns a list whose first element
is a count of instances that meet the conditions of the command,
and the second element is a collection iterator. The collection
iterator is essentially an instance iterator in this case. When
-collection is used with ‑pinAlso, the returned collection iterator
references instance iterators of length 1. Each instance iterator
is paired with a Tcl list of pins corresponding to that instance
iterator. This is similar to the ‑listPin behavior. The internals of
a collection iterator are only accessed by the <a class="xref fm:HeadingOnly" href="Command_Perccollection_id01127e08.html#id01127e08-7773-4f86-9c93-f48a26bfd673__Command_Perccollection_id01127e08.xml#id01127e08-7773-4f86-9c93-f48a26bfd673" title="Returns data from a collection iterator. Creates a hash collection, adds data to it, returns data from it, and can delete it. Returns a collection iterator from a hash collection.">perc::collection</a> command.
See <a class="xref fm:HeadingOnly" href="#iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__idcf580ddb-d60d-4dbf-9215-f76326608fce">Example 4</a>.</p>
<p class="p">The -annotation option limits counting of devices to only those
that have been annotated with a specified annotation name that was
set in the context of a specified rule check.</p>
<p class="p">See also <a class="xref fm:HeadingOnly" href="Command_PercadjacentCount_id296c394c.html#id296c394c-8e05-4a77-b5e6-907f3728db10__Command_PercadjacentCount_id296c394c.xml#id296c394c-8e05-4a77-b5e6-907f3728db10" title="Returns the number of adjacent nets or paths connected to a device.">perc::adjacent_count</a> and <a class="xref fm:HeadingOnly" href="Command_MathCommands_idf5ea022a.html#idf5ea022a-0a5b-40e8-9c63-8492fd10a122__Command_MathCommands_idf5ea022a.xml#idf5ea022a-0a5b-40e8-9c63-8492fd10a122" title="These commands perform math functions.">Math Commands</a>.</p>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__id5c2e5730-f968-4344-9914-628982d5b9e3">-net <span class="keyword ParameterName OptionalReplaceable">net_iterator</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set, where <span class="keyword ParameterName OptionalReplaceable">net_iterator</span> must
be a net iterator. See <a class="xref fm:HeadingOnly" href="Command_PerccheckNet_id75162cb0.html#id75162cb0-c882-4d1d-9273-9095a7dd5b64__Command_PerccheckNet_id75162cb0.xml#id75162cb0-c882-4d1d-9273-9095a7dd5b64" title="Checks nets in the design for nets that match the specified conditions. By default, all nets are matched.">perc::check_net</a> ‑condition, <a class="xref fm:HeadingOnly" href="Command_PercgetNets_id591349e2.html#id591349e2-717e-4ca8-aad7-1a22ad2a4aea__Command_PercgetNets_id591349e2.xml#id591349e2-717e-4ca8-aad7-1a22ad2a4aea" title="Creates a net iterator.">perc::get_nets</a>, <a class="xref fm:HeadingOnly" href="Command_PercgetNetsInPattern_id57a3e94b.html#id57a3e94b-bbd0-4389-86de-6ccb8d6b8137__Command_PercgetNetsInPattern_id57a3e94b.xml#id57a3e94b-bbd0-4389-86de-6ccb8d6b8137" title="Returns a list of net iterators from a matched pattern.">perc::get_nets_in_pattern</a>, <a class="xref fm:HeadingOnly" href="Command_PercgetOtherNetOnInstance_id85c3d2b2.html#id85c3d2b2-1b55-49a9-ae53-4cda904a9176__Command_PercgetOtherNetOnInstance_id85c3d2b2.xml#id85c3d2b2-1b55-49a9-ae53-4cda904a9176" title="Creates a net iterator.">perc::get_other_net_on_instance</a>, or <a class="xref fm:HeadingOnly" href="Command_Percdescend_idbba0a66e.html#idbba0a66e-fb1a-4939-ac12-602ab0543c29__Command_Percdescend_idbba0a66e.xml#idbba0a66e-fb1a-4939-ac12-602ab0543c29" title="Creates an iterator that points to a cell placement representative or to a net in a cell.">perc::descend</a>.</p>
<p class="p">A device must be connected to
the net referenced by <span class="keyword ParameterName OptionalReplaceable">net_iterator</span> in
order to be selected. </p>
<p class="p">If the command is invoked in
the context of <a class="xref fm:HeadingOnly" href="Command_PerccheckNet_id75162cb0.html#id75162cb0-c882-4d1d-9273-9095a7dd5b64__Command_PerccheckNet_id75162cb0.xml#id75162cb0-c882-4d1d-9273-9095a7dd5b64" title="Checks nets in the design for nets that match the specified conditions. By default, all nets are matched.">perc::check_net</a>, <a class="xref fm:HeadingOnly" href="Command_PerccheckDevice_id3faa8842.html#id3faa8842-b865-4759-8041-19b4db0d1f9a__Command_PerccheckDevice_id3faa8842.xml#id3faa8842-b865-4759-8041-19b4db0d1f9a" title="Matches each primitive device in the design by default. Devices that are selectively matched can be configured using the options.">perc::check_device</a>, or <a class="xref fm:HeadingOnly" href="Command_PerccheckDeviceAndNet_id05043298.html#id05043298-b80d-45d8-a794-a7cd30bbdc71__Command_PerccheckDeviceAndNet_id05043298.xml#id05043298-b80d-45d8-a794-a7cd30bbdc71" title="Checks devices and nets in the design for ones that match any specified conditions.">perc::check_device_and_net</a> then ‑net is required. If perc::count
-net is called in the context of <a class="xref fm:HeadingOnly" href="Command_PerccheckData_idc670986d.html#idc670986d-b894-4123-8cd4-29430c23fb66__Command_PerccheckData_idc670986d.xml#idc670986d-b894-4123-8cd4-29430c23fb66" title="Calls a user-provided procedure to perform a check.">perc::check_data</a>, then
the -opaqueCell "*" option must be specified. This is because perc::check_data
does not process hierarchy in the same way as perc::count.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__idddd23b33-d470-4428-a8ca-b006522e83f5">-pinAtNet <span class="keyword ParameterName OptionalReplaceable">net_pin_list</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set, where <span class="keyword ParameterName OptionalReplaceable">net_pin_list</span> must
be a Tcl list consisting of one or more device pin names.</p>
<p class="p">The ‑pinAtNet option can be
used only if the ‑net option is specified. A device must be connected
to the net through one of the pins listed in <span class="keyword ParameterName OptionalReplaceable">net_pin_list</span> in
order to be selected if ‑pinAtNet is specified. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__ida5ad24da-1a73-4556-a39a-24569eddc00d">-type <span class="keyword ParameterName OptionalReplaceable">type_list</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set, where <span class="keyword ParameterName OptionalReplaceable">type_list</span> must
be a Tcl list consisting of one or more device types (including
.SUBCKT definition names; see “<a class="xref fm:HeadingAndPage" href="Concept_SubcircuitsDevices_idde32902a.html#idde32902a-4f0a-4b90-a0dd-0d7a345bde21__Concept_SubcircuitsDevices_idde32902a.xml#idde32902a-4f0a-4b90-a0dd-0d7a345bde21" title="Primitive SPICE subcircuits can serve as devices for many commands, so it is important to understand how they work in this context.">Subcircuits as Devices</a>”), and possibly starting with
the exclamation point (!). If the exclamation point is not present,
then only devices with the listed types are selected. If the exclamation
point is present, then only devices with types other than those
listed are selected. </p>
<p class="p">The general form of <span class="keyword ParameterName OptionalReplaceable">type_list</span> is
this: {[!] <span class="keyword ParameterName OptionalReplaceable">type</span> …}.</p>
<p class="p">Each device type may contain
one or more asterisk (*) characters. The * character matches zero
or more characters. </p>
<p class="p">A device must be one of the
types listed in the <span class="keyword ParameterName OptionalReplaceable">type_list</span> in
order to be selected. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__id58da0999-ccb7-43b0-a799-49d5a9f9492a">-subtype <span class="keyword ParameterName OptionalReplaceable">subtype_list</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set, where <span class="keyword ParameterName OptionalReplaceable">subtype_list</span> must
be a Tcl list consisting of one or more subtypes, and possibly starting
with the exclamation point (!). If the exclamation point is not present,
then only devices with the listed models are selected for output
to the report file. If the exclamation point is present, then only
devices with models other than those listed are selected. </p>
<p class="p">The general form of <span class="keyword ParameterName OptionalReplaceable">subtype_list </span>is
this: {[!] <span class="keyword ParameterName OptionalReplaceable">model</span> …}.</p>
<p class="p">Each device subtype may contain
one or more asterisk (*) characters. The * character matches zero
or more characters, but it does not match the absence of a subtype.</p>
<p class="p">A device must be one of the
subtypes listed in <span class="keyword ParameterName OptionalReplaceable">subtype_list</span> in
order to be selected. </p>
<p class="p">Subtypes are also known as model
names.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__idc4d441b1-149a-44f4-9360-7e900524af20">-property “<span class="keyword ParameterName OptionalReplaceable">constraint_str</span>”</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set, where <span class="keyword ParameterName OptionalReplaceable">constraint_str</span> must
be a nonempty string (enclosed in double quotation marks) specifying
a property name followed by a constraint limiting the value of the
property, such as “r &gt; 10”. The constraint notation is given in
the “<a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', '99TABLE Constraints', 'svrf_ur'); return false;">Constraints</a>” table
of the <cite class="cite">SVRF Manual</cite>.</p>
<p class="p">Only devices satisfying <span class="keyword ParameterName OptionalReplaceable">constraint_str</span> are
counted. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__idee04e2f7-0279-44a4-81a4-ce2b3caff22b">-pinNetType { {<span class="keyword ParameterName OptionalReplaceable">pin_name_list</span>} {<span class="keyword ParameterName OptionalReplaceable">net_type_condition_list</span>} … }</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set that
selects devices that meet the specified conditions. The specified
pins are checked to see if they have the specified net types.</p>
<p class="p">The <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> is
a Tcl list consisting of one or more pin names. At least one <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> with
a corresponding <span class="keyword ParameterName OptionalReplaceable">net_type_condition_list</span> must
be specified. If -type specifies a .SUBCKT name, then pin names
in the <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> come
from the .SUBCKT definition.</p>
<p class="p">The <span class="keyword ParameterName OptionalReplaceable">net_type_condition_list</span> must
be a Tcl list that defines a logical expression. A net meets the
condition if it satisfies the logical expression. This is the allowed
form:</p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__id2f678658-4fa9-4f4d-bc6b-128e38a7369b"><p class="p Opt">{[!]<span class="keyword ParameterName OptionalReplaceable">type_1</span> [<span class="keyword ParameterName OptionalReplaceable">operator</span> [!]<span class="keyword ParameterName OptionalReplaceable">type_2</span> [<span class="keyword ParameterName OptionalReplaceable">operator</span> …
[!]<span class="keyword ParameterName OptionalReplaceable">type_N</span>]]}</p>
</li>
</ul>
<p class="p">The <span class="keyword ParameterName OptionalReplaceable">type_N</span> arguments
are net types such as are created with the <a class="xref fm:HeadingOnly" href="Command_PercdefineNetType_id94dce3ed.html#id94dce3ed-08eb-4906-8920-4023848dda4b__Command_PercdefineNetType_id94dce3ed.xml#id94dce3ed-08eb-4906-8920-4023848dda4b" title="Assigns a net type to nets from an input list of net names.">perc::define_net_type</a>, <a class="xref fm:HeadingOnly" href="Command_PercdefineNetTypeByDevice_idddb1d861.html#idddb1d861-3213-4dfe-ac19-676ee8821ebc__Command_PercdefineNetTypeByDevice_idddb1d861.xml#idddb1d861-3213-4dfe-ac19-676ee8821ebc" title="Assigns a net type to nets that are connected to selected devices.">perc::define_net_type_by_device</a>, or <a class="xref fm:HeadingOnly" href="Command_PercdefineTypeSet_id4729110c.html#id4729110c-e73f-4c7b-8772-d111b3fd3cf4__Command_PercdefineTypeSet_id4729110c.xml#id4729110c-e73f-4c7b-8772-d111b3fd3cf4" title="Creates and assigns a new net type set from a list of net types.">perc::define_type_set</a> commands. If there is only one net
type, then the <span class="keyword ParameterName OptionalReplaceable">operator</span> is
omitted.</p>
<p class="p">The exclamation point (!) causes
logical negation of the net type following it. </p>
<p class="p">The <span class="keyword ParameterName OptionalReplaceable">operator</span> is
either logical AND (&amp;&amp;) or logical OR (||). The &amp;&amp;
operator has precedence over ||. For example, this expression:</p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__id32635aa5-2b13-4eef-ba67-cdae8e7af923"><p class="p Opt">{labelA
|| labelB &amp;&amp; !ground}</p>
</li>
</ul>
<p class="p">means “labelA OR (labelB AND
not ground)”. </p>
<p class="p">You can manage the precedence
by using type sets. For example, suppose you have this command:</p>
<pre class="pre codeblock leveled"><code>perc::define_type_set any_label  {labelA || labelB} </code></pre><p class="p">Then the following expression:</p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__idfb1e1bd2-8b4e-4830-83a7-b3a735062a22"><p class="p Opt">{any_label
&amp;&amp; !ground}</p>
</li>
</ul>
<p class="p">means “(labelA OR labelB) AND
not ground”.</p>
<p class="p">A device meets the selection
criteria if <a class="xref fm:HeadingOnly" href="Command_PercisPinOfNetType_id6039ace9.html#id6039ace9-f4c6-409f-b83a-1104554eb691__Command_PercisPinOfNetType_id6039ace9.xml#id6039ace9-f4c6-409f-b83a-1104554eb691" title="Returns TRUE if at least one net meets the net type criteria for the given pins.">perc::is_pin_of_net_type</a> returns the value of 1 when applied
to the device and each pair of <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> and <span class="keyword ParameterName OptionalReplaceable">net_type_condition_list</span>.
In other words, for each pair of <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> and <span class="keyword ParameterName OptionalReplaceable">net_type_condition_list</span>,
at least one of the nets connected to the pins in <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> must
satisfy the corresponding <span class="keyword ParameterName OptionalReplaceable">net_type_condition_list. </span></p>
<p class="p">See “<a class="xref fm:HeadingAndPage" href="Concept_ImplicitBooleanOperationsInPinLists_ida46d06be.html#ida46d06be-d916-4f63-a2d9-bc6c8b39ae51__Concept_ImplicitBooleanOperationsInPinLists_ida46d06be.xml#ida46d06be-d916-4f63-a2d9-bc6c8b39ae51" title="Some Calibre PERC commands allow the specification of pin lists together with net or path types. Depending upon how the lists are specified, the lists can be interpreted as Boolean AND or OR conditions on the pins.">Implicit Boolean Operations in Pin Lists</a>” for details on specifying AND
and OR conditions for pin lists.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__id72724e72-1338-4aa3-b5d2-045a98f64645">-pinPathType { {<span class="keyword ParameterName OptionalReplaceable">pin_name_list</span>} {<span class="keyword ParameterName OptionalReplaceable">path_type_condition_list</span>} …}</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set that
selects devices that meet specified path type conditions. The construction
of the arguments for this option is similar to -pinNetType. The
specified pins are checked to see if they connect to nets having
the specified path types.</p>
<p class="p">The <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> is
a Tcl list consisting of one or more pin names. At least one <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> with
its corresponding <span class="keyword ParameterName OptionalReplaceable">path_type_condition_list</span> must
be specified. If -type specifies a .SUBCKT name, then pin names
in the <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> come
from the .SUBCKT definition.</p>
<p class="p">The <span class="keyword ParameterName OptionalReplaceable">path_type_condition_list</span> must
be a Tcl list that defines a logical expression involving path types.
A pin meets the condition if it is connected to a net having the
path types defined by the logical expression. This is the allowed
form:</p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__id65ac53e3-2628-4baa-a359-d1419eb291f3"><p class="p Opt">{[!]<span class="keyword ParameterName OptionalReplaceable">type_1</span> [<span class="keyword ParameterName OptionalReplaceable">operator</span> [!]<span class="keyword ParameterName OptionalReplaceable">type_2</span> [<span class="keyword ParameterName OptionalReplaceable">operator</span> …
[!]<span class="keyword ParameterName OptionalReplaceable">type_N</span>]]}</p>
</li>
</ul>
<p class="p">The <span class="keyword ParameterName OptionalReplaceable">type_N</span> arguments
are path types such as are created with the <a class="xref fm:HeadingOnly" href="Command_PercdefineNetType_id94dce3ed.html#id94dce3ed-08eb-4906-8920-4023848dda4b__Command_PercdefineNetType_id94dce3ed.xml#id94dce3ed-08eb-4906-8920-4023848dda4b" title="Assigns a net type to nets from an input list of net names.">perc::define_net_type</a>, <a class="xref fm:HeadingOnly" href="Command_PercdefineNetTypeByDevice_idddb1d861.html#idddb1d861-3213-4dfe-ac19-676ee8821ebc__Command_PercdefineNetTypeByDevice_idddb1d861.xml#idddb1d861-3213-4dfe-ac19-676ee8821ebc" title="Assigns a net type to nets that are connected to selected devices.">perc::define_net_type_by_device</a>, or <a class="xref fm:HeadingOnly" href="Command_PercdefineTypeSet_id4729110c.html#id4729110c-e73f-4c7b-8772-d111b3fd3cf4__Command_PercdefineTypeSet_id4729110c.xml#id4729110c-e73f-4c7b-8772-d111b3fd3cf4" title="Creates and assigns a new net type set from a list of net types.">perc::define_type_set</a> commands. If there is only one path
type, then the <span class="keyword ParameterName OptionalReplaceable">operator</span> is
omitted.</p>
<p class="p">The exclamation point (!) causes
logical negation of the path type following it. </p>
<p class="p">The <span class="keyword ParameterName OptionalReplaceable">operator</span> is
either logical AND (&amp;&amp;) or logical OR (||). The &amp;&amp;
operator has precedence over ||.</p>
<p class="p">A device meets the specified
criteria if <a class="xref fm:HeadingOnly" href="Command_PercisPinOfPathType_idd5380828.html#idd5380828-3b49-4efc-a7fd-302c5df0dfa7__Command_PercisPinOfPathType_idd5380828.xml#idd5380828-3b49-4efc-a7fd-302c5df0dfa7" title="Returns TRUE if at least one path meets the path type criteria for the given pins.">perc::is_pin_of_path_type</a> returns the value of 1 when applied
to the device and each pair of <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> and <span class="keyword ParameterName OptionalReplaceable">path_type_condition_list</span>.
In other words, for each pair of <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> and <span class="keyword ParameterName OptionalReplaceable">path_type_condition_list</span>,
at least one of the nets connected to the pins in <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> must
satisfy the corresponding <span class="keyword ParameterName OptionalReplaceable">path_type_condition_list</span>. </p>
<p class="p">See “<a class="xref fm:HeadingAndPage" href="Concept_ImplicitBooleanOperationsInPinLists_ida46d06be.html#ida46d06be-d916-4f63-a2d9-bc6c8b39ae51__Concept_ImplicitBooleanOperationsInPinLists_ida46d06be.xml#ida46d06be-d916-4f63-a2d9-bc6c8b39ae51" title="Some Calibre PERC commands allow the specification of pin lists together with net or path types. Depending upon how the lists are specified, the lists can be interpreted as Boolean AND or OR conditions on the pins.">Implicit Boolean Operations in Pin Lists</a>” for details on specifying AND
and OR conditions for pin lists.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__id7132cccc-93d4-47af-9138-8f29b0893f48">-condition <span class="keyword ParameterName OptionalReplaceable">cond_proc</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set, where <span class="keyword ParameterName OptionalReplaceable">cond_proc</span> must
be a Tcl proc that takes an instance iterator passed from the command
as its first argument. If ‑net is used, then <span class="keyword ParameterName OptionalReplaceable">cond_proc</span> may take
a pin iterator as an optional second argument. The device’s pin
connected to the net is also passed to <span class="keyword ParameterName OptionalReplaceable">cond_proc</span> if
the optional second argument is used when ‑net is specified. </p>
<p class="p">The process <span class="keyword ParameterName OptionalReplaceable">cond_proc</span> must
return the value of 1 if the device meets its condition and 0 otherwise.
A device must meet the condition set by <span class="keyword ParameterName OptionalReplaceable">cond_proc </span>in
order to be counted. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__id922f8a83-ac3a-49d5-8e9f-64444bc983b0">-instanceAlso</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument that applies
the command criteria to cell instances in addition to primitive
devices.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__id2454aeea-40d1-4534-b183-cfcd3bc59bca">-instanceOnly</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument that applies
the command criteria only to cell instances.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__idd39ac5fa-82df-4778-81c6-ab9c5e056fe5">-list</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument that causes
the command to return a list of lists containing the count of instances
meeting the command’s criteria as the first element, and a list
of instance iterators as the second element. This option may not
be specified with ‑listPin or -collection.</p>
<p class="p">Each returned instance iterator
references a single instance and cannot be stepped forward.</p>
<p class="p">The maximum number of instances
returned in the list is 4E5. This can be reduced with the <a class="xref fm:HeadingOnly" href="Command_PercsetParameters_id7c853310.html#id7c853310-846b-4a3f-a537-97a3c94f9c05__Command_PercsetParameters_id7c853310.xml#id7c853310-846b-4a3f-a537-97a3c94f9c05" title="Defines various settings for the runtime environment.">perc::set_parameters</a> command. Larger numbers of instances
can be processed by using ‑collection instead.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__idc574f21a-d656-4805-9e1d-4a046aa4b0a7">-groupByPinConnections <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set specified with
-list that returns a list containing the count of instances meeting
the command’s criteria as the first element and a list of lists
containing instance iterators as the second element. For the second
element, each sub-list references device instances of the same SPICE
device element type having corresponding pins connected to the same
nets, respectively. The <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> is
a Tcl list of device pin names whose connections are determined.
All devices found by the command must have the pins specified in
the <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> or
an error results.</p>
<p class="p">Instances of the following built-in types are grouped together,
respectively, in the output:</p>
<ul class="ul"><li class="li" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__id929c89f6-cd74-4f96-9673-3c29f319e542"><p class="p">C</p>
</li>
<li class="li" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__id906d43a9-5b0d-4136-9937-1776a97649d3"><p class="p">D</p>
</li>
<li class="li" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__idac3644a9-2b8f-4ca5-85e6-7e784c018f86"><p class="p">LDD, LDDD,
LDDE, LDDN, LDDP</p>
</li>
<li class="li" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__ida3fb7c27-eeb2-4c18-aef4-c3f5ef2cd6f8"><p class="p">M, MD, ME,
MN, MP</p>
</li>
<li class="li" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__id60f618fb-19df-4a30-86cb-bc5f73b7a32f"><p class="p">Q</p>
</li>
<li class="li" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__id95653027-9ef9-462e-9a9a-72d3d8c61028"><p class="p">R</p>
</li>
</ul>
<p class="p">Devices mapped with the <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'LVS Map Device', 'svrf_ur'); return false;">LVS Map Device</a> statement
are grouped by built-in element type according to the aforementioned
groups.</p>
<p class="p">Pin swapping is considered when deciding whether pin connections
correspond, so instances having the same connections but with pins
swapped (where swapping is allowed) with respect to each other are
considered to have identical connections for the swapped pins, respectively.
Instances having a unique set of pin connections appear in their
own sub-lists.</p>
<p class="p">May not be specified with -sortInParallel or -annotation.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__id0ee2b4c5-61fb-4c52-8c5f-8420eca8fedb">-groupBySubtype</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set specified
with -groupByPinConnections or -sortInParallel that specifies each
sub-list of the output references device instances having the same
type and subtype. By default, devices referenced in a sub-list can
have any subtype.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__ideba15482-9e4c-4eae-ae1b-ef2148a6d302">-maxPerGroup <span class="keyword ParameterName OptionalReplaceable">count</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set specified with
-groupByPinConnections that limits the number of instances output
in each sub-list group. The <span class="keyword ParameterName OptionalReplaceable">count</span> is
a positive integer specifying the maximum number of output instances
per group. This option does not affect the instance count output
as the first element of the -groupByPinConnections list of lists.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__idabe82734-aa45-46ef-9140-36850d3d5ffb">-listPin</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument that returns
a list of lists containing the count of instances meeting the command’s
criteria as the first element, a list of instance iterators as the
second element, and a list of pin lists as the third element. The
sequence of instance iterators (in the list of instance iterators)
corresponds to the sequence of the list of pins.</p>
<p class="p">The -listPin option can be used
only if the -net option is specified. This option may not be specified
with -list or -collection.</p>
<p class="p">The maximum number of elements
returned in the list is 4E5. This can be reduced with the <a class="xref fm:HeadingOnly" href="Command_PercsetParameters_id7c853310.html#id7c853310-846b-4a3f-a537-97a3c94f9c05__Command_PercsetParameters_id7c853310.xml#id7c853310-846b-4a3f-a537-97a3c94f9c05" title="Defines various settings for the runtime environment.">perc::set_parameters</a> command. Larger numbers of elements
can be processed by using ‑collection with -pinAlso instead.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__ida71a88a3-de6a-4d1a-8f5c-9d6b546d055c">-sortInParallel</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument used with
either -list or -listPin that causes parallel instances of devices
of the same type to appear in sub-list groups in the output. By
default, the output is a simple Tcl list. When this option is used,
the output is a list of lists:</p>
<pre class="pre codeblock leveled"><code>{ <span class="keyword ParameterName OptionalReplaceable">count</span> {<span class="keyword ParameterName OptionalReplaceable">instance_list</span>} {<span class="keyword ParameterName OptionalReplaceable">instance_list</span>} ... [{<span class="keyword ParameterName OptionalReplaceable">pin_list</span>} {<span class="keyword ParameterName OptionalReplaceable">pin_list</span>} ...]} </code></pre><p class="p">The <span class="keyword ParameterName OptionalReplaceable">count</span> is
the number of instances that satisfy the command’s conditions. Each <span class="keyword ParameterName OptionalReplaceable">instance_list</span> contains
a set of instance iterators for instances connected in parallel.
The first sub-list contains the most elements, and the number of
elements in a sub-list decreases in each succeeding sub-list. If
an instance is not in parallel with another instance, it appears
in its own sub-list. If no instances are in parallel, then there
are no sub-lists. If -listPin is used, pins are listed in sub-lists
corresponding to each <span class="keyword ParameterName OptionalReplaceable">instance_list</span> with
the other semantics of ‑listPin output still applying.</p>
<p class="p">May not be specified with -groupByPinConnections.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__id8667d2ec-47c0-4334-973d-4796dc825a02">-parallelPins <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set specified
with -sortInParallel that specifies the pins to check for parallel
connections. The <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> is
a Tcl list of pin names to be checked. Pins that are not in the <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> are
ignored when determining parallel connections.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__idbd835de1-1930-4255-a737-2ac6de7fdb4d">-collection</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument that returns a list
containing the count of instances meeting the command’s criteria
as the first element and a collection iterator as the second element.
The collection iterator is processed by perc::collection to access
the instances referenced by the iterator. This option may not be
used with -list or -listPin. If there are more than 4E5 instances
returned by the command, -collection should be used instead of -list
or -listPin.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__idf88f144c-7f94-4cc3-af25-00643f8b0af3">-pinAlso</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument that can only be used
with -net and ‑collection that causes the returned collection iterator
to reference instance iterators of length 1 paired with Tcl lists
of pins corresponding to each instance iterator. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__idd2bc4571-1bed-41a1-b341-d1d030e4bfd2">-opaqueCell <span class="keyword ParameterName OptionalReplaceable">cell_name_list</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set that
causes the specified cells to be treated in isolation, with no element
promotions. The <span class="keyword ParameterName OptionalReplaceable">cell_name_list</span> must
be a Tcl list consisting of one or more cell names, and starting
with possibly the exclamation point (!), such as {cell_1 cell_2}
or {! cell_3 cell_4}. If the exclamation point is not present, then
the command applies only to the listed cells. However, if the exclamation
point is specified, then the command applies to all cells except
the ones listed. One or more asterisk (*) wildcards are allowed
in a cell name. This wildcard matches zero or more characters. The <span class="keyword ParameterName OptionalReplaceable">cell_name_list</span> must
be “*” when the command is used in an initialization procedure,
or when the command is called in a rule check procedure but not
in the context of a high-level command.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__id1797a0b2-b3c1-477c-a408-98d950acdfda">-annotation ‘{’<span class="keyword ParameterName OptionalReplaceable">annotation_name</span> <span class="keyword ParameterName OptionalReplaceable">rule_check</span> ‘}’</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set that limits counting
of devices to those having the <span class="keyword ParameterName OptionalReplaceable">annotation_name</span>,
which is specified using <a class="xref fm:HeadingOnly" href="Command_PercsetAnnotation_idc65a020e.html#idc65a020e-4293-4c51-b80d-f16209616d89__Command_PercsetAnnotation_idc65a020e.xml#idc65a020e-4293-4c51-b80d-f16209616d89" title="Attaches a user annotation to a device or a net. This allows testing of the annotation value in another rule check.">perc::set_annotation</a>. The <span class="keyword ParameterName OptionalReplaceable">rule_check</span> is
the name of the check where the annotation is set. The arguments
to -annotation must appear in a list. This option may not be used
in an initialization procedure.</p>
<p class="p">May not be specified with -groupByPinConnections.</p>
</dd>
</dl>
</div>
</div>
<div class="section ReturnedValues"><h2 class="title Subheading sectiontitle">Return Values</h2>
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__id595dfe7a-a9fd-4366-921d-6f1223398a64" class="table" frame="void" border="0" rules="none"><colgroup><col style="width:1.587in" /><col style="width:4.587in" /></colgroup><tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">-collection, -list, or ‑listPin
not specified:</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">Returns an integer representing
a count.</p>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">-collection specified:</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">Returns a Tcl list with the first element
being an integer count and the second element being a collection
iterator referencing instances. If -pinAlso is also specified, the
collection iterator references instance iterators of length 1. Each
instance iterator is paired with a Tcl list of pins corresponding
to that instance iterator.</p>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">‑groupByPinConnections specified</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">Returns a Tcl list of lists of the form
{<span class="keyword ParameterName OptionalReplaceable">count</span> {<span class="keyword ParameterName OptionalReplaceable">instance_list</span>} {<span class="keyword ParameterName OptionalReplaceable">instance_list</span>}
… }</p>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">-list specified:</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">Returns a Tcl list in
the form {<span class="keyword ParameterName OptionalReplaceable">count instance_list</span>}.
The <span class="keyword ParameterName OptionalReplaceable">count</span> is an
integer. The <span class="keyword ParameterName OptionalReplaceable">instance_list</span> is
a Tcl list of instance iterators.</p>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">-listPin specified:</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">Returns a Tcl list of
the form {<span class="keyword ParameterName OptionalReplaceable">count instance_list pin_list</span>}.
The <span class="keyword ParameterName OptionalReplaceable">count</span> and <span class="keyword ParameterName OptionalReplaceable">instance_list</span> are
identical to the -list output. The <span class="keyword ParameterName OptionalReplaceable">pin_list</span> is
a Tcl list of pins. The <span class="keyword ParameterName OptionalReplaceable">pin_list</span> may
be a list of lists, depending on the pin connections.</p>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">-sortInParallel specified:</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">Returns a Tcl list of
lists of the form {<span class="keyword ParameterName OptionalReplaceable">count</span> {<span class="keyword ParameterName OptionalReplaceable">instance_list</span>} {<span class="keyword ParameterName OptionalReplaceable">instance_list</span>}
… [{<span class="keyword ParameterName OptionalReplaceable">pin_list</span>}
{<span class="keyword ParameterName OptionalReplaceable">pin_list</span>}
…]}. The <span class="keyword ParameterName OptionalReplaceable">pin_list</span> elements
appear when -listPin is used.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><div class="section Subsection" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__idd2e5004d-48e7-4582-a6ad-a4cdff3fc245"><h2 class="title Subheading sectiontitle">Example 1</h2><p class="p">This example shows how to iterate
through -listPin output to process each device and its associated
pins.</p>
<pre class="pre codeblock leveled"><code>set result [perc::count -net $net -type MN -listPin] 
set dev_count [lindex $result 0] 
set dev_list  [lindex $result 1] 
set pin_list  [lindex $result 2] 
for {set i 0} {$i &lt; $dev_count} {incr i} { 
  set dev      [lindex $dev_list $i] 
  set dev_pins [lindex $pin_list $i] 
  foreach pin $dev_pins { 
    # process each  $dev, $pin pair 
    ... 
  } 
} </code></pre><p class="p">See also “<a class="xref fm:HeadingAndPage" href="TaskTop_ExampleCdmClampDeviceProtectionDecouplingCapacitors_idb1bd765b.html#idb1bd765b-fa41-4246-b33c-92caad4fac7a__TaskTop_ExampleCdmClampDeviceProtectionDecouplingCapacitors_idb1bd765b.xml#idb1bd765b-fa41-4246-b33c-92caad4fac7a" title="The perc::check_net command can be used to check for proper CDM clamp and decoupling capacitor configuration. The check in this example checks these conditions:">Example: CDM Clamp Device Protection of Decoupling Capacitors</a>” for a complete check.</p>
</div>
<div class="section Subsection" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__id80096c9c-51fa-4681-a8d1-7d5e470ad8fe"><h2 class="title Subheading sectiontitle">Example 2</h2><p class="p">This code shows the use of -sortInParallel
with -list, along with how to access the individual parallel instances.
This is followed by related code using -listPin for comparison.
The second code segment also processes the corresponding pins.</p>
<pre class="pre codeblock leveled"><code># Using the -list option. 
set result [perc::count -net $net -type MN -list -sortInParallel] 

# Get the device count and parallel device list. 
set dev_count     [lindex $result 0] 
set dev_par_grps  [lindex $result 1] 

# Initialize the device group list index and the number of 
# parallel device sub-lists. Then iterate over those sub-lists. 
for {set dev_grp_idx 0 ; set pg_limit [llength ${dev_par_grps}]} \
  {${dev_grp_idx} &lt; ${pg_limit}} {incr dev_grp_idx} { 

# Visit each group of parallel devices and iterate over them. 
  set dev_grp [lindex ${dev_par_grps} ${dev_grp_idx}] 

  for {set dev_idx 0 ; set dv_limit [llength ${dev_grp}]} \
    {${dev_idx} &lt; ${dv_limit}} {incr dev_idx} { 
# The current device in the current parallel group. 
    set dev [lindex ${dev_grp} ${dev_idx}] 
# ... 
  } 
} </code></pre><pre class="pre codeblock leveled"><code># Using the -listPin option. 
set result [perc::count -net $net -type MN -listPin -sortInParallel] 

# Get the device count and parallel device and pin lists. 
set dev_count     [lindex $result 0] 
set dev_par_grps  [lindex $result 1] 
set pin_par_grps  [lindex $result 2] 

# Initialize the device group list index and the number of 
# parallel device sub-lists. Then iterate over those sub-lists. 
for {set dev_grp_idx 0 ; set pg_limit [llength ${dev_par_grps}]} \
   {${dev_grp_idx}&lt; ${pg_limit}} {incr dev_grp_idx} { 
# Visit each group of parallel devices with corresponding pins and 
# iterate over them. 
  set dev_grp [lindex ${dev_par_grps} ${dev_grp_idx}] 
  set pin_grp [lindex ${pin_par_grps} ${dev_grp_idx}] 
  for {set dev_idx 0 ; set dv_limit [llength ${dev_grp}]} \
    {${dev_idx} &lt; ${dv_limit}} {incr dev_idx} { 

# The current device and pins in the current parallel group. 
    set dev      [lindex ${dev_grp} ${dev_idx}] 
    set dev_pins [lindex ${pin_grp} ${dev_idx}] 

    foreach pin ${dev_pins} { 
# ... visit each ${pin} on ${dev} 
    } 
  } 
} </code></pre></div>
<div class="section Subsection" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__id4c35db48-7d71-4f8e-996f-12d54eada07b"><h2 class="title Subheading sectiontitle">Example
3</h2><pre class="pre codeblock" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__iddd48fb34-53c2-427c-af6a-0aea5458458d"><code>  proc cond_rule2 {net} {
    set annot "SIG"
    set rule "rule1"
    if {[<a class="xref fm:HeadingOnly" href="Command_PerchasAnnotation_id19c7d1ea.html#id19c7d1ea-5cc9-4017-ba85-919c4e6c6955__Command_PerchasAnnotation_id19c7d1ea.xml#id19c7d1ea-5cc9-4017-ba85-919c4e6c6955" title="Returns TRUE if a device or a net has an annotation meeting specified criteria.">perc::has_annotation</a> $net -name $annot -rule $rule]} {
      set value [<a class="xref fm:HeadingOnly" href="Command_PercgetAnnotation_idfc6449ea.html#idfc6449ea-7be9-48a4-a6fb-adb519ca6ce0__Command_PercgetAnnotation_idfc6449ea.xml#idfc6449ea-7be9-48a4-a6fb-adb519ca6ce0" title="Returns an annotation value from a device or a net.">perc::get_annotation</a> $net -name $annot -rule $rule]
      if { "$value" == "IN_1" } {
        set count [perc::count ${net} -type { MN MP } -sortInParallel \
          -parallelPins { s d g } -list -annotation [list $annot $rule]]
        <a class="xref fm:HeadingOnly" href="Command_PercreportBaseResult_idb3fbfdac.html#idb3fbfdac-f8a1-4f80-9abb-5451cd2ee978__Command_PercreportBaseResult_idb3fbfdac.xml#idb3fbfdac-f8a1-4f80-9abb-5451cd2ee978" title="Writes user-defined content to the PERC Report file or to the Mask SVDB Directory. This command must be called in the context of a high-level rule check command.">perc::report_base_result</a> -title "$count IN_1 net devices in \
          parallel without bulk pin"
        return 1
      }
    }
    return 0
  }</code></pre><p class="p">In the cond_rule2 proc, nets are passed in and checked for the
presence of a SIG annotation assigned in the context of rule1. If
the net has an annotation value of IN_1, perc::count counts the
number of parallel MOS devices (pin connections not including the
bulk pin) and stores it in a “count” variable. The value is output
to the PERC Report.</p>
</div>
<div class="section Subsection" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__idcf580ddb-d60d-4dbf-9215-f76326608fce"><h2 class="title Subheading sectiontitle">Example
4</h2><pre class="pre codeblock"><code>proc collect_devs {net} {
  set result [perc::count -net $net -type "mp mn" -collection]
  set count  [lindex $result 0]
  puts "&gt;&gt;&gt;NET: [<a class="xref fm:HeadingOnly" href="Command_Percname_idfec10dd1.html#idfec10dd1-a4a4-4a94-ad9f-1da475b6a82d__Command_Percname_idfec10dd1.xml#idfec10dd1-a4a4-4a94-ad9f-1da475b6a82d" title="Returns the name of the element pointed to by the iterator argument.">perc::name</a> $net] has $count MOS instances:"
  set colItr [lindex $result 1]
  while { ${colItr} ne "" } {
    set dev [<a class="xref fm:HeadingOnly" href="Command_Perccollection_id01127e08.html#id01127e08-7773-4f86-9c93-f48a26bfd673__Command_Perccollection_id01127e08.xml#id01127e08-7773-4f86-9c93-f48a26bfd673" title="Returns data from a collection iterator. Creates a hash collection, adds data to it, returns data from it, and can delete it. Returns a collection iterator from a hash collection.">perc::collection</a> $colItr -value]
    puts "        [perc::name $dev]"
    <a class="xref fm:HeadingOnly" href="Command_Percinc_iddc737eea.html#iddc737eea-a394-4075-9bfb-2485eb98c208__Command_Percinc_iddc737eea.xml#iddc737eea-a394-4075-9bfb-2485eb98c208" title="Increments the given iterator to point to the next entry.">perc::inc</a> colItr
  }
# do not return a reported result to the calling environment.
  return 0
}</code></pre><p class="p">The preceding code illustrates use of -collection with output
to the run transcript (this is suitable for testing and debugging).</p>
<p class="p">Tcl proc collect_devs takes a net iterator as input. The “result”
variable references a list consisting of the count of MN and MP
devices on the input net and a collection iterator (colItr) that
references device instances. The net, along with the instance count
and associated instances, are reported in the transcript like this:</p>
<pre class="pre codeblock"><code>&gt;&gt;&gt;NET: PWR has 3 MOS instances:
        X1/X0/M0
        X0/X0/M1
        X0/X0/M0</code></pre><p class="p">If -pinAlso is added to the perc::count command, then the code
is modified as follows:</p>
<pre class="pre codeblock"><code>proc collect_devs {net} {
  set result [perc::count -net $net -type "mp mn" -collection -pinAlso]
  set count  [lindex $result 0] 
  puts "&gt;&gt;&gt;NET: [perc::name $net] has $count MOS instances:"
  for { set colItr [lindex $result 1] } { ${colItr} ne "" } \
      { perc::inc colItr } {
      set el [perc::collection $colItr -value]
      set inst [lindex ${el} 0]
      set pins [lindex ${el} 1]
      puts "        [perc::name $inst]: $pins"
  }
# do not return a reported result to the calling environment.
  return 0
}</code></pre><p class="p">Notice that colItr now references two elements: an instance iterator
(inst) of length 1 and a list of pins associated with the instance
iterator. The pins are connected to the net passed in to the proc.
The transcript then shows output like this:</p>
<pre class="pre codeblock"><code>&gt;&gt;&gt;NET: PWR has 3 MOS instances:
        X1/X0/M0: b s
        X0/X0/M1: b d
        X0/X0/M0: b s</code></pre></div>
<div class="section Subsection" id="iddc2be6a2-af8b-4db2-a0a4-eebebc591bad__id29b933c0-a486-4076-8306-c28dd531a23a"><h2 class="title Subheading sectiontitle">Example
5</h2><p class="p">Assume the following netlist:</p>
<pre class="pre codeblock"><code>.SUBCKT A VDD1 VSS1 IN1
M1 VDD1 IN_1 VSS1 VSS1 n L=1.75e-06 W=2e-05
M2 VSS1 IN_1 VDD1 VDD1 p L=1.25e-06 W=1.5e-05
.ENDS

.SUBCKT B VDD2 VSS1 IN_2
M3 VDD2 IN_2 VSS1 VSS1 n  L=1.75e-06 W=2e-05
.ENDS

.SUBCKT C VSS2 VDD1 IN_1
M4 VSS2 IN_1 VDD1 VDD1 p L=1.75e-06 W=2e-05
M5 VSS2 IN_1 VDD1 VDD1 p L=1.75e-06 W=2e-05
M6 VSS2 IN_1 VDD1 VDD1 p L=1.75e-06 W=2e-05
.ENDS

.SUBCKT TOPCELL GND PWR SIG1 SIG2
X0 PWR GND SIG1 A
X1 PWR GND SIG2 B
X3 GND PWR SIG1 C
.ENDS</code></pre><p class="p">and the following rules:</p>
<pre class="pre codeblock"><code>TVF FUNCTION test_count [/* 
  package require CalibreLVS_PERC 

proc init {} {
  <a class="xref fm:HeadingOnly" href="Command_PercdefineNetType_id94dce3ed.html#id94dce3ed-08eb-4906-8920-4023848dda4b__Command_PercdefineNetType_id94dce3ed.xml#id94dce3ed-08eb-4906-8920-4023848dda4b" title="Assigns a net type to nets from an input list of net names.">perc::define_net_type</a> POWER {VDD1 VDD2 PWR} -cell
}</code></pre><pre class="pre codeblock"><code>proc check_1_group_pins_cond {net} {
  # Use perc::count to find MOS devices and group those devices
  # by common net connections at 's' and 'g' pins.
  set result [perc::count -net ${net} -type {MN MP} -list \
    -groupByPinConnections { s g } ]

# number of devices found
  set dev_count [lindex ${result} 0]
# instances in list-of-lists
  set dev_lists [lindex ${result} 1]
  set group_list [list]
# iterate over instance lists
   foreach sublist ${dev_lists} {
    set inst_list {}
    foreach inst_itr ${sublist} {
      set inst_name [perc::name ${inst_itr}]
      lappend inst_list ${inst_name}
    }
    set group_list [concat $group_list \{$inst_list\}]
   }
   set output [list ${dev_count} ${group_list}]
   perc::report_base_result -title "Instances by pin connections:" \
     -value ${output}
   return 1
 }
proc check_1_group_pins {} {
  perc::check_net -netType POWER -condition check_1_group_pins_cond
}
*/]</code></pre><p class="p">Tcl proc check_1_group_pins iterates over all cells’ nets having
the POWER net type. These nets are processed by the check_1_group_cond
proc, which generates a list of MN and MP device instances grouped
by their “s” and “g” pin connections. The output from perc::report_base_result
could appear as follows:</p>
<pre class="pre codeblock"><code>  1    Net  PWR [ POWER ]
       Instances by pin connections:
       6 {{X3/M6 X3/M5 X3/M4} {X0/M2} {X1/M3} {X0/M1}}</code></pre><p class="p">The first group has three instances whose s pin is connected
to VDD1 and whose g pin is connected to IN1. The remaining three
groups consist of single instances. The M3 instance is the only
one with a g pin connected to IN2. The other two instances have
differing connections at their s pins.</p>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_RuleCheckCommands_id9b3d8e0b.html" title="Rule check commands appear in rule check procs and are used to check the design. Some rule check commands may be used in init procs. These are annotated in the notes to the tables in this section.">Rule Check Commands</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_perc_user"
                DocTitle = "Calibre® PERC™ User’s Manual"
                PageTitle = "perc::count"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_Perccount_iddc2be6a2.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® PERC™ User’s Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>