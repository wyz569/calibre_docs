<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="perc::check_device_and_net" />
<meta name="abstract" content="Checks devices and nets in the design for ones that match any specified conditions." />
<meta name="description" content="Checks devices and nets in the design for ones that match any specified conditions." />
<meta name="prodname" content="Calibre PERC User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-25" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_perc_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="HighlightChanges" content="yes" />
<meta name="EclipsePluginName" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2;show" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® PERC™ User’s Manual" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P11493,product.id.P10099,product.id.P11347,product.id.P10084,product.id.P11427,product.id.P10116,product.id.P10096" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id05043298-b80d-45d8-a794-a7cd30bbdc71" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>perc::check_device_and_net</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="perc::check_device_and_net" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P11493,product.id.P10099,product.id.P11347,product.id.P10084,product.id.P11427,product.id.P10116,product.id.P10096" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="id05043298-b80d-45d8-a794-a7cd30bbdc71">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">perc::check_device_and_net</h1>
<div class="body refbody CommandRefBody-Var1"><div class="abstract CommandRefAbstract"><p class="p ContextMGC">Calibre
PERC high-level command.</p>
<p class="shortdesc">Checks devices and nets in the
design for ones that match any specified conditions. </p>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName Required">perc::check_device_and_net<br />
</span><span class="keyword ParameterName Optional">[-type </span><span class="keyword ParameterName OptionalReplaceable">type_list</span><span class="keyword ParameterName Optional">] <br />
[-subtype </span><span class="keyword ParameterName OptionalReplaceable">subtype_list</span><span class="keyword ParameterName Optional">] <br />
[-property </span><span class="keyword ParameterName OptionalReplaceable">constraint_str</span>]<br />
[<span class="keyword ParameterName Optional">-pinNetType</span> {{<span class="keyword ParameterName OptionalReplaceable">pin_name_list</span>} {<span class="keyword ParameterName OptionalReplaceable">net_type_condition_list</span>} …}<span class="keyword ParameterName Optional">]<br />
[-pinPathType </span>{{<span class="keyword ParameterName OptionalReplaceable">pin_name_list</span>} {<span class="keyword ParameterName OptionalReplaceable">path_type_condition_list</span>} …}] <br />
[<span class="keyword ParameterName Optional">-pinNetVoltage</span> {{<span class="keyword ParameterName OptionalReplaceable">pin_name_list</span>} {<span class="keyword ParameterName OptionalReplaceable">net_voltage_condition_list</span>} …}]<br />
[-pinPathVoltage {{<span class="keyword ParameterName OptionalReplaceable">pin_name_list</span>} {<span class="keyword ParameterName OptionalReplaceable">path_voltage_condition_list</span>} …}]<br />
[-deviceCondition <span class="keyword ParameterName OptionalReplaceable">cond_proc</span><span class="keyword ParameterName Optional">] <br />
[-instanceAlso | -instanceOnly]</span> <br />
[<span class="keyword ParameterName Optional">-netType</span> {<span class="keyword ParameterName OptionalReplaceable">net_type_condition_list</span>}<span class="keyword ParameterName Optional">]<br />
[-pathType </span>{<span class="keyword ParameterName OptionalReplaceable">path_type_condition_list</span>}]<br />
[<span class="keyword ParameterName Optional">-netVoltage</span> {<span class="keyword ParameterName OptionalReplaceable">net_voltage_condition_list</span>}]<br />
[-pathVoltage {<span class="keyword ParameterName OptionalReplaceable">path_voltage_condition_list</span>}]<br />
[‑net<span class="keyword ParameterName Optional">Condition</span> <span class="keyword ParameterName OptionalReplaceable">cond_proc</span>] <br />
<span class="keyword ParameterName Optional">[-opaqueCell </span><span class="keyword ParameterName OptionalReplaceable">cell_name_list</span><span class="keyword ParameterName Optional">]<br />
[-cellName </span><span class="keyword ParameterName OptionalReplaceable">cell_name_list</span><span class="keyword ParameterName Optional">]<br />
[-comment </span><span class="keyword ParameterName OptionalReplaceable">comment_str</span><span class="keyword ParameterName Optional">]</span></p>
</div>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">Checks devices and nets in the
design to find those that match all conditions specified by any optional
arguments. If a device or net is a match, Calibre PERC outputs the
device or net to the report file and to the Mask SVDB Directory,
if specified, as a generated result. If no arguments are provided,
every primitive device and net is a match. </p>
<p class="p">This command checks devices first,
then it checks nets. It combines the functionality of both <a class="xref fm:HeadingOnly" href="Command_PerccheckDevice_id3faa8842.html#id3faa8842-b865-4759-8041-19b4db0d1f9a__Command_PerccheckDevice_id3faa8842.xml#id3faa8842-b865-4759-8041-19b4db0d1f9a" title="Matches each primitive device in the design by default. Devices that are selectively matched can be configured using the options.">perc::check_device</a> and <a class="xref fm:HeadingOnly" href="Command_PerccheckNet_id75162cb0.html#id75162cb0-c882-4d1d-9273-9095a7dd5b64__Command_PerccheckNet_id75162cb0.xml#id75162cb0-c882-4d1d-9273-9095a7dd5b64" title="Checks nets in the design for nets that match the specified conditions. By default, all nets are matched.">perc::check_net</a>. The options for this command
behave similarly to those commands, although some of the options
are named differently to avoid ambiguity.</p>
<p class="p">This command supports “type” and voltage checking through the
-pin*, -net* and -path* families of options. If any of these options
are used, then the PERC report contains the appropriate information
regarding types or voltages, along with placement lists.</p>
<p class="p">If none of the net or path type
options are specified, results in the PERC report are not differentiated
by net or path type. For this reason, it is best to specify these
options in type checking whenever possible for better results filtering.
See “<a class="xref fm:HeadingAndPage" href="Concept_ReportingNetTypesByRuleChecks_id8295d228.html#id8295d228-81b1-47a5-9733-51aac931d3fb__Concept_ReportingNetTypesByRuleChecks_id8295d228.xml#id8295d228-81b1-47a5-9733-51aac931d3fb" title="Rule checks can specify options that include net type or path type names.">Reporting of Net Types by Rule Checks</a>” for details.</p>
<p class="p">A similar behavior to that discussed
in the preceding paragraph occurs if you assign voltages but do
not query them in a rule check. Devices and nets in the PERC report
are not differentiated by voltage in this case. Using <a class="xref fm:HeadingOnly" href="Command_Percvoltage_id84e75b60.html#id84e75b60-58d3-47f4-b206-1f2333157773__Command_Percvoltage_id84e75b60.xml#id84e75b60-58d3-47f4-b206-1f2333157773" title="Returns voltage values for a net or pin.">perc::voltage</a> in a
‑condition procedure causes voltages to be reported, as do any of
the voltage options. See “<a class="xref fm:HeadingAndPage" href="Concept_ConnectivityBasedVoltagePropagation_idde127dbd.html#idde127dbd-0c53-4f7c-b790-f5dfb04aeb93__Concept_ConnectivityBasedVoltagePropagation_idde127dbd.xml#idde127dbd-0c53-4f7c-b790-f5dfb04aeb93" title="Calibre PERC employs static, connectivity-based voltage propagation. Unlike dynamic circuit simulators, Calibre PERC voltage propagation does not consider resistance or current. Voltage labels are passed along well-defined paths and are subsequently checked by rules.">Connectivity-Based Voltage Propagation</a>” for details
about voltage reporting.</p>
<p class="p">By default, the command applies
only to primitive devices. If -instanceAlso is specified, then cell
instances that meet the specified criteria are also considered.
If -instanceOnly is specified, then only cell instances that meet
the specified criteria are considered.</p>
<p class="p">By default, this command traverses
the design cell-by-cell until it reaches the lowest cell in the hierarchy
required to return a proper result, as discussed under “<a class="xref fm:HeadingAndPage" href="Concept_HierarchyTraversalByRuleCheckCommands_id73bf23be.html#id73bf23be-1f78-46a5-accc-56357a93c933__Concept_HierarchyTraversalByRuleCheckCommands_id73bf23be.xml#id73bf23be-1f78-46a5-accc-56357a93c933" title="Certain Calibre PERC rule check commands traverse hierarchy. They process nets on a per-cell basis, and they proceed through the hierarchy as needed to return their outputs. How this is done is important to understand when coding and evaluating rule checks.">Hierarchy Traversal by Rule Check Commands</a>”. This command does not process
a net (including reporting it) in a cell that does not fully contain
the net. The -opaqueCell option changes this behavior as described
under “<a class="xref fm:HeadingAndPage" href="Concept_HierarchyTraversalOpaquecell_id81e7e878.html#id81e7e878-7e09-46c9-acf7-1ddda1873aeb__Concept_HierarchyTraversalOpaquecell_id81e7e878.xml#id81e7e878-7e09-46c9-acf7-1ddda1873aeb" title="The high-level commands like perc::check_device, perc::check_net, perc::check_device_and_net check, and perc::check_data check objects cell-by-cell by default. When nets are processed in the context of these commands, they automatically perform net traversal across cell boundaries when needed in the context of the lowest cell in the hierarchy that completely contains a net.">Hierarchy Traversal and -opaqueCell</a>”. </p>
<p class="p">By default, this command applies
to all cells in the design. The -cellName option allows you to restrict
the reporting only to devices or nets from specified cells. </p>
<p class="p">It is frequently desirable to
specify -opaqueCell with -cellName for a given set of cells when checking
nets because the -opaqueCell option causes net reporting to become
localized to specified cells that do not fully contain a net. By
itself, -cellName does not guarantee this behavior.</p>
<p class="p">This command can be called at
most once in any Tcl proc. If called, it must be the only high-level
“check” command used in the Tcl proc. </p>
<p class="p">This command allows you to control
access of hierarchical elements by maintaining a cache of devices
and nets. Use of the cache results in better performance for nets
that are very large, like power and ground nets.</p>
<p class="p">Initially, the Calibre PERC system
cache is empty. You can store devices and nets in this cache by
calling the commands <a class="xref fm:HeadingOnly" href="Command_PerccacheDevice_idffbe50f5.html#idffbe50f5-7346-4415-9319-afacf49abd4f__Command_PerccacheDevice_idffbe50f5.xml#idffbe50f5-7346-4415-9319-afacf49abd4f" title="Stores a device in the system cache.">perc::cache_device</a> and <a class="xref fm:HeadingOnly" href="Command_PerccacheNet_ideea78c85.html#ideea78c85-1a9c-4afc-be6c-5f6905c4a933__Command_PerccacheNet_ideea78c85.xml#ideea78c85-1a9c-4afc-be6c-5f6905c4a933" title="Stores a net in the system cache.">perc::cache_net</a>. Other cache management commands
control access to the cache and deletion of elements in it. The
cache is cleared at the end of this command.</p>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__id36514a3b-f28b-4304-9d82-5f7b125362f8"><span class="keyword ParameterName Optional">-type </span><span class="keyword ParameterName OptionalReplaceable">type_list</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set, where <span class="keyword ParameterName OptionalReplaceable">type_list</span> must
be a Tcl list consisting of one or more device types (including
.SUBCKT definitions; see “<a class="xref fm:HeadingAndPage" href="Concept_SubcircuitsDevices_idde32902a.html#idde32902a-4f0a-4b90-a0dd-0d7a345bde21__Concept_SubcircuitsDevices_idde32902a.xml#idde32902a-4f0a-4b90-a0dd-0d7a345bde21" title="Primitive SPICE subcircuits can serve as devices for many commands, so it is important to understand how they work in this context.">Subcircuits as Devices</a>”), and possibly starting with
the exclamation point (!). If the exclamation point is not present,
then only devices with the listed types are selected. If the exclamation
point is present, then only devices with types other than those
listed are selected. </p>
<p class="p">The general form of <span class="keyword ParameterName OptionalReplaceable">type_list</span> is
this: {[!] <span class="keyword ParameterName OptionalReplaceable">type</span> …}.</p>
<p class="p">Each device type may contain
one or more asterisk (*) characters. The * character matches zero
or more characters. </p>
<p class="p">A device must be one of the
types listed in the <span class="keyword ParameterName OptionalReplaceable">type_list</span> in
order to be selected. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__id65a06ad5-a255-42e9-a4c7-90f66578ab24"><span class="keyword ParameterName Optional">-subtype </span><span class="keyword ParameterName OptionalReplaceable">subtype_list</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set, where <span class="keyword ParameterName OptionalReplaceable">subtype_list</span> must
be a Tcl list consisting of one or more subtypes, and possibly starting
with the exclamation point (!). If the exclamation point is not present,
then only devices with the listed models are selected for output
to the report file. If the exclamation point is present, then only
devices with models other than those listed are selected. </p>
<p class="p">The general form of <span class="keyword ParameterName OptionalReplaceable">subtype_list </span>is
this: {[!] <span class="keyword ParameterName OptionalReplaceable">model</span> …}.</p>
<p class="p">Each device subtype may contain
one or more asterisk (*) characters. The * character matches zero
or more characters, but it does not match the absence of a subtype.</p>
<p class="p">A device must be one of the
subtypes listed in <span class="keyword ParameterName OptionalReplaceable">subtype_list</span> in
order to be selected. </p>
<p class="p">Subtypes are also known as model
names.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__id2f179bf0-6623-4545-8cf1-dc029a3af9b8">-property <span class="keyword ParameterName OptionalReplaceable">constraint_str</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set, where <span class="keyword ParameterName OptionalReplaceable">constraint_str</span> must
be a quoted nonempty string specifying a property name followed
by a constraint limiting the value of the property. The constraint
notation is given in the “<a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', '99TABLE Constraints', 'svrf_ur'); return false;">Constraints</a>”
table of the <cite class="cite">SVRF Manual</cite>.</p>
<p class="p">Only devices satisfying the
condition in <span class="keyword ParameterName OptionalReplaceable">constraint_str</span> are
output to the report file. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__id0f77a43e-6142-4082-9bdb-15f2d51bb88e">-pinNetType {{<span class="keyword ParameterName OptionalReplaceable">pin_name_list</span>} {<span class="keyword ParameterName OptionalReplaceable">net_type_condition_list</span>} …}</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set that
selects devices that meet the option’s conditions. The specified
pins are checked to see if they have the specified net types.</p>
<p class="p">The <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> is
a Tcl list consisting of one or more pin names. At least one <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> with
a corresponding <span class="keyword ParameterName OptionalReplaceable">net_type_condition_list</span> must
be specified. If -type specifies a .SUBCKT name, then pin names
in the <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> come
from the .SUBCKT definition.</p>
<p class="p">The <span class="keyword ParameterName OptionalReplaceable">net_type_condition_list</span> must
be a Tcl list that defines a logical expression. A net meets the
condition if it satisfies the logical expression. This is the allowed
form:</p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__ide147dae9-1d2f-47cd-a6e2-cd675133b2df"><p class="p Opt">{[!]<span class="keyword ParameterName OptionalReplaceable">type_1</span> [<span class="keyword ParameterName OptionalReplaceable">operator</span> [!]<span class="keyword ParameterName OptionalReplaceable">type_2</span> [<span class="keyword ParameterName OptionalReplaceable">operator</span> …
[!]<span class="keyword ParameterName OptionalReplaceable">type_N</span>]]}</p>
</li>
</ul>
<p class="p">The <span class="keyword ParameterName OptionalReplaceable">type_N</span> arguments
are net types such as are created with the <a class="xref fm:HeadingOnly" href="Command_PercdefineNetType_id94dce3ed.html#id94dce3ed-08eb-4906-8920-4023848dda4b__Command_PercdefineNetType_id94dce3ed.xml#id94dce3ed-08eb-4906-8920-4023848dda4b" title="Assigns a net type to nets from an input list of net names.">perc::define_net_type</a>, <a class="xref fm:HeadingOnly" href="Command_PercdefineNetTypeByDevice_idddb1d861.html#idddb1d861-3213-4dfe-ac19-676ee8821ebc__Command_PercdefineNetTypeByDevice_idddb1d861.xml#idddb1d861-3213-4dfe-ac19-676ee8821ebc" title="Assigns a net type to nets that are connected to selected devices.">perc::define_net_type_by_device</a>, or <a class="xref fm:HeadingOnly" href="Command_PercdefineTypeSet_id4729110c.html#id4729110c-e73f-4c7b-8772-d111b3fd3cf4__Command_PercdefineTypeSet_id4729110c.xml#id4729110c-e73f-4c7b-8772-d111b3fd3cf4" title="Creates and assigns a new net type set from a list of net types.">perc::define_type_set</a> commands. If there is only one net
type, then the <span class="keyword ParameterName OptionalReplaceable">operator</span> is
omitted.</p>
<p class="p">The exclamation point (!) causes
logical negation of the net type following it. </p>
<p class="p">The <span class="keyword ParameterName OptionalReplaceable">operator</span> is
either logical AND (&amp;&amp;) or logical OR (||). The &amp;&amp;
operator has precedence over ||. For example, this expression:</p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__ida3ca0e8a-0f8d-4532-97d1-5476b7530192"><p class="p Opt">{labelA
|| labelB &amp;&amp; !ground}</p>
</li>
</ul>
<p class="p">means “labelA OR (labelB AND
not ground)”. </p>
<p class="p">You can manage the precedence
by using type sets. For example, suppose you have this command:</p>
<pre class="pre codeblock leveled"><code>perc::define_type_set any_label  {labelA || labelB} </code></pre><p class="p">Then the following expression:</p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__id9d84ce72-638b-4479-96ca-69805b59d52d"><p class="p Opt">{any_label
&amp;&amp; !ground}</p>
</li>
</ul>
<p class="p">means “(labelA OR labelB) AND
not ground”.</p>
<p class="p">A device meets the selection
criteria if <a class="xref fm:HeadingOnly" href="Command_PercisPinOfNetType_id6039ace9.html#id6039ace9-f4c6-409f-b83a-1104554eb691__Command_PercisPinOfNetType_id6039ace9.xml#id6039ace9-f4c6-409f-b83a-1104554eb691" title="Returns TRUE if at least one net meets the net type criteria for the given pins.">perc::is_pin_of_net_type</a> returns the value of 1 when applied
to the device where for each pair of <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> pins
and <span class="keyword ParameterName OptionalReplaceable">net_type_condition_list</span> condition,
at least one of the nets connected to the pins in <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> must
satisfy the corresponding <span class="keyword ParameterName OptionalReplaceable">net_type_condition_list. </span></p>
<p class="p">See “<a class="xref fm:HeadingAndPage" href="Concept_ImplicitBooleanOperationsInPinLists_ida46d06be.html#ida46d06be-d916-4f63-a2d9-bc6c8b39ae51__Concept_ImplicitBooleanOperationsInPinLists_ida46d06be.xml#ida46d06be-d916-4f63-a2d9-bc6c8b39ae51" title="Some Calibre PERC commands allow the specification of pin lists together with net or path types. Depending upon how the lists are specified, the lists can be interpreted as Boolean AND or OR conditions on the pins.">Implicit Boolean Operations in Pin Lists</a>” for details on specifying AND
and OR conditions for pin lists.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__id7967cca7-1b7d-47ce-9b45-593bb6310e8c">-pinPathType {{<span class="keyword ParameterName OptionalReplaceable">pin_name_list</span>} {<span class="keyword ParameterName OptionalReplaceable">path_type_condition_list</span>} …}</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set that
selects devices that meet option’s path type conditions. The construction
and semantics of the arguments for this option are similar to -pinNetType described
previously. The specified pins are checked to see if they connect
to nets having the specified path types.</p>
<p class="p">A device meets the specified
criteria if <a class="xref fm:HeadingOnly" href="Command_PercisPinOfPathType_idd5380828.html#idd5380828-3b49-4efc-a7fd-302c5df0dfa7__Command_PercisPinOfPathType_idd5380828.xml#idd5380828-3b49-4efc-a7fd-302c5df0dfa7" title="Returns TRUE if at least one path meets the path type criteria for the given pins.">perc::is_pin_of_path_type</a> returns the value of 1 when applied
to the device and each pair of <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> and <span class="keyword ParameterName OptionalReplaceable">path_type_condition_list</span>.
In other words, for each pair of <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> and <span class="keyword ParameterName OptionalReplaceable">path_type_condition_list</span>,
at least one of the nets connected to the pins in <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> must
satisfy the corresponding <span class="keyword ParameterName OptionalReplaceable">path_type_condition_list</span>. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__id97800a9b-a2e9-47b7-8bfd-2298cbf4ad4d">-pinNetVoltage {{<span class="keyword ParameterName OptionalReplaceable">pin_name_list</span>} {<span class="keyword ParameterName OptionalReplaceable">net_voltage_condition_list</span>} …}</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional
argument set that selects devices that meet the option’s conditions.
The specified pins are checked to see if they have the specified
voltages assigned to them. Pins connected to nets having voltages
that were propagated to them but not assigned to them are not considered.</p>
<p class="p">The <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> is
a Tcl list consisting of one or more pin names. At least one <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> with
a corresponding <span class="keyword ParameterName OptionalReplaceable">net_voltage_condition_list</span> must
be specified. If -type specifies a .SUBCKT name, then pin names
in the <span class="keyword ParameterName OptionalReplaceable">pin_name_list</span> come
from the .SUBCKT definition.</p>
<p class="p">The <span class="keyword ParameterName OptionalReplaceable">net_voltage_condition_list</span> must
be a Tcl list that defines a logical expression. A net meets the
condition if it satisfies the logical expression. This is the allowed
form:</p>
<p class="p BlockIndent">{ <span class="keyword ParameterName OptionalReplaceable">voltage_1</span> [
|| <span class="keyword ParameterName OptionalReplaceable">voltage_2</span> ]
... }</p>
<p class="p">where each <span class="keyword ParameterName OptionalReplaceable">voltage_N</span> argument
is a numeric or symbolic voltage. The || operator means logical
OR and is required when more than one voltage is specified. A symbolic
voltage is expanded into the underlying numeric voltage value for
subsequent processing and is reflected in the report.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__id02ac5362-a9d6-4d83-bb0a-0c91489da2a1">-pinPathVoltage {{<span class="keyword ParameterName OptionalReplaceable">pin_name_list</span>} {<span class="keyword ParameterName OptionalReplaceable">path_voltage_condition_list</span>} …}</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional
argument set that selects devices that meet the option’s conditions.
The construction and semantics of the arguments for this option
are similar to -pinNetVoltage described previously but apply to
path voltages instead (that is, both assigned and propagated voltages).</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__id6fca81cc-1742-4b89-a034-90116d22a498"><span class="keyword ParameterName Optional">-deviceCondition </span><span class="keyword ParameterName OptionalReplaceable">cond_proc</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set, where <span class="keyword ParameterName OptionalReplaceable">cond_proc</span> must
be a Tcl proc that takes an instance iterator passed from the command
as its only argument, and must return the value of 1 if the device
meets its condition and 0 otherwise. </p>
<p class="p">A device must meet the condition
set by <span class="keyword ParameterName OptionalReplaceable">cond_proc </span>in
order to be output to the report file. </p>
<p class="p">If the Calibre PERC system cache
is not empty, then Calibre PERC applies the <span class="keyword ParameterName OptionalReplaceable">cond_proc </span>to each
device stored in the cache. If the return value is 1 for a cached
device, it is a match and is written to the report file as a generated
result.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__id866b9e50-767f-4ea0-8dd0-1dcb6bf4ab53">-instanceAlso</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument that applies
the command criteria to cell instances in addition to primitive
devices.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__id1c1a1e9d-cfd7-4360-b190-4c17bf0f5ff9">-instanceOnly</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument that applies
the command criteria only to cell instances.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__id7f969271-0944-4fa1-9482-3fecdf8a357e"><span class="keyword ParameterName Optional">‑netType</span> <span class="keyword ParameterName OptionalReplaceable">net_type_condition_list</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set that
selects nets that meet the option’s net type condition. The <span class="keyword ParameterName OptionalReplaceable">net_type_condition_list</span> must
be a Tcl list that defines a logical expression. Nets having net types
that satisfy the logical expression are selected. (A net has a given
net type if <a class="xref fm:HeadingOnly" href="Command_PercisNetOfNetType_id49ed7fdd.html#id49ed7fdd-707f-40ce-b3cb-05ba11deb86a__Command_PercisNetOfNetType_id49ed7fdd.xml#id49ed7fdd-707f-40ce-b3cb-05ba11deb86a" title="Returns TRUE if the given net meets the net type criteria.">perc::is_net_of_net_type</a> returns
the value of 1 when applied to the net, and 0 otherwise.)</p>
<p class="p">This is the allowed form of
a <span class="keyword ParameterName OptionalReplaceable">net_type_condition_list</span>:</p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__id6bd170b1-88a7-4b50-8dc0-87613773f268"><p class="p Opt">{[!]<span class="keyword ParameterName OptionalReplaceable">type_1</span> [<span class="keyword ParameterName OptionalReplaceable">operator</span> [!]<span class="keyword ParameterName OptionalReplaceable">type_2</span> [<span class="keyword ParameterName OptionalReplaceable">operator</span> …
[!]type_N]]}</p>
</li>
</ul>
<p class="p">The <span class="keyword ParameterName OptionalReplaceable">type_N</span> arguments
are net types such as are created with the <a class="xref fm:HeadingOnly" href="Command_PercdefineNetType_id94dce3ed.html#id94dce3ed-08eb-4906-8920-4023848dda4b__Command_PercdefineNetType_id94dce3ed.xml#id94dce3ed-08eb-4906-8920-4023848dda4b" title="Assigns a net type to nets from an input list of net names.">perc::define_net_type</a>, <a class="xref fm:HeadingOnly" href="Command_PercdefineNetTypeByDevice_idddb1d861.html#idddb1d861-3213-4dfe-ac19-676ee8821ebc__Command_PercdefineNetTypeByDevice_idddb1d861.xml#idddb1d861-3213-4dfe-ac19-676ee8821ebc" title="Assigns a net type to nets that are connected to selected devices.">perc::define_net_type_by_device</a>, or <a class="xref fm:HeadingOnly" href="Command_PercdefineTypeSet_id4729110c.html#id4729110c-e73f-4c7b-8772-d111b3fd3cf4__Command_PercdefineTypeSet_id4729110c.xml#id4729110c-e73f-4c7b-8772-d111b3fd3cf4" title="Creates and assigns a new net type set from a list of net types.">perc::define_type_set</a> commands. </p>
<p class="p">The exclamation point (!) causes
logical negation of the net type following it. </p>
<p class="p">The <span class="keyword ParameterName OptionalReplaceable">operator</span> is
either logical AND (&amp;&amp;) or logical OR (||). If there is
only one net type, then the <span class="keyword ParameterName OptionalReplaceable">operator</span> is
omitted. </p>
<p class="p">The &amp;&amp; operator has
precedence over ||. For example, this expression:</p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__id57b871fe-6675-4684-882d-299192a6cea4"><p class="p Opt">{labelA
|| labelB &amp;&amp; !ground}</p>
</li>
</ul>
<p class="p">means “labelA OR (labelB AND
not ground)”. You can manage the precedence by using type sets.
For example, suppose you have this command:</p>
<pre class="pre codeblock leveled"><code>perc::define_type_set any_label  {labelA || labelB} </code></pre><p class="p">Then the following expression:</p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__id81932eac-a074-4166-bad1-bd6a4e24673c"><p class="p Opt">{any_label
&amp;&amp; !ground}</p>
</li>
</ul>
<p class="p">means “(labelA OR labelB) AND
not ground”.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__id528a28fd-d938-46c1-b2e0-20b9ff4f7c49">-<span class="keyword ParameterName Optional">pathType </span><span class="keyword ParameterName OptionalReplaceable">path_type_condition_list</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set that
selects nets that meet the option’s path type condition. The construction
of the arguments and semantics for this option are similar to -netType
but apply to path types instead (that is, both assigned and propagated
net types).</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__ida9649be3-085e-44c4-b881-e86018b15119">-netVoltage {<span class="keyword ParameterName OptionalReplaceable">net_voltage_condition_list</span>}</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional
argument set that selects nets that meet the option’s voltage condition.
Assigned voltages are checked by this option, while propagated voltages
are not.</p>
<p class="p">The <span class="keyword ParameterName OptionalReplaceable">net_voltage_condition_list</span> must
be a Tcl list that defines a logical expression. A net meets the
condition if it satisfies the logical expression. This is the allowed
form:</p>
<p class="p BlockIndent">{ <span class="keyword ParameterName OptionalReplaceable">voltage_1</span> [
|| <span class="keyword ParameterName OptionalReplaceable">voltage_2</span> ]
... }</p>
<p class="p">where each <span class="keyword ParameterName OptionalReplaceable">voltage_N</span> argument
is a numeric or symbolic voltage. The || operator means logical
OR and is required when more than one voltage is specified. A symbolic
voltage is expanded into the underlying numeric voltage value for
subsequent processing and is reflected in the report.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__id4a15877f-ffd4-4c1c-ac4e-e39f8060c701">-pathVoltage {<span class="keyword ParameterName OptionalReplaceable">path_voltage_condition_list</span>}</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional
argument set that selects nets that meet the option’s voltage condition.
The construction and semantics of the arguments for this option
are similar to -netVoltage described previously but apply to path
voltages instead (that is, both assigned and propagated voltages).</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__idab5e65f7-7aa7-4b60-8985-46c85f6d19ce">-netCondition <span class="keyword ParameterName OptionalReplaceable">cond_proc</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set, where <span class="keyword ParameterName OptionalReplaceable">cond_proc</span> must
be a Tcl proc that takes a net iterator passed from the command
as its only argument. The Tcl proc must return the value of 1 if the
net meets its condition and 0 otherwise. </p>
<p class="p">A net must meet the criteria
set by <span class="keyword ParameterName OptionalReplaceable">cond_proc</span> in
order to be output to the report file if ‑condition is specified. </p>
<p class="p">If the Calibre PERC system cache
is not empty, then the tool applies the <span class="keyword ParameterName OptionalReplaceable">cond_proc</span> to
each device stored in the cache. If the return value is 1 for a
cached device, it is a match and is output as a generated result.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__iddd5e98db-6fb1-4b0b-8ef9-bbe2f16fbdfb">-opaqueCell <span class="keyword ParameterName OptionalReplaceable">cell_name_list</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set that
causes the specified cells to be treated in isolation, with no element
promotions. The <span class="keyword ParameterName OptionalReplaceable">cell_name_list</span> must
be a Tcl list consisting of one or more cell names, and possibly
starting with the exclamation point (!), such as {cell_1 cell_2}
or {! cell_3 cell_4}. If the exclamation point is not present, then
the command applies only to the listed cells. However, if the exclamation
point is specified, then the command applies to all cells except
the ones listed. One or more asterisk (*) wildcards are allowed
in a cell name. This wildcard matches zero or more characters. </p>
<p class="p">See “<a class="xref fm:HeadingAndPage" href="Concept_HierarchyTraversalOpaquecell_id81e7e878.html#id81e7e878-7e09-46c9-acf7-1ddda1873aeb__Concept_HierarchyTraversalOpaquecell_id81e7e878.xml#id81e7e878-7e09-46c9-acf7-1ddda1873aeb" title="The high-level commands like perc::check_device, perc::check_net, perc::check_device_and_net check, and perc::check_data check objects cell-by-cell by default. When nets are processed in the context of these commands, they automatically perform net traversal across cell boundaries when needed in the context of the lowest cell in the hierarchy that completely contains a net.">Hierarchy Traversal and -opaqueCell</a>” for more
information about this option.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__ide1ee545f-7d10-407d-ad1c-810188d43937">-cellName <span class="keyword ParameterName OptionalReplaceable">cell_name_list</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set, where <span class="keyword ParameterName OptionalReplaceable">cell_name_list </span>must
be a Tcl list consisting of one or more cell names, and possibly
starting with the exclamation point (!), such as {cell_1 cell_2}
or {! cell_3 cell_4}. If the exclamation point is not present, then
the command applies only to the listed cells. If the exclamation
point is present, then the command applies to all cells except the
ones listed. One or more asterisk (*) wildcards are allowed in a
cell name. This wildcard matches zero or more characters.</p>
<p class="p">The top-level cell is not automatically
considered part of <span class="keyword ParameterName OptionalReplaceable">cell_name_list</span>.
However, Calibre PERC provides this reserved keyword for referencing
the top-level cell: </p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__id092102fa-3225-42b2-a6f5-6f294e85a16b"><p class="p Opt"><span class="ph FontProperty HeadingLabel">lvsTop</span> —
Generic cell name referring to the top-level cell.</p>
</li>
</ul>
</dd>
<dt class="dt ArgumentName dlterm" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__id49d4eb3d-524a-4323-bdd6-5d7169a5708d"><span class="keyword ParameterName Optional">-comment </span><span class="keyword ParameterName OptionalReplaceable">comment_str</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set, where <span class="keyword ParameterName OptionalReplaceable">comment_str</span> must
be a string.</p>
<p class="p">The string <span class="keyword ParameterName OptionalReplaceable">comment_str</span> is
written to the report file along with the results. </p>
</dd>
</dl>
</div>
</div>
<div class="section ReturnedValues"><h2 class="title Subheading sectiontitle">Return Values</h2><p class="p">None.</p>
</div>
<div class="section Examples" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__id4a16ca1f-b0e6-45e0-bf88-f6b8c4854a64"><h2 class="title Subheading sectiontitle">Examples</h2><div class="section Subsection" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__id42bd19f3-8e5e-40ba-9142-ad359026de99"><h2 class="title Subheading sectiontitle">Example 1</h2><p class="p">This example shows two ways of coding
the same check, one for perc::check_device_and_net and the other
for perc::check_net. The check is for back-to-back diode protection
of domain-crossing ground nets. The perc::check_device_and_net version
will be more efficient for power domain nets on large designs.</p>
<p class="p">This shows the perc::check_device_and_net
version.</p>
<pre class="pre codeblock leveled"><code>PERC PROPERTY MN W 
PERC PROPERTY D  A 
 
PERC LOAD aerc1 INIT aerc_init SELECT rule_1  
VARIABLE ground_domain_list "gnd_domain1 gnd_domain2 gnd_domain3" 
VARIABLE ground_domain_expr "gnd_domain1 &amp;&amp; gnd_domain2 || gnd_domain2 &amp;&amp; gnd_domain3 || gnd_domain3 &amp;&amp; gnd_domain1" 
VARIABLE gnd_domain1 "gnd1" 
VARIABLE gnd_domain2 "gnd2" 
VARIABLE gnd_domain3 "gnd3" 
 
TVF FUNCTION aerc1 [/* 
  package require CalibreLVS_PERC 
 
# set up the net types 
  proc aerc_init {} { 
    perc::define_net_type "Power"   {vdd?} 
    perc::define_net_type "Ground"  {gnd?} 
    perc::define_net_type_by_device "Gate" -type {MN} -pin {g} -cell 
    perc::define_net_type_by_device "SrcDrn" -type {MN} -pin {s d} -cell 
    set gnd_list [tvf::svrf_var ground_domain_list] 
    foreach gnd $gnd_list { \
      perc::define_net_type $gnd [tvf::svrf_var $gnd] } {
      set size [llength $gnd_list] 
      for {set i 0} {$i &lt; $size} {incr i} { 
        for {set j [expr {$i + 1}] } {$j &lt; $size} {incr j} { 
          set gnd  [lindex $gnd_list $i] 
          set gnd2 [lindex $gnd_list $j] 
          perc::define_net_type_by_device pos_$gnd$gnd2 -type D \
            -pinNetType "p $gnd n $gnd2" -pin p -cell 
          perc::define_net_type_by_device neg_$gnd$gnd2 -type D \
            -pinNetType "n $gnd p $gnd2" -pin n -cell 
          perc::define_net_type_by_device pos_$gnd2$gnd -type D \
            -pinNetType "p $gnd2 n $gnd" -pin p -cell 
          perc::define_net_type_by_device neg_$gnd2$gnd -type D \
            -pinNetType "n $gnd2 p $gnd" -pin n -cell 
        } 
      }  
      perc::create_net_path -type "MN" -pin {s d} -break {Power || Ground} 
      perc::copy_path_type  -type "MN" -pin g -fromPin d  
    } 
  }</code></pre><pre class="pre codeblock leveled"><code>
# Find ground domain crossing signals without diode protection. 
  proc rule_1 {} { 
    perc::check_device_and_net -type D \
      -pinNetType {p Ground n Ground} -deviceCondition dev_cond_1 \
      -netType { SrcDrn &amp;&amp; Gate &amp;&amp; !Power &amp;&amp; !Ground } \
      -pathType [tvf::svrf_var ground_domain_expr] \
      -netCondition net_cond_1 \
   -comment "Identify crossing ground domain signals that lack protection" 
  } 
 
  proc dev_cond_1 {dev} { 
# The passed-in $dev is a diode connected to two grounds, store it 
    perc::cache_device $dev 
    return 0 
  } 
 
  proc net_cond_1 {net} { 
# The passed-in $net is a crossing domain signal. 
# First check that the back-to-back diodes exist,  
# otherwise, report the violation right away. 
    set gnd_list [tvf::svrf_var ground_domain_list] 
    set size [llength $gnd_list] 
    for {set i 0} {$i &lt; $size} {incr i} { 
      for {set j [expr {$i + 1}] } {$j &lt; $size} {incr j} { 
        set gnd  [lindex $gnd_list $i] 
        set gnd2 [lindex $gnd_list $j] 
        if { [perc::is_net_of_path_type $net "$gnd &amp;&amp; $gnd2"] } { 
          if { ![perc::is_net_of_path_type $net \
            "pos_$gnd$gnd2 &amp;&amp; neg_$gnd$gnd2 &amp;&amp; pos_$gnd2$gnd \
             &amp;&amp; neg_$gnd2$gnd" ] } { 
             perc::report_base_result -title "Missing protection" 
             perc::report_base_result -title "$rcv_count Receivers:" \
               -list [list $rcv_list] 
             perc::report_base_result -title "$drv_count Drivers:" \
               -list [list $drv_list] 
             return 1 
          }; # end if 
        }; # end if 
      }; # end for 
    }; # end for 
 
# Here, we know $net is a crossing domain signal protected by back-to-back  
# diodes. 
# Now we need to follow the ground nets and actually find the diodes. 
# We would like to check the properties of the diodes, where the condition  
# is dependent on the properties of the drivers. 
    set result [perc::count -net $net -type {MN} -pinAtNet {S D} -list] 
    set drv_count [lindex $result 0] 
    set drv_list  [lindex $result 1] 
    set drv       [lindex $drv_list 0] 
 
# Assume the drivers are inverters 
    set gnd_net [perc::get_other_net_on_instance $drv $net S D] 
    set dio_list [perc::get_cached_device -net  $gnd_net -type D] 
    foreach dio $dio_list { 
      if { [perc::property $drv W] &lt; 20e-6 &amp;&amp; \
        [perc::property $dio A] &lt; 300e-6 } { 
# Found a violation 
        perc::report_base_result \
          -title "Diode too small for the driver" -list [list $drv $dio] 
        return 1 
      }; # end if 
    } ; # end foreach 
    return 0 
  } 
*/] </code></pre><p class="p">This shows the perc::check_net version,
which does the same thing as the preceding code.</p>
<pre class="pre codeblock leveled"><code>PERC PROPERTY MN W 
PERC PROPERTY D  A 
 
PERC LOAD aerc2 INIT aerc_init SELECT rule_1  
VARIABLE ground_domain_list "gnd_domain1 gnd_domain2 gnd_domain3" 
VARIABLE ground_domain_expr "gnd_domain1 &amp;&amp; gnd_domain2 || gnd_domain2 &amp;&amp; gnd_domain3 || gnd_domain3 &amp;&amp; gnd_domain1" 
VARIABLE gnd_domain1 "gnd1" 
VARIABLE gnd_domain2 "gnd2" 
VARIABLE gnd_domain3 "gnd3" 
 
TVF FUNCTION aerc2 [/* 
  package require CalibreLVS_PERC 
 
# set up the net types. 
  proc aerc_init {} { 
# USE CODE FROM PREVIOUS perc::check_device_and_net EXAMPLE. 
} 
 
# find ground domain crossing signals without diode protection. 
  proc rule_1 {} { 
    perc::check_net -netType { SrcDrn &amp;&amp; Gate &amp;&amp; !Power &amp;&amp; !Ground } \
      -pathType [tvf::svrf_var ground_domain_expr] -condition cond_1 \
      -comment "Identify crossing ground domains signals that lack \ protection" 
  } 
 
proc net_cond_1 {net} { 
  # USE CODE FROM PREVIOUS perc::check_device_and_net EXAMPLE. 
} 
 
*/] </code></pre><p class="p">In both of these examples, Tcl proc
aerc_init sets up the power and ground names.</p>
</div>
<div class="section Subsection" id="id05043298-b80d-45d8-a794-a7cd30bbdc71__id017895f7-3671-4ba1-ab88-37d92cfa6215"><h2 class="title Subheading sectiontitle">Example 2</h2><pre class="pre codeblock leveled"><code>TVF FUNCTION test_device_and_net_2 [/* 
package require CalibreLVS_PERC 
 
  proc check_device_and_net_2 {} { 
    perc::check_device_and_net -type D -pinNetType {p Ground n Ground} \
      -deviceCondition dev_cond_2 \
      -netType {GATE &amp;&amp; SD &amp;&amp; !Power &amp;&amp; !Ground} \
      -pathType {Avss &amp;&amp; Dvss} \
      -netCondition net_cond_2 \
      -comment "Mismatched inverter and back-to-back diodes" 
  } 
     
  proc dev_cond_2 {dev} { 
# The passed-in $dev is a diode connected to two grounds, store it 
    perc::cache_device $dev 
    return 0 
  } 
 
  proc net_cond_2 {net} { 
# The passed-in $net is a crossing signal between Avss and Dvss 
# For text clarity, assume the driver and receiver are inverters 
    set dio_list  [perc::get_cached_device -type D] 
    set dio_count [llength $dio_list] 
    if { $dio_count &lt; 2} { 
# Not enough diodes found, try again in the parent cell 
      perc::cache_net $net 
      return 0 
    } 
 
    set result    [perc::count -net $net -type {MN} -pinAtNet {g} -list] 
    set rcv_count [lindex $result 0] 
    set rcv_list  [lindex $result 1] 
    if { $rcv_count &lt; 1 } { 
# No receiver found, ignore 
      return 0 
    } 
 
    set result [perc::count -net $net -type {MN} -pinAtNet {S D} \
      -pinNetType {g !Ground} -list] 
    set drv_count [lindex $result 0] 
    set drv_list  [lindex $result 1] 
    if { $drv_count &lt; 1 } { 
# No driver found, ignore 
      return 0 
    } 
 
# At this point, data is ready. Do the actual checking. 
# Since the drivers, receivers, and diodes are promoted from 
# different cells, we need to find the diodes that are actually 
# connected to the two grounds between a driver and a receiver.  
    foreach drv $drv_list { 
      if { [perc::is_pin_of_net_type $drv S Ground] } { 
        set drv_net [perc::get_nets $drv -name s] 
      } else { 
        set drv_net [perc::get_nets $drv -name d] 
      } 
      foreach rcv $rcv_list { 
        if { [perc::is_pin_of_net_type $rcv S Ground] } { 
          set rcv_net [perc::get_nets $rcv -name s] 
        } else { 
          set rcv_net [perc::get_nets $rcv -name d] 
        } 
        foreach dio $dio_list { 
          set p_net [perc::get_nets $dio -name $p] 
          set n_net [perc::get_nets $dio -name $n] 
          if { [perc::equal $drv_net $p_net] &amp;&amp; \
               [perc::equal $rcv_net $n_net] || \
               [perc::equal $drv_net $n_net] &amp;&amp; \
               [perc::equal $rcv_net $p_net] } { 
# Verified that the diode is between the receiver and  
# driver’s ground nets. Need to check properties. 
            if { [perc::property $drv W] &lt; 20e-6 &amp;&amp; \
               [perc::property $dio W] &lt; 30e-6 } { 
# Found a violation 
                 return 1              
            }; # end if 
          }; # end if 
        }; # end foreach 
      }; # end foreach 
    }; # end foreach 
    return 0 
  } 
*/] </code></pre><p class="p">Tcl proc check_device_and_net_3
reports domain crossing nets that are not protected by ESD diodes
of suitable width. It processes the netlist cell-by-cell, in a bottom-up
order. Within each cell, it first checks devices and caches diodes
that are connected to ground nets at both pins.</p>
<p class="p">Note that it checks devices in this
cell, as well as cached devices promoted to this cell. Then it checks
nets, and caches the domain crossing nets if not enough diodes are
found in the cell. Again, it checks nets in this cell, as well as
cached nets promoted to this cell.</p>
<p class="p">The Tcl proc net_cond_3 first retrieves
cached diodes. These diodes may come from this cell, or they may
be cached in lower-level cells and promoted to this cell. The proc
then retrieves the drivers and receivers for the passed-in net.
For any particular net, not all data will be available in this cell,
in which case, this net will be processed again in a higher-level
cell. On the other hand, if all data is available in this cell,
then detailed checking is carried out and violations are reported,
if any.</p>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_RuleCheckCommands_id9b3d8e0b.html" title="Rule check commands appear in rule check procs and are used to check the design. Some rule check commands may be used in init procs. These are annotated in the notes to the tables in this section.">Rule Check Commands</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_perc_user"
                DocTitle = "Calibre® PERC™ User’s Manual"
                PageTitle = "perc::check_device_and_net"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_PerccheckDeviceAndNet_id05043298.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® PERC™ User’s Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>