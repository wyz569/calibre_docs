<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="perc::mark_unidirectional_placements" />
<meta name="abstract" content="Updates an internal table created by perc::create_unidirectional_path." />
<meta name="description" content="Updates an internal table created by perc::create_unidirectional_path." />
<meta name="prodname" content="Calibre PERC User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-25" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_perc_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="HighlightChanges" content="yes" />
<meta name="EclipsePluginName" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2;show" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® PERC™ User’s Manual" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P11493,product.id.P10099,product.id.P11347,product.id.P10084,product.id.P11427,product.id.P10116,product.id.P10096" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="ida560218c-6259-4131-935f-8a5bdaf65dd2" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>perc::mark_unidirectional_placements</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="perc::mark_unidirectional_placements" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P11493,product.id.P10099,product.id.P11347,product.id.P10084,product.id.P11427,product.id.P10116,product.id.P10096" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="ida560218c-6259-4131-935f-8a5bdaf65dd2">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">perc::mark_unidirectional_placements</h1>
<div class="body refbody CommandRefBody-Var1"><div class="abstract CommandRefAbstract"><p class="p ContextMGC">Calibre
PERC data access command.</p>
<p class="shortdesc">Updates an internal table created
by perc::create_unidirectional_path.</p>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName Required">perc::mark_unidirectional_placements</span> <span class="keyword ParameterName RequiredReplaceable">instance_iterator_list</span> </p>
</div>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">Given a list of instance iterators,
this command updates an internal table created by a previous call
to <a class="xref fm:HeadingOnly" href="Command_PerccreateUnidirectionalPath_id649e5f5e.html#id649e5f5e-490c-48d2-ba0c-9b2061fbdab8__Command_PerccreateUnidirectionalPath_id649e5f5e.xml#id649e5f5e-490c-48d2-ba0c-9b2061fbdab8" title="Configures voltage propagation to model current flow in one direction.">perc::create_unidirectional_path</a>. For all placements of each instance
passed in, this command marks those placements that are found in
the internal table as having been matched. During the subsequent
voltage iteration phase, matched instances pass voltage only in
the marked direction. Unmatched devices pass voltage bi-directionally,
unless the -noPatternMatch option was given to perc::create_unidirectional_path,
in which case all instance table entries pass voltage as unidirectional.</p>
<p class="p">This command is called in a rule
check procedure after the perc::create_unidirectional_path command
has been called in an initialization proc. Typical usage is inside
a Tcl procedure that employs pattern-matching to mark particular
devices found by perc::create_unidirectional_path.</p>
<p class="p">See “<a class="xref fm:HeadingAndPage" href="Contain_CodeGuidelinesUnidirectionalCurrentChecks_iddd0d1ab0.html#iddd0d1ab0-d5fb-49c0-8083-7893862fc978__Contain_CodeGuidelinesUnidirectionalCurrentChecks_iddd0d1ab0.xml#iddd0d1ab0-d5fb-49c0-8083-7893862fc978" title="Vector-less voltage propagation can cause impossible voltage configurations to be reported. For instance, MOSFETs have interchangeable S and D pins. In a passgate configuration, current can flow either from source to drain or from drain to source. Frequently, only one of these directions can logically occur, but it is generally difficult or impossible for Calibre PERC to determine which one without additional user programming.">Code Guidelines for Unidirectional Current Checks</a>” for a discussion of unidirectional
path checking.</p>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="ida560218c-6259-4131-935f-8a5bdaf65dd2__idab8d9108-58ac-4743-b9d2-21897197c8be"><span class="keyword ParameterName RequiredReplaceable">instance_iterator_list</span></dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument that is
a Tcl list of instance iterators. The instance iterators are created with
the <a class="xref fm:HeadingOnly" href="Command_PercgetInstancesInPattern_idaa4801f2.html#idaa4801f2-6232-41a4-8661-57ec3ea1aaee__Command_PercgetInstancesInPattern_idaa4801f2.xml#idaa4801f2-6232-41a4-8661-57ec3ea1aaee" title="Returns a list of instance iterators from a matched pattern.">perc::get_instances_in_pattern</a> command.</p>
</dd>
</dl>
</div>
</div>
<div class="section ReturnedValues"><h2 class="title Subheading sectiontitle">Return Values</h2><p class="p">None. </p>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><pre class="pre codeblock leveled"><code># load the unidirectional marking procs and the pattern file 
PERC LOAD test_mark_uni_placements INIT init_find SELECT demo_mark_uni_placements  
PERC PATTERN PATH unidirectional.pattern 
 
TVF FUNCTION test_mark_uni_placements [/* 
  package require CalibreLVS_PERC 
 
  # specify unidirectional nets and create a unidirectional path 
  proc init_find {} { 
    <a class="xref fm:HeadingOnly" href="Command_PercdefineNetType_id94dce3ed.html#id94dce3ed-08eb-4906-8920-4023848dda4b__Command_PercdefineNetType_id94dce3ed.xml#id94dce3ed-08eb-4906-8920-4023848dda4b" title="Assigns a net type to nets from an input list of net names.">perc::define_net_type</a> POWER {lvsPower} 
    perc::define_net_type GROUND {lvsGround} 
    perc::define_net_type uniDir {net1 net2} 

    <a class="xref fm:HeadingOnly" href="Command_PerccreateUnidirectionalPath_id649e5f5e.html#id649e5f5e-490c-48d2-ba0c-9b2061fbdab8__Command_PerccreateUnidirectionalPath_id649e5f5e.xml#id649e5f5e-490c-48d2-ba0c-9b2061fbdab8" title="Configures voltage propagation to model current flow in one direction.">perc::create_unidirectional_path</a> -outputNetType {uniDir} \
      -break {POWER || GROUND} 
  } 
 
  # find MN and MP devices on unidirectional nets that match 
  # particular netlist patterns 
  proc mark_patterns {} { 
    <a class="xref fm:HeadingOnly" href="Command_PerccheckDevice_id3faa8842.html#id3faa8842-b865-4759-8041-19b4db0d1f9a__Command_PerccheckDevice_id3faa8842.xml#id3faa8842-b865-4759-8041-19b4db0d1f9a" title="Matches each primitive device in the design by default. Devices that are selectively matched can be configured using the options.">perc::check_device</a> -type {MN MP} -pinPathType {{s d} {uniDir}}
      ‑condition demo_mark_uni_placements 
  } 
 
  proc demo_mark_uni_placements {dev} { 
    puts "user_pattern_match() checking instance=[<a class="xref fm:HeadingOnly" href="Command_Percname_idfec10dd1.html#idfec10dd1-a4a4-4a94-ad9f-1da475b6a82d__Command_Percname_idfec10dd1.xml#idfec10dd1-a4a4-4a94-ad9f-1da475b6a82d" title="Returns the name of the element pointed to by the iterator argument.">perc::name</a> $inst] \
in placement=[perc::name [<a class="xref fm:HeadingOnly" href="Command_PercgetPlacements_idbb97f715.html#idbb97f715-1a39-433c-af27-25ad6d2679ef__Command_PercgetPlacements_idbb97f715.xml#idbb97f715-1a39-433c-af27-25ad6d2679ef" title="Creates a placement representative iterator.">perc::get_placements</a> $inst]]" 
    set patternList "switch mux" 
    foreach pattern [split $patternList] { 
      set patternDevice "M1" 
      set patIter [<a class="xref fm:HeadingOnly" href="Command_PercgetOnePattern_id0b6dc0fc.html#id0b6dc0fc-6241-4679-9c86-7d0be6871edb__Command_PercgetOnePattern_id0b6dc0fc.xml#id0b6dc0fc-6241-4679-9c86-7d0be6871edb" title="Creates a pattern iterator.">perc::get_one_pattern</a> -patternType $pattern \
        ‑patternNode [list $patternDevice $inst]] 
      if { $patIter ne "" } {  
        puts "matched on instance=[perc::name $inst] \
          in placement=[perc::name [perc::get_placements $inst]] \
          path=[<a class="xref fm:HeadingOnly" href="Command_Percpath_id5d80dbea.html#id5d80dbea-9a91-418b-b2cb-81e1fef726d3__Command_Percpath_id5d80dbea.xml#id5d80dbea-9a91-418b-b2cb-81e1fef726d3" title="Returns the empty string if the element pointed to by the iterator argument is in the current cell. Otherwise the relative path to the subcell containing the element is returned.">perc::path</a> $inst -fromTop]" 
        puts "MATCHED pattern detected=$pattern device \
          detected=$patternDevice" 
        perc::mark_unidirectional_placements \
          [<a class="xref fm:HeadingOnly" href="Command_PercgetInstancesInPattern_idaa4801f2.html#idaa4801f2-6232-41a4-8661-57ec3ea1aaee__Command_PercgetInstancesInPattern_idaa4801f2.xml#idaa4801f2-6232-41a4-8661-57ec3ea1aaee" title="Returns a list of instance iterators from a matched pattern.">perc::get_instances_in_pattern</a> $patIter] 
  # NB: return 1 to see matched patterns (as "failures") in perc.report 
      return 1 
  #     return 0 
      } 
    } 
    puts "NO MATCH on instance=[perc::name $inst] \
      in placement=[perc::name [perc::get_placements $inst]] \
      path=[perc::path $inst -fromTop]" 
    return 0 
  } 
*/] 
 
PERC LOAD esd_voltage_rules INIT init_voltage SELECT uni_voltage_rule 
 
TVF FUNCTION esd_voltage_rules [/* 
  package require CalibreLVS_PERC 
 
# set up initialization conditions in the usual way 
  proc init_voltage {} { 
# voltages defined in voltages.txt 
    define_net_voltages_from_file voltages.txt 
    perc::define_net_type POWER  {lvsPower} 
    perc::define_net_type GROUND {lvsGround} 
    perc::create_voltage_path -type {MN MP} -pin {s d} \
      -break { POWER || GROUND } 
  } 
 
# read the voltages 
  proc define_net_voltages_from_file {file_name} { 
    set voltage_type_list {} 
    set voltage_set {} 
    set fn [open $file_name r] 
    while {[gets $fn line]&gt;=0 } { 
      if { [string trim $line] == {} } continue 
      lappend [lindex $line 1] [lindex $line 0] 
      if {[lsearch $voltage_type_list [lindex $line 1]] &lt; 0} { 
        lappend voltage_type_list [lindex $line 1] 
      }                 
    } 
    close $fn 
  
    foreach {voltage_type} $voltage_type_list { 
      puts "perc::define_net_voltage \"${voltage_type}\" \
        [subst \${${voltage_type}}]" 
      perc::define_net_voltage "${voltage_type}" \
        [subst \${${voltage_type}}] 
    } 
  } 
 
# check for MN and MP devices that match the patterns 
  proc uni_voltage_rule {} { 
    perc::check_device -type {MN MP} -condition check_for_pattern \
      -comment "Display Voltages" 
  } 
 
# check the M1 instance in the patterns and return voltage information 
  proc check_for_pattern {dev} { 
    set patternList "switch mux" 
    set inst "M1" 
    foreach pattern [split $patternList] { 
      set patIter${inst} [ perc::get_one_pattern -patternType $pattern \
        -patternNode [list $inst $dev] ] 
      if { [subst \${patIter${inst}}] ne "" } {  
        puts "pattern=$pattern instance=[perc::name $dev] in \
          placement=[perc::name [perc::get_placements $dev]]" 
      # rule check references go here 
        # set instance [perc::get_instances_in_pattern $patIter${inst}] 
        # foreach dev $instance { 
        # rulecheck $dev 
# in the absence of a rule check, just return 1 so the instance is reported 
        return 1 
      } 
    } 
    return 0 
  }  
*/] </code></pre><p class="p">Tcl proc demo_mark_uni_placements
shows typical usage of the perc::mark_unidirectional_placements
command. After a unidirectional net type and path are created in
the init_find proc, the mark_patterns proc searches for MN and MP
devices that have s/d pins on the unidirectional path, and which
match predefined patterns specified in the demo_mark_uni_placements
proc. The patterns would be specified in a <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'PERC Pattern Path', 'svrf_ur'); return false;">PERC Pattern Path </a>specification statement in the rule file.</p>
<p class="p">The perc::mark_unidirectional_placements
command ensures that only appropriate placements are marked. </p>
<p class="p">The esd_voltage_rules TVF FUNCTION
referenced in the second <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'PERC Load', 'svrf_ur'); return false;">PERC Load</a> statement contains
an initialization proc and a rule check proc. The check_for_pattern
proc checks for M1 instances that match the patterns for switch
and mux. Information about the instances is sent to the transcript
and to the PERC Report. References to rule check procs can be inserted
to do things like pin voltage checks.</p>
<p class="p">See “<a class="xref fm:HeadingAndPage" href="Concept_UnidirectionalPathSpecification_ida9406698.html#ida9406698-5a12-4cb4-82a3-cc67f3e8d82b__Concept_UnidirectionalPathSpecification_ida9406698.xml#ida9406698-5a12-4cb4-82a3-cc67f3e8d82b" title="Unidirectional path specification can employ either the perc::create_unidirectional_path command, or the perc::create_voltage_path command with a -pinVoltage procedure.">Unidirectional Path Specification</a>” for additional details regarding
unidirectional path checks.</p>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_RuleCheckCommands_id9b3d8e0b.html" title="Rule check commands appear in rule check procs and are used to check the design. Some rule check commands may be used in init procs. These are annotated in the notes to the tables in this section.">Rule Check Commands</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_perc_user"
                DocTitle = "Calibre® PERC™ User’s Manual"
                PageTitle = "perc::mark_unidirectional_placements"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_PercmarkUnidirectionalPlacements_ida560218c.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® PERC™ User’s Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>