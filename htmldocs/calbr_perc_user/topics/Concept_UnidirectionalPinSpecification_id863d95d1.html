<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Unidirectional Pin Specification" />
<meta name="abstract" content="Unidirectional pin specification employs the perc::define_unidirectional_pin command. It is used to mark selected device pins as unidirectional. This is a simple approach because all it requires is to add this command as many times as needed to your initialization procedure." />
<meta name="description" content="Unidirectional pin specification employs the perc::define_unidirectional_pin command. It is used to mark selected device pins as unidirectional. This is a simple approach because all it requires is to add this command as many times as needed to your initialization procedure." />
<meta name="prodname" content="Calibre PERC User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-25" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_perc_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="HighlightChanges" content="yes" />
<meta name="EclipsePluginName" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2;show" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® PERC™ User’s Manual" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P11493,product.id.P10099,product.id.P11347,product.id.P10084,product.id.P11427,product.id.P10116,product.id.P10096" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id863d95d1-c91b-4cde-851e-8aae1af7644f" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Unidirectional Pin Specification</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Unidirectional Pin Specification" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P11493,product.id.P10099,product.id.P11347,product.id.P10084,product.id.P11427,product.id.P10116,product.id.P10096" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id863d95d1-c91b-4cde-851e-8aae1af7644f">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Unidirectional Pin Specification</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">Unidirectional
pin specification employs the perc::define_unidirectional_pin command.
It is used to mark selected device pins as unidirectional. This
is a simple approach because all it requires is to add this command
as many times as needed to your initialization procedure.</span>
</div>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">If you want all devices of a particular type
to behave as unidirectional and you know in advance which pins to
apply voltages to, then perc::create_voltage_path with the ‑pinVoltage
option is better suited to that purpose. This method also permits
finer control of propagated voltages.</p>
</div>
<p class="p">The <a class="xref fm:HeadingOnly" href="Command_PercdefineUnidirectionalPin_id568455b0.html#id568455b0-5b16-48da-ab20-4d44f5585f28__Command_PercdefineUnidirectionalPin_id568455b0.xml#id568455b0-5b16-48da-ab20-4d44f5585f28" title="Specifies pins that allow current flow in one direction.">perc::define_unidirectional_pin</a> command does not traverse device
pins (circuit paths) and does not support pattern matching to restrict
unidirectional device marking.</p>
<p class="p">In the following example, there are two input
ports, A1 and A2, whose voltage values are to be measured on output
port PASS. Port A1 is part of power domain VDDH at 2 volts. Port
A2 is part of power domain VDDL at 1 volt. To probe the voltage
from port A1 on port PASS (and respectively, port A2), “switch”
instances X3 and X6 exist (respectively, X4 and X6).</p>
<p class="p">With vector-less voltage propagation, there
is no way to control the direction of propagation. As a result,
voltage from power domain VDDH propagates across switch X3 (OK)
and switch X4 (not OK) and reaches inverter instance X2, which it
should not. Instances X4 and X3 are exclusive and cannot be part
of the same propagation path. Hence, we need to find a way to control
voltage propagation across the switches to remove false errors in
instance X2.</p>
<div class="fig fignone ExampleTitle" id="id863d95d1-c91b-4cde-851e-8aae1af7644f__ided888f36-ca61-40a3-be28-dfb86b011efb"><span class="figcap"><span class="fig--title-label">Example 1. </span>Unidirectional
Pin Check</span><pre class="pre codeblock leveled"><code>.SUBCKT inv in out vdd vss  
MP_INV_HI vdd in out vdd P  
MN_INV_HI out in vss vss N  
.ENDS inv 
 
.SUBCKT inv_ov1 in out vdd vss 
MP_INV_LO out in vdd vdd PL  
MN_INV_LO out in vss vss NL  
.ENDS inv_ov1 
 
.SUBCKT switch in ctrl out vss vdd  
MN_SW_HI in ctrln out vss N  
MP_SW_HI in ctrl out vdd P  
XS ctrl ctrln vdd vss inv  
.ENDS switch  
 
.SUBCKT TOP A1 A2 PASS GND VDDL VDDH CTRL1 CTRL2  
X0 A1  in1 VDDH GND inv  
X1 A2  in2 VDDL GND inv_ov1  
X2 in2 in3 VDDL GND inv_ov1  
X3 in1 CTRL1  out GND VDDH switch  
X4 in3 nctrl1 out GND VDDH switch  
X5 CTRL1 nctrl1 VDDH GND inv  
X6 out CTRL2 PASS GND VDDH switch  
.ENDS TOP  </code></pre></div>
<p class="p">Assume the following initial voltages:</p>
<pre class="pre codeblock leveled"><code>VDDH 2 
VDDL 1 
GND  0 </code></pre><p class="p">A vector-less rule check might yield results
like this for subcircuit inv_ov1:</p>
<pre class="pre codeblock leveled"><code>1    MN_INV_LO [ MN(NL) ]  (1 placement, LIST# = L1) 
         g: IN [ ] [ ] [ ] [ 0 1 ] 
         s: VSS [ GROUND ] [ GROUND ] [ 0 ] [ 0 ] 
         d: OUT [ ] [ ] [ ] [ 0 1 2 ] 
         b: VSS [ GROUND ] [ GROUND ] [ 0 ] [ 0 ] </code></pre><p class="p">Two non-zero voltages are not possible for
the OUT net, so unidirectional voltage propagation is needed to
ensure this does not occur.</p>
<p class="p">The following rule file excerpt can be used
to mitigate the unwanted result by using unidirectional pin assignments.</p>
<pre class="pre codeblock leveled"><code>PERC LOAD uni_pin INIT init_erc SELECT voltage_check 
 
TVF FUNCTION uni_pin [/* 
 
  package require CalibreLVS_PERC 
 
  proc init_erc {} { 
   
# set the initial voltage conditions 
    <a class="xref fm:HeadingOnly" href="Command_PercdefineVoltageInterval_id97b2b367.html#id97b2b367-5449-4921-859a-30bc2e61d886__Command_PercdefineVoltageInterval_id97b2b367.xml#id97b2b367-5449-4921-859a-30bc2e61d886" title="Specifies voltage resolution.">perc::define_voltage_interval</a> -min 0.0 -max 3.0 -interval 1.0 
 
    <a class="xref fm:HeadingOnly" href="Command_PercdefineNetType_id94dce3ed.html#id94dce3ed-08eb-4906-8920-4023848dda4b__Command_PercdefineNetType_id94dce3ed.xml#id94dce3ed-08eb-4906-8920-4023848dda4b" title="Assigns a net type to nets from an input list of net names.">perc::define_net_type</a> POWER  {VDDL} 
    <a class="xref fm:HeadingOnly" href="Command_PercdefineNetVoltage_id8609d11e.html#id8609d11e-ac3a-4e2d-9cc8-552555478d23__Command_PercdefineNetVoltage_id8609d11e.xml#id8609d11e-ac3a-4e2d-9cc8-552555478d23" title="Assigns a voltage to a list of named nets.">perc::define_net_voltage</a> 1   {VDDL} 
 
    perc::define_net_type POWER  {VDDH} 
    perc::define_net_voltage 2   {VDDH} 
 
    perc::define_net_type GROUND {GND} 
    perc::define_net_voltage 0   {GND} </code></pre><pre class="pre codeblock leveled"><code># define unidirectional pins explicitly 
    <a class="xref fm:HeadingOnly" href="Command_PercdefineUnidirectionalPin_id568455b0.html#id568455b0-5b16-48da-ab20-4d44f5585f28__Command_PercdefineUnidirectionalPin_id568455b0.xml#id568455b0-5b16-48da-ab20-4d44f5585f28" title="Specifies pins that allow current flow in one direction.">perc::define_unidirectional_pin</a> -net OUT -cellInstance { X3 X4 X6 } 
# test other configurations 
#   perc::define_unidirectional_pin -net OUT \
#     -device { MN_SW_HI MP_SW_HI } -cellInstance { X3 X4 X6 } 
#   perc::define_unidirectional_pin -net OUT \
#     -device { MN_SW_HI MP_SW_HI } -cellInstance { X3 X4 } 
#   perc::define_unidirectional_pin -net OUT \
#     -device { MN_SW_HI MP_SW_HI } -cellInstance { X4 } 
#   perc::define_unidirectional_pin -net OUT 
 
    <a class="xref fm:HeadingOnly" href="Command_PerccreateVoltagePath_id2094c0cf.html#id2094c0cf-1da3-41d7-9049-860de10b6ca7__Command_PerccreateVoltagePath_id2094c0cf.xml#id2094c0cf-1da3-41d7-9049-860de10b6ca7" title="Enables voltage propagation through selected devices and pins.">perc::create_voltage_path</a> -type {MN} -pin {s d} \
      -break {POWER || GROUND} 
    perc::create_voltage_path -type {MP} -pin {s d} \
  } </code></pre><pre class="pre codeblock leveled"><code># print voltages in the transcript for tracking purposes 
  proc display_voltages {dev} { 
    puts "  device name: [<a class="xref fm:HeadingOnly" href="Command_Percname_idfec10dd1.html#idfec10dd1-a4a4-4a94-ad9f-1da475b6a82d__Command_Percname_idfec10dd1.xml#idfec10dd1-a4a4-4a94-ad9f-1da475b6a82d" title="Returns the name of the element pointed to by the iterator argument.">perc::name</a> $dev]" 
    set pin [<a class="xref fm:HeadingOnly" href="Command_PercgetPins_idcfb94cf6.html#idcfb94cf6-a4dc-4442-ac03-614d308693ed__Command_PercgetPins_idcfb94cf6.xml#idcfb94cf6-a4dc-4442-ac03-614d308693ed" title="Creates a pin iterator.">perc::get_pins</a> $dev] 
    while {$pin ne ""} { 
      set pin_name [perc::name $pin] 
      set uv [<a class="xref fm:HeadingOnly" href="Command_PercvoltageMax_ida5217c7b.html#ida5217c7b-ab7c-4d86-894a-1ce9355a32ee__Command_PercvoltageMax_ida5217c7b.xml#ida5217c7b-ab7c-4d86-894a-1ce9355a32ee" title="Returns the maximum voltage for an instance’s pin.">perc::voltage_max</a> $dev $pin_name] 
      set lv [<a class="xref fm:HeadingOnly" href="Command_PercvoltageMin_id209a3f13.html#id209a3f13-3368-4085-b325-0678fbe219d8__Command_PercvoltageMin_id209a3f13.xml#id209a3f13-3368-4085-b325-0678fbe219d8" title="Returns the minimum voltage for an instance’s pin.">perc::voltage_min</a> $dev $pin_name] 
      puts "  pin=$pin_name V(max,min)=($uv,$lv)" 
      <a class="xref fm:HeadingOnly" href="Command_Percinc_iddc737eea.html#iddc737eea-a394-4075-9bfb-2485eb98c208__Command_Percinc_iddc737eea.xml#iddc737eea-a394-4075-9bfb-2485eb98c208" title="Increments the given iterator to point to the next entry.">perc::inc</a> pin 
    } 
    puts "" 
    return 0 
  } </code></pre><pre class="pre codeblock leveled"><code># check over-voltage conditions 
  proc ov_cond_check {dev} { 
 
# get the maximum and minimum voltages for all pins 
# if a voltage is not present then skip voltage comparison 
 
    set uvd [perc::voltage_max $dev "d"] 
    if { $uvd == "" } { return 0 } 
    set lvd [perc::voltage_min $dev "d"] 
 
    set uvg [perc::voltage_max $dev "g"] 
    if { $uvg == "" } { return 0 } 
    set lvg [perc::voltage_min $dev "g"] 
 
    set uvs [perc::voltage_max $dev "s"] 
    if { $uvs == "" } { return 0 }  
    set lvs [perc::voltage_min $dev "s"] 
 
    set uvb [perc::voltage_max $dev "b"] 
    if { $uvb == "" } { return 0 } 
    set uvg [perc::voltage_max $dev "g"] </code></pre><pre class="pre codeblock leveled"><code># differences &gt; 1.5 volts are an over-voltage condition, set an error flag 
 
# max gate - min bulk 
  set c1 [ expr {($uvg-$lvb) &gt; 1.5} ] 
# max gate - min source 
  set c2 [ expr {($uvg-$lvs) &gt; 1.5} ] 
# max gate - min drain 
  set c3 [ expr {($uvg-$lvd) &gt; 1.5} ] 
# max bulk - min gate 
  set c4 [ expr {($uvb-$lvg) &gt; 1.5} ] 
# max source - min gate 
  set c5 [ expr {($uvs-$lvg) &gt; 1.5} ] 
# max drain - min gate 
  set c6 [ expr {($uvd-$lvg) &gt; 1.5} ] 
  set result [ expr {$c1 + $c2 + $c3 + $c4 + $c5 + $c6} ] </code></pre><pre class="pre codeblock leveled"><code># if any of the conditions are true, there is an error 
# output this to the transcript 
  if { $result &gt; 0 } { 
    puts "*************************" 
    puts "* Overvoltage Violation *" 
    puts "*************************" 
    if { [expr {$c1 + $c4}] &gt; 0 } { puts "&gt;&gt;GATE-BASE over-voltage" } 
    if { [expr {$c2 + $c5}] &gt; 0 } { puts "&gt;&gt;GATE-SOURCE over-voltage" } 
    if { [expr {$c3 + $c6}] &gt; 0 } { puts "&gt;&gt;GATE-DRAIN over-voltage" } 
    display_voltages $dev 
    return 1 
  } 
  return 0 
} </code></pre><pre class="pre codeblock leveled"><code># low voltage MOS check 
  proc voltage_check {} { 
    <a class="xref fm:HeadingOnly" href="Command_PerccheckDevice_id3faa8842.html#id3faa8842-b865-4759-8041-19b4db0d1f9a__Command_PerccheckDevice_id3faa8842.xml#id3faa8842-b865-4759-8041-19b4db0d1f9a" title="Matches each primitive device in the design by default. Devices that are selectively matched can be configured using the options.">perc::check_device</a> -type {MP MN} -subtype {NL PL} \
      -condition ov_cond_check -comment "Thin oxide over-voltage detected" 
  } 
*/] </code></pre><p class="p">Tcl proc init_erc sets up the initial voltage
conditions for the supply nets. Because the out net inside the switch
subcircuit is causing the issue, the three instances of the subcircuit
are declared in a perc::define_unidirectional_pin command. This
is more than necessary because only instance X4 requires unidirectional
marking.</p>
<p class="p">The rest of the uni_pin TVF FUNCTION block
is a generic over-voltage check for thin oxide MOS devices.</p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_CodeGuidelinesUnidirectionalCurrentChecks_iddd0d1ab0.html" title="Vector-less voltage propagation can cause impossible voltage configurations to be reported. For instance, MOSFETs have interchangeable S and D pins. In a passgate configuration, current can flow either from source to drain or from drain to source. Frequently, only one of these directions can logically occur, but it is generally difficult or impossible for Calibre PERC to determine which one without additional user programming.">Code Guidelines for Unidirectional Current Checks</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../topics/Concept_VoltageCheckCoding_id11b112f0.html" title="As for any topology checking in Calibre PERC, voltage checking uses both initialization procedures and rule checking procedures. Initialization procedures set up the voltage checking environment by specifying initial voltages and the paths along which those voltages may be propagated throughout the design. Rule checking procedures check voltage conditions in the design based upon the initialization conditions.">Voltage Check Coding</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_perc_user"
                DocTitle = "Calibre® PERC™ User’s Manual"
                PageTitle = "Unidirectional Pin Specification"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_UnidirectionalPinSpecification_id863d95d1.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® PERC™ User’s Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>