<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Example: Finding Floating Gates" />
<meta name="abstract" content="This example uses perc::voltage to find MOS gates where the device is MN or MP, and the gate is undriven. This check employs vectored analysis, so source voltages and input signal voltages are specified." />
<meta name="description" content="This example uses perc::voltage to find MOS gates where the device is MN or MP, and the gate is undriven. This check employs vectored analysis, so source voltages and input signal voltages are specified." />
<meta name="prodname" content="Calibre PERC User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-25" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_perc_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="HighlightChanges" content="yes" />
<meta name="EclipsePluginName" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2;show" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® PERC™ User’s Manual" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P11493,product.id.P10099,product.id.P11347,product.id.P10084,product.id.P11427,product.id.P10116,product.id.P10096" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id47d5ad77-1635-47f7-869c-462069b1f3bb" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Example: Finding Floating Gates</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Example: Finding Floating Gates" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P11493,product.id.P10099,product.id.P11347,product.id.P10084,product.id.P11427,product.id.P10116,product.id.P10096" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id47d5ad77-1635-47f7-869c-462069b1f3bb">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Example: Finding Floating Gates</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><span class="shortdesc">This example
uses perc::voltage to find MOS gates where the device is MN or MP,
and the gate is undriven. This check employs vectored analysis,
so source voltages and input signal voltages are specified. </span>
</div>
<div class="section prereq Prerequisites p"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Prerequisites</h2></div><ul class="ul"><li class="li" id="id47d5ad77-1635-47f7-869c-462069b1f3bb__idea9253da-e1cf-4e3b-a969-878b9b3d8a02"><p class="p">You
understand voltage propagation as discussed under “<a class="xref fm:HeadingAndPage" href="Concept_ConnectivityBasedVoltagePropagation_idde127dbd.html#idde127dbd-0c53-4f7c-b790-f5dfb04aeb93__Concept_ConnectivityBasedVoltagePropagation_idde127dbd.xml#idde127dbd-0c53-4f7c-b790-f5dfb04aeb93" title="Calibre PERC employs static, connectivity-based voltage propagation. Unlike dynamic circuit simulators, Calibre PERC voltage propagation does not consider resistance or current. Voltage labels are passed along well-defined paths and are subsequently checked by rules.">Connectivity-Based Voltage Propagation</a>”.</p>
</li>
<li class="li" id="id47d5ad77-1635-47f7-869c-462069b1f3bb__id2c52dd1c-a813-472f-88a9-42a5da33e1b7"><p class="p">You
have created a file called <span class="ph filepath">utilities.tcl</span>,
which contains the Tcl procs discussed under “<a class="xref fm:HeadingAndPage" href="Concept_UsefulUtilityProcedures_ide324021e.html#ide324021e-abe0-4793-bc35-3ee9d47a4885__Concept_UsefulUtilityProcedures_ide324021e.xml#ide324021e-abe0-4793-bc35-3ee9d47a4885" title="Three useful utility procedures can be used for Calibre PERC voltage assignment and propagation reporting.">Useful Utility Procedures</a>”.</p>
</li>
</ul>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand" id="id47d5ad77-1635-47f7-869c-462069b1f3bb__id755e1b8f-4863-41ac-a420-9e635ea20e34"><span class="ph cmd">Start your
rule file with this code</span><div class="itemgroup info StepInfo"><pre class="pre codeblock"><code>PERC LOAD voltage.lib INIT init_7 SELECT rule_7 
 
TVF FUNCTION voltage.lib [/* 
package require CalibreLVS_PERC</code></pre></div></li>
<li class="li step stepexpand" id="id47d5ad77-1635-47f7-869c-462069b1f3bb__id95900077-fb28-426e-a0e4-f3c9239b83a5"><span class="ph cmd">Create
a vectored voltages file called <span class="ph filepath">voltages.txt</span>,
as discussed under “<a class="xref fm:HeadingAndPage" href="Concept_UsefulUtilityProcedures_ide324021e.html#ide324021e-abe0-4793-bc35-3ee9d47a4885__Concept_UsefulUtilityProcedures_ide324021e.xml#ide324021e-abe0-4793-bc35-3ee9d47a4885" title="Three useful utility procedures can be used for Calibre PERC voltage assignment and propagation reporting.">Useful Utility Procedures</a>”. Here is an example:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>vdd  3.3 
vss  0.0 
vddl 1.8 
vddh 3.3 
in1  1.8
in2  1.8
in3  1.8 </code></pre></div></li>
<li class="li step stepexpand" id="id47d5ad77-1635-47f7-869c-462069b1f3bb__id754acd4d-3613-4b91-84a2-c3e49b2b75e2"><span class="ph cmd">In the
voltage.lib TVF Function block you started for the rules, enter
this line:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock"><code>source utilities.tcl</code></pre></div></li>
<li class="li step stepexpand" id="id47d5ad77-1635-47f7-869c-462069b1f3bb__id04539e5d-3442-4c11-8da1-a8d2ca32d93c"><span class="ph cmd">In the voltage.lib TVF Function
block, start the initialization procedure by calling the <a class="xref fm:HeadingOnly" href="Concept_UsefulUtilityProcedures_ide324021e.html#ide324021e-abe0-4793-bc35-3ee9d47a4885__id0c811fc9-a1b8-435a-ab42-65738390412f">define_net_voltages_from_file proc</a> in <span class="ph FontProperty emphasis">utilities.tcl</span>.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>proc init_7 {} { 
 
#----------Voltage definitions------------ 
 
# Required voltage definitions 
# The check this proc supports uses switching, so input voltages 
# are expected in addition to rail voltages. 
 
    define_net_voltages_from_file voltages.txt </code></pre><p class="p">This portion of the initialization
proc defines the net voltages for the design.</p>
</div></li>
<li class="li step stepexpand" id="id47d5ad77-1635-47f7-869c-462069b1f3bb__id1bc66a1c-33de-4c64-90ca-2347d132a983"><span class="ph cmd">Define the power and ground
net types.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code># Required to define -break net types 
    <a class="xref fm:HeadingOnly" href="Command_PercdefineNetType_id94dce3ed.html#id94dce3ed-08eb-4906-8920-4023848dda4b__Command_PercdefineNetType_id94dce3ed.xml#id94dce3ed-08eb-4906-8920-4023848dda4b" title="Assigns a net type to nets from an input list of net names.">perc::define_net_type</a> power  { VDD? } 
    perc::define_net_type ground { VSS? } </code></pre></div></li>
<li class="li step stepexpand" id="id47d5ad77-1635-47f7-869c-462069b1f3bb__id68f6e458-5bba-4fa1-8517-57548a096316"><span class="ph cmd">Define the voltage paths.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>#---------Propagation definitions---------- 
 
    <a class="xref fm:HeadingOnly" href="Command_PerccreateVoltagePath_id2094c0cf.html#id2094c0cf-1da3-41d7-9049-860de10b6ca7__Command_PerccreateVoltagePath_id2094c0cf.xml#id2094c0cf-1da3-41d7-9049-860de10b6ca7" title="Enables voltage propagation through selected devices and pins.">perc::create_voltage_path</a> -type {MN} -on "g+ &gt; 1.6" -pin {s d} \
     -break { power || ground } 
    perc::create_voltage_path -type {MP} -on "g- &gt; 1.6" -pin {s d} 
} </code></pre><div class="note note"><span class="notetitle">Note:</span> <p class="p">Only
one -break condition option is needed, as it applies to all perc::create_voltage_path commands
in the initialization proc.</p>
</div>
</div></li>
<li class="li step stepexpand" id="id47d5ad77-1635-47f7-869c-462069b1f3bb__id922c5339-3680-426f-a363-06d42ffb8a0b"><span class="ph cmd">Define the rule check in two
procedures.</span><ol type="a" class="ol substeps"><li class="li substep" id="id47d5ad77-1635-47f7-869c-462069b1f3bb__idd91ba71a-4995-4e8c-9851-a9f73dc6ece8"><span class="ph cmd">The first procedure finds
all MN and MP devices and calls a -condition procedure.</span><div class="itemgroup info SubStepInfo"><pre class="pre codeblock leveled"><code>#---------Floating gates check---------- 
 
  proc rule_7 {} { 
    <a class="xref fm:HeadingOnly" href="Command_PerccheckDevice_id3faa8842.html#id3faa8842-b865-4759-8041-19b4db0d1f9a__Command_PerccheckDevice_id3faa8842.xml#id3faa8842-b865-4759-8041-19b4db0d1f9a" title="Matches each primitive device in the design by default. Devices that are selectively matched can be configured using the options.">perc::check_device</a> -type {MN MP} \
      -condition floating_gates_cond \
      -comment "Warning: Floating Gate" 
  } </code></pre></div></li>
<li class="li substep" id="id47d5ad77-1635-47f7-869c-462069b1f3bb__id41d21d0a-3364-45d3-b42d-8d1c15bd4c11"><span class="ph cmd">The -condition proc checks
if the gate pin is undriven:</span><div class="itemgroup info SubStepInfo"><pre class="pre codeblock leveled"><code># Binary-valued condition proc to determine whether gate floats. 
# Return value of 1 indicates a non-driven gate; 
# return value of 0 indicates the gate is driven by a  
# single voltage. 
 
  proc floating_gates_cond {dev} { 
    set pv1 [<a class="xref fm:HeadingOnly" href="Command_Percvoltage_id84e75b60.html#id84e75b60-58d3-47f4-b206-1f2333157773__Command_Percvoltage_id84e75b60.xml#id84e75b60-58d3-47f4-b206-1f2333157773" title="Returns voltage values for a net or pin.">perc::voltage</a> [<a class="xref fm:HeadingOnly" href="Command_PercgetPins_idcfb94cf6.html#idcfb94cf6-a4dc-4442-ac03-614d308693ed__Command_PercgetPins_idcfb94cf6.xml#idcfb94cf6-a4dc-4442-ac03-614d308693ed" title="Creates a pin iterator.">perc::get_pins</a> $dev -name "g"] -path] 
    if { [llength $pv1] != 1 } {  
      puts "subckt [<a class="xref fm:HeadingOnly" href="Command_Percname_idfec10dd1.html#idfec10dd1-a4a4-4a94-ad9f-1da475b6a82d__Command_Percname_idfec10dd1.xml#idfec10dd1-a4a4-4a94-ad9f-1da475b6a82d" title="Returns the name of the element pointed to by the iterator argument.">perc::name</a> [<a class="xref fm:HeadingOnly" href="Command_PercgetPlacements_idbb97f715.html#idbb97f715-1a39-433c-af27-25ad6d2679ef__Command_PercgetPlacements_idbb97f715.xml#idbb97f715-1a39-433c-af27-25ad6d2679ef" title="Creates a placement representative iterator.">perc::get_placements</a> $dev]] \
        instance [perc::name $dev -fromTop] gate voltages: $pv1" 
       return 1  
    } 
    return 0 
  } </code></pre><p class="p">The puts command sends information
about gate voltages to the run transcript. This can output a large
number of lines; hence, it’s mainly useful for rule file development
and debugging.</p>
</div></li>
</ol>
</li>
<li class="li step stepexpand" id="id47d5ad77-1635-47f7-869c-462069b1f3bb__ide442af40-b63d-4ba9-99f6-2e28ecf36c57"><span class="ph cmd">End the rule file with this
line:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock"><code>*/]</code></pre><p class="p">The complete rule check is as follows:</p>
</div><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>PERC LOAD voltage.lib INIT init_7 SELECT rule_7 
 
TVF FUNCTION voltage.lib [/* 
package require CalibreLVS_PERC 
 
source utilities.tcl 
 
###################################################################
### RULE 7 
########## 
 
  proc init_7 {} { 
 
#----------Voltage definitions------------ 
 
# Required voltage definitions 
# The check this proc supports uses switching, so input voltages 
# are expected in addition to rail voltages. 
 
    define_net_voltages_from_file voltages.txt 
 
# Required to define -break net types 
    perc::define_net_type power  { VDD? } 
    perc::define_net_type ground { VSS? } </code></pre><pre class="pre codeblock leveled"><code>#---------Propagation definitions---------- 
 
    perc::create_voltage_path -type {MN} -on "g+ &gt; 1.6" -pin {s d} \
      -break { power || ground } 
    perc::create_voltage_path -type {MP} -on "g- &gt; 1.6" -pin {s d} 
 
} 

#---------Floating gates check---------- 
 
  proc rule_7 {} { 
    perc::check_device -type {MN MP} \
      -condition floating_gates_cond \
      -comment "Warning: Floating Gate" 
    } 
 
# Binary-valued condition proc to determine whether gate floats. 
# Return value of 1 indicates a non-driven gate; 
# return value of 0 indicates the gate is driven by a  
# single voltage. 
 
  proc floating_gates_cond {dev} { 
    set pv1 [perc::voltage [perc::get_pins $dev -name "g"] -path] 
    puts "**DEBUG: subckt [perc::name [perc::get_placements $dev]] \
      instance [perc::name $dev -fromTop] gate voltages: $pv1" 
    if { [llength $pv1] != 1 } {  
      return 1  
    } 
    return 0 
  } 
*/] </code></pre></div></li>
</ol>
<div class="section result"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Results</h2></div><p class="p">Output to the run transcript appears
as follows:</p>
<pre class="pre codeblock leveled"><code>**DEBUG: subckt inv_hv  instance X0/M0 gate voltages: 
**DEBUG: subckt inv_hv  instance X0/M1 gate voltages:</code></pre><p class="p">Here, the M0 and M1 g pins have nothing
driving them.</p>
<p class="p">Results in the PERC Report appear
similar to this:</p>
<pre class="pre codeblock leveled"><code>o PERC LOAD voltage.lib INIT init_7 
o RuleCheck:  rule_7 (Warning: Floating Gate) 
------------------------------------------------------------------------- 
 
  1    M1 [ MN(N_HV) ]  (2 placements, LIST# = L1)
         g: IN
         s: VSS [ ] [ ] [ 0 ] [ 0 ]
         d: OUT [ ] [ ] [ ] [ 0 ]
         b: VSS [ ] [ ] [ 0 ] [ 0 ]</code></pre><p class="p">The g pin has no voltages assigned,
so it is floating.</p>
<p class="p">The annotations to the s and b pins
indicate these pins are assigned 0 volts at initialization time and
after propagation has occurred. This is because the pins are connected
to vss. The d pin has 0 volts propagated to it. The general form
of pin annotations is this:</p>
<pre class="pre codeblock leveled"><code>&lt;pin&gt;: &lt;net&gt; [ &lt;initialized_net_type_list&gt; ] [ &lt;propagated_path_type_list&gt; ] [ &lt;initialized_voltage_list&gt; ] [ &lt;propagated_voltage_list&gt; ] </code></pre><p class="p">The list fields can appear empty or
are suppressed if information is not available for those fields.</p>
<p class="p">In vectored propagation, if multiple voltages are propagated
to a device pin, this results in an error, and the run aborts. You
will see lines like this in the transcript:</p>
<pre class="pre codeblock"><code>VOLTAGE propagation terminated prematurely due to errors.

ERROR: MULTIPLE GATE VOLTAGES found on instance "X3/M1", net "X3/IN": 0 1.8</code></pre><p class="p">The PERC Report shows this:</p>
<pre class="pre codeblock"><code>ERROR: VOLTAGE propagation terminated prematurely.  Please check log for details.</code></pre><p class="p">The transcript shows the device instance and net where multiple
voltages have been detected. To debug this problem, tracing the
origins of the voltages is typically needed. If this cannot be done
relatively easily in a schematic viewer, using vector-less voltage
propagation should allow the run to complete, and you can then trace
the voltages in Calibre RVE.</p>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCChap_CalibrePercVoltageRuleChecks_id2b941fd5.html" title="The Calibre PERC voltage checking capability is used for static voltage verification of a design. The voltage checking capability entails assignment of numeric labels to nets (logical labels are also supported, which may have underlying numeric values). These voltage labels can then be propagated throughout the design along topological paths meeting well-defined conditions. Numeric valued labels implicitly have an order to them, which is something that net and path type labels do not generally support. This facilitates sorting and testing of voltage values using mathematical expressions in appropriate checks.">Calibre PERC Voltage Rule Checks</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_perc_user"
                DocTitle = "Calibre® PERC™ User’s Manual"
                PageTitle = "Example: Finding Floating Gates"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_ExampleFindingFloatingGates_id47d5ad77.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® PERC™ User’s Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>