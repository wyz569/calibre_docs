<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="ldl::map_pin_layer_to_probe_layer" />
<meta name="abstract" content="Moves the resistance simulation probe location from a device pin layer to another layer." />
<meta name="description" content="Moves the resistance simulation probe location from a device pin layer to another layer." />
<meta name="prodname" content="Calibre PERC User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-25" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_perc_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="HighlightChanges" content="yes" />
<meta name="EclipsePluginName" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2;show" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® PERC™ User’s Manual" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P11493,product.id.P10099,product.id.P11347,product.id.P10084,product.id.P11427,product.id.P10116,product.id.P10096" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idb9d3bb97-bda8-43f1-a7a9-0e5d29d4a1d0" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>ldl::map_pin_layer_to_probe_layer</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="ldl::map_pin_layer_to_probe_layer" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P11493,product.id.P10099,product.id.P11347,product.id.P10084,product.id.P11427,product.id.P10116,product.id.P10096" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="idb9d3bb97-bda8-43f1-a7a9-0e5d29d4a1d0">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">ldl::map_pin_layer_to_probe_layer</h1>
<div class="body refbody CommandRefBody-Var1"><div class="abstract CommandRefAbstract"><p class="p ContextMGC">Calibre PERC LDL Command.</p>
<p class="shortdesc">Moves the resistance simulation probe location from a
device pin layer to another layer.</p>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName Required">ldl::map_pin_layer_to_probe_layer</span> {<span class="keyword ParameterName RequiredReplaceable">device_iterator</span> | <span class="keyword ParameterName RequiredReplaceable">device_id</span>} <span class="keyword ParameterName Required">-pin_layer</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> <span class="keyword ParameterName Required">‑probe_layer</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> <br />
[-halo_size <span class="keyword ParameterName OptionalReplaceable">distance</span> | {-allow_non_overlapping_pins -pin_probe_spacing <span class="keyword ParameterName OptionalReplaceable">spacing</span>}] </p>
</div>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><div class="note note"><span class="notetitle">Note:</span> <p class="p">The command is intended for
foundry use only.</p>
</div>
<p class="p">In certain situations like measuring P2P resistance to the substrate
pin of an ESD diode, the model-based resistance engine can overestimate
the resistance value. During simulation, the substrate can be treated
as an ideal layer with no resistance. For ESD P2P measurements,
it cannot be treated as ideal layer because it can cause shorting
between neighboring devices leading to unwanted parallel resistive
paths. In such situations, this command can move the resistance
simulation probe points from the device substrate pins to shapes
on another layer, such as a connected diffusion layer, to get a
less pessimistic resistance measurement.</p>
<p class="p">When this command is used, resistance simulation probe points
are moved from the layer specified with <span class="keyword ParameterName Required">-pin_layer</span> (substrate
in the preceding discussion) to the layer specified with <span class="keyword ParameterName Required">‑probe_layer</span> (diffusion
in the preceding discussion). This command should be executed in
the rules before perc_ldl::execute_cd_checks or perc_ldl::execute_p2p_checks.</p>
<p class="p">By default, only <span class="keyword ParameterName Required">-probe_layer</span> shapes
within a 2 dbu spacing from device seed shapes are used in determining
probe locations. In cases where the probe layer shapes lie outside
that distance, either the -halo_size option or the ‑allow_non_overlapping_pins
and -pin_probe_spacing options can be used.</p>
<p class="p">The -halo_size option expands device seed shapes by a specified
distance and then uses all <span class="keyword ParameterName Required">‑probe_layer</span> shapes
that interact with the expanded device seed shapes to determine
probe points. Using this option necessitates knowing the possible
spacings between device seed shapes and <span class="keyword ParameterName Required">-probe_layer</span> shapes.
The -halo_size option would be used in the example discussed previously
when the diffusion layer is like a ring around the substrate layer,
and the probe layer overlaps the substrate layer pin shapes (but
not device seed shapes).</p>
<p class="p">The -allow_non_overlapping_pins and -pin_probe_spacing options
are used together as the alternative to -halo_size. The ‑allow_non_overlapping_pins
option allows <span class="keyword ParameterName Required">-probe_layer</span> shapes that
do not overlap <span class="keyword ParameterName Required">-pin_layer</span> shapes
to be used for determining probe locations. The ‑pin_probe_spacing
option specifies that <span class="keyword ParameterName Required">-probe_layer</span> shapes
lying within the specified <span class="keyword ParameterName OptionalReplaceable">distance</span> of <span class="keyword ParameterName Required">‑pin_layer</span> shapes
are selected for probe locations.</p>
<p class="p">In certain cases, moving the probe location may be invalid, and
pins may not be found after calling ldl::map_pin_layer_to_probe_layer.
When this happens, the missing pin locations are instead supplied
by device pin locations and the resistance value is calculated by
substituting device pin layers for the failed probe pin locations.
The message “MOVE PROBE FAILED. Use device pin locations” is printed
after the test name in the LDL report. For example (format modified
for page width):</p>
<pre class="pre codeblock"><code>1     Net    : INA
      Groups : SG_1
      Source : PORT - INA - ( 234.0, 0.0 ) M1
      Sink   : mp(p) g - ( 156.0, 222.75 ) POLY    127.046 ohms   ( &gt; 0 ) 
<span class="ph CodeHighlight Bold">p2p_2 : MOVE PROBE FAILED. Use device pin location(s) X8/M0</span>
       Sink   : SG_1                        88.666 ohms   (&gt; 0 )   p2p_1</code></pre><p class="p">Missing pins are noted in the SIMULATION ERROR/WARNING SUMMARY
section of the LDL report. Additionally, the LDL results database
indicates when a substitution has occurred through a (MOVE PROBE
FAILED) comment added to a test result.</p>
<p class="p">The <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'DFM Database', 'svrf_ur'); return false;">DFM Database</a> statement
must use the OVERWRITE REVISIONS and [DEVICES PINLOC] options for
automatic probe point substitution to occur.</p>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="idb9d3bb97-bda8-43f1-a7a9-0e5d29d4a1d0__ide5a10745-1266-4e2d-b47c-c52c436cc4a1"><span class="keyword ParameterName RequiredReplaceable">device_iterator</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An argument that specifies a instance iterator
to a device. See <a class="xref fm:HeadingOnly" href="Command_PerccheckDevice_id3faa8842.html#id3faa8842-b865-4759-8041-19b4db0d1f9a__Command_PerccheckDevice_id3faa8842.xml#id3faa8842-b865-4759-8041-19b4db0d1f9a" title="Matches each primitive device in the design by default. Devices that are selectively matched can be configured using the options.">perc::check_device</a> ‑condition, <a class="xref fm:HeadingOnly" href="Command_PercgetInstances_ida25f2cc5.html#ida25f2cc5-1190-4526-9b5b-902fd708e689__Command_PercgetInstances_ida25f2cc5.xml#ida25f2cc5-1190-4526-9b5b-902fd708e689" title="Creates an instance iterator.">perc::get_instances</a>, <a class="xref fm:HeadingOnly" href="Command_PercgetInstancesInParallel_idb1ea3d7e.html#idb1ea3d7e-5223-448f-ae87-6456a062a7d0__Command_PercgetInstancesInParallel_idb1ea3d7e.xml#idb1ea3d7e-5223-448f-ae87-6456a062a7d0" title="Returns a list of instance iterators containing instances connected in parallel.">perc::get_instances_in_parallel</a>, <a class="xref fm:HeadingOnly" href="Command_PercgetInstancesInSeries_id99f054f0.html#id99f054f0-66da-4cf9-aaa2-015f3552d176__Command_PercgetInstancesInSeries_id99f054f0.xml#id99f054f0-66da-4cf9-aaa2-015f3552d176" title="Returns a list of instance iterators containing instances connected in series.">perc::get_instances_in_series</a>, or <a class="xref fm:HeadingOnly" href="Command_PercgetInstancesInPattern_idaa4801f2.html#idaa4801f2-6232-41a4-8661-57ec3ea1aaee__Command_PercgetInstancesInPattern_idaa4801f2.xml#idaa4801f2-6232-41a4-8661-57ec3ea1aaee" title="Returns a list of instance iterators from a matched pattern.">perc::get_instances_in_pattern</a>. May not be specified with <span class="keyword ParameterName RequiredReplaceable">device_id</span>.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idb9d3bb97-bda8-43f1-a7a9-0e5d29d4a1d0__id0f213ef4-f255-4c24-8807-e9d060f19b52"><span class="keyword ParameterName RequiredReplaceable">device_id</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An argument that specifies the index number
of a <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Device', 'svrf_ur'); return false;">Device</a> statement in the
rule file. The indices are indicated in an extracted SPICE netlist
by $D=<span class="keyword ParameterName OptionalReplaceable">n</span> properties,
where <span class="keyword ParameterName OptionalReplaceable">n</span> is
the ordinal index corresponding to a Device statement in the rules.
Index 0 corresponds to the first Device statement, 1 to the second
Device statement, and so forth. May not be specified with <span class="keyword ParameterName RequiredReplaceable">device_iterator</span>.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idb9d3bb97-bda8-43f1-a7a9-0e5d29d4a1d0__ida14f8108-f38e-48c1-a2f6-82ca223f10c5"><span class="keyword ParameterName Required">-pin_layer</span> <span class="keyword ParameterName RequiredReplaceable">layer</span></dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument that specifies a Device
pin layer for which simulated resistances may be overly pessimistic.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idb9d3bb97-bda8-43f1-a7a9-0e5d29d4a1d0__id43d823c7-9637-40b4-852d-dfd3024ecc49"><span class="keyword ParameterName Required">-probe_layer</span> <span class="keyword ParameterName RequiredReplaceable">layer</span></dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument that specifies a layer
that defines probe point locations instead of <span class="keyword ParameterName Required">‑pin_layer</span>.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idb9d3bb97-bda8-43f1-a7a9-0e5d29d4a1d0__id15a3bbf4-9499-44bc-be11-60ef56099d38">-halo_size <span class="keyword ParameterName OptionalReplaceable">distance</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set that specifies
a distance in user units by which to expand Device seed shapes within
the Calibre database. The distance should be sufficient to allow expanded
seed shapes to interact with <span class="keyword ParameterName Required">-probe_layer</span> polygons.
The default is 2 dbu. May not be specified with -allow_non_overlapping_pins.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idb9d3bb97-bda8-43f1-a7a9-0e5d29d4a1d0__idea8bdd73-dc7b-4155-a3f7-9336edefe84e">-allow_non_overlapping_pins</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument that specifies to identify <span class="keyword ParameterName Required">-probe_layer</span> shapes
that do not intersect <span class="keyword ParameterName Required">‑pin_layer</span> shapes.
This option is specified with -pin_probe_spacing but may not be specified
with -halo_size.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idb9d3bb97-bda8-43f1-a7a9-0e5d29d4a1d0__idc8748091-3c79-4843-8a7d-8957790b9c60">-pin_probe_spacing <span class="keyword ParameterName OptionalReplaceable">spacing</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set that specifies
a <span class="keyword ParameterName OptionalReplaceable">spacing</span> distance
in user units. Any <span class="keyword ParameterName Required">-probe_layer</span> shapes
lying within the <span class="keyword ParameterName OptionalReplaceable">spacing</span> of <span class="keyword ParameterName Required">-pin_layer</span> shapes
are selected as probe point sites. This argument set is specified
with ‑allow_non_overlapping_pins.</p>
</dd>
</dl>
</div>
</div>
<div class="section ReturnedValues"><h2 class="title Subheading sectiontitle">Return Values</h2><p class="p">None.</p>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><pre class="pre codeblock"><code># executes p2p checks
TVF FUNCTION execute_perc_res_checks [/* 
 
  proc extract_resistance {} { 
    set dev [<a class="xref Link" href="../../calbr_ys_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'dfmget_devices', 'calbr_ys_ref'); return false;">dfm::get_devices</a>] 
    while {$dev ne ""} {   
      if {[<a class="xref Link" href="../../calbr_ys_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'dfmget_device_data', 'calbr_ys_ref'); return false;">dfm::get_device_data</a> $dev -device_name] eq "ndio_hi"} {
          ldl::map_pin_layer_to_probe_layer $dev -pin_layer psub \
            -probe_layer pdiff -halo_size 0.02  
          break    
      }    
      <a class="xref Link" href="../../calbr_ys_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'dfminc', 'calbr_ys_ref'); return false;">dfm::inc</a> dev 
    }

# this must follow probe layer mapping
    perc_ldl::execute_p2p_checks 
    exit 
  } 

*/] 
 
DFM YS AUTOSTART execute_perc_res_checks extract_resistance 
DFM DATABASE "dfmdb" OVERWRITE REVISIONS [DEVICES PINLOC] </code></pre><p class="p">The TVF Function block is the LDL P2P check module of the rule
file. Notice that several YieldServer (dfm::) commands are used.
These identify ndio_hi devices for which the probe locations are
moved from the psub layer to the pdiff layer. Device seed shapes
are expanded by 0.02 user units to identify pdiff layer interactions
for probe point selection. The P2P check is then executed with the
mapped probe points.</p>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_RuleCheckCommands_id9b3d8e0b.html" title="Rule check commands appear in rule check procs and are used to check the design. Some rule check commands may be used in init procs. These are annotated in the notes to the tables in this section.">Rule Check Commands</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../topics/MGCChap_CurrentDensityChecks_id88453e90.html" title="Calibre PERC Logic Driven Layout Current Density (LDL CD) checking calculates the current flow through layout interconnect layers and outputs polygon-based results that meet the specified constraints. This application uses Calibre PERC, Calibre nmDRC, Calibre nmLVS, Calibre DFM, and Calibre xRC applications in a single package to perform the calculations.">Current Density Checks</a></div>
<div><a class="link" href="../topics/MGCChap_PointToPointResistanceChecks_id96984ad2.html" title="Calibre PERC Logic Driven Layout Point-to-Point Resistance (LDL P2P) checking calculates the interconnect resistance of layers specified in resistance extraction statements and outputs polygon-based results for analysis. This application uses Calibre PERC, Calibre nmDRC, Calibre nmLVS, DFM, and Calibre xRC applications in a single package to perform the calculations.">Point-to-Point Resistance Checks</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_perc_user"
                DocTitle = "Calibre® PERC™ User’s Manual"
                PageTitle = "ldl::map_pin_layer_to_probe_layer"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_Ldlmappinlayertoprobelayer_idb9d3bb97.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® PERC™ User’s Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>