<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Example: ESD Device Protection of I/O Pads" />
<meta name="abstract" content="The perc::check_net command can be used in a rule check to verify ESD protection of I/O pads." />
<meta name="description" content="The perc::check_net command can be used in a rule check to verify ESD protection of I/O pads." />
<meta name="prodname" content="Calibre PERC User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-25" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_perc_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="HighlightChanges" content="yes" />
<meta name="EclipsePluginName" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2;show" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® PERC™ User’s Manual" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P11493,product.id.P10099,product.id.P11347,product.id.P10084,product.id.P11427,product.id.P10116,product.id.P10096" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id5ed8d815-06e5-4e33-9769-649650901544" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Example: ESD Device Protection of I/O Pads</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Example: ESD Device Protection of I/O Pads" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P11493,product.id.P10099,product.id.P11347,product.id.P10084,product.id.P11427,product.id.P10116,product.id.P10096" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id5ed8d815-06e5-4e33-9769-649650901544">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Example: ESD Device Protection
of I/O Pads</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><p class="shortdesc">The perc::check_net
command can be used in a rule check to verify ESD protection of
I/O pads.</p>
<p class="p">The rule check in this example finds
every net that meets the following conditions:</p>
<ul class="ul"><li class="li" id="id89d2059c-1701-4333-86e7-dc613f1079b8"><p class="p">The net is neither power nor ground.</p>
</li>
<li class="li" id="id8982a9fb-d38e-4a0b-b196-a0d3b5ee14e5"><p class="p">The net is directly tied to an I/O pad.</p>
</li>
<li class="li" id="idc190380b-9aab-460d-b91c-3ef0194082e1"><p class="p">The net is not connected to any primary <span class="ph FontProperty HeadingLabel">Electrostatic Discharge</span> (ESD)
device.</p>
</li>
</ul>
<p class="p">The
primary ESD device is an NMOS transistor with the gate pin tied both
to VSSIO and to either the source or the drain pin.</p>
<p class="p"><a class="xref fm:Figure" href="#id5ed8d815-06e5-4e33-9769-649650901544__idb0ecfcc6-1caf-4cce-8ac0-9b6be3a13afc">Figure 1</a> shows a schematic representation of
both good and bad circuits.</p>
<div class="fig fignone" id="idb0ecfcc6-1caf-4cce-8ac0-9b6be3a13afc"><span class="figcap"><span class="fig--title-label">Figure 1. </span>I/O Pad With ESD Device Protection</span><br /><div class="imageleft"><img class="image imageleft" height="180" src="../graphics/topo_checks02a.png" width="468" /></div><br /></div>
<p class="p">Here are some possible SPICE representations
of both good and bad configurations:</p>
<pre class="pre codeblock"><code>.SUBCKT TOPCELL OUTPUT INPUT
...
M0 OUTPUT VSSIO VSSIO VSSIO ... $$ Good. OUTPUT pad is connected
...                             $$ to MN ESD device.
R10 VSSIO  INPUT ... $$ Bad. No MN ESD device on INPUT net.
R11 INPUT 24
...</code></pre><p class="p">The objective is to write a check for the bad
configuration.</p>
</div>
<div class="section prereq Prerequisites p"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Prerequisites</h2></div><ul class="ul"><li class="li" id="id5ed8d815-06e5-4e33-9769-649650901544__id05e322ab-9753-4cd7-b8b0-3768f6dfba7d"><p class="p">Knowledge
of SPICE netlist format.</p>
</li>
<li class="li" id="id5ed8d815-06e5-4e33-9769-649650901544__id17695334-74d3-4af9-9346-70d43be060f9"><p class="p">Knowledge of
Tcl.</p>
</li>
<li class="li" id="id5ed8d815-06e5-4e33-9769-649650901544__ide254cee6-1de6-4709-8d7b-ac82fc3a4b89"><p class="p">Calibre PERC
license.</p>
</li>
</ul>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand" id="id5ed8d815-06e5-4e33-9769-649650901544__idba957583-4eed-4cfc-b13a-d1cb7ed4d3e6"><span class="ph cmd">Write an
initialization procedure that labels Power, Ground, Pad, and VSS_I_O
nets. This initializes net labels for the rule check.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code># Initialization proc for rule_1 check 
# Label Power, Ground, Pad, VSS_I_O nets 
  proc init_1 {} { 
    <a class="xref fm:HeadingOnly" href="Command_PercdefineNetType_id94dce3ed.html#id94dce3ed-08eb-4906-8920-4023848dda4b__Command_PercdefineNetType_id94dce3ed.xml#id94dce3ed-08eb-4906-8920-4023848dda4b" title="Assigns a net type to nets from an input list of net names.">perc::define_net_type</a> "Power"    "VDD?" 
    perc::define_net_type "Ground"   "VSS?" 
# lvsTopPorts specifies any port at the top level 
    perc::define_net_type "Pad"      {lvsTopPorts} 
    perc::define_net_type "VSS_I_O"  {VSSIO} 
  } </code></pre></div></li>
<li class="li step stepexpand" id="id5ed8d815-06e5-4e33-9769-649650901544__id9b7c1c1c-2ca7-4b26-be41-ef755f773d39"><span class="ph cmd">Write the
rule check using three procedures.</span><ol type="a" class="ol substeps"><li class="li substep" id="id5ed8d815-06e5-4e33-9769-649650901544__id9da5d935-609a-4e93-97c7-51087f8ba7b8"><span class="ph cmd">Write
the main proc as follows:</span><div class="itemgroup info SubStepInfo"><pre class="pre codeblock leveled"><code># Main proc that checks all nets for pads without ESD protection. 
  proc rule_1 {} { 
    perc::check_net -netType {Pad &amp;&amp; !Power &amp;&amp; !Ground} \
                    -condition rule_1_cond  \
                    -comment "Pad without ESD protection" 
  } </code></pre><p class="p">The main proc checks every net in the design. The options to
the <a class="xref fm:HeadingOnly" href="Command_PerccheckNet_id75162cb0.html#id75162cb0-c882-4d1d-9273-9095a7dd5b64__Command_PerccheckNet_id75162cb0.xml#id75162cb0-c882-4d1d-9273-9095a7dd5b64" title="Checks nets in the design for nets that match the specified conditions. By default, all nets are matched.">perc::check_net</a> command are as follows:</p>
<p class="p BlockIndent"><span class="ph FontProperty HeadingLabel">-netType {Pad &amp;&amp; !Power &amp;&amp; !Ground}</span> —
Checks that the net is tied to a Pad but not Power or Ground.</p>
<p class="p BlockIndent"><span class="ph FontProperty HeadingLabel">-condition rule_1_cond</span> — For
each net that passes the -netType criteria, send the net to the
rule_1_cond proc, which checks whether a net has a primary ESD device.</p>
<p class="p BlockIndent"><span class="ph FontProperty HeadingLabel">-comment “Pad without ESD protection”</span> —
Specifies a message that gets written to the Calibre PERC report
for the rule_1 check results.</p>
</div></li>
<li class="li substep" id="id5ed8d815-06e5-4e33-9769-649650901544__id2fbcb0b5-14ac-4c4f-a169-7df513bbd577"><span class="ph cmd">Write
a subroutine to the rule_1 proc as follows:</span><div class="itemgroup info SubStepInfo"><pre class="pre codeblock leveled"><code># Subroutine for rule_1. Returns 1 if a net is not connected to 
# an ESD device. 
  proc rule_1_cond {net} { 
    if {![perc::exists -net $net -type {mn} \
                       -pinAtNet {s d} \
                       -pinNetType { {g} {VSS_I_O} } \
                       -condition g_s_d_tied]} { 
       # This net is not connected to any ESD device; report it 
       return 1 
    } 
    return 0 
  } </code></pre><p class="p">This subroutine returns 1 if the net is <span class="ph FontProperty emphasis">not</span> connected
to any primary ESD device. This proc counts the number of ESD devices connected
to the net. The options in the <a class="xref fm:HeadingOnly" href="Command_Percexists_id24411517.html#id24411517-3545-4fa0-971f-ef3671ac5edc__Command_Percexists_id24411517.xml#id24411517-3545-4fa0-971f-ef3671ac5edc" title="Indicates whether the number of devices in a list meets a constraint interval.">perc::exists</a> command are used to code the conditions
for an ESD device as follows:</p>
<p class="p BlockIndent"><span class="ph FontProperty HeadingLabel">-type {mn}</span> —
It is a MN device.</p>
<p class="p BlockIndent"><span class="ph FontProperty HeadingLabel">-pinAtNet {s d}</span> —
It is connected to the net at its source or drain pin.</p>
<p class="p BlockIndent"><span class="ph FontProperty HeadingLabel">-pinNetType { {g} {VSS_I_O} }</span> —
Its gate pin is tied to VSS_I_O.</p>
<p class="p BlockIndent"><span class="ph FontProperty HeadingLabel">-condition g_s_d_tied</span> —
For each device that passes the preceding criteria, send the device
to the g_s_d_tied proc, which checks whether the gate pin is tied
either to the source or drain pin.</p>
</div></li>
<li class="li substep" id="id5ed8d815-06e5-4e33-9769-649650901544__idafdb9450-4e16-4ed0-b2ba-5b7915dbc2ff"><span class="ph cmd">Write
a subroutine for rule_1_cond as follows:</span><div class="itemgroup info SubStepInfo"><pre class="pre codeblock leveled"><code># Subroutine for rule_1_cond. Returns 1 if the gate pin of an 
# MN device is tied either to the source or drain pin. 
  proc g_s_d_tied {instance pin} { 
    set g_s_d_nets [<a class="xref fm:HeadingOnly" href="Command_PercpinToNetCount_id36e88eba.html#id36e88eba-7e5e-47d6-89fa-17cebd2d11ed__Command_PercpinToNetCount_id36e88eba.xml#id36e88eba-7e5e-47d6-89fa-17cebd2d11ed" title="Returns the number of different nets (flat count) connected to the listed pins.">perc::pin_to_net_count</a> $instance "g s d"] 
    set s_d_nets   [perc::pin_to_net_count $instance "s d"] 
    if { ($s_d_nets == 2 &amp;&amp; $g_s_d_nets == 2) } { 
       return 1 
    } 
    return 0 
  } </code></pre><p class="p">This gets called by rule_1_cond. It returns 1 if a MOS device’s
gate pin is tied either to the source or drain pin. For each device
instance, it counts the number of nets associated with g, s, or
d pins and the number of nets associated with s or d pins. If the
number for both of the former and latter counts is 2, then the g
pin is connected either to the s or d pin. If the number for both
counts is 1, then all the pins are tied together.</p>
</div></li>
</ol>
</li>
</ol>
<div class="section result"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Results</h2></div><p class="p">The complete rule check follows. It must be
placed inside a TVF Function block containing a “package require
CalibreLVS_PERC” command and called from a <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'PERC Load', 'svrf_ur'); return false;">PERC Load</a> statement
in order to run it. See “<a class="xref fm:HeadingAndPage" href="Concept_CalibrePercExampleRuleFile_id170b24bd.html#id170b24bd-6423-403d-a729-e939c52112b9__Concept_CalibrePercExampleRuleFile_id170b24bd.xml#id170b24bd-6423-403d-a729-e939c52112b9" title="This section shows a control file that can be used to run all the examples shown in this chapter. It also contains a complete rule file for running a modified version of the examples using XML constraints and an object called a collection.">Calibre PERC Example Rule Files</a>” for related information.</p>
<pre class="pre codeblock leveled"><code>######################################################################### 
### RULE 1 
########## 
 
# Initialization proc for rule_1 check 
# Label Power, Ground, Pad, VSS_I_O nets 
  proc init_1 {} { 
    perc::define_net_type "Power"    "VDD?" 
    perc::define_net_type "Ground"   "VSS?" 
    perc::define_net_type "Pad"      {lvsTopPorts} 
    perc::define_net_type "VSS_I_O"  {VSSIO} 
  } 
 
# Main proc that checks all nets for pads without ESD protection. 
  proc rule_1 {} { 
    perc::check_net -netType {Pad &amp;&amp; !Power &amp;&amp; !Ground} \
                    -condition rule_1_cond  \
                    -comment "Pad without ESD protection" 
  } 
 
# Subroutine for rule_1. Returns 1 if a net is not connected to 
# an ESD device. 
  proc rule_1_cond {net} { 
    if {![perc::exists -net $net -type {mn} -pinAtNet {s d} \
          -pinNetType { {g} {VSS_I_O} } -condition g_s_d_tied]} { 
       # This net is not connected to any ESD device; report it 
       return 1 
    } 
    return 0 
  } 
 
# Subroutine for rule_1_cond. Returns 1 if the gate pin of an 
# MN device is tied either to the source or drain pin. 
  proc g_s_d_tied {instance pin} { 
    set g_s_d_nets [perc::pin_to_net_count $instance "g s d"] 
    set s_d_nets   [perc::pin_to_net_count $instance "s d"] 
    if { ($s_d_nets == 2 &amp;&amp; $g_s_d_nets == 2) } { 
       return 1 
    } 
    return 0 
  } </code></pre><p class="p">The results output in the Calibre PERC report
file would appear similar to this:</p>
<pre class="pre codeblock leveled"><code>o RuleCheck:  rule_1 (Pad without ESD protection) 
------------------------------------------------------------------------- 
 
  1    Net  OUTPUT2 [ Pad ] </code></pre><p class="p">The output shows the name of the rule check
and a comment from the Tcl proc that describes the rule check. This
is the first result in the report file. The result is a net with
the name OUTPUT2, and the net type from the initialization proc
is Pad.</p>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCChap_CalibrePercTopologyRuleChecks_id80f61ef9.html" title="The core of the Calibre PERC functionality is topological rule checking. Topological rule checks are written in the Calibre PERC extension of TVF. This chapter contains naming conventions used when writing topology rule checks and working examples of initialization and rule check procedures.">Calibre PERC Topology Rule Checks</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_perc_user"
                DocTitle = "Calibre® PERC™ User’s Manual"
                PageTitle = "Example: ESD Device Protection of I/O Pads"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_ExamplePrimaryEsdDeviceProtectionIoPads_id5ed8d815.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® PERC™ User’s Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>