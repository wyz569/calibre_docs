<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="perc::get_stack_groups" />
<meta name="abstract" content="Returns a device stack iterator of instances of a particular device type, on a particular net of a given path type, and in a particular cell placement." />
<meta name="description" content="Returns a device stack iterator of instances of a particular device type, on a particular net of a given path type, and in a particular cell placement." />
<meta name="prodname" content="Calibre PERC User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-25" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_perc_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="HighlightChanges" content="yes" />
<meta name="EclipsePluginName" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2;show" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® PERC™ User’s Manual" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P11493,product.id.P10099,product.id.P11347,product.id.P10084,product.id.P11427,product.id.P10116,product.id.P10096" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id3119b5b8-d2d2-11e6-82ce-005056b32f49" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>perc::get_stack_groups</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="perc::get_stack_groups" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P11493,product.id.P10099,product.id.P11347,product.id.P10084,product.id.P11427,product.id.P10116,product.id.P10096" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="id3119b5b8-d2d2-11e6-82ce-005056b32f49">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">perc::get_stack_groups</h1>
<div class="body refbody CommandRefBody-Var1"><div class="abstract CommandRefAbstract"><p class="p ContextMGC">Calibre
PERC iterator creation and control command.</p>
<p class="shortdesc">Returns a device stack iterator
of instances of a particular device type, on a particular net of
a given path type, and in a particular cell placement.</p>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName Required">perc::get_stack_groups </span><span class="keyword ParameterName RequiredReplaceable">net_iterator</span>  <span class="keyword ParameterName Required">-pathType</span> <span class="keyword ParameterName RequiredReplaceable">path_type_list</span> <span class="keyword ParameterName Required"> -type</span> <span class="keyword ParameterName RequiredReplaceable">device_type</span> <span class="keyword ParameterName Required">‑placement</span> <span class="keyword ParameterName RequiredReplaceable">placement_iterator</span></p>
</div>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">Returns all device instances
of <span class="keyword ParameterName RequiredReplaceable">device_type</span> connected
to the current net of the <span class="keyword ParameterName RequiredReplaceable">net_iterator</span>, where
that net is of a path type in the <span class="keyword ParameterName RequiredReplaceable">path_type_list</span>,
and the device instances are in the current placement of the <span class="keyword ParameterName RequiredReplaceable">placement_iterator</span>.
The command assembles these device instances in order from starting
net to terminating net. </p>
<p class="p">A starting net is the one referenced
by the <span class="keyword ParameterName RequiredReplaceable">net_iterator</span>.
Nets of a specified path type are then traced back along the propagation
path to the net where the path type was defined. This latter net
is a terminal net. If the assembled path does not reach a terminating
net from the starting net, then the path is discarded. If no paths
conforming to the <span class="keyword ParameterName RequiredReplaceable">path_type_list</span> are
found from any starting net to the terminating net, this command
returns an empty iterator. Otherwise, it returns a stack group iterator
containing a path (possibly multiple paths) from starting net to
terminating net, which may be inspected via the <a class="xref fm:HeadingOnly" href="Command_Percget_stack_devices_idf2598a68.html#idf2598a68-d2e7-11e6-8b58-005056b32f49__Command_Percget_stack_devices_idf2598a68.xml#idf2598a68-d2e7-11e6-8b58-005056b32f49" title="Returns data from a device stack iterator.">perc::get_stack_devices</a> command.</p>
<p class="p">This command may only be called from a <a class="xref fm:HeadingOnly" href="Command_PerccheckData_idc670986d.html#idc670986d-b894-4123-8cd4-29430c23fb66__Command_PerccheckData_idc670986d.xml#idc670986d-b894-4123-8cd4-29430c23fb66" title="Calls a user-provided procedure to perform a check.">perc::check_data</a> -condition
procedure.</p>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="id3119b5b8-d2d2-11e6-82ce-005056b32f49__id311bd24e-d2d2-11e6-b004-005056b32f49"><span class="keyword ParameterName RequiredReplaceable">net_iterator</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument that must
be a net iterator created by <a class="xref fm:HeadingOnly" href="Command_PerccheckNet_id75162cb0.html#id75162cb0-c882-4d1d-9273-9095a7dd5b64__Command_PerccheckNet_id75162cb0.xml#id75162cb0-c882-4d1d-9273-9095a7dd5b64" title="Checks nets in the design for nets that match the specified conditions. By default, all nets are matched.">perc::check_net</a> ‑condition, <a class="xref fm:HeadingOnly" href="Command_PercgetNets_id591349e2.html#id591349e2-717e-4ca8-aad7-1a22ad2a4aea__Command_PercgetNets_id591349e2.xml#id591349e2-717e-4ca8-aad7-1a22ad2a4aea" title="Creates a net iterator.">perc::get_nets</a>, <a class="xref fm:HeadingOnly" href="Command_PercgetNetsInPattern_id57a3e94b.html#id57a3e94b-bbd0-4389-86de-6ccb8d6b8137__Command_PercgetNetsInPattern_id57a3e94b.xml#id57a3e94b-bbd0-4389-86de-6ccb8d6b8137" title="Returns a list of net iterators from a matched pattern.">perc::get_nets_in_pattern</a>, <a class="xref fm:HeadingOnly" href="Command_PercgetOtherNetOnInstance_id85c3d2b2.html#id85c3d2b2-1b55-49a9-ae53-4cda904a9176__Command_PercgetOtherNetOnInstance_id85c3d2b2.xml#id85c3d2b2-1b55-49a9-ae53-4cda904a9176" title="Creates a net iterator.">perc::get_other_net_on_instance</a>, or <a class="xref fm:HeadingOnly" href="Command_Percdescend_idbba0a66e.html#idbba0a66e-fb1a-4939-ac12-602ab0543c29__Command_Percdescend_idbba0a66e.xml#idbba0a66e-fb1a-4939-ac12-602ab0543c29" title="Creates an iterator that points to a cell placement representative or to a net in a cell.">perc::descend</a>.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id3119b5b8-d2d2-11e6-82ce-005056b32f49__idf5992959-bef1-4f09-a365-509c72700090"><span class="keyword ParameterName Required">-pathType</span> <span class="keyword ParameterName RequiredReplaceable">path_type_list</span></dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument set that specifies a
Tcl list of path type names. Path type names are defined in <a class="xref fm:HeadingOnly" href="Command_PercdefineNetType_id94dce3ed.html#id94dce3ed-08eb-4906-8920-4023848dda4b__Command_PercdefineNetType_id94dce3ed.xml#id94dce3ed-08eb-4906-8920-4023848dda4b" title="Assigns a net type to nets from an input list of net names.">perc::define_net_type</a>, <a class="xref fm:HeadingOnly" href="Command_PercdefineNetTypeByDevice_idddb1d861.html#idddb1d861-3213-4dfe-ac19-676ee8821ebc__Command_PercdefineNetTypeByDevice_idddb1d861.xml#idddb1d861-3213-4dfe-ac19-676ee8821ebc" title="Assigns a net type to nets that are connected to selected devices.">perc::define_net_type_by_device</a>, and <a class="xref fm:HeadingOnly" href="Command_PercdefineNetTypeByPlacement_id6c10ba02.html#id6c10ba02-b9c5-4b5e-bd00-3a53f90691bb__Command_PercdefineNetTypeByPlacement_id6c10ba02.xml#id6c10ba02-b9c5-4b5e-bd00-3a53f90691bb" title="Assigns a net type to nets that are connected to selected placements.">perc::define_net_type_by_placement</a> commands.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id3119b5b8-d2d2-11e6-82ce-005056b32f49__id311c4a26-d2d2-11e6-a753-005056b32f49"><span class="keyword ParameterName Required">-type</span> <span class="keyword ParameterName RequiredReplaceable">device_type</span></dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument set that
specifies a device type as defined in a Device statement.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id3119b5b8-d2d2-11e6-82ce-005056b32f49__ideab1a89a-b76c-45e7-bf5d-606bb5fe44d1"><span class="keyword ParameterName Required">‑placement</span> <span class="keyword ParameterName RequiredReplaceable">placement_iterator</span></dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument set that
specifies a placement iterator. See <a class="xref fm:HeadingOnly" href="Command_PercgetPlacements_idbb97f715.html#idbb97f715-1a39-433c-af27-25ad6d2679ef__Command_PercgetPlacements_idbb97f715.xml#idbb97f715-1a39-433c-af27-25ad6d2679ef" title="Creates a placement representative iterator.">perc::get_placements</a> or <a class="xref fm:HeadingOnly" href="Command_Percdescend_idbba0a66e.html#idbba0a66e-fb1a-4939-ac12-602ab0543c29__Command_Percdescend_idbba0a66e.xml#idbba0a66e-fb1a-4939-ac12-602ab0543c29" title="Creates an iterator that points to a cell placement representative or to a net in a cell.">perc::descend</a>.</p>
</dd>
</dl>
</div>
</div>
<div class="section ReturnedValues"><h2 class="title Subheading sectiontitle">Return Values</h2><p class="p">Iterator.</p>
</div>
<div class="section Examples" id="id3119b5b8-d2d2-11e6-82ce-005056b32f49__id7922e159-7016-43cd-ad5f-6c7705c49a84"><h2 class="title Subheading sectiontitle">Examples</h2><p class="p">Assume the following subcircuit:</p>
<pre class="pre codeblock leveled"><code>.SUBCKT aoi_nor or1 na2 na1 no3 no4 no5 out vdd2 vss2 vdd1 vss1
*.PININFO out:O
*.PININFO or1:I na2:I na1:I no3:I no4:I no5:I
*    D     G   S     B
MP12 netp1 no5 vdd2  vdd2 P nfin=12
MP11 netp2 no4 netp1 vdd2 P nfin=11
MP10 out   no3 netp2 vdd2 P nfin=10
MN9  out   no3 vss2  vss2 N nfin=9
MN8  out   no4 vss2  vss2 N nfin=8
MN7  out   no5 vss2  vss2 N nfin=7
MP6  netp0 na2 vdd1  vdd1 P nfin=6
MP5  netp0 na1 vdd1  vdd1 P nfin=5
MP4  out   or1 netp0 vdd1 P nfin=4
MN3  netn0 na2 vss1  vss1 N nfin=3
MN2  out   na1 netn0 vss1 N nfin=2
MN1  out   or1 vss1  vss1 N nfin=1
.ENDS</code></pre><p class="p">And assume this rule file code:</p>
<pre class="pre codeblock"><code>PERC PROPERTY MP nfin

TVF FUNCTION test_get_stack_groups [/* 
  package require CalibreLVS_PERC 
 
  proc init {} {
    perc::define_net_type Power {lvsPower}
    perc::create_lvs_path
  }

  proc find_subgraph {} {
# get placements of interest
  set cells [perc::get_cells]
  while {$cells ne "" } {
    set placements [perc::get_placements $cells]
    while {$placements ne ""} {
# get nets of interest
      set nets [perc::get_nets $placements]
      while {$nets ne ""} {
        puts "Starting net: [perc::name $nets]"
# get groups of MP devices on Power paths
        set pfin_groups [perc::get_stack_groups $nets \
          -placement $placements -type {MP} -pathType {Power}]
</code></pre><pre class="pre codeblock"><code>          while {$pfin_groups ne ""} {
# report the device group attributes
            puts -nonewline "\n"
            set pfin_names [perc::get_stack_devices $pfin_groups \
              -listInstanceNames]
            puts "Instances: device-count=[lindex $pfin_names 0]\
 list=[lindex $pfin_names 1]"
            set pfin_prop [perc::get_stack_devices $pfin_groups \
              -listProperty "nfin"]
            puts "Properties: device-count=[lindex $pfin_prop 0]\
              list=[lindex $pfin_prop 1]"
            set pfin_insts [perc::get_stack_devices $pfin_groups \
              -listAllInstances]
            puts -nonewline "AllInstances: device-count=[lindex \
              $pfin_insts 0]"
            puts -nonewline " { " 
            foreach inst [lindex $pfin_insts 1] { 
              puts -nonewline "[perc::name $inst]" 
            } 
            puts " }"
            set pfin_term [perc::get_stack_devices $pfin_groups \
              -terminalNet]
            puts "Terminal: terminal-net=$pfin_term"
            perc::inc pfin_groups
          }
          perc::inc nets
          puts -nonewline "\n"
        }
        perc::inc placements
      }
      perc::inc cells
    }
  } 

# check MP finfet statistics
proc check_stacks {} {
  perc::check_data -condition find_subgraph -comment "check MP finfets"
}
*/] </code></pre><p class="p">In Tcl proc find_subgraph iterates
over cells to get placements. It then iterates over nets within those
placements. Then it reports statistics for MP device groups that
are on Power net paths. The output in the transcript is as follows:</p>
<pre class="pre codeblock"><code>  Executing RuleCheck "check_stacks" ...
    Checking RULE: check MP finfets
Starting net: OR1

Starting net: NA2

Starting net: NA1

Starting net: NO3

Starting net: NO4

Starting net: NO5

Starting net: OUT

Instances: device-count=3 list=S {{S MP4} {P {MP5 MP6}}}
Properties: device-count=3 list=S {{S 4} {P {5 6}}}
AllInstances: device-count=3 { MP4 MP5 MP6 }
Terminal: terminal-net=VDD1

Instances: device-count=3 list=S {MP10 MP11 MP12}
Properties: device-count=3 list=S {10 11 12}
AllInstances: device-count=3 { MP10 MP11 MP12 }
Terminal: terminal-net=VDD2

Starting net: VDD2

Instances: device-count=6 list=S {{S {MP12 MP11 MP10 MP4}} {P {MP5 MP6}}}
Properties: device-count=6 list=S {{S {12 11 10 4}} {P {5 6}}}
AllInstances: device-count=6 { MP12 MP11 MP10 MP4 MP5 MP6 }
Terminal: terminal-net=VDD1

Starting net: VSS2

Starting net: VDD1

Instances: device-count=6 list=S {{P {MP5 MP6}} {S {MP4 MP10 MP11 MP12}}}
Properties: device-count=6 list=S {{P {5 6}} {S {4 10 11 12}}}
AllInstances: device-count=6 { MP5 MP6 MP4 MP10 MP11 MP12 }
Terminal: terminal-net=VDD2

Starting net: VSS1

Starting net: NETP1

Instances: device-count=5 list=S {{S {MP11 MP10 MP4}} {P {MP5 MP6}}}
Properties: device-count=5 list=S {{S {11 10 4}} {P {5 6}}}
AllInstances: device-count=5 { MP11 MP10 MP4 MP5 MP6 }
Terminal: terminal-net=VDD1

Instances: device-count=1 list=S MP12
Properties: device-count=1 list=S 12
AllInstances: device-count=1 { MP12 }
Terminal: terminal-net=VDD2

Starting net: NETP2

Instances: device-count=4 list=S {{S {MP10 MP4}} {P {MP5 MP6}}}
Properties: device-count=4 list=S {{S {10 4}} {P {5 6}}}
AllInstances: device-count=4 { MP10 MP4 MP5 MP6 }
Terminal: terminal-net=VDD1

Instances: device-count=2 list=S {MP11 MP12}
Properties: device-count=2 list=S {11 12}
AllInstances: device-count=2 { MP11 MP12 }
Terminal: terminal-net=VDD2

Starting net: NETP0

Instances: device-count=4 list=S {MP4 MP10 MP11 MP12}
Properties: device-count=4 list=S {4 10 11 12}
AllInstances: device-count=4 { MP4 MP10 MP11 MP12 }
Terminal: terminal-net=VDD2

Instances: device-count=2 list=P {MP5 MP6}
Properties: device-count=2 list=P {5 6}
AllInstances: device-count=2 { MP5 MP6 }
Terminal: terminal-net=VDD1

Starting net: NETN0</code></pre></div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_RuleCheckCommands_id9b3d8e0b.html" title="Rule check commands appear in rule check procs and are used to check the design. Some rule check commands may be used in init procs. These are annotated in the notes to the tables in this section.">Rule Check Commands</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_perc_user"
                DocTitle = "Calibre® PERC™ User’s Manual"
                PageTitle = "perc::get_stack_groups"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_Percget_stack_groups_id3119b5b8.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® PERC™ User’s Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>