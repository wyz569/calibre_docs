<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Checking Maximum Via Coverage for Metal Overlap Regions" />
<meta name="abstract" content="You can identify metal overlap regions that contain fewer vias than the maximum number of vias possible based on the specified enclosure, width, and space constraints. You can also determine if the vias have the expected total area." />
<meta name="description" content="You can identify metal overlap regions that contain fewer vias than the maximum number of vias possible based on the specified enclosure, width, and space constraints. You can also determine if the vias have the expected total area." />
<meta name="DC.subject" content="Equation-based DRC checks, maximum via coverage for metal overlap regions" />
<meta name="keywords" content="Equation-based DRC checks, maximum via coverage for metal overlap regions" />
<meta name="prodname" content="Calibre Solutions for Physical Verification" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-13" />
<meta name="Topline" content="Siemens EDA" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2;show" />
<meta name="HighlightChanges" content="Yes" />
<meta name="HighlightColor" content="mgc_light_blue" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_solns_pv_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 16, 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® Solutions for Physical Verification" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10089,product.id.P11800,product.id.P11802,product.id.P11801,product.id.P11426,product.id.P10099,product.id.P10096,product.id.P11493,product.id.P11347,product.id.P11713,product.id.P10294" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idda1eac60-3a70-4cf5-90dc-df6f58f1d913" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Checking Maximum Via Coverage for Metal Overlap Regions</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Checking Maximum Via Coverage for Metal Overlap Regions" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10089,product.id.P11800,product.id.P11802,product.id.P11801,product.id.P11426,product.id.P10099,product.id.P10096,product.id.P11493,product.id.P11347,product.id.P11713,product.id.P10294" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="idda1eac60-3a70-4cf5-90dc-df6f58f1d913">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Checking Maximum Via Coverage for
Metal Overlap Regions</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><p class="shortdesc">You can identify
metal overlap regions that contain fewer vias than the maximum number
of vias possible based on the specified enclosure, width, and space
constraints. You can also determine if the vias have the expected
total area. </p>
<p class="p">In the following figure, Ox and Oy define
the extent of a region of overlap between two metal layers.</p>
<div class="fig fignone" id="idff2059e7-2f91-4996-bbf5-e918e31bf2b6"><span class="figcap"><span class="fig--title-label">Figure 1. </span>Vias in a Metal Overlap Region</span><br /><div class="imagecenter"><img class="image imagecenter" height="174" src="../graphics/adv_drc07a.png" width="310" /></div><br /></div>
<p class="p">For any rectangular overlap region, the maximum
number of vias that can fit in the region is this:</p>
<div class="fig fignone" id="idf6d7c485-37cf-47fd-bb95-91c7613040b4"><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/adv_drc08a.png" /></div><br /></div>
<p class="p">The following procedure demonstrates how to write an eqDRC rule
check for the number of vias and the via area. The via width, spacing,
and enclosure rules are not considered, but these checks can be
done with standard DRC rule checks. </p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="id0f397058-4ae4-45eb-b45c-2a2d780efd9e" class="table" frame="hsides" border="1" rules="cols"><colgroup><col style="width:0.989in" /><col style="width:5.186in" /></colgroup><tbody class="tbody"><tr class="row"><td class="entry row-nocellborder default-entry" style="vertical-align:top;"><p class="p">    <span class="ph FontProperty HeadingLabel">Try It!</span> </p>
<img class="image fmdpi:96" src="../graphics/try_it_note_small.png" /></td>
<td class="entry row-nocellborder default-entry" style="vertical-align:top;"><p class="p"><span class="ph FontProperty HeadingLabel">Calibre Advanced DRC (eqDRC) Tutorial and Example Kit</span></p>
<p class="p">Go to <a class="xref" href="http://supportnet.mentor.com/infohub.cfm?infohub=ver_ih&amp;link=cal_ekit_IC" target="_blank">this page</a> on Support Center
to download the complete eKit.</p>
<p class="p">This example is in the contact_via_checks/max_via_coverage example directory.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand" id="idda1eac60-3a70-4cf5-90dc-df6f58f1d913__idcfb55ec6-51ce-42e2-8924-52b03a811eb5"><span class="ph cmd">Define the variables and derive
the extent of the overlap region:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>VARIABLE _enc 0.05 
VARIABLE _space 0.05 
VARIABLE _width 0.15 
 
met1_met2_overlap = EXTENTS ((MET1 AND MET2) ENCLOSE VIA1) </code></pre></div></li>
<li class="li step stepexpand" id="idda1eac60-3a70-4cf5-90dc-df6f58f1d913__id6cd3a3ef-be00-48c6-8cf2-2ee189d75bb8"><span class="ph cmd">Use a multilayer DFM Property
operation to calculate the maximum number of vias that can be placed
in the overlap region. Also determine if the vias that are present
have the expected area. The default INTERSECTING clustering is used
so that only the portion of the vias within the metal overlap area
are considered. </span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>via_coverage = DFM PROPERTY met1_met2_overlap VIA1 
    [ "+maxvias" = (FLOOR((((PERIMETERY(met1_met2_overlap)/2)-
                   (2*_enc)+_space)/(_width+_space))+0.0001)*
                   FLOOR((((PERIMETERX(met1_met2_overlap)/2)-
                   (2*_enc)+_space)/(_width+_space))+0.0001))]
    ["+vias_diff" = PROPERTY_REF("+maxvias") - COUNT(VIA1)]
    ["+ideal_area" = _width*_width*PROPERTY_REF("+maxvias")]
    [vias_missing = ( PROPERTY_REF("+vias_diff") &gt;= 0 ) ? 
                      PROPERTY_REF("+vias_diff") : 0 ] 
    [vias_extra = ( PROPERTY_REF("+vias_diff") &lt; 0 ) ? 
                    ABS(PROPERTY_REF("+vias_diff")) : 0 ] 
    
    // via_area_small is the fractional amount by which the 
    // actual via area is smaller than the expected via area. 
    // It is 0 if the actual via area is greater than or equal to 
    // the expected via area.
    // An expression chain is used in case an +ideal_area of zero 
    // causes divide by zero. 
    // DRC_LT returns 1 if actual via area &lt; ideal via area 
    [via_area_small = 
           (DRC_LT(AREA(VIA1), PROPERTY_REF("+ideal_area")) &gt; 0) ?
               1 - (AREA(VIA1)/PROPERTY_REF("+ideal_area") ) : 0 ]
           [via_area_small = 0]
    // produce output if any value is greater than 0
    [- = PROPERTY_REF(vias_missing) + PROPERTY_REF(vias_extra) 
         + PROPERTY_REF(via_area_small)] &gt; 0</code></pre><p class="p">These properties are calculated:</p>
<ul class="ul"><li class="li" id="idda1eac60-3a70-4cf5-90dc-df6f58f1d913__idea143da7-4eb1-46cc-a958-4825dbd209d4"><p class="p">“+maxvias”
— The maximum number of vias that can be placed in the metal overlap area.
The PERIMETERX and PERIMETERY measurement functions return two parallel
edges for each polygon, so it is necessary to divide these values
by 2 to get the Ox and Oy values. The initial + in the property
name marks it as a named non-persistent property. The property can
be used in property reference functions such as PROPERTY_REF(),
but it is not attached to the shapes on the output layer. </p>
</li>
<li class="li" id="idda1eac60-3a70-4cf5-90dc-df6f58f1d913__id42b02d70-40d6-43df-bc9e-e28cb7b59057"><p class="p">“+vias_diff”
— The difference between the actual number of vias and “+maxvias”. This
is a named non-persistent property. </p>
</li>
<li class="li" id="idda1eac60-3a70-4cf5-90dc-df6f58f1d913__id0f8864b9-b0c2-4755-b25f-58ea333d52ef"><p class="p">“+ideal_area”
— The expected via area, assuming the maximum number of vias of the
expected dimensions. </p>
</li>
<li class="li" id="idda1eac60-3a70-4cf5-90dc-df6f58f1d913__id5b279688-b1ef-4940-ac00-01cd2d6755f0"><p class="p">vias_missing
— The number of vias that are missing. </p>
</li>
<li class="li" id="idda1eac60-3a70-4cf5-90dc-df6f58f1d913__idf9ea5875-c0b1-445c-a2f3-3f836675da2f"><p class="p">vias_extra
— The number of extra vias. </p>
</li>
<li class="li" id="idda1eac60-3a70-4cf5-90dc-df6f58f1d913__id0f0d00ad-ad32-4d4d-a370-323738210684"><p class="p">via_area_small
— This value is zero if the actual via area is equal to or greater
than “+ideal_area”. Otherwise it is the fractional amount by which
the actual via area is smaller than expected. </p>
<p class="p">The DRC_LT function is used to compare the actual via area to
the expected area within a built-in tolerance. </p>
<p class="p">An expression chain is used to prevent evaluation failure due
to divide by zero if “+ideal_area” is zero, which might happen for
a very small enclosure area. </p>
</li>
</ul>
<p class="p">The final property calculation
causes result output only if an error condition exists. A non-persistent
property is used, so the actual value is not attached to the output. </p>
</div></li>
<li class="li step stepexpand" id="idda1eac60-3a70-4cf5-90dc-df6f58f1d913__id48f9ce72-eb36-48a2-a282-2947d02aca60"><span class="ph cmd">Output the results with a
DFM RDB operation.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>via_coverage {
    DFM RDB via_coverage eqdrc.rdb CHECKNAME "%_l_" 
        CELL SPACE ALL CELLS 
}</code></pre></div></li>
</ol>
<div class="section result"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Results</h2></div><p class="p">Results are shown in the following figure. </p>
<div class="fig fignone" id="idda1eac60-3a70-4cf5-90dc-df6f58f1d913__id81da20fe-948b-4af7-9abf-4cd34b4ba233"><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/adv_drc/max_via_coverage_results.png" /></div><br /></div>
<p class="p">The lower right enclosure area has a portion of a fifth via within
the enclosure, which causes the vias_extra property value to be
1. The via_area_small property value is non-zero only when the actual
via area is smaller than expected, so its value is zero.</p>
<p class="p">The vias are not centered in the lower right enclosure, but this
check does consider via placement. Other checks, such as enclosure,
width, and spacing rules, are expected to catch errors not considered
by the via count and area checks demonstrated here. </p>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_ContactViaChecks_id2eebc3bb.html" title="This section presents various contact and via checks.">Contact and Via Checks</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../../calbr_ver_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Introduction to DFM Property', 'calbr_ver_user'); return false;">Introduction to DFM Property [Calibre Verification User's Manual]</a></div>
<div><a class="link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Measurement Functions', 'svrf_ur'); return false;">Measurement Functions [Standard Verification Rule Format (SVRF) Manual]</a></div>
<div><a class="link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Math Operators', 'svrf_ur'); return false;">Math Operators [Standard Verification Rule Format (SVRF) Manual]</a></div>
<div><a class="link" href="../../calbr_ver_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Introduction to DFM RDB', 'calbr_ver_user'); return false;">Introduction to DFM RDB [Calibre Verification User's Manual]</a></div>
<div><a class="link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Supported Math Functions in DFM Expressions', 'svrf_ur'); return false;">Supported Math Functions in DFM Expressions [Standard Verification Rule Format (SVRF) Manual]</a></div>
<div><a class="link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Non-Persistent DFM Properties', 'svrf_ur'); return false;">Non-Persistent DFM Properties [Standard Verification Rule Format (SVRF) Manual]</a></div>
<div><a class="link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Expression Chains', 'svrf_ur'); return false;">Expression Chains [Standard Verification Rule Format (SVRF) Manual]</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_solns_pv_user"
                DocTitle = "Calibre® Solutions for Physical Verification"
                PageTitle = "Checking Maximum Via Coverage for Metal Overlap Regions"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_CheckingMaximumViaCoverageMetalOverlapRegions_idda1eac60.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Solutions for Physical Verification, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>