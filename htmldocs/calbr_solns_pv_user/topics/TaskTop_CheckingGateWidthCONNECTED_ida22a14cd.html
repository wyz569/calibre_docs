<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Checking Gate Width Dependent Via Count With DFM Property CONNECTED" />
<meta name="abstract" content="This example uses DFM Property CONNECTED to identify via transitions that do not have enough redundant vias to handle the current for the total gate width being driven by a particular metal line." />
<meta name="description" content="This example uses DFM Property CONNECTED to identify via transitions that do not have enough redundant vias to handle the current for the total gate width being driven by a particular metal line." />
<meta name="prodname" content="Calibre Solutions for Physical Verification" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-13" />
<meta name="Topline" content="Siemens EDA" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2;show" />
<meta name="HighlightChanges" content="Yes" />
<meta name="HighlightColor" content="mgc_light_blue" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_solns_pv_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 16, 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® Solutions for Physical Verification" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10089,product.id.P11800,product.id.P11802,product.id.P11801,product.id.P11426,product.id.P10099,product.id.P10096,product.id.P11493,product.id.P11347,product.id.P11713,product.id.P10294" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="ida22a14cd-e820-4848-9d6c-7164a0aee10b" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Checking Gate Width Dependent Via Count With DFM Property CONNECTED</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Checking Gate Width Dependent Via Count With DFM Property CONNECTED" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10089,product.id.P11800,product.id.P11802,product.id.P11801,product.id.P11426,product.id.P10099,product.id.P10096,product.id.P11493,product.id.P11347,product.id.P11713,product.id.P10294" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="ida22a14cd-e820-4848-9d6c-7164a0aee10b">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Checking Gate Width Dependent
Via Count With DFM Property CONNECTED</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><p class="shortdesc">This
example uses DFM Property CONNECTED to identify via transitions
that do not have enough redundant vias to handle the current for
the total gate width being driven by a particular metal line.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="id3ab634ae-c179-4aad-a939-fe164e26b838" class="table" frame="hsides" border="1" rules="cols"><colgroup><col style="width:0.989in" /><col style="width:5.186in" /></colgroup><tbody class="tbody"><tr class="row"><td class="entry row-nocellborder default-entry" style="vertical-align:top;"><p class="p">    <span class="ph FontProperty HeadingLabel">Try It!</span> </p>
<img class="image fmdpi:96" src="../graphics/try_it_note_small.png" /></td>
<td class="entry row-nocellborder default-entry" style="vertical-align:top;"><p class="p"><span class="ph FontProperty HeadingLabel">Calibre Advanced DRC (eqDRC) Tutorial and Example Kit</span></p>
<p class="p">Go to <a class="xref" href="http://supportnet.mentor.com/infohub.cfm?infohub=ver_ih&amp;link=cal_ekit_IC" target="_blank">this page</a> on Support Center
to download the complete eKit.</p>
<p class="p">This example is in the device_routing_checks/gate_width_via_count example
directory.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand" id="ida22a14cd-e820-4848-9d6c-7164a0aee10b__id35502036-bd6f-44a8-a2a6-f09c6a52684b"><span class="ph cmd">Define
the gate width value per via variable width_per_via:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock"><code>VARIABLE width_per_via 1</code></pre><p class="p">The total gate width divided by width_per_via gives the fractional
number of vias required for the total gate width.</p>
</div></li>
<li class="li step stepexpand" id="ida22a14cd-e820-4848-9d6c-7164a0aee10b__id99ce18e8-8e9d-424f-80c2-5be9f4740f17"><span class="ph cmd">Derive the sd (source-drain)
and via transition layers and establish connectivity:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>sd = AA NOT POLY 
viatrans = (AND M1 M2) INTERACT VIA1 

CONNECT M1 M2 BY VIA1 </code></pre></div></li>
<li class="li step stepexpand" id="ida22a14cd-e820-4848-9d6c-7164a0aee10b__id6c25e3c7-5a3d-44f4-81ad-9702b8143c07"><span class="ph cmd">Derive a layer that contains
the edges of each gate:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>gateedges = INSIDE EDGE POLY AA </code></pre></div></li>
<li class="li step stepexpand" id="ida22a14cd-e820-4848-9d6c-7164a0aee10b__id59d8bff0-39dc-4b3f-96eb-baf32f4e48c8"><span class="ph cmd">For each source-drain region,
measure the width of the gate that the region overlaps. The following
DFM Property operation uses sd as the primary layer and gateedges
as the secondary clustering layer. The gatewidth property uses the
LENGTH function to get the width of the gate for each source-drain
region:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>sdprops = DFM PROPERTY sd gateedges OVERLAP ABUT ALSO MULTI 
              [gatewidth = LENGTH(gateedges)] 
CONNECT M1 sdprops BY CON </code></pre><p class="p">Connect the sdprops layer to the M1 layer for use in the next
step. </p>
</div></li>
<li class="li step stepexpand" id="ida22a14cd-e820-4848-9d6c-7164a0aee10b__id07486fbd-53f1-49de-9f88-847cd027dce1"><span class="ph cmd">Sum the gate widths for each
source-drain region that connects to an M1 geometry. Do this by
using a DFM Property operation with the CONNECTED keyword, M1 as
the primary layer, and sdprops as the secondary layer. The property
sum_gatewidth is the sum of the gatewidth property over all sdprops
shapes connected to the M1 shape. </span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>m1props = DFM PROPERTY M1 sdprops OVERLAP CONNECTED MULTI 
          [sum_gatewidth = PROPERTY(sdprops,gatewidth)] </code></pre></div></li>
<li class="li step stepexpand" id="ida22a14cd-e820-4848-9d6c-7164a0aee10b__id7e8ab997-70c6-4837-96b6-2254ebbede75"><span class="ph cmd">Verify that the required number
of vias are present and define a property vias_to_add that displays
how many vias must be added to pass the check: </span><div class="itemgroup info StepInfo"><p class="p">These properties are calculated: </p>
<ul class="ul"><li class="li" id="ida22a14cd-e820-4848-9d6c-7164a0aee10b__idc78b47e0-f837-40bb-ae3b-3b4dc527e32f"><p class="p">“+vias_needed”
— The fractional number of vias that are required for the total
gate width (sum_gatewidth/width_per_via). This is a named non-persistent
property, meaning it is not saved to the output layer, but the value
can be referenced later in the same expression using PROPERTY_REF. </p>
</li>
<li class="li" id="ida22a14cd-e820-4848-9d6c-7164a0aee10b__id04a3247a-a5c6-4b29-8119-1d01e1594232"><p class="p">error_ratio
— The required number of vias divided by the actual number of vias.
A result is output if this value is greater than 1.</p>
</li>
<li class="li" id="ida22a14cd-e820-4848-9d6c-7164a0aee10b__id43e013d4-8912-45cb-99b9-f0fa90c5645f"><p class="p">vias_to_add
— The number of vias that must be added to pass the check. The value is
found by rounding the value of “+vias_needed” up to the nearest
integer, then subtracting the actual number of vias. </p>
</li>
<li class="li" id="ida22a14cd-e820-4848-9d6c-7164a0aee10b__id0e6808f4-c6fb-401f-ab3b-087cee0ecfb2"><p class="p">vias_present
— The number of vias that overlap the viatrans shape. </p>
</li>
</ul>
<pre class="pre codeblock leveled"><code>eqdrc_err_con = DFM PROPERTY viatrans m1props VIA1 OVERLAP MULTI 
    // fractional number of vias needed
    ["+vias_needed" = PROPERTY(m1props,sum_gatewidth)/width_per_via]
    [error_ratio = PROPERTY_REF("+vias_needed")/COUNT(VIA1) ] &gt; 1 
    [vias_to_add = CEIL(PROPERTY_REF("+vias_needed"))-COUNT(V1)]
    [vias_present = COUNT(VIA1)]      </code></pre><p class="p">For efficiency, the sum_gatewidth property is not saved to the
output layer. However, it can be calculated as error_ratio×vias_present×width_per_via. </p>
</div></li>
<li class="li step stepexpand" id="ida22a14cd-e820-4848-9d6c-7164a0aee10b__idcaf7489d-b24d-4bc3-b5e4-0d0c5d948d39"><span class="ph cmd">Output the result to the DFM
RDB file named <span class="ph filepath">eqdrc_connected.rdb</span>. If desired,
also output intermediate derived layers to the same file. </span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>// Set default options for DFM RDB operations 
DFM DEFAULTS RDB CELL SPACE ALL CELLS CHECKNAME "%_l_"
eqDRC_result { 
    DFM RDB eqdrc_err_con eqdrc_connected.rdb  
      COMMENT "Via Count per Gate Width Rule" 
      COMMENT "DFM PROPERTY CONNECTED method"
      COMMENT "error_ratio = vias_needed/vias_present"
} 
// Comment out to include debug output
DRC UNSELECT CHECK eqdrc_debug
eqdrc_debug { 
    DFM RDB gateedges eqdrc_connected.rdb  
    DFM RDB m1props eqdrc_connected.rdb  
} </code></pre></div></li>
</ol>
<div class="section result"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Results</h2></div><p class="p"><a class="xref fm:Figure" href="#ida22a14cd-e820-4848-9d6c-7164a0aee10b__id6cc6dd4d-2867-4f84-bc00-7e7916049a46">Figure 1</a> shows output in Calibre DESIGNrev for
a sample design. Several M1 lines are shown. The M1 lines that overlap
source-drain regions are labeled A, B, C, D, and E. The via transitions
for lines B and D are highlighted as errors because there are not
enough vias for the total gate width. </p>
<p class="p">Line B has a total gate width of 4.2
user units and 3 vias present. The gate width per via value (width_per_via)
is 1, meaning 5 vias are needed (4.2 rounded up to the nearest integer).
The property vias_to_add is 2, as expected. Line D has a total gate
width of 1.5, meaning 2 vias are needed. </p>
<div class="fig fignone" id="ida22a14cd-e820-4848-9d6c-7164a0aee10b__id6cc6dd4d-2867-4f84-bc00-7e7916049a46"><span class="figcap"><span class="fig--title-label">Figure 1. </span>Gate Width Dependent
Via Count Output</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/adv_drc/adv_drc_gate_width_via_connected.png" /></div><br /></div>
<p class="p">Line A has a total gate width of 2.1 and passes the check. It
requires 3 vias, which are present. Line C has a total gate width
of 2.85 and passes the check with 3 vias present. Line E has a total gate
width of 0.75 and passes the check with 1 via present. </p>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_CheckingGateWidthDependentViaCount_id70dcd4b8.html" title="You can identify via transitions that have an insufficient number of redundant vias to handle the current for the total gate width being driven by a particular metal line. You can do this by writing a rule check that verifies there is at least one via per unit gate width.">Checking Gate Width Dependent Via Count</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../../calbr_ver_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Introduction to DFM Property', 'calbr_ver_user'); return false;">Introduction to DFM Property [Calibre Verification User's Manual]</a></div>
<div><a class="link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Non-Persistent DFM Properties', 'svrf_ur'); return false;">Non-Persistent DFM Properties [Standard Verification Rule Format (SVRF) Manual]</a></div>
<div><a class="link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Measurement Functions', 'svrf_ur'); return false;">Measurement Functions [Standard Verification Rule Format (SVRF) Manual]</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_solns_pv_user"
                DocTitle = "Calibre® Solutions for Physical Verification"
                PageTitle = "Checking Gate Width Dependent Via Count With DFM Property CONNECTED"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_CheckingGateWidthCONNECTED_ida22a14cd.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Solutions for Physical Verification, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>