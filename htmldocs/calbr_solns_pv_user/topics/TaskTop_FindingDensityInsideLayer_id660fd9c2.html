<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Finding Density Inside of a Layer" />
<meta name="abstract" content="The following procedure shows Density operations for checking polygons from one layer that are inside of another layer. The operation has an INSIDE OF LAYER option, but its performance can be slow in certain situations, so it is best to avoid using that option." />
<meta name="description" content="The following procedure shows Density operations for checking polygons from one layer that are inside of another layer. The operation has an INSIDE OF LAYER option, but its performance can be slow in certain situations, so it is best to avoid using that option." />
<meta name="prodname" content="Calibre Solutions for Physical Verification" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-13" />
<meta name="Topline" content="Siemens EDA" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2;show" />
<meta name="HighlightChanges" content="Yes" />
<meta name="HighlightColor" content="mgc_light_blue" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_solns_pv_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 16, 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® Solutions for Physical Verification" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10089,product.id.P11800,product.id.P11802,product.id.P11801,product.id.P11426,product.id.P10099,product.id.P10096,product.id.P11493,product.id.P11347,product.id.P11713,product.id.P10294" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id660fd9c2-cac4-42b7-ba1f-74ce3ce518bf" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Finding Density Inside of a Layer</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Finding Density Inside of a Layer" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10089,product.id.P11800,product.id.P11802,product.id.P11801,product.id.P11426,product.id.P10099,product.id.P10096,product.id.P11493,product.id.P11347,product.id.P11713,product.id.P10294" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id660fd9c2-cac4-42b7-ba1f-74ce3ce518bf">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Finding Density Inside of a Layer</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><p class="shortdesc">The following
procedure shows Density operations for checking polygons from one
layer that are inside of another layer. The operation has an INSIDE
OF LAYER option, but its performance can be slow in certain situations,
so it is best to avoid using that option.</p>
<p class="p">One advantage to writing the <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Density', 'svrf_ur'); return false;">Density</a> operations in the
ways shown in this section is you can have multiple Density operations
using differing constraints (but otherwise using the same parameter
values) and they will all run concurrently.</p>
<p class="p">The
d, w, and s parameters shown in this procedure can be chosen for
your process and set up as variables in the rule file.</p>
</div>
<div class="section prereq Prerequisites p"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Prerequisites</h2></div><ul class="ul"><li class="li" id="id660fd9c2-cac4-42b7-ba1f-74ce3ce518bf__id9463cfb6-aa8f-4113-b4ce-68fc4a091c4b"><p class="p">Thorough
understanding of the <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Density', 'svrf_ur'); return false;">Density</a> AREA()
function and math operators.</p>
</li>
</ul>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand" id="id660fd9c2-cac4-42b7-ba1f-74ce3ce518bf__id1e9ccd10-de51-46b3-a936-336af55baa44"><span class="ph cmd">Write a Density check as follows,
where you want to check the fill layer inside the marker layer:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>filldensity = DENSITY fill marker &lt; d 
              [<span class="ph CodeHighlight orange">AREA(fill)/AREA(marker)</span>] 
              WINDOW w STEP s 
              RDB filldensity.rdb

filldensity { COPY filldensity }</code></pre><p class="p">The AREA(fill)/AREA(marker)
expression calculates the quotient of the area of the fill layer
versus the area of the marker layer in the data capture window.
If AREA(marker) is 0, that window is not output. </p>
<p class="p">A potential drawback to this
expression is the denominator may not generally produce constant
values.</p>
</div></li>
<li class="li step stepexpand" id="id660fd9c2-cac4-42b7-ba1f-74ce3ce518bf__idd6efebeb-8a2c-4ac9-abd7-7446792f92fd"><span class="ph cmd">Run DRC and view the results
for the filldensity layer. Results could be as follows:</span><div class="itemgroup info StepInfo"><div class="fig fignone" id="id660fd9c2-cac4-42b7-ba1f-74ce3ce518bf__idf812ecff-49bb-4b98-84bb-9080a6e3f7c1"><span class="figcap"><span class="fig--title-label">Figure 1. </span>Density Inside of
Marker Layer</span><br /><div class="imageleft"><img class="image imageleft" height="194" src="../graphics/density_inside_marker_1.png" width="468" /></div><br /></div>
<p class="p">Notice in <a class="xref fm:Figure" href="#id660fd9c2-cac4-42b7-ba1f-74ce3ce518bf__idf812ecff-49bb-4b98-84bb-9080a6e3f7c1">Figure 1</a> that all output polygons have at least
some interior points coincident with the marker layer. Again, a
possible disadvantage to having AREA(marker) in the denominator
is this function would not produce constant values.</p>
</div></li>
<li class="li step stepexpand" id="id660fd9c2-cac4-42b7-ba1f-74ce3ce518bf__idee293480-de6d-4fda-ba40-abd08f21f0cb"><span class="ph cmd">A modified version of the
operation from Step 1 is this:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>filldensity = DENSITY fill marker &lt; d 
              [<span class="ph CodeHighlight orange">(AREA(fill)/!!AREA(marker))/AREA()</span>] 
              WINDOW w STEP s 
              RDB filldensity.rdb

filldensity { COPY filldensity }</code></pre><p class="p">The (AREA(fill)/!!AREA(marker))/AREA()
expression calculates the quotient of the area of the fill layer
versus the area of the data capture window, <span class="ph FontProperty emphasis">if there is marker layer area</span> in
the window. This form has the advantage of keeping the value of
the denominator constant while guaranteeing the marker layer must
be present in order to produce a result.</p>
</div></li>
<li class="li step stepexpand" id="id660fd9c2-cac4-42b7-ba1f-74ce3ce518bf__ida1b68b73-39e2-424f-9455-0b15ca6479af"><span class="ph cmd">Run DRC and view the results
for the filldensity layer. Results could be as follows:</span><div class="itemgroup info StepInfo"><div class="fig fignone" id="id660fd9c2-cac4-42b7-ba1f-74ce3ce518bf__id299be0b9-580a-449c-8bd8-ad807fc410f9"><span class="figcap"><span class="fig--title-label">Figure 2. </span>Density Inside of
Marker Layer (Improved)</span><br /><div class="imageleft"><img class="image imageleft" height="194" src="../graphics/density_inside_marker_2.png" width="468" /></div><br /></div>
<p class="p">Compare these results to <a class="xref fm:Figure" href="#id660fd9c2-cac4-42b7-ba1f-74ce3ce518bf__idf812ecff-49bb-4b98-84bb-9080a6e3f7c1">Figure 1</a>. There are two additional results (outlined
in black) due to the use of the different expression.</p>
<p class="p">A drawback to this method (and
the one from Step 1) is interpreting results that occur around the
perimeter of the marker layer can be tricky. Are the gaps in the
filldensity regions around the marker perimeter passing or failing?</p>
</div></li>
<li class="li step stepexpand" id="id660fd9c2-cac4-42b7-ba1f-74ce3ce518bf__id2443ffe8-f714-489a-b151-782bf3babc0c"><span class="ph cmd">Another method is to ensure
that a data capture window shares at least 80 percent of its area
with the marker layer before that window’s measurement can meet
the constraint. Write this operation:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>filldensity = DENSITY fill marker &lt; d 
    [(<span class="ph CodeHighlight orange">~~(AREA(marker)-0.8*w*w)*</span>(AREA(fill)/!!AREA(marker)))/AREA()] 
              WINDOW w STEP s 
              RDB filldensity.rdb

filldensity { COPY filldensity }</code></pre><p class="p">The expression uses elements
of the expression found in Step 3, and those elements perform the
same function here. The ~~(AREA(marker)-0.8*w*w) portion of the expression
returns a 1 if the area of the marker layer intersects at least
80 percent of the window. Otherwise this portion of the expression
returns a 0, which falls within the Density constraint.</p>
</div></li>
<li class="li step stepexpand" id="id660fd9c2-cac4-42b7-ba1f-74ce3ce518bf__ida5638143-554c-4a03-bcc1-f67d6e9fdcdb"><span class="ph cmd">Run DRC and view the results
for the filldensity layer. Results could be as follows:</span><div class="itemgroup info StepInfo"><div class="fig fignone" id="id660fd9c2-cac4-42b7-ba1f-74ce3ce518bf__id5271c36f-f5e4-46e2-bf52-a1800edbcc8b"><span class="figcap"><span class="fig--title-label">Figure 3. </span>Density Using Minimum
Marker Layer Overlap</span><br /><div class="imageleft"><img class="image imageleft" height="210" src="../graphics/density_inside_marker_3.png" width="468" /></div><br /></div>
<p class="p">Compare this with <a class="xref fm:Figure" href="#id660fd9c2-cac4-42b7-ba1f-74ce3ce518bf__idf812ecff-49bb-4b98-84bb-9080a6e3f7c1">Figure 1</a>. Unless the data capture window shares
80 percent of its area with the marker layer, the window fails.</p>
<p class="p">This method makes for cleaner
results presentation in certain respects because it treats the results
around the perimeter of the marker layer as failing. The challenge
is then to separate the results in the interior of the marker layer
from those around the perimeter. This is done using Calibre RVE.</p>
</div></li>
<li class="li step stepexpand" id="id660fd9c2-cac4-42b7-ba1f-74ce3ce518bf__idf00031fd-1969-4c6b-b127-2e53e531f529"><span class="ph cmd">Open the <span class="ph filepath italic">filldensity.rdb</span> file
in Calibre RVE and sort the DA marker column in descending order.
Scroll down until you see DA marker values that are less than 80 percent
of the maximum corresponding value in the DA column. </span><div class="itemgroup info StepInfo"><div class="fig fignone" id="id660fd9c2-cac4-42b7-ba1f-74ce3ce518bf__id7c5fe73e-b83d-4fc7-9676-c0614d65eedf"><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/density_rve_inside_of_layer.png" /></div><br /></div>
</div></li>
<li class="li step stepexpand" id="id660fd9c2-cac4-42b7-ba1f-74ce3ce518bf__id3b3eeaa5-cf16-41b0-b3e4-3a9a73b8c51f"><span class="ph cmd">Highlight all results where
DA marker is at least 80 percent of DA. (You can Shift+click a range
of rows in the Calibre RVE results table.) Results could be as follows:</span><div class="itemgroup info StepInfo"><div class="fig fignone" id="id660fd9c2-cac4-42b7-ba1f-74ce3ce518bf__id1d62f430-dcf8-4a06-a1bf-fc1473553951"><span class="figcap"><span class="fig--title-label">Figure 4. </span>Windows Inside Marker
Layer</span><br /><div class="imageleft"><img class="image imageleft" height="203" src="../graphics/density_inside_marker_4.png" width="468" /></div><br /></div>
<p class="p">Compare this with <a class="xref fm:Figure" href="#id660fd9c2-cac4-42b7-ba1f-74ce3ce518bf__id5271c36f-f5e4-46e2-bf52-a1800edbcc8b">Figure 3</a>. These are the windows inside the marker
layer that fail.</p>
</div></li>
</ol>
<div class="section result"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Results</h2></div><p class="p">You can adjust the Density constraint,
WINDOW, and STEP values and view them using similar techniques shown
in this section. Using these methods, you can optimize your results presentation.</p>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_DensityOperationCategories_id65ee72b7.html" title="This section presents typical Density checks.">Density Operation Categories</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../topics/TaskTop_AnalyzingDensityResultsCalibreRve_idf23e2c15.html" title="Visualizing Density results using Calibre RVE is important for interpreting what they mean and how to fix them. Results visualization also assists you in writing better Density checks by providing properties that can be sorted, highlighted in color maps and histograms, and displayed in the layout itself.">Analyzing Density Results with Calibre RVE</a></div>
<div><a class="link" href="../topics/Contain_DensityOperationCategories_id65ee72b7.html" title="This section presents typical Density checks.">Density Operation Categories</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_solns_pv_user"
                DocTitle = "Calibre® Solutions for Physical Verification"
                PageTitle = "Finding Density Inside of a Layer"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_FindingDensityInsideLayer_id660fd9c2.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Solutions for Physical Verification, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>