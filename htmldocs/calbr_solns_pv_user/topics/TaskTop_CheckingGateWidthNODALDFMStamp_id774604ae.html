<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Checking Gate Width Dependent Via Count With DFM Property NODAL and DFM Stamp" />
<meta name="abstract" content="This example uses DFM Stamp and DFM Property NODAL to identify via transitions that have an insufficient number of redundant vias to handle the current for the total gate width being driven by a particular metal line." />
<meta name="description" content="This example uses DFM Stamp and DFM Property NODAL to identify via transitions that have an insufficient number of redundant vias to handle the current for the total gate width being driven by a particular metal line." />
<meta name="prodname" content="Calibre Solutions for Physical Verification" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-13" />
<meta name="Topline" content="Siemens EDA" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2;show" />
<meta name="HighlightChanges" content="Yes" />
<meta name="HighlightColor" content="mgc_light_blue" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_solns_pv_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 16, 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® Solutions for Physical Verification" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10089,product.id.P11800,product.id.P11802,product.id.P11801,product.id.P11426,product.id.P10099,product.id.P10096,product.id.P11493,product.id.P11347,product.id.P11713,product.id.P10294" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id774604ae-c516-48ec-a465-b74ffd1f9e4e" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Checking Gate Width Dependent Via Count With DFM Property NODAL and DFM Stamp</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Checking Gate Width Dependent Via Count With DFM Property NODAL and DFM Stamp" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10089,product.id.P11800,product.id.P11802,product.id.P11801,product.id.P11426,product.id.P10099,product.id.P10096,product.id.P11493,product.id.P11347,product.id.P11713,product.id.P10294" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id774604ae-c516-48ec-a465-b74ffd1f9e4e">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Checking Gate
Width Dependent Via Count With DFM Property NODAL and DFM Stamp</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><p class="shortdesc">This example
uses DFM Stamp and DFM Property NODAL to identify via transitions
that have an insufficient number of redundant vias to handle the
current for the total gate width being driven by a particular metal
line.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="id20a2a922-4cec-4f4a-a0a5-a4c94190ad98" class="table" frame="hsides" border="1" rules="cols"><colgroup><col style="width:0.989in" /><col style="width:5.186in" /></colgroup><tbody class="tbody"><tr class="row"><td class="entry row-nocellborder default-entry" style="vertical-align:top;"><p class="p">    <span class="ph FontProperty HeadingLabel">Try It!</span> </p>
<img class="image fmdpi:96" src="../graphics/try_it_note_small.png" /></td>
<td class="entry row-nocellborder default-entry" style="vertical-align:top;"><p class="p"><span class="ph FontProperty HeadingLabel">Calibre Advanced DRC (eqDRC) Tutorial and Example Kit</span></p>
<p class="p">Go to <a class="xref" href="http://supportnet.mentor.com/infohub.cfm?infohub=ver_ih&amp;link=cal_ekit_IC" target="_blank">this page</a> on Support Center
to download the complete eKit.</p>
<p class="p">This example is in the device_routing_checks/gate_width_via_count example
directory.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand" id="id774604ae-c516-48ec-a465-b74ffd1f9e4e__id0b198072-034a-46a2-8376-8ab4fe598de7"><span class="ph cmd">Define
the gate width value per via variable width_per_via:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock"><code>VARIABLE width_per_via 1</code></pre><p class="p">The total gate width divided by width_per_via gives the fractional
number of vias required for the total gate width.</p>
</div></li>
<li class="li step stepexpand" id="id774604ae-c516-48ec-a465-b74ffd1f9e4e__idb014f58b-ed25-499f-a419-6da4ebed68ff"><span class="ph cmd">Derive the sd (source-drain)
and via transition layers and establish connectivity.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>sd = AA NOT POLY 
viatrans = (M1 AND M2) INTERACT VIA1 
 
CONNECT M1 sd BY CON 
CONNECT viatrans M1 BY VIA1  </code></pre></div></li>
<li class="li step stepexpand" id="id774604ae-c516-48ec-a465-b74ffd1f9e4e__idaff6134c-e652-41d8-8a5d-519b771cc97f"><span class="ph cmd">Derive a layer that contains
the edges of each gate:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>gateedges = INSIDE EDGE POLY AA </code></pre></div></li>
<li class="li step stepexpand" id="id774604ae-c516-48ec-a465-b74ffd1f9e4e__id0bd6f9e4-f2a5-4e1b-898d-189b6b6efe82"><span class="ph cmd">Derive a layer sd_n with a
property “N” that contains the net ID for each sd geometry. Derive
another layer gateedges_props with properties containing the gate
width and the net ID values from layer sd_n. Finally, assign the
node numbers to layer new_gateedges from the net ID property “N”
on layer gateedges_props.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>sd_n = DFM PROPERTY sd [N = NETID(sd)] 
 
gateedges_props = DFM PROPERTY gateedges sd_n 
    OVERLAP ABUT ALSO MULTI 
    [gatewidth = LENGTH(gateedges)] 
    [N = NETPROPERTY(sd_n, N, 1)] 
 
new_gateedges = DFM STAMP gateedges_props BY "N" </code></pre><p class="p">DFM Stamp copies the gatewidth property from gateedges_props
to the output layer. </p>
</div></li>
<li class="li step stepexpand" id="id774604ae-c516-48ec-a465-b74ffd1f9e4e__idb60f6669-002b-4aa8-b758-874169a55907"><span class="ph cmd">Derive a layer total_gate
with a property that contains the total gate width per node for each
viatrans geometry.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>total_gate = DFM PROPERTY viatrans new_gateedges NODAL MULTI 
                [sum_gatewidth = PROPERTY(new_gateedges,gatewidth)] </code></pre></div></li>
<li class="li step stepexpand" id="id774604ae-c516-48ec-a465-b74ffd1f9e4e__id1adad80d-8eb4-4a2a-a2e7-bced72ca158a"><span class="ph cmd">Verify that the required number
of vias are present and define a property vias_to_add that displays
how many vias must be added to pass the check:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock not-leveled"><code>   eqdrc_err_stamp = DFM PROPERTY total_gate VIA1 OVERLAP
      // fractional number of vias needed
      ["+vias_needed" = PROPERTY(total_gate,sum_gatewidth)/width_per_via]
      [error_ratio = PROPERTY_REF("+vias_needed")/COUNT(VIA1) ] &gt; 1 
      [vias_to_add = CEIL(PROPERTY_REF("+vias_needed"))-COUNT(VIA1)]
      [vias_present = COUNT(VIA1)]</code></pre><p class="p">See “<a class="xref fm:HeadingAndPage" href="TaskTop_CheckingGateWidthCONNECTED_ida22a14cd.html#ida22a14cd-e820-4848-9d6c-7164a0aee10b__TaskTop_CheckingGateWidthCONNECTED_ida22a14cd.xml#ida22a14cd-e820-4848-9d6c-7164a0aee10b" title="This example uses DFM Property CONNECTED to identify via transitions that do not have enough redundant vias to handle the current for the total gate width being driven by a particular metal line.">Checking Gate Width Dependent Via Count With DFM Property CONNECTED</a>” for more
discussion of the calculated properties. </p>
</div></li>
<li class="li step stepexpand" id="id774604ae-c516-48ec-a465-b74ffd1f9e4e__id102a9c00-995f-45a3-9c49-d121eea8432d"><span class="ph cmd">Output the result to the DFM
RDB file named <span class="ph filepath">eqdrc_stamp.rdb</span>. If desired,
also output intermediate derived layers to the same file. </span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>// Set default options for DFM RDB operations
DFM DEFAULTS RDB CELL SPACE ALL CELLS CHECKNAME "%_l_" 
eqDRC_result {
    DFM RDB eqdrc_err_stamp "eqdrc_stamp.rdb" 
        COMMENT "Via Count per Gate Width Rule "
        COMMENT "DFM STAMP and DFM PROPERTY NODAL method"
        COMMENT "error_ratio = vias_needed/vias_present"
}
// uncomment to include debug output
DRC UNSELECT CHECK eqdrc_debug
eqdrc_debug {
    DFM RDB new_gateedges "eqdrc_stamp.rdb" 
    DFM RDB total_gate "eqdrc_stamp.rdb" 
}</code></pre></div></li>
</ol>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_CheckingGateWidthDependentViaCount_id70dcd4b8.html" title="You can identify via transitions that have an insufficient number of redundant vias to handle the current for the total gate width being driven by a particular metal line. You can do this by writing a rule check that verifies there is at least one via per unit gate width.">Checking Gate Width Dependent Via Count</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../../calbr_ver_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Introduction to DFM Property', 'calbr_ver_user'); return false;">Introduction to DFM Property [Calibre Verification User's Manual]</a></div>
<div><a class="link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Measurement Functions', 'svrf_ur'); return false;">Measurement Functions [Standard Verification Rule Format (SVRF) Manual]</a></div>
<div><a class="link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Math Operators', 'svrf_ur'); return false;">Math Operators [Standard Verification Rule Format (SVRF) Manual]</a></div>
<div><a class="link" href="../../calbr_ver_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Introduction to DFM RDB', 'calbr_ver_user'); return false;">Introduction to DFM RDB [Calibre Verification User's Manual]</a></div>
<div><a class="link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Supported Math Functions in DFM Expressions', 'svrf_ur'); return false;">Supported Math Functions in DFM Expressions [Standard Verification Rule Format (SVRF) Manual]</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_solns_pv_user"
                DocTitle = "Calibre® Solutions for Physical Verification"
                PageTitle = "Checking Gate Width Dependent Via Count With DFM Property NODAL and DFM Stamp"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_CheckingGateWidthNODALDFMStamp_id774604ae.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Solutions for Physical Verification, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>