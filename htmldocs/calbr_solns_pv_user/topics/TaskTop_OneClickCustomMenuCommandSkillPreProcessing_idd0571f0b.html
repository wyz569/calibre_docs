<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Creating a One-Click Custom Menu Command With SKILL Pre-Processing" />
<meta name="abstract" content="You can define a custom menu command for Cadence Virtuoso to first call a SKILL function, then execute one or more commands. This example demonstrates how to create a custom menu item that calls a SKILL procedure, runs Calibre Interactive in batch mode, then executes a shell command for post-processing." />
<meta name="description" content="You can define a custom menu command for Cadence Virtuoso to first call a SKILL function, then execute one or more commands. This example demonstrates how to create a custom menu item that calls a SKILL procedure, runs Calibre Interactive in batch mode, then executes a shell command for post-processing." />
<meta name="prodname" content="Calibre Solutions for Physical Verification" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-13" />
<meta name="Topline" content="Siemens EDA" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2;show" />
<meta name="HighlightChanges" content="Yes" />
<meta name="HighlightColor" content="mgc_light_blue" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_solns_pv_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 16, 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® Solutions for Physical Verification" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10089,product.id.P11800,product.id.P11802,product.id.P11801,product.id.P11426,product.id.P10099,product.id.P10096,product.id.P11493,product.id.P11347,product.id.P11713,product.id.P10294" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idd0571f0b-1487-43b5-9195-76c0173d6eee" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Creating a One-Click Custom Menu Command With SKILL Pre-Processing</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Creating a One-Click Custom Menu Command With SKILL Pre-Processing" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10089,product.id.P11800,product.id.P11802,product.id.P11801,product.id.P11426,product.id.P10099,product.id.P10096,product.id.P11493,product.id.P11347,product.id.P11713,product.id.P10294" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="idd0571f0b-1487-43b5-9195-76c0173d6eee">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Creating a One-Click Custom Menu
Command With SKILL Pre-Processing</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><p class="shortdesc">You can define
a custom menu command for Cadence Virtuoso to first call a SKILL
function, then execute one or more commands. This example demonstrates
how to create a custom menu item that calls a SKILL procedure, runs
Calibre Interactive in batch mode, then executes a shell command
for post-processing.</p>
<p class="p">Here are the desired actions for this scenario:</p>
<ul class="ul"><li class="li" id="id81bb4025-6301-4d81-a610-30a8e7e0ee06"><p class="p">Run a SKILL procedure to create a needed
include file for the Calibre run and set an environment variable
pointing to the include file. </p>
</li>
<li class="li" id="ida28cd679-2575-40f5-850c-e6d0808a055f"><p class="p">Run batch Calibre Interactive with a
runset that specifies the include file using an environment variable.
Calibre Interactive automatically opens Calibre RVE after the run completes.</p>
</li>
<li class="li" id="ideb050837-8980-41a8-9930-13d0dc954460"><p class="p">Run a post-processing shell script to
create a report. </p>
</li>
</ul>
<p class="p">This can all be done in one click from the
Cadence Virtuoso menu using custom menu commands. The new Calibre
menu selection executes all three of the steps listed above. The following
steps are needed to accomplish this:</p>
<ol class="ol"><li class="li" id="ida9038ef8-b904-4f57-bf29-0f2c65e6b8ad"><p class="p">Create the SKILL pre-processing procedure.</p>
</li>
<li class="li" id="id3b6a6433-8239-4ba1-ae05-1c7d877407e0"><p class="p">Create and specify the Tcl custom menu
file.</p>
</li>
<li class="li" id="id4ac9bd3e-919c-41f8-bcf1-7cd8496f850a"><p class="p">Set up a runset for Calibre Interactive
batch operation.</p>
</li>
<li class="li" id="idfc057e73-8ff5-4a8c-837c-b34f145da226"><p class="p">Start Cadence Virtuoso and call the
new custom menu command.</p>
</li>
</ol>
<p class="p">The following procedure describes these steps
in detail, including code examples.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">Pre-processing
in the design environment from a custom menu command is only available
for Cadence Virtuoso.</p>
</div>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps" id="idd0571f0b-1487-43b5-9195-76c0173d6eee__idc14d3e56-4dd8-4c80-8e85-497cbbc66613"><li class="li step stepexpand" id="idd0571f0b-1487-43b5-9195-76c0173d6eee__idae80ea65-9d07-4669-b4b3-dc3831c26f71"><span class="ph cmd">Create the SKILL pre-processing
function. Here is an example:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>procedure(set_include(run_type)
    ;; create file
    p = outfile(strcat(run_type ".include"))
    ;; commands to create include file
    close(p)
    ;; set the environment variable pointing to the file
    setShellEnvVar(strcat("INCLUDE_FILE=./" run_type ".include"))
); end set_include</code></pre><p class="p">For example, if set_include(“pex”)
is called, then the file <span class="ph filepath">pex.include</span> is created
and the environment variable INCLUDE_FILE is set to <span class="ph filepath">./pex.include</span>.</p>
</div></li>
<li class="li step stepexpand" id="idd0571f0b-1487-43b5-9195-76c0173d6eee__idf5710c3b-babb-4de4-9bee-4646e730efb0"><span class="ph cmd">Create the customization menu
file and save it as <span class="ph filepath">menu_custom.tcl</span>. Here is
an example customization menu file:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code># for Cadence Virtuoso
# delete unwanted menu items
mgc_calibre_delete_menu_item -label "Run DFM"
mgc_calibre_delete_menu_item -label "Run PERC"</code></pre><pre class="pre codeblock leveled"><code># create command 
# must escape the quotes around the argument for set_include
mgc_calibre_add_menu_item -type command -label "pex_run" \
    -command_type PEX \
    -command "calibre -gui -pex -runset pex.runset -batch; \
    my_report.sh" \
    -code "set_include(\"pex\")" </code></pre><p class="p">The mgc_calibre_add_menu_item
command adds the menu item “pex_run” to the Calibre menu. The following
actions are tied to the menu item and occur in this order:</p>
</div><ol type="a" class="ol substeps"><li class="li substep" id="idd0571f0b-1487-43b5-9195-76c0173d6eee__id23b5c930-3649-4627-ac4e-d57e8d027b82"><span class="ph cmd">Executes the SKILL procedure
set_include(“pex”). This is specified with the ‑code option. </span></li>
<li class="li substep" id="idd0571f0b-1487-43b5-9195-76c0173d6eee__idfdf50453-c6dc-434f-bb15-d0cafa542afc"><span class="ph cmd">Executes “calibre -gui -pex
-runset pex.runset -batch”.</span></li>
<li class="li substep" id="idd0571f0b-1487-43b5-9195-76c0173d6eee__idb92b12cf-4dd0-4102-aa50-0a584ecc8957"><span class="ph cmd">Executes “my_report.sh”. This
command is separated from the first command with a semicolon.</span></li>
</ol>
</li>
<li class="li step stepexpand" id="idd0571f0b-1487-43b5-9195-76c0173d6eee__id5f515bcb-be03-45b2-b11e-c86e07095a0c"><span class="ph cmd">Specify the custom menu file
with an environment variable and specify that commands are echoed:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>% setenv MGC_CALIBRE_VIEWER_MENU_CMDS menu_custom.tcl
% setenv MGC_CALIBRE_ECHO_VIEWER_MENU_CMDS 1</code></pre></div></li>
<li class="li step stepexpand" id="idd0571f0b-1487-43b5-9195-76c0173d6eee__idac8330c7-2e3b-4416-bb49-b7b00fb8d948"><span class="ph cmd">Set up your Calibre Interactive
run for batch operation and save a runset:</span><ol type="a" class="ol substeps"><li class="li substep" id="idd0571f0b-1487-43b5-9195-76c0173d6eee__id13fc49c9-6e55-49a1-8113-13b2bb9acd9f"><span class="ph cmd">Make all desired run settings
for your application. </span></li>
<li class="li substep" id="idd0571f0b-1487-43b5-9195-76c0173d6eee__id60e0ae66-1927-4179-a446-ce944b5acda3"><span class="ph cmd">(Optional) Disable <span class="ph menucascade"><span class="ph uicontrol">Setup</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Preferences</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Misc</span></span>, option “Ignore layout
and source export in batch mode”. This allows export to occur in
batch mode if the design is open in a connected design tool.</span></li>
<li class="li substep" id="idd0571f0b-1487-43b5-9195-76c0173d6eee__ida033f435-4308-4aa2-bdcf-a45f7290bd42"><span class="ph cmd">Enable <span class="ph menucascade"><span class="ph uicontrol">Setup</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Preferences</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Misc</span></span>,
option “Start RVE after a batch run” (runset option: cmnStartRVEAfterBatch).</span></li>
<li class="li substep" id="idd0571f0b-1487-43b5-9195-76c0173d6eee__id20750fc4-9b4f-49d5-aa28-952ea2982938"><span class="ph cmd">Choose <span class="ph menucascade"><span class="ph uicontrol">Setup</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">PEX Options</span></span>, then click the <span class="ph uicontrol">Include</span> tab.
Enter $INCLUDE_FILE in the area for “Include Rule Files”. </span><div class="itemgroup info SubStepInfo"><p class="p">The SKILL pre-processing procedure
created in Step <a class="xref fm:NumberOnlyBlack" href="#idd0571f0b-1487-43b5-9195-76c0173d6eee__idae80ea65-9d07-4669-b4b3-dc3831c26f71">1</a> creates the
include file and sets the environment variable. </p>
</div></li>
<li class="li substep" id="idd0571f0b-1487-43b5-9195-76c0173d6eee__idcbe46cc0-5c1d-4e06-9a06-ea3e5aeffd6c"><span class="ph cmd">Select <span class="ph menucascade"><span class="ph uicontrol">File</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Save Runset</span></span> to save the runset. </span></li>
</ol>
</li>
<li class="li step stepexpand" id="idd0571f0b-1487-43b5-9195-76c0173d6eee__idee08f410-20bf-4df7-8de3-a97ef32d2649"><span class="ph cmd">Start Cadence Virtuoso and
open a layout. Make sure the SKILL function set_include() is loaded
in the environment. </span><div class="itemgroup info StepInfo"><p class="p">The new menu item “<span class="ph uicontrol">pex_run</span>”
is at the bottom of the Calibre menu. </p>
</div></li>
<li class="li step stepexpand" id="idd0571f0b-1487-43b5-9195-76c0173d6eee__id7698fbe1-0b3f-4e24-b66e-123f6af1c85a"><span class="ph cmd">Click the <span class="ph uicontrol">pex_run</span> menu
item. </span></li>
</ol>
<div class="section result"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Results</h2></div><p class="p">The following actions occur in order
when you select the new <span class="ph uicontrol">pex_run</span> menu item:</p>
<ul class="ul"><li class="li" id="idd0571f0b-1487-43b5-9195-76c0173d6eee__id065ed486-4277-41dd-9ac5-7828bf915400"><p class="p">The SKILL procedure set_include(“pex”)
executes. It creates the file <span class="ph filepath">pex.include</span> and sets
the environment variable INCLUDE_FILE to <span class="ph filepath">./pex.include</span>.</p>
</li>
<li class="li" id="idd0571f0b-1487-43b5-9195-76c0173d6eee__id12418d85-f700-4106-9169-49dbc6a87136"><p class="p">Calibre Interactive runs in
batch mode. Calibre RVE is opened when the run completes. </p>
</li>
<li class="li" id="idd0571f0b-1487-43b5-9195-76c0173d6eee__id5fc9adb1-3cfb-4350-b951-0b8e863f3acd"><p class="p">The shell script “my_report.sh”
executes.</p>
</li>
</ul>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCChap_PrePostProcessingCalibreRuns_ida32a3e07.html" title="Some form of pre- or post-processing is often performed with a Calibre run. For example, pre-processing can prepare a layout or netlist for verification or construct an input file. Post-processing can prepare or analyze report files. There are several methods for automatically executing a pre- or post-processing procedure or script with your Calibre run. The method you choose depends on your design environment and the execution environment for the pre- or post-processing procedure.">Pre- and Post-Processing for Calibre Runs</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../../calbr_interactive_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Custom Menu Items in Design Tools', 'calbr_interactive_user'); return false;">Custom Menu Items in Design Tools [Calibre Interactive User's Manual]</a></div>
<div><a class="link" href="../../calbr_interactive_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Running Calibre Interactive in Batch Mode', 'calbr_interactive_user'); return false;">Running Calibre Interactive in Batch Mode [Calibre Interactive User's Manual]</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_solns_pv_user"
                DocTitle = "Calibre® Solutions for Physical Verification"
                PageTitle = "Creating a One-Click Custom Menu Command With SKILL Pre-Processing"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_OneClickCustomMenuCommandSkillPreProcessing_idd0571f0b.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Solutions for Physical Verification, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>