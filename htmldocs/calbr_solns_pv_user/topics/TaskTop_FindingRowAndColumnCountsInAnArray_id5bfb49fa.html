<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Finding Row and Column Counts in an Array" />
<meta name="abstract" content="You can find the number of rows and columns in an array of shapes using a DFM Property operation. The values are attached to the output layer as DFM properties. The number of shapes in each row and column is also determined." />
<meta name="description" content="You can find the number of rows and columns in an array of shapes using a DFM Property operation. The values are attached to the output layer as DFM properties. The number of shapes in each row and column is also determined." />
<meta name="prodname" content="Calibre Solutions for Physical Verification" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-13" />
<meta name="Topline" content="Siemens EDA" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2;show" />
<meta name="HighlightChanges" content="Yes" />
<meta name="HighlightColor" content="mgc_light_blue" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_solns_pv_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 16, 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® Solutions for Physical Verification" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10089,product.id.P11800,product.id.P11802,product.id.P11801,product.id.P11426,product.id.P10099,product.id.P10096,product.id.P11493,product.id.P11347,product.id.P11713,product.id.P10294" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id5bfb49fa-72ae-48e2-98aa-7187a3b61c13" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Finding Row and Column Counts in an Array</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Finding Row and Column Counts in an Array" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10089,product.id.P11800,product.id.P11802,product.id.P11801,product.id.P11426,product.id.P10099,product.id.P10096,product.id.P11493,product.id.P11347,product.id.P11713,product.id.P10294" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id5bfb49fa-72ae-48e2-98aa-7187a3b61c13">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1"> Finding Row and Column Counts in an Array</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><p class="shortdesc">You can find
the number of rows and columns in an array of shapes using a DFM
Property operation. The values are attached to the output layer
as DFM properties. The number of shapes in each row and column is
also determined.</p>
<p class="p">The shapes in the array are assumed to be Manhattan shapes. If
they are not, you can use the following derivation on the extent
of each shape in the array. This derivation does not check for uniform
shape size or spacing. </p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="idaeee0a53-e3a8-4251-9cf8-a64c7201ea2b" class="table" frame="hsides" border="1" rules="cols"><colgroup><col style="width:0.989in" /><col style="width:5.186in" /></colgroup><tbody class="tbody"><tr class="row"><td class="entry row-nocellborder default-entry" style="vertical-align:top;"><p class="p">    <span class="ph FontProperty HeadingLabel">Try It!</span> </p>
<img class="image fmdpi:96" src="../graphics/try_it_note_small.png" /></td>
<td class="entry row-nocellborder default-entry" style="vertical-align:top;"><p class="p"><span class="ph FontProperty HeadingLabel">Calibre Advanced DRC (eqDRC) Tutorial and Example Kit</span></p>
<p class="p">Go to <a class="xref" href="http://supportnet.mentor.com/infohub.cfm?infohub=ver_ih&amp;link=cal_ekit_IC" target="_blank">this page</a> on Support Center
to download the complete eKit.</p>
<p class="p">This example is in the miscellaneous_checks/array_counts example directory.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps" id="id5bfb49fa-72ae-48e2-98aa-7187a3b61c13__id082b3691-12dd-48df-80c4-87e1f78e108f"><li class="li step stepexpand" id="id5bfb49fa-72ae-48e2-98aa-7187a3b61c13__id1db0e2f1-0f6a-4289-8a35-318e000155b9"><span class="ph cmd">Define the following variables
for the maximum length of a shape in an array and the maximum space
between two shapes in the same array:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>VARIABLE max_shape_len 0.6    // max edge length of a shape
VARIABLE max_shape_space 0.7  // max space between two shapes 
                              // in the same group</code></pre></div></li>
<li class="li step stepexpand" id="id5bfb49fa-72ae-48e2-98aa-7187a3b61c13__id4a009cd4-233b-40e3-932c-4eb73c516352"><span class="ph cmd">Derive a layer containing
all shape edges that are shorter than max_shape_len.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>LAYER shape 0
shape_edges = LENGTH shape &lt; max_shape_len</code></pre><div class="note note"><span class="notetitle">Note:</span> <p class="p">The shape layer can be used instead of shape_edges in the
following derivation if it is not necessary to filter shapes by
edge length. </p>
</div>
</div></li>
<li class="li step stepexpand" id="id5bfb49fa-72ae-48e2-98aa-7187a3b61c13__id877c159d-5f87-47e5-bd61-7eddb3a1a0b1"><span class="ph cmd">Construct
a macro that returns the spaces between edges or polygons in a row
or column. The macro uses DFM Space with BY EXT and HORIZONTAL or
VERTICAL to get edge pairs in a row or column. DFM Copy with the
REGION keyword generates polygons from the edge pairs. </span><div class="itemgroup info StepInfo"><pre class="pre codeblock"><code>// Macro to return spaces in a row or column
// "direction" is HORIZONTAL for spaces in a row, 
//             or VERTICAL for a column
// "dist" is the max distance for shapes in the same row or column
DMACRO SPACES "in" "dist" "direction"  "out" {
         edge_pairs = DFM SPACE "in" &lt; "dist" BY EXT "direction"
         "out" = DFM COPY edge_pairs REGION 
}</code></pre></div></li>
<li class="li step stepexpand" id="id5bfb49fa-72ae-48e2-98aa-7187a3b61c13__id27561c23-7a09-4b76-95bf-1e5dd2f93ed1"><span class="ph cmd">Find rows and columns of shapes
and attach the shape count to the output layer. Shapes within the
max_shape_space distance form a row or column. </span><div class="itemgroup info StepInfo"><p class="p">Use the SPACES macro to
get the spaces between shapes in a row. Use DFM Copy to combine
the shapes and spaces into a row. Use DFM Property to count the
number of shapes in each row.</p>
<pre class="pre codeblock leveled"><code>CMACRO SPACES shape_edges max_shape_space HORIZONTAL row_spaces
rows = DFM COPY shape row_spaces   

rows_prop = DFM PROPERTY rows shape 
                [shape_count = COUNT(shape)]</code></pre><p class="p">Do the same for columns. </p>
<pre class="pre codeblock"><code>CMACRO SPACES shape_edges max_shape_space VERTICAL col_spaces
col = DFM COPY shape col_spaces     

col_prop = DFM PROPERTY col shape 
               [shape_count = COUNT(shape)]</code></pre></div></li>
<li class="li step stepexpand" id="id5bfb49fa-72ae-48e2-98aa-7187a3b61c13__id2738c335-5719-46eb-84f2-0e4756b92ff8"><span class="ph cmd">Group together all rows and
columns that are within the max_shape_space distance of each other. </span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code> // get spaces between each row
CMACRO SPACES rows max_shape_space VERTICAL row_vert_spaces  

// get spaces between each column
CMACRO SPACES col max_shape_space HORIZONTAL col_horiz_spaces  

// combine rows, columns, and the spaces between them  
group_all = DFM COPY rows col row_vert_spaces col_horiz_spaces</code></pre><p class="p">The group_all layer overlaps each array of shapes. </p>
</div></li>
<li class="li step stepexpand" id="id5bfb49fa-72ae-48e2-98aa-7187a3b61c13__id35284814-8124-46f0-ae5b-ccca601e4550"><span class="ph cmd">Use DFM Property to find the
row and column count for each array of shapes. The minimum and maximum
number of shapes in each row and column is also calculated, along
with the total number of shapes in the array.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>row_col_count = DFM PROPERTY group_all rows_prop col_prop OVERLAP
       [row_count = COUNT(rows_prop)]
       [column_count = COUNT(col_prop)]
       [min_shapes_in_row = MIN(PROPERTY(rows_prop, shape_count))]
       [max_shapes_in_row = MAX(PROPERTY(rows_prop, shape_count))]
       [min_shapes_in_col = MIN(PROPERTY(col_prop, shape_count))]
       [max_shapes_in_col = MAX(PROPERTY(col_prop, shape_count))]
       [total_shapes = SUM(PROPERTY(col_prop, shape_count))]</code></pre><p class="p">Although not done in this example, any of the property values
can be used to create an filter condition. </p>
</div></li>
<li class="li step stepexpand" id="id5bfb49fa-72ae-48e2-98aa-7187a3b61c13__idbb347b15-ac6a-4229-b7b0-849053a65e64"><span class="ph cmd">Output the results to an RDB
for viewing.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>row_col_count {
    DFM RDB row_col_count eqdrc.rdb CHECKNAME "%_l_" 
      CELL SPACE ALL CELLS 
      COMMENT "Counts of rows and columns in each group,  "
      COMMENT "with min, max, and total counts."
}</code></pre></div></li>
</ol>
<div class="section result"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Results</h2></div><p class="p">The following image demonstrates the results for a layout with
several different arrays. </p>
<div class="fig fignone" id="id5bfb49fa-72ae-48e2-98aa-7187a3b61c13__id97bbafaa-27a1-4392-a691-546232ece11b"><span class="figcap"><span class="fig--title-label">Figure 1. </span>Finding
Row and Column Counts</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/adv_drc/array_counts_results.png" /></div><br /></div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_MiscellaneousAdvancedDRCChecks_idcdaa1058.html" title="This section includes miscellaneous advanced DRC checks.">Miscellaneous Advanced DRC Checks</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../topics/TaskTop_FindingPadEdgesClosestChipEdge_idf78b8df8.html" title="You can identify edges of pads that are closest to the chip edge using marker polygons. This check can be useful for determining which way pads should be oriented.">Finding Pad Edges Closest to the Chip Edge</a></div>
<div><a class="link" href="../../calbr_ver_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Introduction to DFM Property', 'calbr_ver_user'); return false;">Introduction to DFM Property [Calibre Verification User's Manual]</a></div>
<div><a class="link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Measurement Functions', 'svrf_ur'); return false;">Measurement Functions [Standard Verification Rule Format (SVRF) Manual]</a></div>
<div><a class="link" href="../../calbr_ver_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Introduction to DFM RDB', 'calbr_ver_user'); return false;">Introduction to DFM RDB [Calibre Verification User's Manual]</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_solns_pv_user"
                DocTitle = "Calibre® Solutions for Physical Verification"
                PageTitle = "Finding Row and Column Counts in an Array"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_FindingRowAndColumnCountsInAnArray_id5bfb49fa.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Solutions for Physical Verification, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>