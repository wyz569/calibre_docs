<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Insert a #DEFINE with a Value Based on an Environment Variable" />
<meta name="abstract" content="This example demonstrates how to read the value of a shell environment variable using the Calibre Interactive Customization GUI and insert a #DEFINE with that value into the Calibre Interactive control file." />
<meta name="description" content="This example demonstrates how to read the value of a shell environment variable using the Calibre Interactive Customization GUI and insert a #DEFINE with that value into the Calibre Interactive control file." />
<meta name="prodname" content="Calibre Solutions for Physical Verification" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-13" />
<meta name="Topline" content="Siemens EDA" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2;show" />
<meta name="HighlightChanges" content="Yes" />
<meta name="HighlightColor" content="mgc_light_blue" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_solns_pv_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 16, 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® Solutions for Physical Verification" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10089,product.id.P11800,product.id.P11802,product.id.P11801,product.id.P11426,product.id.P10099,product.id.P10096,product.id.P11493,product.id.P11347,product.id.P11713,product.id.P10294" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id8f3f5014-ed23-4058-909b-ef7aad1f00cf" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Insert a #DEFINE with a Value Based on an Environment Variable</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Insert a #DEFINE with a Value Based on an Environment Variable" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10089,product.id.P11800,product.id.P11802,product.id.P11801,product.id.P11426,product.id.P10099,product.id.P10096,product.id.P11493,product.id.P11347,product.id.P11713,product.id.P10294" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id8f3f5014-ed23-4058-909b-ef7aad1f00cf">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Insert a #DEFINE with a Value
Based on an Environment Variable</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">This example
demonstrates how to read the value of a shell environment variable
using the Calibre Interactive Customization GUI and insert a #DEFINE
with that value into the Calibre Interactive control file. </span>
</div>
<p class="p">Suppose the SVRF rule file has
this code:</p>
<pre class="pre codeblock leveled"><code>// SVRF rule file
// define layer top_m based on process set by DRC_PROC
#ifdef DRC_PROC 7b
   LAYER top_m metal1
#else 
    #ifdef DRC_PROC 8a
        LAYER top_m metal3
    #else
        LAYER top_m metal2
    #endif
#endif</code></pre><p class="p">where the definition of the layer
top_m depends on the value of DRC_PROC. DRC_PROC is assumed to be
defined in the rule file. Suppose you want to set the environment
variable DRC_process in the shell environment to control DRC_PROC
in the rule file. The following customization file accomplishes
this.</p>
<pre class="pre codeblock leveled"><code># customization file in Tcl
#
if {[info exists ::env(DRC_process)]} {
  CUSTOM::LABEL -tool DRC \
    -prompt "DRC_process is set in shell: $::env(DRC_process)" 
  CUSTOM::DEFINE -name "DRC_PROC"  -prompt "DRC process" \
    -choices  [list [list "shell value" $::env(DRC_process)] \
              [list "7b" 7b] [list "8a" 8a]  [list "other" 99]] \
    -initval $::env(DRC_process) -tool DRC
} else {
  CUSTOM::LABEL -tool DRC \
    -prompt "DRC_process is not set in shell - define here" 
  # this command defines DRC_PROC to the selection from the choices list
  CUSTOM::DEFINE -name "DRC_PROC" -prompt "DRC process" -tool DRC \
    -choices [list 7b 8a 99]
}</code></pre><p class="p">The following figure shows the results for
the preceding example; a view of the complete Customization Settings
dialog box is shown in <a class="xref fm:Figure" href="Contain_InsertRuleFileVariableDefineStatementsCustomizationGui_idbfe35d6a.html#idbfe35d6a-aa20-4584-a6db-c7d2f73bd44c__idb7eca30e-dc64-49c3-a538-84d620d10a7b">Figure 1</a> in “<a class="xref fm:HeadingAndPage" href="Contain_InsertRuleFileVariableDefineStatementsCustomizationGui_idbfe35d6a.html#idbfe35d6a-aa20-4584-a6db-c7d2f73bd44c__Contain_InsertRuleFileVariableDefineStatementsCustomizationGui_idbfe35d6a.xml#idbfe35d6a-aa20-4584-a6db-c7d2f73bd44c" title="You can use the Customization GUI in Calibre Interactive to place #DEFINE and #UNDEFINE pre-processor directives and variable definitions in the rule file. The customization GUI is a dialog box with user-coded controls which place statements in the Calibre Interactive control file.">Insert Rule File Variable and #DEFINE Statements with the Customization GUI</a>”.</p>
<div class="fig fignone" id="id8f3f5014-ed23-4058-909b-ef7aad1f00cf__idb75f7385-9840-4dd4-8719-fc6b9f51d0d6"><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/calibre_env/custom_gui_def_value.png" /></div><br /></div>
<p class="p">If you are using a TVF rule file, add the “‑tvf”
option to the CUSTOM::DEFINE statements, which places a Tcl variable
in the Calibre Interactive control file instead of a #DEFINE pre-processor
directive. <a class="xref fm:Figure" href="Concept_InsertBooleanDefineBasedOnEnvironmentVariable_idf69f4b7b.html#idf69f4b7b-9082-442f-ae0e-b25be78e3514__idd53ffdd7-0a88-4efd-8e31-7ca89a6228cb">Figure 2</a> shows results when the ‑tvf option
is used (from the example “<a class="xref fm:HeadingAndPage" href="Concept_InsertBooleanDefineBasedOnEnvironmentVariable_idf69f4b7b.html#idf69f4b7b-9082-442f-ae0e-b25be78e3514__Concept_InsertBooleanDefineBasedOnEnvironmentVariable_idf69f4b7b.xml#idf69f4b7b-9082-442f-ae0e-b25be78e3514" title="This example demonstrates using the Calibre Interactive Customization GUI to place a #DEFINE pre-processor directive in the control file. A shell environment value is read to determine the initial value of the #DEFINE directive.">Insert a Boolean #DEFINE Based on an Environment Variable</a>”).</p>
<p class="p">Note: If you want to read DRC_process from
the shell environment and not allow changes to the value from the
Customization GUI, you can code the control with only one choice
in the ‑choices argument. It is still necessary to include the -choices
argument if you want to assign a value to with the #DEFINE directive;
without the -choices argument the #DEFINE directive is used without
a value (as in the example “<a class="xref fm:HeadingAndPage" href="Concept_InsertBooleanDefineBasedOnEnvironmentVariable_idf69f4b7b.html#idf69f4b7b-9082-442f-ae0e-b25be78e3514__Concept_InsertBooleanDefineBasedOnEnvironmentVariable_idf69f4b7b.xml#idf69f4b7b-9082-442f-ae0e-b25be78e3514" title="This example demonstrates using the Calibre Interactive Customization GUI to place a #DEFINE pre-processor directive in the control file. A shell environment value is read to determine the initial value of the #DEFINE directive.">Insert a Boolean #DEFINE Based on an Environment Variable</a>”). For example: </p>
<pre class="pre codeblock leveled"><code># this code reads DRC_process from the shell and sets DRC_PROCtest
# without allowing change from the customization gui
if {[info exists ::env(DRC_process)]} {
  CUSTOM::LABEL -tool DRC \
    -prompt "DRC_process is set in shell: $::env(DRC_process)" 
  CUSTOM::DEFINE -name "DRC_PROCtest"  \
    -prompt "DRC process =$::env(DRC_process)" \
    -choices $::env(DRC_process) -tool DRC
} </code></pre></div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_InsertRuleFileVariableDefineStatementsCustomizationGui_idbfe35d6a.html" title="You can use the Customization GUI in Calibre Interactive to place #DEFINE and #UNDEFINE pre-processor directives and variable definitions in the rule file. The customization GUI is a dialog box with user-coded controls which place statements in the Calibre Interactive control file.">Insert Rule File Variable and #DEFINE Statements with the Customization GUI</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_solns_pv_user"
                DocTitle = "Calibre® Solutions for Physical Verification"
                PageTitle = "Insert a #DEFINE with a Value Based on an Environment Variable"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_InsertDefineValueBasedOnEnvironmentVariable_id8f3f5014.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Solutions for Physical Verification, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>