<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Fixing Refine Job Problems" />
<meta name="abstract" content="The Refine job improves the output of the Correct job by doing pixel-based optimization. Because some areas are more important to resolve than others, critical EPE sites can be emphasized with weighted shapes." />
<meta name="description" content="The Refine job improves the output of the Correct job by doing pixel-based optimization. Because some areas are more important to resolve than others, critical EPE sites can be emphasized with weighted shapes." />
<meta name="prodname" content="Calibre pxOPC User's and Reference Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Calibre pxOPC User's and Reference Manual" />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-18" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_pxopc_useref" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="IncludeDraftCommentsInChangeLog" content="all;show" />
<meta name="HighlightColor" content="mgc_light_blue" />
<meta name="HighlightChanges" content="yes" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 20, 2021" />
<meta name="Draft" content="NONE" />
<meta name="DocumentTitle" content="Calibre® pxOPC™ User’s and Reference Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10115,doc.type.documentation.ref" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="NONE" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="ida21ac03a-529e-4f96-97f6-d28ba78dbda5" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Fixing Refine Job Problems</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Fixing Refine Job Problems" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10115,doc.type.documentation.ref" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="ida21ac03a-529e-4f96-97f6-d28ba78dbda5">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Fixing Refine Job Problems</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><p class="shortdesc">The Refine job
improves the output of the Correct job by doing pixel-based optimization. Because
some areas are more important to resolve than others, critical EPE
sites can be emphasized with weighted shapes. </p>
<p class="p">The contract
of the Refine job is that printing shapes are on target within fractions
of a nanometer in those locations that are identified with <a class="xref fm:HeadingOnly" href="Command_WeightLayer_idf02f4cf3.html#idf02f4cf3-2453-4efd-a008-bae1e72c3bb0__Command_WeightLayer_idf02f4cf3.xml#idf02f4cf3-2453-4efd-a008-bae1e72c3bb0" title="Identifies polygon layers which define more important areas for optimization.">weight_layer</a> markers. Additionally, no extra
printing is occurring.</p>
<p class="p">Calibre
LPE requires substituting “finetune” for “refine”. The information
in this procedure also applies to Finetune jobs.</p>
</div>
<div class="section prereq Prerequisites p"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Prerequisites</h2></div><ul class="ul"><li class="li" id="ida21ac03a-529e-4f96-97f6-d28ba78dbda5__ide7bcbb49-d8cc-434d-bdad-05fc009a6451"><p class="p">Output
from the Correct job is acceptable.</p>
</li>
<li class="li" id="ida21ac03a-529e-4f96-97f6-d28ba78dbda5__id12ad5553-b584-400e-a5c6-c0fc11b44576"><p class="p">Critical
sites identified.</p>
</li>
</ul>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand" id="ida21ac03a-529e-4f96-97f6-d28ba78dbda5__idc7b4bc63-0520-4a73-bd7f-aa79abf850cf"><span class="ph cmd">To see the “job 4 refine”
output, add a <a class="xref fm:HeadingOnly" href="Command_SetlayerPxopc_idbd626717.html#idbd626717-096f-49e7-90c5-2c2a9607219b__Command_SetlayerPxopc_idbd626717.xml#idbd626717-096f-49e7-90c5-2c2a9607219b" title="Creates and derives layers.">setlayer pxopc</a> command with “LASTJOB 4” to your
file and a rule check in the SVRF file to copy it to the results.</span><div class="itemgroup info StepInfo"><div class="note note"><span class="notetitle">Note:</span> <p class="p">Do not forget to remove the
lines for extra output when you are ready to use the SVRF and pxOPC
setup files for production runs.</p>
</div>
</div></li>
<li class="li step stepexpand" id="ida21ac03a-529e-4f96-97f6-d28ba78dbda5__id5802aaa0-eced-4176-be73-27e8671a1281"><span class="ph cmd">To improve critical sites,
add markers in a weight
layer:</span><ol type="a" class="ol substeps"><li class="li substep" id="ida21ac03a-529e-4f96-97f6-d28ba78dbda5__id54a55f71-561c-4772-aec2-fe614282a9dd"><span class="ph cmd">Use SVRF commands to create
a layer or layers with marker shapes over the critical sites on
the original target layer (not the smoothed target). The shapes
should meet the following conditions:</span><div class="itemgroup info SubStepInfo"><ul class="ul"><li class="li" id="ida21ac03a-529e-4f96-97f6-d28ba78dbda5__id42d0ba8e-c8e3-4ac9-9f07-d821384992c7"><p class="p">Marker shapes should be
long and narrow, and must overlap both the contour and the target
edge. A good size for 20 nm and below is a width of 3 nm
and a length of 30, but this may be too small if your contours ripple
excessively. </p>
</li>
<li class="li" id="ida21ac03a-529e-4f96-97f6-d28ba78dbda5__ide61e6a45-3687-4858-bcd0-f47b0674f43e"><p class="p">The marker’s long edge
should extend equally on either side of the target edge.</p>
</li>
<li class="li" id="ida21ac03a-529e-4f96-97f6-d28ba78dbda5__ideedb49bc-4de1-4343-8c62-521e4378b540"><p class="p">Markers that will have
different weights should be on different layers.</p>
</li>
</ul>
</div></li>
<li class="li substep" id="ida21ac03a-529e-4f96-97f6-d28ba78dbda5__idd5e51910-5d81-4454-9120-ea9e55495340"><span class="ph cmd">Add the marker layers to the
run.</span><div class="itemgroup info SubStepInfo"><p class="p">At the SVRF level, assuming
the name is wt1:</p>
<pre class="pre codeblock leveled"><code>RET PXOPC target trgtsmth <span class="keyword ParameterName Required">wt1</span> FILE "pxopc.in" MAP opcout </code></pre><p class="p">In the main portions of the
setup file:</p>
<pre class="pre codeblock leveled"><code>LITHO FILE pxopc.in [ ... 
	layer trgtsmth hidden clear 
	<span class="keyword ParameterName Required">layer wt1 hidden clear</span> 
	... 
	<a class="xref" href="Command_SetlayerPxopc_idbd626717.html#idbd626717-096f-49e7-90c5-2c2a9607219b__Command_SetlayerPxopc_idbd626717.xml#idbd626717-096f-49e7-90c5-2c2a9607219b" title="Creates and derives layers.">setlayer</a> opcout = <a class="xref" href="Command_SetlayerPxopc_idbd626717.html#idbd626717-096f-49e7-90c5-2c2a9607219b__Command_SetlayerPxopc_idbd626717.xml#idbd626717-096f-49e7-90c5-2c2a9607219b" title="Creates and derives layers.">pxopc</a> target trgtsmth <span class="keyword ParameterName Required">wt1</span> MAP target \ 
		OPTIONS SIMULATION_OPTIONS </code></pre><p class="p">In the pxOPC options block
of the setup file:</p>
<pre class="pre codeblock leveled"><code>	... 
	layer trgtsmth TARGET 0.9785 0.0085 
	<span class="keyword ParameterName Required">layer wt1 HIDDEN 0.9785 0.0085</span> 
	... 
	<span class="keyword ParameterName Required">weight_layer wt1 set 100</span>  </code></pre><p class="p">Start
with a weight of 100. The default weight (that is, the weighting
of unmarked areas) is 1.</p>
</div></li>
</ol>
</li>
<li class="li step stepexpand" id="ida21ac03a-529e-4f96-97f6-d28ba78dbda5__id3bc7a27d-6662-46a8-b2f0-592e52f796ca"><span class="ph cmd">To improve overall fit, use
only the nominal process window condition and increase <a class="xref fm:HeadingOnly" href="Command_Iterations_idc7596355.html#idc7596355-2feb-4b90-a440-f9b605d2cb9c__Command_Iterations_idc7596355.xml#idc7596355-2feb-4b90-a440-f9b605d2cb9c" title="Specifies how many iterations the optimization algorithm should run.">iterations</a> by two. The default for Refine
is all defined pw_conditions and six iterations.</span></li>
<li class="li step stepexpand" id="ida21ac03a-529e-4f96-97f6-d28ba78dbda5__idbbe1cd9b-c80e-4ae0-84a0-ec0cadf6e30d"><span class="ph cmd">If contours ripple excessively,
use one of these three methods:</span><div class="itemgroup info StepInfo"><ul class="ul"><li class="li" id="ida21ac03a-529e-4f96-97f6-d28ba78dbda5__idae6a9728-a2bc-409c-b527-4ae5a15959a0"><p class="p">Add a weight layer with
markers for the problematic edges.</p>
</li>
<li class="li" id="ida21ac03a-529e-4f96-97f6-d28ba78dbda5__idd1c0005f-bacd-4b91-997e-b8fd7a941fa8"><p class="p">Adjust the <a class="xref fm:HeadingOnly" href="Command_SetlayerCurve_ide913ec1f.html#ide913ec1f-eed6-424d-ae7a-ac011b57924a__Command_SetlayerCurve_ide913ec1f.xml#ide913ec1f-eed6-424d-ae7a-ac011b57924a" title="Creates “smoothed” shapes based on the input layer.">setlayer curve</a> command to be more loose near
corners.</p>
</li>
<li class="li" id="ida21ac03a-529e-4f96-97f6-d28ba78dbda5__id27e22904-39ab-4507-aca7-23cc87315a0f"><p class="p">Add “<a class="xref fm:HeadingOnly" href="Command_StraightContour_id7b2b1679.html#id7b2b1679-b5a0-4ae2-adbe-0ffd7b7c0f93__Command_StraightContour_id7b2b1679.xml#id7b2b1679-b5a0-4ae2-adbe-0ffd7b7c0f93" title="Reduces ripples on contours.">straight_contour</a> 1” to the Refine job. This option
can degrade EPE, so increase the value slowly when tuning.</p>
</li>
</ul>
</div></li>
<li class="li step stepexpand" id="ida21ac03a-529e-4f96-97f6-d28ba78dbda5__id1e19a177-327c-4eb1-a51e-cac8b9b812c5"><span class="ph cmd">If some EPEs are still very
bad, increase the length of the markers. If markers are too short,
they might not cover the printing contour. If they do not overlap
the contour, their weighting has no effect.</span></li>
<li class="li step stepexpand" id="ida21ac03a-529e-4f96-97f6-d28ba78dbda5__id4d8875fe-d80e-409f-bd0d-e0055607e48a"><span class="ph cmd">If the region contains dissimilar
patterns and the design constraints are tight, reduce <a class="xref fm:HeadingOnly" href="Command_Rate_id8eb424c4.html#id8eb424c4-1e56-4756-8382-030e52acec4d__Command_Rate_id8eb424c4.xml#id8eb424c4-1e56-4756-8382-030e52acec4d" title="Sets the rate of mask change per iteration.">rate</a> and increase <a class="xref fm:HeadingOnly" href="Command_Iterations_idc7596355.html#idc7596355-2feb-4b90-a440-f9b605d2cb9c__Command_Iterations_idc7596355.xml#idc7596355-2feb-4b90-a440-f9b605d2cb9c" title="Specifies how many iterations the optimization algorithm should run.">iterations</a>. This also increases the run time;
adjust gradually.</span></li>
<li class="li step stepexpand" id="ida21ac03a-529e-4f96-97f6-d28ba78dbda5__idb9baf0f8-de98-4bd9-abe5-62503b4f047b"><span class="ph cmd">To improve image slope, adjust <a class="xref fm:HeadingOnly" href="Command_Constraint_id1cc7ad5f.html#id1cc7ad5f-9242-4ed0-be6e-7388497bfbe0__Command_Constraint_id1cc7ad5f.xml#id1cc7ad5f-9242-4ed0-be6e-7388497bfbe0" title="Adds image slope, ILS, or NILS optimization to the default objective of the job.">constraint</a>.</span><div class="itemgroup info StepInfo"><ul class="ul"><li class="li" id="ida21ac03a-529e-4f96-97f6-d28ba78dbda5__id3e573165-53e0-43f3-922c-b7b6daa6e4ef"><p class="p">If
you do not have the constraint command in the job, add “constraint
ils greater <span class="keyword ParameterName OptionalReplaceable">val</span>”,
where val is the target ILS, and “outer_iterations 5”.</p>
</li>
<li class="li" id="ida21ac03a-529e-4f96-97f6-d28ba78dbda5__id6e79f5a7-f436-4692-95b8-d50a56f74a9c"><p class="p">If the constraint command is already in the recipe,
try adding the “initial_weight <span class="keyword ParameterName OptionalReplaceable">w</span>” option.
The default <span class="keyword ParameterName OptionalReplaceable">w</span> is
0.01.</p>
</li>
<li class="li" id="ida21ac03a-529e-4f96-97f6-d28ba78dbda5__id1ae1e85d-8bb3-4462-8287-2b6f62f6ff9c"><p class="p">If ILS is still insufficient, change constraint
to “constraint ils maximize initial_weight <span class="keyword ParameterName OptionalReplaceable">w</span>”.
The “maximize” setting should only be used with set_on_target and
suppress_extra_printing.</p>
</li>
</ul>
</div></li>
<li class="li step stepexpand" id="ida21ac03a-529e-4f96-97f6-d28ba78dbda5__id4017724e-fdef-4fb4-b5f5-18528c958352"><span class="ph cmd">Re-run Calibre pxOPC and check
the output by running print image on the layer created by the Refine
job. If the image meets the contract but the final output still
needs improvement, proceed to “<a class="xref fm:HeadingOnly" href="TaskTop_FixingLmrcJobProblems_id69de5c30.html#id69de5c30-2710-4323-98a3-519cd4d34f7c__TaskTop_FixingLmrcJobProblems_id69de5c30.xml#id69de5c30-2710-4323-98a3-519cd4d34f7c" title="The Litho-Mask Rule Constraint (LMRC) job converts the mask back from contours to Manhattan shapes of predefined edge lengths. It then performs litho simulations to detect assist features that print and adjusts the mask to fix this.">Fixing LMRC Job Problems</a>”.</span></li>
</ol>
<div class="section result"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Results</h2></div><p class="p">The
output looks very good but the mask is still non-Manhattan. The
contours are converted to Manhattan shapes in the next job, LMRC.</p>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCChap_CalibrePxopcConfigurationTuning_id1977eee8.html" title="The following key sections are covered in this chapter.">Calibre pxOPC Configuration and Tuning</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_pxopc_useref"
                DocTitle = "Calibre® pxOPC™ User’s and Reference Manual"
                PageTitle = "Fixing Refine Job Problems"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_FixingRefineJobProblems_ida21ac03a.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® pxOPC™ User’s and Reference Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>