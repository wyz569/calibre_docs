<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="DFM Property" />
<meta name="abstract" content="Associates user-defined properties to individual objects on the input layer and creates a derived layer containing only those objects that meet the specified criteria." />
<meta name="description" content="Associates user-defined properties to individual objects on the input layer and creates a derived layer containing only those objects that meet the specified criteria." />
<meta name="prodname" content="Standard Verification Rule Format (SVRF) Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-26" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="HighlightChanges" content="yes" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="svrf_ur" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="3/25/21" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Standard Verification Rule Format (SVRF) Manual" />
<meta name="CSHelp" content="No" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P10089,product.id.P10099,product.id.P10119,product.id.P10101,product.id.P11427,product.id.P10115,product.id.P11426,product.id.P10122,product.id.P11493" />
<meta name="ConditionFiltering" content="XML" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idf1f176c5-0d5a-4406-95d0-b54438157ae8" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>DFM Property</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="DFM Property" />
<meta name="attributes" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P10089,product.id.P10099,product.id.P10119,product.id.P10101,product.id.P11427,product.id.P10115,product.id.P11426,product.id.P10122,product.id.P11493" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">DFM Property</h1>
<div class="body refbody CommandRefBody"><div class="abstract CommandRefAbstract"><p class="p ContextMGC">Layer operation</p>
<p class="p ContextMGC">License: <a class="xref Link" href="../../calbr_admin_gd/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Calibre nmDRC-H', 'calbr_admin_gd'); return false;">Calibre nmDRC-H</a></p>
<p class="shortdesc">Associates user-defined properties
to individual objects on the input layer and creates a derived layer
containing only those objects that meet the specified criteria.</p>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName Required">DFM PROPERTY</span> <span class="keyword ParameterName RequiredReplaceable">primary_layer</span> [<span class="keyword ParameterName OptionalReplaceable">secondary_layer</span> …]<br />
[<span class="keyword ParameterName OptionalDefault">INTERSECTING</span> <br />
 | {OVERLAP [ABUT ALSO [SINGULAR]] [EXACT] [MULTI | NOMULTI] <br />
         [NOPUSH] [REGION] [UNMERGED]} <br />
 | {NODAL [MULTI | NOMULTI] [NOPUSH]}<br />
]<br />
[<span class="keyword ParameterName Optional">PRESERVE</span>] <br />
[CORNER] <br />
[CONNECTED | NOT CONNECTED]<br />
[INSIDE OF <span class="keyword ParameterName OptionalReplaceable">x1 y1 x2 y2</span>] … <br />
[GLOBALXY]<br />
[SPLIT [ALL | PRIMARY] ]<br />
[ [ACCUMULATE [ONLY]] BY NET [ONLY] [NOHIER] [NOPSEUDO] ]<br />
[BY CELL [ONLY] [NOHIER] [NOPSEUDO] ]<br />
[<span class="keyword ParameterName Optional">DBU</span>]<br />
[<span class="keyword ParameterName OptionalReplaceable">property_definition</span> …]</p>
<p class="lines UsageLine">where <span class="keyword ParameterName OptionalReplaceable">property_definition</span> is </p>
<p class="lines UsageLine">      '[' <span class="keyword ParameterName OptionalReplaceable">property_name</span> = <span class="keyword ParameterName OptionalReplaceable">expression</span> ']' [ <span class="keyword ParameterName Optional">['!'] </span><span class="keyword ParameterName OptionalReplaceable">constraint</span>]…</p>
</div>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id138b15ae-dc34-4d69-a1af-5f66c51de8f2"><span class="keyword ParameterName RequiredReplaceable">primary_layer</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument supplying
the name of an original or derived layer containing the data to
which properties are added. Data from this layer that meets the
criteria of this operation is written to the result layer. This
layer can be a polygon layer, an edge layer, or an error layer edge
cluster. Edge and error layers can be unmerged.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id7579c30f-ecb0-4a0c-bde2-f89e8e219a7c"><span class="keyword ParameterName OptionalReplaceable">secondary_layer</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument used to
specify an additional layer for consideration when calculating and
assigning properties to layout objects on the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span>.
Any layer other than the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span> that
is referenced in any expression for the operation must be specified
as a <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span>.
Any number of <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span> arguments
is allowed. </p>
<p class="p">When <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span> arguments
are specified, the operation first creates associations between
the layout objects on a <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span> and
those on the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span> by grouping
them together into clusters. Each cluster contains exactly one layout
object on the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span>,
and a number of layout objects on each <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span> that
is controlled by the specified clustering mode. </p>
<p class="p">When a <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span> is
supplied, the allowed layer types are governed by the method used
for assembling clusters:</p>
<ul class="ul"><li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idfa26887a-22f4-4ed5-9505-2bfc8a560680"><p class="p">When INTERSECTING is specified,
the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span> and
all secondary layers must be polygon layers.</p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idda43aae4-7150-466a-aa2c-a1e43ba084c8"><p class="p">When OVERLAP is specified,
there are no constraints on the layer types for any input layer.
That is, any combination of input layers of any type is supported.</p>
</li>
</ul>
<p class="p">See “<a class="xref fm:HeadingAndPage" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__id6d1389bb-8d68-4adc-90ca-88f0b16f220c">Clustering Methods in DFM Property</a>” and the
keywords <span class="keyword ParameterName OptionalDefault">INTERSECTING</span>,
OVERLAP, and NODAL for details on the clustering methods. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__ida67a02d5-70b3-4bbd-81f6-1374f25eed8d"><span class="keyword ParameterName OptionalDefault">INTERSECTING</span> | {OVERLAP [ABUT ALSO [SINGULAR]] [EXACT] [MULTI | NOMULTI] [NOPUSH] [REGION] [UNMERGED]} | {NODAL [MULTI | NOMULTI] [NOPUSH]}</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword set
used to control how the operation assembles clusters associating
data on secondary layers with data on the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span>.
See <a class="xref fm:Figure" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__id63214bd1-db80-41ce-9da4-d24c24dbbf00">Figure 3</a> for a figure illustrating
each clustering method. </p>
<ul class="ul"><li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idee2262d7-8024-4316-bc2f-9e67817dd9a0"><p class="p">INTERSECTING — A cluster
is defined to be a polygon on the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span>,
plus all <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span> polygons
that overlap that polygon. <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span> polygons that
partially overlap the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span> polygon
are clipped by the primary layer so that only the portions that
overlap the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span> are
used in the calculations. This clustering method applies only to
polygon layers, and is the default behavior.</p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id3c1306f5-1dc6-4660-b5fc-174b5c764233"><p class="p">OVERLAP — A cluster is defined
to be a layout object on the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span> plus all
layout objects on a <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span> with
which it has a non-zero area of overlap. The <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span> layout
objects that partially overlap the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span> layout object
are not clipped. </p>
<p class="p">For edge layers, secondary layer edges that are collinear with
the primary layer object are considered part of the cluster. For
error layer edge clusters, if any edge is collinear with the primary
layer object, the error edge cluster is considered part of the cluster.
See the section “<a class="xref fm:HeadingAndPage" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__id16da92f9-09f9-4b07-9f84-06f1fa94b96b">Measurement Function Behavior at Boundaries in DFM Property</a>”. </p>
<ul class="ul"><li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id6ac45575-21ae-4e75-a457-210053534662"><p class="p">ABUT ALSO — Optional secondary
keyword that includes <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span> layout
objects that abut the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span> layout
object, as well as those that overlap it.</p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idd2fc8435-e5b8-4249-a576-943c33da51be"><p class="p">SINGULAR — Optional secondary
keyword that instructs the operation to consider point interaction
of edges when grouping geometries on primary and secondary layers.
This keyword can only be specified with ABUT ALSO. If SINGULAR is
specified, then two edges, primary and secondary, that share only a
single point that is the end point of one or both edges, are considered interacting.
Similarly, a primary layer polygon and an edge that share only a single
point are considered interacting if this keyword is specified. The
results of this keyword are not valid for polygon-to-polygon interactions.</p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id962f3d56-05ae-4109-ab1e-20405803c585"><p class="p">EXACT — Optional
secondary keyword that causes only identical geometries to be clustered
together. Identical geometries must be pointwise equivalent—edges must
match, have the same orientation, and be in the same location. </p>
<p class="p">All input layers must be the same type if EXACT is specified.
If the output layer from a DFM Property Singleton operation is used
as a <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span>,
the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span> must
be a polygon layer. </p>
<p class="p">EXACT cannot be specified with REGION. </p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id45a533ae-22b2-4402-852f-712e234eafeb"><p class="p">MULTI and NOMULTI — Optional
secondary keywords that control how the operation treats a layout
object on the <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span> that
overlaps or abuts more than one <span class="keyword ParameterName RequiredReplaceable">primary_layer</span> layout
object. By default, when a polygon on the <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span> can
be grouped into several clusters, the operation assigns the layout
object to one of these clusters arbitrarily and a warning is issued
in the transcript. Specifying either MULTI or NOMULTI overrides
the default behavior as follows:</p>
<p class="p">MULTI — When specified, the operation
assigns such a <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span> layout object
to the cluster for each polygon it overlaps or abuts.</p>
<p class="p">NOMULTI — When specified, the
layout object is assigned to one of these clusters arbitrarily but
no warning is issued in the transcript. That is, NOMULTI suppresses
the ambiguous clustering warning.</p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id88a1a144-706b-47d8-af24-cfffd1e48f68"><p class="p">NOPUSH — Optional secondary
keyword that instructs the operation to report the DFM Property
results in the cell where the clustering occurred and the property
values were calculated. See “<a class="xref fm:HeadingAndPage" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__idb965aab7-ffea-4bcf-8825-ba06689af4e2">Promotion and Push-Down</a>”.</p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id7ee4e5e4-9b45-4411-9348-a2c4687c9abc"><p class="p">REGION — Optional secondary
keyword that controls how the operation treats error edge cluster
data for the purpose of forming clusters. This keyword provides
a more flexible interpretation of “overlap”. Without it, only the
overlap of edges is considered. When specified, the operation treats
error data as if the error clusters formed polygons: </p>
<p class="p">Error clusters with two parallel
edges are treated as if they formed trapezoids with vertices located
in the endpoints of the edges. </p>
<p class="p">All other error clusters are treated
as if they were a polygon formed by their convex hulls.</p>
</li>
</ul>
<ul class="ul"><li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__ide0bd7795-1f00-46cd-afa3-689db450ac15"><p class="p">UNMERGED —
Optional secondary keyword that enables unmerged polygon layers
as input layers. If the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span> is
an unmerged polygon layer, the output layer is also unmerged. </p>
<p class="p">Unmerged polygon layers can
be processed by a limited number of operations; see “<a class="xref Link" href="../../calbr_ver_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Unmerged Polygon Layers', 'calbr_ver_user'); return false;">Unmerged Polygon Layers</a>”
in the <cite class="cite">Calibre Verification User’s Manual</cite>. </p>
</li>
</ul>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id16a91f01-3420-49a9-9c8e-e384969bb237"><p class="p">NODAL — An optional keyword
that clusters objects based upon node numbers. Connectivity information
is required on the input layers to use this option. Note that NODAL
clustering is not compatible with the CONNECTED and NOT CONNECTED
options, since all geometries grouped together by NODAL clustering must
be connected.</p>
<p class="p">A NODAL cluster is defined
to be a layout object on the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span> plus
layout objects on any <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span> that
have the same node number as the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span> object.
The spatial relations between objects are ignored. NODAL clustering
is supported only for polygon and edge layers. </p>
<p class="p">If a <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span> object
has the same node number as more than one <span class="keyword ParameterName RequiredReplaceable">primary_layer</span> object,
by default the <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span> object
is arbitrarily assigned to one cluster, and a warning about ambiguous
clustering is issued. The optional MULTI and NOMULTI keywords change
the default behavior. </p>
<p class="p">MULTI — An optional keyword which specifies that a <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span> object
that has the same node number as more than one <span class="keyword ParameterName RequiredReplaceable">primary_layer</span> object
can belong to more than one cluster. When NODAL MULTI is specified,
the operation assigns such a <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span> object
to each <span class="keyword ParameterName RequiredReplaceable">primary_layer</span> object
having the same node number. No notice is given in the transcript. </p>
<p class="p">NOMULTI — An optional keyword that suppresses the ambiguous clustering warning
with the default NODAL behavior. That is, if a secondary_layer object
has the same node number as more than one primary_layer object,
the <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span> object
is arbitrarily assigned to one cluster, but no warning about ambiguous clustering
is issued.</p>
<p class="p">NOPUSH — Optional secondary
keyword that instructs the operation to report the DFM Property
results in the cell where the clustering occurred and the property values
were calculated. See “<a class="xref fm:HeadingAndPage" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__idb965aab7-ffea-4bcf-8825-ba06689af4e2">Promotion and Push-Down</a>”.</p>
</li>
</ul>
</dd>
<dt class="dt ArgumentName dlterm" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idfb103f63-8ea8-4d33-8793-452449620955">PRESERVE </dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword that causes DFM properties
on the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span> to
be copied to the output layer. However, a property from the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span> is
not copied if a property of the same name is defined in the <span class="keyword ParameterName OptionalReplaceable">property_definition</span>. </p>
<p class="p">When all properties from the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span> need
to be copied to the output layer, PRESERVE is more efficient than
explicitly copying each property with the property access functions,
such as PROPERTY, NETPROPERTY, and so forth. See “<a class="xref fm:HeadingAndPage" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__id62748f88-19d8-4803-991d-c9c0aaf26079">Example 10</a>”.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id6c740528-42ce-4d6d-ac39-a822ab7130ed">CORNER</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword used to
control how the operation treats edge clusters produced by Calibre
nmDRC measurements between corners of rectangles aligned to the
x and y axes. Because Calibre nmDRC measurements operate on edges,
measurement between corners produces two errors, that is two pair
of edges, rather than one. This can result in faulty error counts
because each corner is counted twice.</p>
<p class="p">Using this keyword instructs
the operation to retain only one of the edge clusters produced from
Calibre nmDRC measurements of corners of rectangles. The operation
selects the edge pair to retain that, if converted to a polygon,
would have the larger area.</p>
<div class="fig fignone" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id006fb3c3-e964-4285-ad13-09f703f8b3c8"><span class="figcap"><span class="fig--title-label">Figure 1. </span>DFM Property CORNER</span><br /><div class="imagecenter"><img class="image imagecenter" height="140" src="../graphics/DFM_Property/dfm_property_corner.png" width="327" /></div><br /></div>
<p class="p">This keyword is meaningful
only when used with edge clusters, and is valid only with a single
layer operation. It affects only parallel edge clusters as shown
in the preceding figure. Perpendicular edge clusters are unaffected.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id6f226aa0-0e35-4e71-b313-b42c34d1274e">CONNECTED | NOT CONNECTED</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword choice
that controls connectivity filters for clustering geometries on multiple
layers. The operation must have at least two input layers and all
input layers must have connectivity information.</p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idf73951fb-4ad5-4469-b5a9-6cf1da3eb0bf"><p class="p Opt">CONNECTED
— Only geometries on secondary layers that belong to the same net
as the geometry on the primary layer are clustered with that geometry. </p>
</li>
<li class="li ArgOption" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idaf689331-5fd4-4275-b0a7-49d984f15fb8"><p class="p Opt">NOT
CONNECTED — Only geometries on secondary layers that do not belong
to the same net as the geometry on the primary layer are clustered
with that geometry. </p>
</li>
</ul>
<p class="p">Other geometric requirements
for clustering, such as intersection or overlap, must still be met.</p>
<p class="p">The CONNECTED and NOT CONNECTED
keywords are supported with INTERSECTING and OVERLAP clustering. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idd26bb3d9-6fe8-4ca4-9d7d-c097189e089f">INSIDE OF <span class="keyword ParameterName OptionalReplaceable">x1 y1 x2 y2</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword used to
restrict the operation to geometries that have at least a partial overlap
with the rectangular window specified by the arguments of the INSIDE
OF option. This option applies to input layers of any type. An object
is said to overlap with the INSIDE OF window if any part of the
extent of the object overlaps the window area. </p>
<p class="p">The arguments, <span class="keyword ParameterName OptionalReplaceable">x1 y1 x2 y2</span>,
must be specified in chip-level coordinates. If a coordinate is negative,
it must be enclosed in parentheses ( ).</p>
<p class="p">Multiple INSIDE OF options
can be specified, defining multiple selection windows. In this case,
only geometries that overlap at least one of the windows are considered. </p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">When
the INSIDE OF option is specified, the operation produces flattened
results, with geometries from placements of lower level cells within
the window promoted to the top cell. Because of this, this option
is intended for use with small windows for detailed analysis of
small portions of the chip. </p>
</div>
</dd>
<dt class="dt ArgumentName dlterm" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id4772db50-c77a-4cf0-9c16-12bcfdf1e100">GLOBALXY</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword that calculates
measurements with X- and Y-axes aligned with the top-level coordinate
system. The GLOBALXY keyword allows axis-aligned measurements to be
meaningful in the global frame of reference. Use of the keyword
increases processing time, so it should be used only when needed. </p>
<p class="p">Only the orientation of the
X- and Y‑axes is affected when this keyword is used; it does not cause
cell-level coordinates to be transformed to top-level coordinates.
The keyword has an effect only for cell instances that are rotated
by an odd multiple of 90 degrees. Reflections and 180 degree rotations
of cell instances do not cause the cell-level positive and negative axes
directions to be aligned with the top-level positive and negative
directions. </p>
<p class="p">The oriented-measurement functions
are directly affected by this option and include the following:
PERIMETERX, PERIMETERXP, PERIMETERY, PERIMETERYP, LENGTHX, LENGTHXP,
LENGTHY, LENGTHYP, ECX, ECXP, ECY, ECYP, EWX, EWXP, EWY, EWYP. See “<a class="xref fm:HeadingAndPage" href="Contain_MeasurementFunctions_id13468c08.html#id13468c08-797c-4cca-8773-611a15322186__Contain_MeasurementFunctions_id13468c08.xml#id13468c08-797c-4cca-8773-611a15322186" title="Measurement functions calculate the value of a geometric attribute of layer data. Measurement functions return values expressed in user units. Although the COUNT function does not measure a geometric attribute, it is included with the measurement functions because it behaves similarly to the other functions in this class.">Measurement Functions</a>”. </p>
<p class="p">GLOBALXY may cause promotion,
depending on the design data, hierarchy, and the measurements that
are performed. The ECBEGIN, ECEND, ECMIN and ECMAX functions may
report translated values for the returned coordinates if GLOBALXY
causes promotion to occur.</p>
<p class="p">The figure below demonstrates
how the measurement axes change with GLOBALXY. The placement of
cellA is rotated by 90 degrees.</p>
<div class="fig fignone" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idb363b79c-7b35-490d-9c32-54206db1f9bd"><span class="figcap"><span class="fig--title-label">Figure 2. </span>GLOBALXY
in DFM Property</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/DFMProperty_GLOBALXY.png" /></div><br /></div>
<p class="p">See <a class="xref fm:Figure" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__id0c2c8a9f-fcfe-4f59-8692-f63b15f6f3d5">Figure 11</a> and <a class="xref fm:Figure" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__idbc34b6e3-ae58-4279-935b-432741bd9bcf">Figure 12</a> in the “Examples” section
and “<a class="xref fm:HeadingAndPage" href="General_CellContextDependentPropertyFunctionsResultsInHierarchicalBatchRuns_idb321e600.html#idb321e600-abf8-4d48-9ed1-89e5ecbfab65__General_CellContextDependentPropertyFunctionsResultsInHierarchicalBatchRuns_idb321e600.xml#idb321e600-abf8-4d48-9ed1-89e5ecbfab65" title="All measurement functions that return coordinates, or values based upon orientation with respect to a coordinate system, return them in the context of the cell in which the property expression is evaluated. This may not be the same cell in which the geometries originated in cases where promotion occurs. For these functions, the terms x-axis, y-axis, horizontal, and vertical refer to the coordinate system of the evaluation cell, not to the global coordinate system. Cell-context-dependent property functions do not provide predictable results in hierarchical batch runs and should be treated with care.">Cell-Context-Dependent Property Functions Results in Hierarchical Batch Runs</a>” for
additional general information. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__ide428e863-71ec-434c-aa5e-bba115dcd9c6">SPLIT [ALL | PRIMARY]</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword that controls
merging of edge clusters. </p>
<p class="p">By default, primary and secondary
edge clusters are merged unless they contain DFM properties, in
which case they are not merged. </p>
<p class="p">When SPLIT is specified, secondary
layer edge clusters are first merged as usual, then split at all
locations where the primary layer has a vertex. </p>
<p class="p">The optional ALL keyword extends
this behavior to the primary layer. That is, ALL causes the primary
layer to be split in all locations where a secondary layer has a
vertex. When SPLIT ALL is specified, the behavior of ALL is applied
first, that is the primary layer is split, then the secondary layers
are split. See also “<a class="xref fm:HeadingAndPage" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__id922f890a-8bf3-482a-a339-096fa3e74977">Merging of Edge Clusters</a>”.</p>
<p class="p">The optional PRIMARY keyword
is valid only if the primary layer is an edge cluster layer. If
specified, this option causes the primary layer to be fractured
in all locations where a secondary layer has a vertex, specifically
the end of an edge or corner of a polygon, or a secondary edge crosses
an edge of the primary layer. This fracturing is similar to the fracturing
of edge cluster layers caused by options SPLIT and SPLIT ALL. Unlike
SPLIT ALL, the SPLIT PRIMARY option does not cause the secondary
layers to be split.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id1e4bb0e7-ab0e-4765-94f1-ea68f88b582c">[[ACCUMULATE [ONLY]] BY NET [ONLY] [NOHIER] [NOPSEUDO]] [BY CELL [ONLY] [NOHIER] [NOPSEUDO]]</dt>
<dd class="dd ArgumentDescription"><p class="p">A set of optional arguments
used to add cell or net properties to the output layer.</p>
<ul class="ul"><li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id743585c7-f1e1-4b74-a64d-1daf8662e782"><p class="p">ACCUMULATE [ONLY] BY NET
— ACCUMULATE causes BY NET properties to be stored as polygon properties;
the value of a polygon property is the same as the value of the
BY NET property for the net to which the polygon belongs. The BY NET
properties are also stored unless ONLY is specified. The accumulation
of properties is affected by NOHIER and NOPSEUDO in the same way
as the BY NET properties themselves.</p>
<p class="p">This option cannot be specified
with the BY CELL ONLY or BY NET ONLY options as ACCUMULATE requires
creation of polygon properties, and the BY CELL and NET ONLY options
prevent creation of these properties. This option may be specified
with BY CELL.</p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id333fa379-4681-4b53-92b9-d452595fa76f"><p class="p">BY NET [ONLY] — Calculates
the total net property value for each net represented on the output
layer; net properties are calculated per-cell basis. The net property
P is the sum of the property P values for all geometries in cell
C that are written to the output layer and are associated with the
net. By default, property values for each of the cells placed in
the current cell (recursive down to the bottom of the hierarchy)
are summed and included in the net property value. That is, the
property is calculated as if the cell had been flattened; this behavior
is changed with the NOHIER keyword. Net properties are named <span class="keyword ParameterName OptionalReplaceable">property_name</span>:N
in the output database and are attached to each geometry on the
output layer.</p>
<p class="p">By default, net properties
are stored on the output layer in addition to the object properties.
When ONLY is specified, only net properties are stored on the output layer. </p>
<p class="p">The output layer must have connectivity in order to include net
properties. Use the NODAL keyword when saving data with the DFM
RDB operation, or, if running Calibre DFM, use a NODAL DFM check. </p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__ida51a3400-47fd-47c6-919e-a5b78dd352b3"><p class="p">BY CELL [ONLY] — Calculates
the total cell property value for each cell represented on the output
layer. The cell property P is the sum of the property P values for
all geometries in the current cell context that are written to the
output layer. By default, property values for each of the cells
placed in the current cell (recursive down to the bottom of the
hierarchy) are summed and included in the cell property value. That
is, the cell property is calculated as if the cell had been flattened;
this behavior is changed with the NOHIER keyword.Cell properties
are stored on the first geometry on the output layer that belongs
to the cell and are named <span class="keyword ParameterName OptionalReplaceable">property_name</span>:C
in the output database.</p>
<p class="p">By default, cell properties
are stored on the output layer in addition to the object properties.
When ONLY is specified, only cell properties are stored on the output layer. </p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">For both the BY CELL and BY NET keywords,
if the property type is numeric, then “sum” means arithmetic sum.
If the property type is vector then “sum” means concatenation.</p>
<p class="p">For both the BY CELL and BY NET keywords, netID properties are
silently ignored. vnetID properties are considered, however. The
vnetID property for a net is a vector generated by concatenating
corresponding vnetID properties for all geometries on the net on
a given layer. Similarly, the vnetID property for a cell is a concatenated
vector of corresponding vnetID properties for all geometries in
the cell on a given layer. </p>
</div>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idd59e53c8-a079-48ce-b4b7-97646707133a"><p class="p">NOHIER — When cell and net
properties are calculated, hierarchy is ignored and each cell is
evaluated in isolation. </p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id7ee8d7a5-cef0-4187-a296-d89a125d371e"><p class="p">NOPSEUDO — Property values
in pseudo cells are promoted up the hierarchy to the closest real
cell. This keyword must be specified with NOHIER. If this keyword
is not specified, pseudo cells are treated the same as real cells
in the design.</p>
</li>
</ul>
</dd>
<dt class="dt ArgumentName dlterm" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id9c95a200-2e90-4578-95ac-51fe321f0a90">DBU</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword that causes all measurements
to be performed and returned in database units, rather than user
units. As a side effect when the DBU option is present, the PRECISION
function in DFM expressions returns 1.0. The DBU option can be used
to avoid rounding effects from math with floating point numbers.
See “<a class="xref fm:HeadingAndPage" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__id50aa1f55-6cfd-4887-beaf-0f7ccfe19ff3">Example 9</a>”. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idd7aa9ca8-3dbd-4111-bf8a-52d1bb910bfd"><span class="keyword ParameterName OptionalReplaceable">property_definition</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set defining
the properties to be associated with the geometries on the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span>.
Multiple instances of <span class="keyword ParameterName OptionalReplaceable">property_definition</span> are
allowed. </p>
<p class="p">When no properties are specified,
the operation functions as a copy, with results filtered based on
any INSIDE OF specifications and, for error layers, CORNER.</p>
<p class="p">When one or more properties
is specified, results are filtered based on all constraints defined for
the properties as well as any INSIDE OF specifications and, for
error layers, CORNER.</p>
<p class="p">The format for a <span class="keyword ParameterName OptionalReplaceable">property_definition</span> is:</p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id7e557277-c045-435f-923c-da4c5b11b00b"><p class="p Opt">'[' <span class="keyword ParameterName OptionalReplaceable">property_name</span> = <span class="keyword ParameterName OptionalReplaceable">expression</span> ']'
[ <span class="keyword ParameterName Optional">['!'] </span><span class="keyword ParameterName OptionalReplaceable">constraint</span>]…</p>
</li>
</ul>
<p class="p">where:</p>
<ul class="ul"><li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id8d309c5a-00d1-4276-9c68-e3949603a3fa"><p class="p"><span class="keyword ParameterName OptionalReplaceable">property_name</span> </p>
<p class="p">A required argument defining the
property name. The <span class="keyword ParameterName OptionalReplaceable">property_name</span> can
be “-” or an arbitrary string not beginning with the “-” character.
Property names are case-sensitive. White space is not recommended,
as Calibre RVE interprets the space character as a delimiter. </p>
<p class="p">The property name “-” and property
names which begin with the “+” character play a special role: these
properties are computed and checked against constraints, but not stored
on a output layer. These temporary properties are used to filter
the input layer when satisfying the constraint is important, but
the value does not need to be saved; see “<a class="xref fm:HeadingAndPage" href="Concept_NonpersistentDfmProperties_id8ab0f6ff.html#id8ab0f6ff-7157-4b24-9502-2959e7f708fe__Concept_NonpersistentDfmProperties_id8ab0f6ff.xml#id8ab0f6ff-7157-4b24-9502-2959e7f708fe" title="Non-persistent properties are properties that are not saved to the output layer created by the DFM Property operation. Non-persistent properties are used to filter the input layer(s) when satisfying the constraint is important, but the exact value is not.">Non-Persistent DFM Properties</a>”.</p>
<p class="p">Property names
that are repeated form expression chains, which are used to define alternative
values in the event that an expression cannot be evaluated. For
more information, refer to “<a class="xref fm:HeadingAndPage" href="Concept_ExpressionChains_id36d0f74a.html#id36d0f74a-ee22-45ad-bbe8-5b9c9ce99fb0__Concept_ExpressionChains_id36d0f74a.xml#id36d0f74a-ee22-45ad-bbe8-5b9c9ce99fb0" title="An expression chain is a series of expressions used to define a single DFM property. Expression chains are only used in the DFM Property family of operations. The value of the property is defined as the result of the first expression (evaluated left to right) that was successfully evaluated. An expression chain can be used to assign a default value for a property and protect against evaluation failure. If none of the expressions in the chain are successfully evaluated for a given property name, the expression evaluation fails and the layout object on the primary layer is not copied to the output layer.">Expression Chains</a>”. </p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idca6531c7-b8c2-4589-beca-851de6566029"><p class="p"><span class="keyword ParameterName OptionalReplaceable">expression</span></p>
<p class="p">An optional expression used to
calculate the value of a layer property. The <span class="keyword ParameterName OptionalReplaceable">expression</span> may
involve any of the following: </p>
<ul class="ul"><li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idd696451d-d40f-4f82-8d67-85356d852fdc"><p class="p">Numbers, including numeric
variables</p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id7e39a363-564a-47e0-9429-c2672a6e9cc7"><p class="p">Variables</p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id07d57924-4120-4e7b-a4d5-1504ba649667"><p class="p">Strings</p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id4600df66-214b-495c-9764-f672657d4126"><p class="p">Vectors</p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idcd96eca3-015b-4ea9-b0de-61ca859e174c"><p class="p"><a class="xref fm:HeadingOnly" href="General_MathOperators_idf1457929.html#idf1457929-4b2f-45f0-89e6-68dedaabf92d__General_MathOperators_idf1457929.xml#idf1457929-4b2f-45f0-89e6-68dedaabf92d" title="Built-in math operators are available for use in DFM expressions. These are operators familiar in other programming contexts.">Math Operators</a> (+,
-, !, ~, ^, *, /, +, -)</p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id4f9c6b90-f308-41b3-91be-bf4c936f0727"><p class="p"><a class="xref fm:HeadingOnly" href="General_MathFunctions_id7c9c3927.html#id7c9c3927-fe30-43b0-ba09-c4caa4cbc19a__General_MathFunctions_id7c9c3927.xml#id7c9c3927-fe30-43b0-ba09-c4caa4cbc19a" title="Certain math functions are supported in DFM Expressions. Math functions take zero or more numeric input arguments and produce a numeric value. There is no compile-time or runtime exception checking on the arguments of these functions, and unreasonable or undefined values may result from certain arguments.">Supported Math Functions in DFM Expressions</a></p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idc412c166-cbf2-4b1e-9a19-558b4217b371"><p class="p">Parentheses ( )</p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idc5452d61-21b8-4fa2-a681-90c715c8efb0"><p class="p"><a class="xref fm:HeadingOnly" href="General_ConditionalExpressions_ide027a325.html#ide027a325-8bb9-4a37-8131-9256af5f6d60__General_ConditionalExpressions_ide027a325.xml#ide027a325-8bb9-4a37-8131-9256af5f6d60" title="A conditional expression is a way to specify an if/then expression within a DFM expression—it returns one result if the specified condition is true and another result if the condition is false. You can use conditional expressions in the DFM expressions within DFM Analyze, DFM Spec Fill Optimizer, DFM Property and its related operations, and DFM Function.">Conditional Expressions</a> </p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idc4f40d7a-d6a1-4228-82bc-3d9d141830ed"><p class="p">User-defined functions created
by <a class="xref fm:HeadingOnly" href="Command_DfmFunction_id879454b1.html#id879454b1-404a-412a-8094-fb480f5c3a9f__Command_DfmFunction_id879454b1.xml#id879454b1-404a-412a-8094-fb480f5c3a9f" title="Specifies a user-defined function that can be referenced within expressions for DFM Analyze, DFM Property, or other DFM Function statements.">DFM Function</a></p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id9f5482f2-c936-41a8-8c98-018c1d9314e9"><p class="p"><a class="xref fm:HeadingOnly" href="Contain_DfmProperties_id7d747680.html#id7d747680-cd5f-44d1-8f88-3950d906f6cf__Contain_DfmProperties_id7d747680.xml#id7d747680-cd5f-44d1-8f88-3950d906f6cf" title="DFM properties are a form of metadata associated with objects on derived layers. They are often numerical values used for calculating scores and filtering data. Some operations support net number, string, and vector properties. Each property has a name and a value.">DFM Properties</a></p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id3722b089-db4d-4bbd-9507-45f2ed8efebc"><p class="p">Most <a class="xref fm:HeadingOnly" href="Contain_MeasurementFunctions_id13468c08.html#id13468c08-797c-4cca-8773-611a15322186__Contain_MeasurementFunctions_id13468c08.xml#id13468c08-797c-4cca-8773-611a15322186" title="Measurement functions calculate the value of a geometric attribute of layer data. Measurement functions return values expressed in user units. Although the COUNT function does not measure a geometric attribute, it is included with the measurement functions because it behaves similarly to the other functions in this class.">Measurement Functions</a> </p>
<p class="p">The layer input to measurement functions can use layer derivation
indicators, as discussed in “<a class="xref fm:HeadingAndPage" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__id9fa0a6e6-bf13-4e27-b180-10b040b01b04">:EDGE, :EXTENT, and :EXTENT_EDGE Layer Derivation Indicators</a>”; however,
the NODAL keyword is not supported with this usage. This usage is
only supported in DFM Property and DFM Property Select Secondary.</p>
</li>
</ul>
<p class="p">The customary rules of arithmetic
operator precedence apply, with parentheses having highest precedence.
In addition: </p>
<ul class="ul"><li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id8753e93e-b9ff-462a-af0e-bbe8a1058275"><p class="p">The <span class="keyword ParameterName OptionalReplaceable">expression</span> must
be enclosed in brackets ([ ]).</p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id82a4eab5-56ee-4503-bda3-60f1e43b117d"><p class="p">Division by 0 is defined not
to satisfy any constraint.</p>
<p class="p">For more information on expressions,
refer to “<a class="xref fm:HeadingAndPage" href="Contain_DfmExpressions_id0aa735bd.html#id0aa735bd-eb6a-446d-9da0-f14de5e1332e__Contain_DfmExpressions_id0aa735bd.xml#id0aa735bd-eb6a-446d-9da0-f14de5e1332e" title="DFM Expressions are used to calculate DFM properties, define an analysis or density function, or specify a user-defined function. They can be used to calculate scores, statistics, and measurement values based on layer data. DFM Expressions are used in DFM Analyze, the DFM Property operation family, DFM Function, and DFM Spec Fill Optimizer.">DFM Expressions</a>”.</p>
</li>
</ul>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idb200c1a6-2fbb-481d-8638-b89958d82c49"><p class="p"><span class="keyword ParameterName Optional">['!']</span></p>
<p class="p">An optional constraint option
used to negate the constraint that follows. When specified, the
DFM Property operation selects all results having property values
that do not satisfy the constraint. </p>
<p class="p">The negated constraint is most
useful with the interval constraints for which a simple opposite
cannot be specified directly. Expressions that do not evaluate successfully always
result in a constraint violation and exclude the polygon from the
result, whether the constraint is negated or not. For more information
on such expressions, refer to “<a class="xref fm:HeadingAndPage" href="Concept_ExpressionsDoNotEvaluateSuccessfully_idb054eec6.html#idb054eec6-603c-4661-b0a3-1432d37f0f68__Concept_ExpressionsDoNotEvaluateSuccessfully_idb054eec6.xml#idb054eec6-603c-4661-b0a3-1432d37f0f68" title="A DFM expression that does not evaluate successfully has no value and does not satisfy any constraint. When any portion of an expression cannot be evaluated, the overall expression cannot be evaluated. For DFM Property, the primary layer object is not written to the output layer; for DFM Analyze, the capture window is not output.">Expressions that Do Not Evaluate Successfully</a>”.</p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idef55a327-8bfd-4a80-8e7d-89c6c4c453a3"><p class="p"><span class="keyword ParameterName OptionalReplaceable">constraint</span></p>
<p class="p">An optional DRC-style constraint
that applies to the property immediately preceding it. If the constraint
is specified, only those geometries on the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span> for which
the property value satisfies the constraint are included in the
result layer. If more than one property has a constraint, a geometry
must satisfy all constraints to be included in the result layer. </p>
<p class="p">In addition, if there are any
properties of a particular primary polygon for which values cannot
be calculated due to expressions that do not evaluate successfully,
this polygon is never included into the result layer. For more information
on such expressions, refer to “<a class="xref fm:HeadingAndPage" href="Concept_ExpressionsDoNotEvaluateSuccessfully_idb054eec6.html#idb054eec6-603c-4661-b0a3-1432d37f0f68__Concept_ExpressionsDoNotEvaluateSuccessfully_idb054eec6.xml#idb054eec6-603c-4661-b0a3-1432d37f0f68" title="A DFM expression that does not evaluate successfully has no value and does not satisfy any constraint. When any portion of an expression cannot be evaluated, the overall expression cannot be evaluated. For DFM Property, the primary layer object is not written to the output layer; for DFM Analyze, the capture window is not output.">Expressions that Do Not Evaluate Successfully</a>”.</p>
<p class="p">Also see “<a class="xref fm:HeadingAndPage" href="Concept_ComparisonOfDfmProperties_ideb3f6028.html#ideb3f6028-2066-42c7-9512-e84821a03e07__Concept_ComparisonOfDfmProperties_ideb3f6028.xml#ideb3f6028-2066-42c7-9512-e84821a03e07" title="DFM properties can be compared with the relational operators: ==, !=, &lt;, &lt;=, &gt;, &gt;=. Numeric, string, numeric vector, and string vector properties can be compared using these operators. Net number and vector net number properties can be compared only for equality (==) or inequality (!=). Care must be taken when testing for equality of floating point values or comparing to an expression that may evaluate to a negative value with a small magnitude.">Comparison of DFM Properties</a>”.</p>
</li>
</ul>
</dd>
</dl>
</div>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">This operation creates a derived
layer containing those geometries from the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span> that meet
the specified criteria. Unless directed otherwise, the specified <a class="xref fm:HeadingOnly" href="Contain_DfmProperties_id7d747680.html#id7d747680-cd5f-44d1-8f88-3950d906f6cf__Contain_DfmProperties_id7d747680.xml#id7d747680-cd5f-44d1-8f88-3950d906f6cf" title="DFM properties are a form of metadata associated with objects on derived layers. They are often numerical values used for calculating scores and filtering data. Some operations support net number, string, and vector properties. Each property has a name and a value.">DFM Properties</a> are associated
with each of the geometries on the new layer.</p>
<p class="p">The operation calculates a separate
property value for each of the geometries on the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span>.
If one or more <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span>s
are specified, the secondary layer objects are clustered with the
primary layer object according to the clustering method (<span class="keyword ParameterName OptionalDefault">INTERSECTING</span> (default),
OVERLAP, or NODAL). </p>
<p class="p">The following subsections are included:</p>
<ul class="ul"><li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idda32d6ab-8522-4608-bdb5-b1953f834705"><p class="p"><a class="xref fm:HeadingOnly" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__id6d1389bb-8d68-4adc-90ca-88f0b16f220c">Clustering Methods in DFM Property</a></p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idf7d46f35-c907-4989-bb23-29f2dbfdf0e0"><p class="p"><a class="xref fm:HeadingOnly" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__id4ba42bba-985b-471c-b73d-80dfae92f5b7">Primary and Secondary Layers and Measurement Function Evaluation</a></p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idcf529aa8-2126-4969-bc94-e67399f7e75d"><p class="p"><a class="xref fm:HeadingOnly" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__id9fa0a6e6-bf13-4e27-b180-10b040b01b04">:EDGE, :EXTENT, and :EXTENT_EDGE Layer Derivation Indicators</a></p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id63675c5d-38d4-495f-8e22-35084a5fb52f"><p class="p"><a class="xref fm:HeadingOnly" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__idb965aab7-ffea-4bcf-8825-ba06689af4e2">Promotion and Push-Down</a></p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id5fc9db22-5927-4c0a-b1aa-aea04f1ef8af"><p class="p"><a class="xref fm:HeadingOnly" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__id15e0a2a6-3a35-409b-a03e-7f8e697f1e5a">Concurrency</a></p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id109f0b1c-c416-4666-8f84-d2df90ab1e29"><p class="p"><a class="xref fm:HeadingOnly" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__id922f890a-8bf3-482a-a339-096fa3e74977">Merging of Edge Clusters</a></p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id5349a339-af74-4819-958f-5ea97fc79076"><p class="p"><a class="xref fm:HeadingOnly" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__idd9ec50bc-6c44-4d29-8727-f7273417e33d">Layer of Origin Handling</a></p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id22b82504-78e2-428e-94d6-5cbaa9c0a7eb"><p class="p"><a class="xref fm:HeadingOnly" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__idb0e95c6c-f146-4808-b228-7aedaf540d5d">Using DFM Property for Device Classification</a></p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idbf2b4670-9c51-422d-9dfb-5f6ac18ba2c5"><p class="p"><a class="xref fm:HeadingOnly" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__id16da92f9-09f9-4b07-9f84-06f1fa94b96b">Measurement Function Behavior at Boundaries in DFM Property</a></p>
</li>
</ul>
<div class="section Subsection" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id6d1389bb-8d68-4adc-90ca-88f0b16f220c"><h2 class="title Subheading sectiontitle">Clustering Methods in DFM Property</h2><p class="p">If one or more <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span>s
are specified, the secondary layer objects are clustered with the primary
layer object according to the clustering method (<span class="keyword ParameterName OptionalDefault">INTERSECTING</span>,
OVERLAP, or NODAL) and related keywords. Each cluster contains exactly
one object from the primary layer. The following figure illustrates
each clustering method. </p>
<div class="fig fignone" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id63214bd1-db80-41ce-9da4-d24c24dbbf00"><span class="figcap"><span class="fig--title-label">Figure 3. </span>Cluster
Creation Methods in DFM Property</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/DFM_Property/cluster_all_scaled.png" /></div><br /></div>
<p class="p">See the keyword definitions for additional options with OVERLAP
and NODAL. If a <span class="keyword ParameterName OptionalReplaceable">property_definition</span> involves <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span>s,
the clustering method can affect the property evaluation. see “<a class="xref fm:HeadingAndPage" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__id16da92f9-09f9-4b07-9f84-06f1fa94b96b">Measurement Function Behavior at Boundaries in DFM Property</a>” and the
next section for additional information.</p>
</div>
<div class="section Subsection" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id4ba42bba-985b-471c-b73d-80dfae92f5b7"><h2 class="title Subheading sectiontitle">Primary
and Secondary Layers and Measurement Function Evaluation</h2><p class="p">DFM Property allows multiple layers to be specified as inputs.
The first layer is called the primary layer. All other layers, if
any, are called secondary layers. Expressions calculate their values
differently depending on whether a primary layer or secondary layer
is specified in the expression’s functions.</p>
<p class="p">When property calculations involve
multiple layers, the operation first creates associations between
the geometries on the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span> and
geometries on any <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span>s
by grouping them together into clusters based on proximity. Each
cluster contains exactly one layout object on the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span>,
and a number of layout objects on each <span class="keyword ParameterName OptionalReplaceable">secondary_layer</span> that
is controlled by the specified clustering mode. In this multilayer
case, the operation calculates a separate property value for each
cluster, with calculations based on all layout objects in that cluster.
The property is associated only with the layout object on the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span>,
and only layout objects from the <span class="keyword ParameterName RequiredReplaceable">primary_layer</span> are
written to the resulting derived layer. This operation is a node-preserving
layer constructor.</p>
<h2 class="title Subheading sectiontitle">Primary Layer</h2><p class="p">If a primary layer is specified
in an expression, then the functions in the expression operate on objects
from that layer and calculate values on a per-object basis. Then
the expression calculates a value based upon the function values.
For example, if you have this operation:</p>
<pre class="pre codeblock"><code>// m1 is a primary layer; property a is area of each m1 shape
x = DFM PROPERTY m1 [a = AREA(m1)/COUNT(m1)]</code></pre><p class="p">the area of each shape is calculated by the AREA function. The
count of each shape is calculated by the COUNT function (always
1 in this case). Then the entire expression is evaluated and the
value is assigned to property “a” for each m1 shape. The geometric
output along with associated property values is saved in layer x.
Here is an example layout based on the operation:</p>
<div class="fig fignone" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id715996e6-ecac-4d56-b69a-038d316ac0fc"><span class="figcap"><span class="fig--title-label">Figure 4. </span>Primary
Layer Property Calculation</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/DFM_Property/dfm_property_primary_secondary_1.png" /></div><br /></div>
<p class="p">In the preceding operation, the COUNT function’s value is 1 as
long as m1 has shapes on it, so COUNT is superfluous for a primary
layer. But for secondary layers, this is not generally the case.</p>
<h2 class="title Subheading sectiontitle">Secondary Layers</h2><p class="p">If a secondary layer is
specified in an expression, then the interactions of secondary layer objects
with primary layer objects are considered. This is called clustering,
and the objects that interact are called clusters. For each primary
layer object, and for each function in the expression, a <span class="ph FontProperty emphasis">sum of a function’s values</span> for
all secondary layer objects in the same cluster as the primary layer
object is determined; this is referred to as implicit summing. When
all functions have these sums determined, the expression value is
calculated using the sums. For example, if you have this operation:</p>
<pre class="pre codeblock"><code>// m1 is a secondary layer
// avg_a is the average area of m1 intersections with a poly shape
y = DFM PROPERTY poly m1 [avg_a = AREA(m1)/COUNT(m1)]</code></pre><p class="p">for each poly shape, the sum of all areas of m1 shapes in the
poly shape’s cluster is determined, as well as the total count of
all m1 shapes in the cluster. Then the property “avg_a” is calculated as
Σ(cluster m1 shape areas)/Σ(cluster m1 shape count) for each poly
shape. </p>
<p class="p">The implicit summing behavior described in the preceding paragraph
does not apply to the per-shape functions like SUM and PRODUCT,
which allow control over how the measurement function value of each
geometry participates in the final sum. Implicit summing is also
not performed for vector functions such as VECTOR, VNETID, and VSTRING;
these and similar functions return a vector that is a concatenation
of the vector properties for each clustered secondary layer object.
See “<a class="xref fm:HeadingAndPage" href="General_PerShapeFunctionsMeasurements_idd84ea573.html#idd84ea573-94e6-457c-a624-db2594b5b4c6__General_PerShapeFunctionsMeasurements_idd84ea573.xml#idd84ea573-94e6-457c-a624-db2594b5b4c6" title="The arithmetic functions SUM, MIN, MAX, and PRODUCT provide per-shape evaluation of the measurement functions in a DFM expression. Per-shape functions are available in DFM Property, DFM Analyze, and DFM Spec Fill Optimizer, with some restrictions depending on the command. Per-shape evaluation applies to the secondary layers in DFM Property and to any layer in DFM Analyze and DFM Spec Fill Optimizer; without a per-shape function the default behavior for those layers is to sum each measurement over all shapes before evaluating the overall expression.">Per-Shape Evaluation for DFM Measurement Functions</a>”.</p>
<p class="p">Here is an example layout based on the operation in the preceding
code:</p>
<div class="fig fignone" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id2de7beee-48c6-4c66-b5c0-86f359eb1b66"><span class="figcap"><span class="fig--title-label">Figure 5. </span>Secondary
Layer Property Calculation</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/DFM_Property/dfm_property_primary_secondary_2.png" /></div><br /></div>
<p class="p">Compare to <a class="xref fm:Figure" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__id715996e6-ecac-4d56-b69a-038d316ac0fc">Figure 4</a>.</p>
<p class="p">If no objects on a secondary layer in a measurement
function are clustered with the primary layer, the measurement function
returns 0 by default. If part of an expression fails to evaluate, then
the primary layer shape is omitted from the output. In the preceding
operation, if there are no m1 shapes intersecting a poly shape,
COUNT returns 0 for the denominator of the expression. Since division
by 0 is not defined, two of the poly shapes have no corresponding output
on layer y.</p>
<p class="p">In certain cases, it is necessary to distinguish
between whether a value of 0 is returned by an expression because
there are no clustered geometries, or whether the implicit sum of
the measurement function is 0. In these cases, you can use the COUNT
function to return a value other than 0 in an appropriate way. Using
negation or logical complement operators can be useful in this context.</p>
<p class="p">For example, in the preceding layer operation, results were not
returned for all poly shapes due to a division by 0 in the expression.
The following operation uses COUNT with the negation operator (!)
to guarantee the denominator is never 0:</p>
<pre class="pre codeblock"><code>// m1 is a secondary layer
// avg_a is the average area of m1 intersections with a poly shape
// !COUNT returns 1 if the m1 layer is missing
z = DFM PROPERTY poly m1 [avg_a = AREA(m1)/(COUNT(m1) + !COUNT(m1))]</code></pre><p class="p">Here is a an example layout with results from this operation:</p>
<div class="fig fignone" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idd3ff8c39-1bb7-4643-aa1b-6550171b5928"><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/DFM_Property/dfm_property_primary_secondary_3.png" /></div><br /></div>
<p class="p">Compare to <a class="xref fm:Figure" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__id2de7beee-48c6-4c66-b5c0-86f359eb1b66">Figure 5</a>.</p>
<p class="p">The per-shape functions allow specification
of a default value if evaluation failure occurs; see “<a class="xref fm:HeadingAndPage" href="General_PerShapeFunctionsMeasurements_idd84ea573.html#idd84ea573-94e6-457c-a624-db2594b5b4c6__General_PerShapeFunctionsMeasurements_idd84ea573.xml#idd84ea573-94e6-457c-a624-db2594b5b4c6" title="The arithmetic functions SUM, MIN, MAX, and PRODUCT provide per-shape evaluation of the measurement functions in a DFM expression. Per-shape functions are available in DFM Property, DFM Analyze, and DFM Spec Fill Optimizer, with some restrictions depending on the command. Per-shape evaluation applies to the secondary layers in DFM Property and to any layer in DFM Analyze and DFM Spec Fill Optimizer; without a per-shape function the default behavior for those layers is to sum each measurement over all shapes before evaluating the overall expression.">Per-Shape Evaluation for DFM Measurement Functions</a>” for
more information. </p>
</div>
<div class="section Subsection" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id9fa0a6e6-bf13-4e27-b180-10b040b01b04"><h2 class="title Subheading sectiontitle">:EDGE, :EXTENT,
and :EXTENT_EDGE Layer Derivation Indicators</h2><p class="p">The layer derivation indicators :EDGE, :EXTENT, and :EXTENT_EDGE
may be appended to the layer input argument of measurement functions
in property expressions. The indicated layer derivation is used
as input to the measurement function. This usage can often eliminate
a separate layer derivation when measurements on an edge or extent
are needed. This usage is not supported with the NODAL keyword. </p>
<p class="p">For example, assume poly is a polygon layer:</p>
<pre class="pre codeblock"><code>edge_measure = DFM PROPERTY poly [ edge_len = LENGTH(poly:EDGE) ]</code></pre><p class="p">The LENGTH function operates on the edges of each poly object,
and returns the total edge length for each object. </p>
<p class="p">The following layer derivations are supported:</p>
<ul class="ul"><li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id0b8d6ca4-81fb-4dec-a499-dd0b00960b3f"><p class="p"><span class="keyword ParameterName OptionalReplaceable">input_layer</span>:EDGE
— Returns a layer containing the edges of the objects on the <span class="keyword ParameterName OptionalReplaceable">input_layer</span>.
The <span class="keyword ParameterName OptionalReplaceable">input_layer</span> may
be a merged polygon layer, an unmerged polygon layer, or an error
cluster layer. The type of the returned layer depends on the <span class="keyword ParameterName OptionalReplaceable">input_layer</span> type
as shown in the following table.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id396065ef-b9de-444f-9c9a-751b8c97d35a" class="table" frame="border" border="1" rules="cols"><colgroup><col style="width:2.038in" /><col style="width:3.487in" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d381579e1123"><p class="p"><span class="keyword ParameterName RequiredReplaceable">input_layer</span> type</p>
</th>
<th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d381579e1128"><p class="p"><span class="keyword ParameterName RequiredReplaceable">input_layer</span>:EDGE
type</p>
</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d381579e1123 "><p class="p">Merged polygon layer</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d381579e1128 "><p class="p">Edge layer</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d381579e1123 "><p class="p">Unmerged polygon layer</p>
<p class="p">(UNMERGED must be specified)</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d381579e1128 "><p class="p">Error cluster layer with one edge per cluster</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d381579e1123 "><p class="p">Error cluster layer</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d381579e1128 "><p class="p">Error cluster layer with one edge per cluster</p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p">:EDGE with an edge type <span class="keyword ParameterName OptionalReplaceable">input_layer</span> produces
a warning that the derivation is redundant. </p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id15ad80eb-c628-442f-abc1-0171607ac057"><p class="p"><span class="keyword ParameterName OptionalReplaceable">input_layer</span>:EXTENT
— Returns a layer containing the bounding boxes of the objects on
the <span class="keyword ParameterName OptionalReplaceable">input_layer</span>.
The <span class="keyword ParameterName OptionalReplaceable">input_layer</span> may
be any layer type that is supported for the clustering method. The
returned layer is an unmerged polygon layer, with one bounding box
polygon per object on the <span class="keyword ParameterName OptionalReplaceable">input_layer</span>. </p>
<p class="p">Degenerate bounding boxes are not returned by the :EXTENT derivation.
Degenerate bounding boxes have a width and/or height of zero, and
result from vertical or horizontal edge input from an edge layer
or an error layer with horizontal or vertical single-edge clusters.
The COUNT function returns zero for such input layer objects, and measurement
functions such as AREA and PERIMETER return zero. </p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id239070b7-78fe-49fb-8e24-6045d19e3460"><p class="p"><span class="keyword ParameterName OptionalReplaceable">input_layer</span>:EXTENT_EDGE
— Returns a layer containing the edges corresponding to the bounding
boxes of the objects on the <span class="keyword ParameterName OptionalReplaceable">input_layer</span>.
The <span class="keyword ParameterName OptionalReplaceable">input_layer</span> may
be any layer type that is supported for the clustering method. The
returned layer is an error cluster layer with one edge per cluster.</p>
<p class="p">The returned layer from :EXTENT_EDGE always contains four edges
for each input object, including objects that result in a degenerate
bounding box. For example, :EXTENT_EDGE operating on a vertical
edge returns two vertical edges with length equal to the edge length,
and two zero-length horizontal edges. </p>
</li>
</ul>
<p class="p">For :EDGE and :EXTENT_EDGE, measurement functions are summed
over the edges corresponding to each input layer object. See <a class="xref fm:Figure" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__id591a519f-c143-4146-845a-2730fbba81b8">Figure 6</a>, <a class="xref fm:Figure" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__id9b8084a8-3af0-45b3-8261-f4f6b1d91b14">Figure 7</a>, and <a class="xref fm:Figure" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__ida3af23cc-83fa-4573-816f-a8b0c6d7ef85">Figure 8</a>. </p>
<p class="p">The :EDGE, :EXTENT, and :EXTENT_EDGE layer derivation indicators
cannot be used within a DMACRO definition, but must be passed in
as arguments. See “<a class="xref fm:HeadingAndPage" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__idbf032a2c-3757-437d-b6cf-87d8e35b03b9">Example 11</a>”.</p>
<div class="fig fignone" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id591a519f-c143-4146-845a-2730fbba81b8"><span class="figcap"><span class="fig--title-label">Figure 6. </span>:EDGE
in Measurement Functions</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/DFM_Property/colon_edge.png" /></div><br /></div>
<div class="fig fignone" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id9b8084a8-3af0-45b3-8261-f4f6b1d91b14"><span class="figcap"><span class="fig--title-label">Figure 7. </span>:EXTENT
in Measurement Functions</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/DFM_Property/colon_extent.png" /></div><br /></div>
<div class="fig fignone" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__ida3af23cc-83fa-4573-816f-a8b0c6d7ef85"><span class="figcap"><span class="fig--title-label">Figure 8. </span>:EXTENT_EDGE
in Measurement Functions</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/DFM_Property/colon_extentedge.png" /></div><br /></div>
</div>
<div class="section Subsection" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idb965aab7-ffea-4bcf-8825-ba06689af4e2"><h2 class="title Subheading sectiontitle">Promotion and Push-Down</h2><p class="p">In hierarchical execution, properties
are calculated on fully-merged geometries. This will, in general,
require that the geometries on primary input layer be promoted.
In addition, geometry clusters are assembled across all levels of
hierarchy: all geometries in a cluster are promoted as needed so
the cluster can be assembled in one cell, and the result is generated
in that cell.</p>
<p class="p">The results returned by the DFM
Property operation with the INSIDE OF option produces results in
the top level cell. The results from placements of lower level cells
that belong to the window are promoted to the top cell.</p>
<h2 class="title Subheading sectiontitle">Push-Down</h2><p class="p">Some property values may be reported at a lower level in the
hierarchy than where they are calculated. If property values are
identical at all placements of a particular primary geometry, they
are reported in the geometry's original cell. If the original calculations
were dependent on coordinates or particular cell rotations, then
the resultant values may not match the cell in which they are reported.
The following figure shows an example of a cell that is rotated
when placed in Top_Cell. </p>
<div class="fig fignone" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__ide62c476c-0e8e-4067-b3c9-e4515d306b4b"><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/DFMProperty_partial_promo_3.gif" /></div><br /></div>
<p class="p">The following SVRF statements are applied to
the blue polygons on layer poly in the design:</p>
<pre class="pre codeblock leveled"><code>cluster_layer =  EXTERNAL poly &lt; val OPPOSITE
prop_lenx = DFM PROPERTY poly cluster_layer OVERLAP 
          [ len_x = ECX(cluster_layer) ]</code></pre><p class="p">The value of <span class="keyword ParameterName OptionalReplaceable">val</span> is
chosen such that cluster_layer has two clusters in Top_Cell. The
edge cluster output is shown in the following figure.</p>
<div class="fig fignone" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__ideff5a1ba-ad1e-4b43-8446-13a07149f6b5"><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/DFMProperty_partial_promo_4.gif" /></div><br /></div>
<p class="p">In this example, the value of len_x is computed
in Top_Cell, but reported in Cell_A for polygons in that cell due
to push-down because all placements have the same property values. Since
Cell_A is rotated, the value of len_x may actually be a y-coordinate
measurement. </p>
<p class="p">In general, these types of dependencies in
calculations (unbalanced dependencies on x- and y-coordinate measurements)
are not recommended practice. The GLOBALXY keyword can be used to
calculate measurements with X- and Y-axes aligned with the top-level
coordinate system. </p>
<p class="p">You can disable the push-down optimization
feature by setting the following environment variable:</p>
<pre class="pre codeblock leveled"><code>CALIBRE_DFMPROP_DISABLE_OVERLAP_PUSH_DOWN = 1 </code></pre><p class="p">This can be used to determine if a result is
affected by push-down, but should only be used for debugging purposes.</p>
<h2 class="title Subheading sectiontitle">NOPUSH Keyword</h2><p class="p">Push-down, as described in the preceding section, is generally
advantageous. For example, it is very important for LVS, because
associating properties with devices as low in the hierarchy as possible
reduces the amount of subsequent processing that is required. However,
some applications (PERC, for example) may need to have geometries
reported where the clustering occurs. The NOPUSH option can be used
in such cases—results are reported in the cell where clustering
occurs and where the property calculation takes place.</p>
</div>
<div class="section Subsection" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id15e0a2a6-3a35-409b-a03e-7f8e697f1e5a"><h2 class="title Subheading sectiontitle">Concurrency</h2><p class="p">DFM Property operations are
executed concurrently when they share the following characteristics:</p>
<ul class="ul"><li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id0af16884-c547-4ccb-8c6f-3c7eaac426dc"><p class="p">Same input layers </p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id8b7e7ba0-9ea8-4398-a37a-6ee82db1f7bb"><p class="p">Same WINDOW options:</p>
<ul class="ul"><li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id2d84ae73-81ca-4e9f-a22a-273b6b7e3ce1"><p class="p">INTERSECTING | OVERLAP [ABUT
ALSO] [MULTI] [REGION]]</p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id1526d7ca-b4e7-421b-8ac9-18c0b3855fd5"><p class="p">[CORNER]</p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id182a931f-309e-4658-95be-a0f580f22718"><p class="p">[[INSIDE OF <span class="keyword ParameterName OptionalReplaceable">x1 y1 x2 y2</span>]
…]</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">You
can force multiple operations to run concurrently by supplying a
consistent layer list to all DFM Property operations on the same <span class="keyword ParameterName RequiredReplaceable">primary_layer</span>.
However, this may have an unexpected effect on promotion if some
of the concurrent operations do not use some of the input layers
in the expressions: see “<a class="xref fm:HeadingAndPage" href="#idf1f176c5-0d5a-4406-95d0-b54438157ae8__ide1af7899-4adc-47d1-9a28-ac349d3c84b6">Example 2</a>”. If this
is not desired, do not include unused input layers in the DFM Property operation.
This may reduce concurrency, but will ensure that results of one
DFM Property operation are not affected by presence of another DFM
Property operation. </p>
</div>
</li>
</ul>
</li>
</ul>
</div>
<div class="section Subsection" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id922f890a-8bf3-482a-a339-096fa3e74977"><h2 class="title Subheading sectiontitle">Merging of Edge
Clusters</h2><p class="p">Hierarchical DFM Property merges
edge clusters by default, unless they contain DFM properties, in
which case they are not merged. DRC commands that generate edge
clusters can split the edges into multiple clusters, particularly
on hierarchical boundaries, if part of the cluster can be instantiated
in a cell and part cannot. DFM Property merges these edge clusters hierarchically
if they do not contain DFM properties, resulting in “fully merged”
clusters: if two edge clusters, in one cell or different cells,
form one cluster when considered flat, these clusters are merged.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">As a
result of this merge, measurement functions such as COUNT() are
unambiguous when used in DFM Property expressions. This applies
only to DFM Property, not to <a class="xref fm:HeadingOnly" href="Command_DfmAnalyze_id1ca0eb21.html#id1ca0eb21-bd76-4f8e-89f7-9b74a6058289__Command_DfmAnalyze_id1ca0eb21.xml#id1ca0eb21-bd76-4f8e-89f7-9b74a6058289" title="Identifies areas on a layout where manufacturing yield can potentially be improved.">DFM Analyze</a>. However, DFM Analyze can use
edge cluster layers that were generated by DFM Property commands
and reference properties on the edge clusters. In this case, the
input layer to DFM Analyze is already merged by DFM Property and
the measurements done by DFM Analyze are unambiguous.</p>
</div>
<p class="p">Primary and secondary edge clusters
of any number of edges that do not contain DFM properties are merged
by default. If this is not the desired behavior, you can specify
the SPLIT keyword to merge secondary layer edge clusters as usual,
then split them at all locations where the primary layer has a vertex,
that is the end of an edge, corner of a polygon, or an intersection point
of a primary and a secondary edge. </p>
<p class="p">For example, in the following
figure, by default, the smaller gate polygon includes in the EC() calculation
the blue edge pair that touches the polygon in the upper-left corner,
since it is merged with the red edge pair coincident with the top
edge of the smaller gate polygon. When SPLIT is specified, the blue
edge pair is not included in the calculation.</p>
<div class="fig fignone" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id299305b2-3766-42b5-9d28-1760cb713e3d"><span class="figcap"><span class="fig--title-label">Figure 9. </span>DFM Property SPLIT
Behavior</span><br /><div class="imagecenter"><img class="image imagecenter" height="195" src="../graphics/DFM_Property/dfm_property_split.png" width="421" /></div><br /></div>
<p class="p">In other words, when SPLIT is
specified, the edge pair created by merging layer d is split at
the endpoints of the edges on the smaller gate polygon. This creates
two edge pairs, one of which touches the upper-left corner of the
smaller gate polygon. This edge pair is not included in the EC()
calculation.</p>
<p class="p">The SPLIT ALL option, which applies
only when the primary layer is a derived error layer, extends the
functionality of SPLIT to the primary layer. That is, SPLIT ALL
causes the primary layer to be split in all locations where a secondary
layer has a vertex, that is the end of an edge, a corner of a polygon,
or an intersection point of a primary and a secondary edge. When
SPLIT ALL is specified, the behavior of ALL is applied first and
the primary layer is split, then the secondary layers are split.
Specifically, SPLIT ALL first splits the clusters of the primary
layer at all locations where a secondary layer has a vertex. Points
where one edge of a cluster is split are projected onto the other
edge to split it as well. After the primary clusters have been split, the
SPLIT behavior is then applied to split all secondary layers at
all locations where the primary layer has a vertex.</p>
<p class="p">When one edge of an edge cluster
is split with the SPLIT or SPLIT ALL option, the other edges of
the same cluster, if they exist, are also split. The locations of
these subsequent split points are determined by the projections
of the original split points. If any cluster edge is axis-aligned,
the projection direction is perpendicular to the most prevalent
axis-aligned direction: the horizontal or vertical direction with
the most edges parallel to it, if there is one, or else the horizontal
or vertical direction with the maximum total edge length parallel
to it. If no edge is axis-aligned, the projection direction is perpendicular
to the cluster edge that is most nearly axis-aligned. If the projection
vector does not intersect an edge, a trivial edge is created at
the point where the edge is closest to the projection vector—refer
to the following figure.</p>
<div class="fig fignone" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__ida5b15a63-386a-4258-8a40-106fa939154a"><span class="figcap"><span class="fig--title-label">Figure 10. </span>DFM Property SPLIT
and SPLIT ALL Projection</span><br /><div class="imagecenter"><img class="image imagecenter" height="218" src="../graphics/DFM_Property/dfm_property_split_all.png" width="450" /></div><br /></div>
</div>
<div class="section Subsection" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idd9ec50bc-6c44-4d29-8727-f7273417e33d"><h2 class="title Subheading sectiontitle">Layer
of Origin Handling</h2><p class="p">Derived layers usually can be traced back to something called
a layer of origin. This is either a drawn layer or the most recent
derived layer in the derivation chain produced by a layer constructor
operation (see “<a class="xref Link" href="../../calbr_ver_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Layer of Origin', 'calbr_ver_user'); return false;">Layer of Origin</a>”
in the <cite class="cite">Calibre Verification User’s Manual</cite> for a complete
discussion.</p>
<p class="p">Although DFM Property is a layer constructor, it does not behave
as other layer constructors do regarding layer of origin. This can
lead to unexpected results. Consider the following example:</p>
<pre class="pre codeblock"><code>Test_1 {
   X = A COIN INSIDE EDGE B
   INT X A &lt; 1 ABUT &lt; 90 REGION
}

Test_2 {
   X = A COIN INSIDE EDGE B
   Y = DFM PROPERTY X B OVERLAP ABUT ALSO MULTI [-= COUNT(B)] &gt; 0
   INT Y A &lt; 1 ABUT &lt; 90 REGION
}</code></pre><p class="p">One might expect the output of these rules to be the same because
the layer of origin of X is A, the layer of origin of A is A, and
the layer of origin of Y is X. However, the results of these rules are
not the same because DFM Property with multiple input layers does
not preserve the layer of origin of Y in the way other layer operations
do. To obtain the expected results, the following could be done:</p>
<pre class="pre codeblock"><code>Test_2_mod {
   X = A COINCIDENT INSIDE EDGE B
   Y = DFM PROPERTY X B OVERLAP ABUT ALSO MULTI [-= COUNT(B)] &gt; 0
   Z = X COINCIDENT INSIDE EDGE Y
   INT Z A &lt; 1 ABUT &lt; 90 REGION
}</code></pre><p class="p">In this case, Layer Z selects edges from the original X, preserving
their layer of origin. The edges X contains should be exactly those
in Y. (Note, care should be taken in the event that edges of Y are
skew, as snapping differences may occur between X, Y, and Z derivations.)</p>
</div>
<div class="section Subsection" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idb0e95c6c-f146-4808-b228-7aedaf540d5d"><h2 class="title Subheading sectiontitle">Using DFM Property
for Device Classification</h2><p class="p">DFM Property is useful for classifying
certain types of advanced devices. See “<a class="xref fm:HeadingAndPage" href="Concept_ExampleDeviceLayerAnnotateProgramsUsingDfmProperty_id834a8436.html#id834a8436-ffb5-42a8-a234-19c777df4304__Concept_ExampleDeviceLayerAnnotateProgramsUsingDfmProperty_id834a8436.xml#id834a8436-ffb5-42a8-a234-19c777df4304" title="The Device Annotation Built-In Language provides a means for combining DFM Property measurements with devices recognized using Calibre nmLVS. DFM Property is an efficient and versatile operation for collecting and combining complex device property measurements used in parasitic extraction flows.">Example Device Annotation Programs Using DFM Property</a>”. Also see “<a class="xref Link" href="../../calbr_ver_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'DFM Property in ADP Device Recognition', 'calbr_ver_user'); return false;">DFM Property in ADP Device Recognition</a>” in the <cite class="cite">Calibre Verification
User’s Manual</cite> for some coding considerations.</p>
</div>
<div class="section Subsection" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id16da92f9-09f9-4b07-9f84-06f1fa94b96b"><h2 class="title Subheading sectiontitle">Measurement
Function Behavior at Boundaries in DFM Property</h2><p class="p">The behavior of the <a class="xref fm:HeadingOnly" href="Contain_MeasurementFunctions_id13468c08.html#id13468c08-797c-4cca-8773-611a15322186__Contain_MeasurementFunctions_id13468c08.xml#id13468c08-797c-4cca-8773-611a15322186" title="Measurement functions calculate the value of a geometric attribute of layer data. Measurement functions return values expressed in user units. Although the COUNT function does not measure a geometric attribute, it is included with the measurement functions because it behaves similarly to the other functions in this class.">Measurement Functions</a> when layout
objects cross or abut a boundary is described in this section. The
measurement function behavior is influenced by the INSIDE OF, INTERSECTING,
OVERLAP, and ABUT ALSO keyword. </p>
<h2 class="title Subheading sectiontitle">Single Layer with INSIDE OF</h2><p class="p">For DFM Property using the INSIDE OF option, the boundary is
defined as the extent of the INSIDE OF coordinates.</p>
<div class="p"><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/DFM_Property/dfm_property_boundary_single.png" /></div><br /></div>
<h2 class="title Subheading sectiontitle">Multilayer with INTERSECTING</h2><p class="p">For multilayer (both primary and secondary layers) DFM Property
statements with the INTERSECTING keyword, the boundary is defined
as the extent of the primary layer.</p>
<div class="p"><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/DFM_Property/dfm_property_boundary_multi_intersect.png" /></div><br /></div>
<h2 class="title Subheading sectiontitle">Multilayer with OVERLAP</h2><p class="p">For multilayer (both primary and secondary layers) DFM Property
statements with the OVERLAP keyword, the boundary is defined as
the extent of the primary layer.</p>
<div class="p"><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/DFM_Property/dfm_property_boundary_multi_overlap.png" /></div><br /></div>
<h2 class="title Subheading sectiontitle">Multilayer with OVERLAP ABUT ALSO</h2><p class="p">For multilayer (both primary and secondary layers) DFM Property
statements with the OVERLAP ABUT ALSO keywords, the boundary is
defined as the extent of the primary layer.</p>
<div class="p"><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/DFM_Property/dfm_property_boundary_multi_abutalso.png" /></div><br /></div>
</div>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><p class="p">Many of the examples in the “<a class="xref Link" href="../../calbr_solns_pv_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Advanced DRC Solutions', 'calbr_solns_pv_user'); return false;">Advanced DRC Solutions</a>”
chapter of the <cite class="cite">Calibre Solutions for Physical Verification</cite> manual
use the DFM Property operation. </p>
<div class="section Subsection" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id3072f154-dc13-4863-b9f1-7c2adabb50eb"><h2 class="title Subheading sectiontitle">Example 1</h2><pre class="pre codeblock"><code>X = DFM PROPERTY A B C 
        [ARATIO = AREA(B)/AREA(C)] 
        [- = AREA(A)] &gt;= 100 </code></pre><p class="p">This command selects all polygons
on layer A whose area is no less than 100 in user units. For each
of these polygons, the computed property is the ratio of areas of
polygons on layers B and C inside the polygon on layer A. This property
is stored with every polygon on output layer X and the property
name is “ARATIO”. The Area property “-” is used in constraint checking,
but is not stored with the layer data. </p>
</div>
<div class="section Subsection" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__ide1af7899-4adc-47d1-9a28-ac349d3c84b6"><h2 class="title Subheading sectiontitle">Example 2</h2><p class="p">Consider the following similar lines
of code, executed hierarchically:</p>
<p class="p">Sample 1</p>
<pre class="pre codeblock"><code>X1 = DFM PROPERTY A B [AB = AREA(B)] 
X2 = DFM PROPERTY A C [AC = AREA(C)] </code></pre><p class="p">Sample 2</p>
<pre class="pre codeblock"><code>X1 = DFM PROPERTY A B C [AB = AREA(B)] 
X2 = DFM PROPERTY A B C [AC = AREA(C)] </code></pre><p class="p">Sample 3</p>
<pre class="pre codeblock"><code>Y1 = DFM PROPERTY A B C [AB = AREA(B)] [AC = AREA(C)] </code></pre><p class="p">Both Sample 1 and Sample 2 create
two new layers, X1 annotated with the property AB and X2 annotated
with the property AC. However, the commands in Sample 1 are executed
separately, while the commands in Sample 2 are executed concurrently.
Results are not necessarily the same. </p>
<p class="p">Assume layer C polygons are higher
in the design hierarchy than A or B. When performing the operations
separately, more promotion would occur when deriving X2 than when
deriving X1. When performing the operations concurrently, the system
promotes all the geometries needed for both operations, then calculates
the properties. Results could differ slightly between X1 derived
in Sample 1 and X1 derived in Sample 2, because the latter would
have received more promotion.</p>
<p class="p">Both Sample 2 and Sample 3 involve
the same hierarchical promotion. However Sample 2 creates two new
layers, X1 annotated with the property AB and X2 annotated with
the property AC, while Sample 3 creates one new layer, Y1, annotated
with two properties, AB and AC.</p>
</div>
<div class="section Subsection" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id8120bb01-3b7e-46d1-a347-61616ac97624"><h2 class="title Subheading sectiontitle">Example 3</h2><p class="p">The following example shows how
to annotate gate polygons of a MOS device with the number of contact
polygons in the source/drain areas of the device:</p>
<pre class="pre codeblock"><code>LAYER POLY 1
LAYER DIFF 2
LAYER CONT 3

sd = DIFF NOT POLY
gate = POLY AND DIFF
// NC is number of contacts in an sd region
sd1 = DFM PROPERTY sd CONT [ NC = COUNT(CONT) ] 
gate1 = DFM PROPERTY gate sd1 OVERLAP ABUT ALSO [ NC = PROPERTY(sd1, NC) ]</code></pre></div>
<div class="section Subsection" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idd8fd397d-6b47-4abd-9231-c7d6aa825f8e"><h2 class="title Subheading sectiontitle">Example 4</h2><p class="p">The following example selects all
polygons on MET1 for which the ARATIO property is either less than
1 or greater than 2.</p>
<pre class="pre codeblock"><code>DFM PROPERTY MET1 MET2 [ ARATIO = AREA(MET1)/AREA(MET2) ] ! &gt;= 1 &lt;= 2</code></pre></div>
<div class="section Subsection" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idaadb77a1-cf8f-417e-a3b0-fadc83c5abf6"><h2 class="title Subheading sectiontitle">Example 5</h2><p class="p">This example computes the spacing
between metal polygons both as edges (MET1_space) and as error clusters
(MET1_space1). It then uses the edge layer MET1_space to select
the entire edges of the metal wires that have spacing violations
anywhere along the wire (MET1_sides). These “side” edges of the
wires are annotated with DFM scores which are derived from measurements
of both error clusters and edges, the scores are then transferred
onto the metal polygons themselves.</p>
<pre class="pre codeblock"><code>MET1_space  = EXT [MET1] &lt;= 1.5 OPPOSITE // edge data
MET1_sides  = TOUCH EDGE MET1 MET1_space
MET1_space1 = EXT MET1_space &lt;= 1.5 OPPOSITE // error clusters
MET1_sides1 = DFM PROPERTY MET1_sides MET1_space1 
              OVERLAP ABUT ALSO MULTI 
              [ S = EC(MET1_space1)*LENGTH(MET1_sides) ]
MET1_score  = DFM PROPERTY MET1 MET1_sides1 
              OVERLAP ABUT ALSO MULTI 
              [ S = PROPERTY( MET1_sides1, S ) ]</code></pre></div>
<div class="section Subsection" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__iddd344db8-9e18-4e12-afba-24ee56be50de"><h2 class="title Subheading sectiontitle">Example 6</h2><p class="p">In the following example, DFM Property
is used to split a VIA layer into multiple layers. Assume VIA shapes
are oversized into enclosure polygons and some of the enclosure
polygons merge together and enclose more than one VIA polygon. The
rules divide the VIA layer into component layers so that each component
layer can be oversized separately with no merging of the output
enclosure polygons. This example assumes that at most two enclosure
polygons can merge together after sizing; a more robust implementation
can be done using Calibre YieldServer where the number of split
layers can depend on the layout. </p>
<p class="p">The example makes use of the default
behavior for handling the case when an object on the secondary layer
can be clustered with more than one primary layer object. In this
example the VIA layer is the primary layer and the enclosure layer
is the secondary layer. In cases where the enclosure polygon overlaps
more than one VIA shape, the enclosure polygon is clustered with only
one of the VIA shapes. The COUNT() function is used to select this
VIA for output. The NOMULTI keyword is used to suppress the ambiguous
clustering warning for the default behavior, since this is the desired
behavior.</p>
<pre class="pre codeblock"><code>// Size up the vias to create enclosure polygons. 
// Enclosure polygons from nearby vias may merge.
all_enc = SIZE VIA BY 1.5 INSIDE OF MET1 STEP 0.15</code></pre><pre class="pre codeblock"><code>// Split via layer so that oversized vias do not overlap and merge. 
// Use DFM PROPERTY with NOMULTI to arbitrarily select one via from a
// group of vias overlapped by the same enclosure polygon.
via_groupA = DFM PROPERTY VIA all_enc OVERLAP NOMULTI 
             [- = COUNT(all_enc)] &gt; 0
via_other = VIA NOT via_groupA
via_groupB = DFM PROPERTY via_other all_enc OVERLAP NOMULTI 
             [- = COUNT(all_enc)] &gt; 0

// Size up the component layers to generate separate enclosure polygons 
groupA_enc = SIZE via_groupA BY 1.5 INSIDE OF MET1 STEP 0.15
groupB_enc = SIZE via_groupB BY 1.5 INSIDE OF MET1 STEP 0.15</code></pre></div>
<div class="section Subsection" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id3b8a8a1b-dd70-47b0-828a-5ef48c0ecbb4"><h2 class="title Subheading sectiontitle">Example 7</h2><p class="p">The following code can be used to
measure the perimeter in the top-level X-direction regardless of
cell rotation:</p>
<pre class="pre codeblock"><code>perim_x_top = DFM PROPERTY layer1 GLOBALXY OVERLAP MULTI
              [perim_x_g = PERIMETERX(layer1)]</code></pre><p class="p">In the following figure, there are two placements of cell A,
where the lower placement is rotated by 270 degrees, and one placement
of cell B which is rotated by 270 degrees. Each cell has one polygon
with a length of 2 in the X dimension when measured in the local
coordinate system. The left side of the figure shows the result
of the preceding PERIMETERX measurement without the GLOBALXY keyword;
the right side shows the measurement with GLOBALXY. The reporting
cell is given in parentheses. Without GLOBALXY the PERIMETERX measurement
is the same in both cell A placements and is reported in cell A.
With the GLOBALXY keyword the PERIMETERX measurement in the rotated
cell A is different because the top-level axes orientation is used.
The two results for cell A are reported in the top cell when GLOBALXY
is used. The result for cellB is reported in cell B in both cases
and the value of PERIMETERX depends on the use of GLOBALXY. </p>
<div class="fig fignone" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id0c2c8a9f-fcfe-4f59-8692-f63b15f6f3d5"><span class="figcap"><span class="fig--title-label">Figure 11. </span>DFM Property GLOBALXY
Example</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/DFMProperty_GLOBALXY_ex.png" /></div><br /></div>
</div>
<div class="section Subsection" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idbc6ea778-77c9-44d4-9cc6-f161641ea67d"><h2 class="title Subheading sectiontitle">Example
8</h2><p class="p">This example demonstrates the effect of GLOBALXY and promotion
on the measurements of ECX, ECY, and ECMIN. The design has two placements
of cellA, one of which is rotated by 270 degrees, and one placement
of cellB which is rotated by 270 degrees. Each cell has one polygon
with x,y dimensions of 2x1 in local cell space. </p>
<p class="p">The following code is used:</p>
<pre class="pre codeblock"><code>int_layer = INTERNAL layer1 &lt; 1.5

ecmin_gxy_layer = DFM PROPERTY int_layer GLOBALXY
                  [ec = EC(int_layer )] &gt;= 2
                  [g_ecy = ECY(int_layer )] 
                  [g_ecx = ECX(int_layer )]
                  [g_ecmin = ECMIN(int_layer )]</code></pre><p class="p">The Internal operation is used to derive an error layer int_layer.
The DFM Property operation measures EC(int_layer) and outputs objects
with EC greater than or equal to 2. Properties for EC, ECX, ECY
and ECMIN are attached to the output shapes. The following figure
shows the property measurements for ECX, ECY, and ECMIN with and
without the GLOBALXY keyword. </p>
<div class="fig fignone" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idbc34b6e3-ae58-4279-935b-432741bd9bcf"><span class="figcap"><span class="fig--title-label">Figure 12. </span>DFM Property
with GLOBALXY, ECX, ECY, and ECMIN</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/DFMProperty_GLOBALXY_ecmin.png" /></div><br /></div>
<p class="p">The results without GLOBALXY are explained as follows:</p>
<ul class="ul"><li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id755560a2-6180-4cc3-a2b5-a65eb0c6eb21"><p class="p">The result
for cellA is reported in cellA as one hierarchical result. </p>
<p class="p">ECX = 2, ECY = 0, ECMIN = 0 in cellA </p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idc76583dc-c87e-41c7-bf60-f53c119988b7"><p class="p">The result
for cellB is reported in cellB </p>
<p class="p">ECX = 2, ECY = 0, ECMIN = -1 in cellB </p>
</li>
</ul>
<p class="p">The results with GLOBALXY are explained as follows:</p>
<ul class="ul"><li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id1dea7c3f-01bb-4544-b2b5-a23512de7ec1"><p class="p">The two
results for cellA are reported in the topcell due to promotion. </p>
<ul class="ul"><li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id0b54cdac-71e3-4ece-8a0f-b62cdd4e5bcc"><p class="p">For the
topmost cellA, the X- and Y-axes directions are the same as for
the topcell so the ECX and ECY measurements are the same as without
GLOBALXY. The ECMIN value is measured in topcell space due to promotion. </p>
<p class="p">ECX = 2, ECY = 0, ECMIN = 0.5 in topcell</p>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id03f5f1ac-c85e-49b4-a2ba-21b2de625d86"><p class="p">For the lower
left cellA, which rotated by 270 degrees, the X- and Y-axes directions in
the topcell are now used for the ECX and ECY measurements, resulting
in different values. The ECMIN value is measured in topcell space
due to promotion. </p>
<p class="p">ECX = 0, ECY = 2, ECMIN = 2 in topcell</p>
<p class="p">The ECMIN endpoint is now identified with a different endpoint
due to promotion to the topcell. The ECMIN value is always the smaller
of the two coordinate endpoint values. </p>
</li>
</ul>
</li>
<li class="li" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id9d4eb1c3-ef60-40f4-b64b-0759b2de678b"><p class="p">The result
for cellB is reported in cellB; promotion to the topcell is not
necessary. The X- and Y-axes directions in the topcell are now used
for the ECX and ECY measurements, resulting in different values.
The ECMIN coordinate value is measured in local cell space. </p>
<p class="p">ECX = 0, ECY = 2, ECMIN = -1 in cellB </p>
</li>
</ul>
</div>
<div class="section Subsection" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id50aa1f55-6cfd-4887-beaf-0f7ccfe19ff3"><h2 class="title Subheading sectiontitle">Example
9</h2><p class="p">This example uses the DBU keyword in order to determine if lengths
are equal. The DBU keyword causes all measurements to be performed
and returned in database units, rather than user units. Without
the DBU keyword, the comparison may not work as intended due to rounding
with floating point arithmetic. The rule check and layout are shown. </p>
<pre class="pre codeblock"><code>LAYER L0 0
LAYER L1 1

edge_pairs = EXT L0 L1 OPPOSITE &lt; 1.7
L0_edge = LENGTH L0 &gt; 2.0 

// find edge_pairs from EXT operation that are clustered with LO_edge, 
// use EC to sum the length of edge_pairs, 
// should be equal to LO_edge length 
length_equal {
   match_DBU = DFM PROPERTY L0_edge edge_pairs OVERLAP MULTI DBU
            [ eq = (LENGTH(L0_edge) == EC(edge_pairs) ) ?  1 : 0 ] == 1
} </code></pre><div class="fig fignone" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idea50c6b8-6b2b-4c26-b84e-1628280b0497"><span class="figcap"><span class="fig--title-label">Figure 13. </span>DFM Property
DBU Example</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/DFMProp_DBU_ex.png" /></div><br /></div>
<p class="p">Without the DBU keyword, rounding effects in the floating point
calculation to sum the lengths of the edge_pairs segments could
cause the equality test to fail. </p>
<p class="p">The following operation demonstrates how to compare the difference
in lengths to a small value when not using the DBU keyword:</p>
<pre class="pre codeblock"><code>match_diff = DFM PROPERTY L0_edge edge_pairs OVERLAP MULTI  
   [ eq = (ABS((LENGTH(L0_edge) - EC(edge_pairs))) &lt; 0.001) ? 1 : 0 ] == 1</code></pre></div>
<div class="section Subsection" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__id62748f88-19d8-4803-991d-c9c0aaf26079"><h2 class="title Subheading sectiontitle">Example
10</h2><p class="p">This example uses the PRESERVE keyword to copy all properties
from the primary layer to the output layer. Area and perimeter properties
are attached to the shapes on layer1. DFM Property is used to select
layer1 shapes that overlap or abut shapes on a secondary layer (layer2
or layer3). The PRESERVE keyword causes all properties on layer1
to be copied to the output layer. </p>
<pre class="pre codeblock"><code>l1_props = DFM PROPERTY layer1 
               [area1 = AREA(layer1)] [perim1 = PERIM(layer1)]
l1_w_l2 = DFM PROPERTY l1_props layer2 OVERLAP MULTI ABUT ALSO PRESERVE
               [ - = COUNT(layer2) ] &gt; 0
l1_w_l3 = DFM PROPERTY l1_props layer3 OVERLAP MULTI ABUT ALSO PRESERVE
               [ - = COUNT(layer3) ] &gt; 0</code></pre><p class="p">The PRESERVE keyword makes it possible define a DMACRO that copies
properties from one layer to another. The preceding example can
be done as follows:</p>
<pre class="pre codeblock"><code>DMACRO LAY_INTERACT prim sec out_lay {
   out_lay = DFM PROPERTY prim sec OVERLAP MULTI ABUT ALSO PRESERVE
                  [ - = COUNT(sec) ] &gt; 0
}

CMACRO LAY_INTERACT l1_props layer2 l1_w_l2
CMACRO LAY_INTERACT l1_props layer3 l1_w_l3</code></pre></div>
<div class="section Subsection" id="idf1f176c5-0d5a-4406-95d0-b54438157ae8__idbf032a2c-3757-437d-b6cf-87d8e35b03b9"><h2 class="title Subheading sectiontitle">Example
11</h2><p class="p">This example uses the :EXTENT layer derivation to compute the
area of the extent of an input polygon. </p>
<pre class="pre codeblock"><code>extent_area_prop = DFM PROPERTY MET1 
                  [ extent_area = AREA(MET1:EXTENT)]</code></pre><p class="p">The following code shows a DMACRO definition for the preceding
DFM Property operation. The :EXTENT notation cannot be used within
the DMACRO, but must be passed in as an argument. This is true for
all the layer derivation indicators: :EDGE, :EXTENT, and :EXTENT_EDGE. </p>
<pre class="pre codeblock"><code>// The argument input_poly is layer
// The argument input_poly_extent is layer:EXTENT
DMACRO EXTENT_AREA <span class="ph CodeHighlight green">input_poly</span> <span class="ph CodeHighlight orange">input_poly_extent</span> output_layer {
output_layer = DFM PROPERTY <span class="ph CodeHighlight green">input_poly</span> 
                  [ extent_area = AREA(<span class="ph CodeHighlight orange">input_poly_extent</span>)]
}
CMACRO EXTENT_AREA <span class="ph CodeHighlight green">MET1</span> <span class="ph CodeHighlight orange">MET1:EXTENT</span> bbox_extent_prop</code></pre><p class="p">The following DMACRO incorrectly uses the :EXTENT notation within
the DMACRO. The error “Error DFM5 on line 52 of rules - layer parameter
in expression is not an input layer to the operation: input_poly:EXTENT”
is issued. </p>
<pre class="pre codeblock"><code>// wrong way
DMACRO ERROR_EXTENT_AREA <span class="ph CodeHighlight red">input_poly</span> output_layer {
output_layer = DFM PROPERTY input_poly 
                  [ extent_area = AREA(<span class="ph CodeHighlight red">input_poly</span>:EXTENT)]
}
CMACRO ERROR_EXTENT_AREA <span class="ph CodeHighlight red">MET1</span> bbox_extent_error</code></pre></div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_DfmCommands_ide62291e8.html" title="The commands in this section begin with “DFM.”">DFM … Commands</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "svrf_ur"
                DocTitle = "Standard Verification Rule Format (SVRF) Manual"
                PageTitle = "DFM Property"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_DfmProperty_idf1f176c5.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Standard Verification Rule Format (SVRF) Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>