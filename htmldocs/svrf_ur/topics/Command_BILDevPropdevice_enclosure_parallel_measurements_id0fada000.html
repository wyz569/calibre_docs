<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="device::enclosure_parallel_measurements" />
<meta name="abstract" content="Returns a layer containing a DFM property vector of numbers that correspond to edge enclosure measurements parallel to device seed shape edges. The output layer is an edge layer with DFM vector properties used to derive an auxiliary layer argument in a Device statement. This function may only be called in the context of a tvf::SETLAYER command." />
<meta name="description" content="Returns a layer containing a DFM property vector of numbers that correspond to edge enclosure measurements parallel to device seed shape edges. The output layer is an edge layer with DFM vector properties used to derive an auxiliary layer argument in a Device statement. This function may only be called in the context of a tvf::SETLAYER command." />
<meta name="prodname" content="Standard Verification Rule Format (SVRF) Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-26" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="HighlightChanges" content="yes" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="svrf_ur" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="3/25/21" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Standard Verification Rule Format (SVRF) Manual" />
<meta name="CSHelp" content="No" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P10089,product.id.P10099,product.id.P10119,product.id.P10101,product.id.P11427,product.id.P10115,product.id.P11426,product.id.P10122,product.id.P11493" />
<meta name="ConditionFiltering" content="XML" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id0fada000-102c-11e7-b101-005056b32f49" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>device::enclosure_parallel_measurements</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="device::enclosure_parallel_measurements" />
<meta name="attributes" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P10089,product.id.P10099,product.id.P10119,product.id.P10101,product.id.P11427,product.id.P10115,product.id.P11426,product.id.P10122,product.id.P11493" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="id0fada000-102c-11e7-b101-005056b32f49">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">device::enclosure_parallel_measurements</h1>
<div class="body refbody CommandRefBody"><div class="abstract CommandRefAbstract"><p class="p ContextMGC">Device TVF
layer generation function. Used only in a compile-time TVF rule
file.</p>
<p class="shortdesc">Returns a layer containing a
DFM property vector of numbers that correspond to edge enclosure measurements
parallel to device seed shape edges. The output layer is an edge
layer with DFM vector properties used to derive an auxiliary layer
argument in a Device statement. This function may only be called
in the context of a tvf::SETLAYER command.</p>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName Required">device::enclosure_parallel_measurements</span> <span class="keyword ParameterName Required">‑base</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> <span class="keyword ParameterName Required">‑measurement</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> <span class="keyword ParameterName Required">‑orient</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> [<span class="keyword ParameterName Optional">‑max_par</span> <span class="keyword ParameterName OptionalReplaceable">value</span>]  [<span class="keyword ParameterName Optional">‑help</span> | ?]</p>
</div>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="id0fada000-102c-11e7-b101-005056b32f49__id0fbb5592-102c-11e7-8150-005056b32f49"><span class="keyword ParameterName Required">-base</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument set that
defines the layer from which to measure the enclosure. Usually this
is the gate layer of a MOS transistor. Base shapes must be rectangles
with edges parallel to the database axes.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id0fada000-102c-11e7-b101-005056b32f49__id0fbb8ba2-102c-11e7-a985-005056b32f49"><span class="keyword ParameterName Required">-measurement</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument set that
defines the layer that encloses the <span class="keyword ParameterName Required">‑base</span> layer.
Usually the <span class="keyword ParameterName Required">‑measurement</span> layer
is a well layer.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id0fada000-102c-11e7-b101-005056b32f49__id0fbbb65e-102c-11e7-ad7a-005056b32f49"><span class="keyword ParameterName Required">-orient</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument that defines
an orientation layer. Usually this is a source/drain layer.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id0fada000-102c-11e7-b101-005056b32f49__id0fbc0b22-102c-11e7-b1d1-005056b32f49">-max_par <span class="keyword ParameterName OptionalReplaceable">value</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set that
defines the maximum parallel-oriented search distance in user units
from a <span class="keyword ParameterName Required">-base</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> edge
to an enclosing <span class="keyword ParameterName Required">-measurement</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> edge.
The <span class="keyword ParameterName OptionalReplaceable">value</span> must evaluate
to a number. This option overrides any global specification of this
search distance. The default <span class="keyword ParameterName OptionalReplaceable">value</span> is
-1.0, which indicates the option is not set locally.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id0fada000-102c-11e7-b101-005056b32f49__id0fbc6900-102c-11e7-9dd8-005056b32f49">-help | ? </dt>
<dd class="dd ArgumentDescription"><p class="p">Prints the usage message for
this function in a Tcl shell.</p>
</dd>
</dl>
</div>
</div>
<div class="section ReturnedValues"><h2 class="title Subheading sectiontitle">Return Values</h2><p class="p">Layer.</p>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><div class="note note"><span class="notetitle">Note:</span> <p class="p">The device::select_* functions are preferable to this one
as they offer more flexibility in assigning DFM properties in a
consistent way to various sides of a device while also giving better
performance.</p>
</div>
<p class="p">The device<span class="ph fmvar:double_colon">::</span>enclosure_parallel_measurements function
is used in conjunction with the <a class="xref fm:HeadingOnly" href="General_TvfFunctionalInterfaceDevicePropertyCalculation_idea8bad97.html#idea8bad97-46ea-48f8-aec1-7ee829d325cb__General_TvfFunctionalInterfaceDevicePropertyCalculation_idea8bad97.xml#idea8bad97-46ea-48f8-aec1-7ee829d325cb" title="The TVF functional interface calculates advanced device properties. The Device property computation and annotation languages call Tcl procedures defined in TVF Function statements in the SVRF rule file in order to calculate the properties.">TVF Functional Interface for Device Property Calculation</a> and must
be used in a TVF Function block. This function has performance advantages
over other device enclosure functions that were introduced historically,
especially for well layers derived from the <a class="xref fm:HeadingOnly" href="Command_Extent_id8383f43f.html#id8383f43f-ecb8-471b-97a6-04ed1887acb2__Command_Extent_id8383f43f.xml#id8383f43f-ecb8-471b-97a6-04ed1887acb2" title="Constructs a derived polygon layer that represents the least enclosing rectangle of the database.">Extent</a> operation and having a large number
of vertices.</p>
<p class="p">This function takes similar measurements
to <a class="xref fm:HeadingOnly" href="Command_BILDevPropEnclosureParallel_id8d473446.html#id8d473446-1261-4c6c-be4e-07417706e744__Command_BILDevPropEnclosureParallel_id8d473446.xml#id8d473446-1261-4c6c-be4e-07417706e744" title="Returns a vector of numbers that correspond to trapezoidal dimensions of average enclosure distances and widths.">enclosure_parallel</a>. The device::enclosure_parallel_measurements
function ensures properties are assigned consistently to the associated
sides of the device when coordinate transformations are applied
throughout the hierarchy. </p>
<p class="p">The device::enclosure_parallel_measurements
function is a part of the CalibreDFM_DEVICE package and requires
a Calibre Advanced Device Properties (ADP) product license. See “<a class="xref fm:HeadingAndPage" href="Concept_ComparisonEnclosureCalculationFunctionsMethods_id6b1c8701.html#id6b1c8701-fe2b-4f15-9c4e-7b045e790d65__Concept_ComparisonEnclosureCalculationFunctionsMethods_id6b1c8701.xml#id6b1c8701-fe2b-4f15-9c4e-7b045e790d65" title="The enclosure functions, the DFM Property data retrieval functions, and the Device TVF functions are useful for MOS device well proximity computation and similar applications. They are primarily used to extract physical parameters for BSIM4 device models.">Comparison of Enclosure Calculation Functions and Methods</a>” for information about
other enclosure functions. </p>
<p class="p">The following figure shows the
parameters with their associated layers.</p>
<div class="fig fignone" id="id0fada000-102c-11e7-b101-005056b32f49__id0fbc91dc-102c-11e7-875f-005056b32f49"><span class="figcap"><span class="fig--title-label">Figure 1. </span>device::enclosure_parallel_measurements
Parameters</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/builtin_langs18a.png" /></div><br /></div>
<p class="p">In a typical application of device<span class="ph fmvar:double_colon">::</span>enclosure_parallel_measurements,
the <span class="keyword ParameterName Required">-base</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> contains MOS
gates, the <span class="keyword ParameterName Required">-measurement</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> is
a MOS well layer, and the <span class="keyword ParameterName Required">-orient</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> is
a MOS source/drain layer.</p>
<p class="p">The -max_par option may be specified
in the function. Otherwise, this parameter must be specified in
the global scope of the rules. To set the search distances (in user
units) in the global scope, specify the following variable using
your own search distance:</p>
<pre class="pre codeblock"><code>set device::max_par &lt;value&gt;</code></pre><p class="p">This setting applies to all instances
of device<span class="ph fmvar:double_colon">::</span>enclosure_parallel_measurements
unless overridden by ‑max_par. The distance parameter must evaluate
to a number. Global variables are generally easier to maintain than
local specifications in each instance of the function.</p>
<p class="p">The search distance must be specified
explicitly in the rule file or a compile-time error results. There
are no default values contained in the TVF package. You may set
the search distance to 0 if the process allows it.</p>
<p class="p">You may not use the <a class="xref fm:HeadingOnly" href="Command_Variable_idef5949b0.html#idef5949b0-b789-4a00-9cce-cf32826c65c9__Command_Variable_idef5949b0.xml#idef5949b0-b789-4a00-9cce-cf32826c65c9" title="Defines the value of a variable in the rule file.">Variable</a> statement to set the Tcl program’s
search distance variable, either globally or locally. For example,
this is not allowed:</p>
<pre class="pre codeblock"><code>VARIABLE MAX_PAR 3 ... set device::max_par MAX_PAR; 
# bad. cannot set this value from a Variable. 

tvf::SETLAYER prop = device::enclosure_parallel_measurements ...  \
-max_par MAX_PAR;</code></pre><p class="p">This is allowed:</p>
<pre class="pre codeblock"><code>set device::max_par 3; # in global scope
tvf::SETLAYER prop = device::enclosure_parallel_measurements ... \
-max_par 3</code></pre><p class="p">You may use valid Tcl expressions
to set search distance variables. For example:</p>
<pre class="pre codeblock"><code>set myvar 12 
tvf::SETLAYER prop = device::enclosure_parallel_measurements ... \
  -max_par [ expr { $myvar * 2 } ]</code></pre><p class="p">The device::enclosure_parallel_measurements
function can be used with the most general predecessor of the actual
device layers. For example, if you derive your gate layer this way:</p>
<pre class="pre codeblock"><code>gate = poly and diff</code></pre><p class="p">and gate is the predecessor of
all gate layers in the design, then this layer can be used for device<span class="ph fmvar:double_colon">::</span>enclosure_parallel_measurements
function as the <span class="keyword ParameterName Required">-base</span> layer.
This can simplify the rule file.</p>
<p class="p">The device<span class="ph fmvar:double_colon">::</span>enclosure_parallel_measurements output
layer is an edge layer with DFM vector property annotations. These
properties are available in the Device property computation program
through the DFM_* vector functions (“<a class="xref fm:HeadingAndPage" href="General_DfmPropertyDataRetrievalFunctions_idc81af6e3.html#idc81af6e3-4181-4b46-aee8-8d3047f821c6__General_DfmPropertyDataRetrievalFunctions_idc81af6e3.xml#idc81af6e3-4181-4b46-aee8-8d3047f821c6" title="The Device Layer ANNOTATE operation and the Device statement’s device_annotation_program support data access functions that are used in conjunction with the DFM Property operation to retrieve values for use within device property computations. This capability is part of the TVF functional interface for device property computation. For vector functions, there are corresponding functions for converting DFM vector properties into Device enclosure function measurement format.">DFM Property Data Retrieval Functions</a>”) and can be used by your Tcl
procs to compute an effective property to netlist. </p>
<p class="p">Edges on the device<span class="ph fmvar:double_colon">::</span>enclosure_parallel_measurements output
layer include DFM vector objects containing coordinate-value/enclosure-measurement
pairs for the ends of a base layer polygon:</p>
<ul class="ul"><li class="li" id="id0fada000-102c-11e7-b101-005056b32f49__id0fbce63c-102c-11e7-95f6-005056b32f49"><p class="p"><span class="ph FontProperty HeadingLabel">PAR</span> —
Coordinate values taken from the gate edges <span class="ph FontProperty emphasis">not coincident</span> with
a source/drain shape together with enclosure measurements taken
perpendicular to those edges.</p>
</li>
</ul>
<p class="p">The enclosure vectors are of
arbitrary length. There is one segment for each jog in either the base
or the measurement polygons. Each member of the enclosure vector
contains two values:</p>
<ul class="ul"><li class="li" id="id0fada000-102c-11e7-b101-005056b32f49__id0fbd7052-102c-11e7-9333-005056b32f49"><p class="p">First coordinate of the segment</p>
</li>
<li class="li" id="id0fada000-102c-11e7-b101-005056b32f49__id0fbd9f1e-102c-11e7-90b3-005056b32f49"><p class="p">Enclosure distance for the
segment</p>
</li>
</ul>
<p class="p">The final member of the enclosure
vector has this form: final coordinate of segment, 0.</p>
<p class="p">The following figure shows an
example of the measurements. </p>
<div class="fig fignone" id="id0fada000-102c-11e7-b101-005056b32f49__id0fbdcc14-102c-11e7-86a2-005056b32f49"><span class="figcap"><span class="fig--title-label">Figure 2. </span>device::enclosure_parallel_measurements
Vector Values</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/builtin_langs19a.png" /></div><br /></div>
<p class="p">Given the preceding diagram,
the vectors would have these forms.</p>
<pre class="pre codeblock"><code>PAR &lt;x1,a&gt; &lt;x2,b&gt; &lt;x3,0&gt; 
PAR &lt;x1,c&gt; &lt;x2,d&gt; &lt;x3,0&gt;</code></pre><p class="p">Vector elements are reported
in user units. You must use the <a class="xref fm:HeadingOnly" href="Command_BILDevPropUnitLength_id74a23eca.html#id74a23eca-0d5c-4e06-b503-d854fa8e4213__Command_BILDevPropUnitLength_id74a23eca.xml#id74a23eca-0d5c-4e06-b503-d854fa8e4213" title="Returns the value of the Unit Length statement.">unit_length</a> function to convert to meters
in order to get appropriately-valued device properties into the
extracted netlist. This is shown in the example later in this section.</p>
<p class="p">The vector properties from the output edge layer are collected
onto a polygon layer using DFM Property. This polygon layer is typically
derived from the gate layer. Other DFM properties can be calculated
for the devices and collected onto this DFM Property polygon layer
as needed. The polygon layer is then used as an auxiliary layer
for a Device operation. Tcl procs are used to process the properties
for the Device property computations.</p>
<p class="p">To assist in obtaining the desired
information from the enclosure vectors, the CalibreLVS_DEVICE_DFM
TVF package in the software tree includes some helper functions for
processing DFM vector objects. The measurement operations included
in this package have been optimized for performance. This package
must be referenced in your TVF Function block. </p>
<p class="p">A useful function from this package
is <a class="xref fm:HeadingOnly" href="Command_BILDfmDeviceDfmVecMeasurements_id7ffc76fb.html#id7ffc76fb-35f3-4893-92ce-2d56d84eec1b__Command_BILDfmDeviceDfmVecMeasurements_id7ffc76fb.xml#id7ffc76fb-35f3-4893-92ce-2d56d84eec1b" title="Converts DFM-style rectilinear measurement vectors into Device enclosure-vector-style width and length measurements in database units.">device::dfm_vec_measurements</a>. This function converts the DFM
enclosure vectors into Tcl lists of {width value} segments, where
width is the length of a segment and value is the enclosure distance.
From the preceding set of vectors, using device<span class="ph fmvar:double_colon">::</span>dfm_vec_measurements produces the
desired {width value} lists: {|x2 - x1| a}, {|x3 ‑ x2| b}, {|x2
- x1| c}, and {|x3 ‑ x2| d}.</p>
<p class="p">The product of width × value
gives an enclosure area for one segment of the gate edge. This is used
in the example later in this section.</p>
<p class="p">The CalibreDFM_DEVICE package
in the software tree provides two variables to maximize the optimization
for your layout style:</p>
<ul class="ul"><li class="li" id="id0fada000-102c-11e7-b101-005056b32f49__id0fbdfa0e-102c-11e7-8b2b-005056b32f49"><p class="p"><span class="ph FontProperty HeadingLabel">device<span class="ph fmvar:double_colon">::</span>avg_sp3</span> —
Average width of a box drawn around three measurement polygons. Default
is 0.5 user units.</p>
</li>
<li class="li" id="id0fada000-102c-11e7-b101-005056b32f49__id0fbe297a-102c-11e7-a811-005056b32f49"><p class="p"><span class="ph FontProperty HeadingLabel">device<span class="ph fmvar:double_colon">::</span>avg_enc</span> —
Average measurement polygon to base polygon enclosure distance. Default
is 1.5 user units.</p>
</li>
</ul>
<p class="p">The values need not be exact.
It is usually sufficient to use one set of values for each process technology.
There may be performance penalties if the settings are either too
large or too small for the technology. The default settings are
targeted for 45nm SOC designs.</p>
<p class="p">Any errors in specifying the
function are reported at compilation time.</p>
</div>
<div class="section Examples" id="id0fada000-102c-11e7-b101-005056b32f49__id0fbe56fc-102c-11e7-b080-005056b32f49"><h2 class="title Subheading sectiontitle">Examples</h2><p class="p">This example uses the pushdown separate
properties (PDSP) flow. This flow uses a Device statement annotation
program block and the LVS Push Devices SEPARATE PROPERTIES YES statement.</p>
<pre class="pre codeblock leveled"><code>#! tvf
package require CalibreDFM_DEVICE 
namespace import tvf::// tvf::setlayer tvf::outlayer tvf::verbatim \
tvf::rulecheck

verbatim {
// required for PDSP flow
MASK SVDB DIRECTORY svdb QUERY CCI NOPINLOC
LVS PUSH DEVICES SEPARATE PROPERTIES YES}
}
// Set the global maximum parallel and perpendicular enclosure distances.
set device::max_par 5.0
set device::max_per 5.0

// Define the enclosure property layers.
setlayer ngate_prop.par = [ \
  device::enclosure_parallel_measurements -base ngate \
  -measurement pwell -orient nsd \
]

setlayer ngate_prop.per = [ \
  <a class="xref fm:HeadingOnly" href="Command_BILDevPropdeviceenclosure_perpendicular_measurements_idc6a6dc3e.html#idc6a6dc3e-13fd-11e7-8670-005056b32f49__Command_BILDevPropdeviceenclosure_perpendicular_measurements_idc6a6dc3e.xml#idc6a6dc3e-13fd-11e7-8670-005056b32f49" title="Returns a layer containing a DFM property vector of numbers that correspond to edge enclosure measurements perpendicular to device seed shape edges. The output layer is an edge layer with DFM vector properties used to derive an auxiliary layer argument in a Device statement. This function may only be called in the context of a tvf::SETLAYER command.">device::enclosure_perpendicular_measurements</a> -base ngate \
  -measurement pwell -orient nsd \
]

setlayer pgate_prop.par = [ \
  device::enclosure_parallel_measurements -base pgate \
  -measurement nwell -orient psd \
]

setlayer pgate_prop.per = [ \
  device::enclosure_perpendicular_measurements -base pgate \
  -measurement nwell -orient psd \
]</code></pre><pre class="pre codeblock leveled"><code>verbatim {
// Transfer enclosure vector properties onto gate layers.
ngate_prop = DFM PROPERTY ngate ngate_prop.par ngate_prop.per 
             OVERLAP ABUT ALSO MULTI
             [ PAR_1 = VPROPERTY( ngate_prop.par, PAR, 1 ) ]
             [ PAR_2 = VPROPERTY( ngate_prop.par, PAR, 2 ) ]
             [ PER_1 = VPROPERTY( ngate_prop.per, PER, 1 ) ]
             [ PER_2 = VPROPERTY( ngate_prop.per, PER, 2 ) ]

pgate_prop = DFM PROPERTY pgate pgate_prop.par pgate_prop.per 
             OVERLAP ABUT ALSO MULTI
             [ PAR_1 = VPROPERTY( pgate_prop.par, PAR, 1 ) ]
             [ PAR_2 = VPROPERTY( pgate_prop.par, PAR, 2 ) ]
             [ PER_1 = VPROPERTY( pgate_prop.per, PER, 1 ) ]
             [ PER_2 = VPROPERTY( pgate_prop.per, PER, 2 ) ]</code></pre><pre class="pre codeblock"><code>// This macro defines four enclosure measurement properties 
// for each device:  parA, parB, perA, perB. These are stored with a 
// DFM property layer, which is passed in as the prop_layer parameter.
DMACRO mos_prop prop_layer gate_layer sd_layer {
  [
    PROPERTY W, L
    W = perim_co(gate_layer,sd_layer)/2
    L = area(gate_layer)/W
  ]
  &lt;prop_layer&gt;
  [
    PROPERTY parA, parB, perA, perB
 // get the four vectors from the vector property layers.
    par_dfm_A = dfm_vector_value(prop_layer,"PAR_1")
    par_dfm_B = dfm_vec_val(prop_layer,"PAR_2")
    per_dfm_A = dfm_vec_val(prop_layer,"PER_1")
    per_dfm_B = dfm_vec_val(prop_layer,"PER_2")
// calculate the enclosure values on the four sides
    parA = tvf_num_fun::device_func::calc_eff_par(par_dfm_A, W, L, \
           unit_length())
    parB = tvf_num_fun::device_func::calc_eff_par(par_dfm_B, W, L, \
           unit_length())
    perA = tvf_num_fun::device_func::calc_eff_per(per_dfm_A, W, L, \
           unit_length())
    perB = tvf_num_fun::device_func::calc_eff_per(per_dfm_B, W, L, \
           unit_length())
  ] 
}</code></pre><pre class="pre codeblock"><code>DEVICE MN ngate ngate(G) sd(S) sd(D) pwell(B) 
  CMACRO mos_prop ngate_prop ngate sd
DEVICE MP pgate pgate(G) sd(S) sd(D) nwell(B) 
  CMACRO mos_prop pgate_prop pgate sd

TRACE PROPERTY MN l l 0
TRACE PROPERTY MN w w 0
TRACE PROPERTY MP l l 0
TRACE PROPERTY MP w w 0</code></pre><pre class="pre codeblock"><code>TVF FUNCTION device_func [/*
  package require CalibreLVS_DEVICE_DFM

  proc calc_eff_per { enc_prop W L unit_length } {
    set scale_factor [ $unit_length ]
    set enc_list [ device::scaled_dfm_vec_measurements $enc_prop \
     $scale_factor ]
    set accum 0.0
    set half_L [ expr { 0.5 * [$L] } ]
    foreach segment $enc_list {
      foreach { width length } $segment {
        set seg [ expr { ($width / ( $length + $half_L )) } ]
        set accum [ expr { $accum + $seg } ]
      }
    }
    return [ expr { ( [$W] / $accum ) - $half_L } ]
  }</code></pre><pre class="pre codeblock leveled"><code>   proc calc_eff_par { enc_prop W L unit_length } {
    set scale_factor [ $unit_length ]
    set enc_list [ device::scaled_dfm_vec_measurements $enc_prop \
      $scale_factor ]
    set accum 0.0
    set half_W [ expr { 0.5 * [$W] } ]
    foreach segment $enc_list {
      foreach { width length } $segment {
        set seg [ expr { ($width / ( $length + $half_W )) } ]
        set accum [ expr { $accum + $seg } ]
      }
    }
    return [ expr { $half_W - ( [$L] / $accum ) } ]
  }
}
*/]</code></pre><p class="p">When you run netlist extraction, the devices
are written without annotation properties. To get a netlist with
the annotation properties, you run Query Server CCI on the output
using commands like this in a script:</p>
<pre class="pre codeblock leveled"><code>dfm::set_layout_netlist_options -separated_properties YES
dfm::set_layout_netlist_options -pin_locations YES
dfm::set_layout_netlist_options -trivial_pins YES 
dfm::set_layout_netlist_options -empty_cells YES 
dfm::set_layout_netlist_options -names NONE 
dfm::set_layout_netlist_options -primitive_device_subckts NO 
dfm::set_layout_netlist_options -device_templates YES 
dfm::set_layout_netlist_options -hierarchy AGF 
qs::write_separated_properties props.data
dfm::write_spice_netlist cci_pdsp.netlist</code></pre><p class="p">This is the command line:</p>
<pre class="pre codeblock leveled"><code>% calibre -qs -svdb svdb -exec cci_script.tcl</code></pre><p class="p">These commands generate a pushdown properties
file and a corresponding layout netlist.</p>
<p class="p">Also see <a class="xref fm:HeadingOnly" href="Concept_ExampleDeviceLayerAnnotateProgramsUsingDfmProperty_id834a8436.html#id834a8436-ffb5-42a8-a234-19c777df4304__id5279d747-7ca0-41f0-b71b-e3119ee1c215">Example 3</a> under “<a class="xref fm:HeadingAndPage" href="Concept_ExampleDeviceLayerAnnotateProgramsUsingDfmProperty_id834a8436.html#id834a8436-ffb5-42a8-a234-19c777df4304__Concept_ExampleDeviceLayerAnnotateProgramsUsingDfmProperty_id834a8436.xml#id834a8436-ffb5-42a8-a234-19c777df4304" title="The Device Annotation Built-In Language provides a means for combining DFM Property measurements with devices recognized using Calibre nmLVS. DFM Property is an efficient and versatile operation for collecting and combining complex device property measurements used in parasitic extraction flows.">Example Device Annotation Programs Using DFM Property</a>”.</p>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_DeviceAnnotationBuiltInLanguage_id7f618268.html" title="The Device annotation built-in language is useful for MOS device well proximity and shallow trench isolation (STI) stress effect property calculations and similar applications. It is primarily used to extract physical parameters for the newer BSIM4 models.">Device Annotation Built-In Language</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../topics/General_HistoricalDeviceEnclosureFunctionReference_ided9874b5.html#ided9874b5-28a1-43cf-b827-d131fd1ee609__" title="The commands in this section have been historically used to calculate complex device enclosure properties. This information is provided to document functionality you may find in a foundry rule file but is not the currently recommended methodology for calculating well enclosure properties.">Historical Device Enclosure Function Reference</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "svrf_ur"
                DocTitle = "Standard Verification Rule Format (SVRF) Manual"
                PageTitle = "device::enclosure_parallel_measurements"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_BILDevPropdevice_enclosure_parallel_measurements_id0fada000.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Standard Verification Rule Format (SVRF) Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>