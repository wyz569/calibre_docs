<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="LVS Spice Replicate Devices" />
<meta name="abstract" content="Specifies whether the SPICE parser should replicate device elements that have the M parameter." />
<meta name="description" content="Specifies whether the SPICE parser should replicate device elements that have the M parameter." />
<meta name="prodname" content="Standard Verification Rule Format (SVRF) Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-26" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="HighlightChanges" content="yes" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="svrf_ur" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="3/25/21" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Standard Verification Rule Format (SVRF) Manual" />
<meta name="CSHelp" content="No" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P10089,product.id.P10099,product.id.P10119,product.id.P10101,product.id.P11427,product.id.P10115,product.id.P11426,product.id.P10122,product.id.P11493" />
<meta name="ConditionFiltering" content="XML" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id23fd4078-9768-4cf6-a55c-17739e957a29" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>LVS Spice Replicate Devices</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="LVS Spice Replicate Devices" />
<meta name="attributes" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P10089,product.id.P10099,product.id.P10119,product.id.P10101,product.id.P11427,product.id.P10115,product.id.P11426,product.id.P10122,product.id.P11493" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="id23fd4078-9768-4cf6-a55c-17739e957a29">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">LVS Spice Replicate Devices</h1>
<div class="body refbody CommandRefBody"><div class="abstract CommandRefAbstract"><p class="p ContextMGC">Specification
statement</p>
<p class="shortdesc">Specifies whether the SPICE
parser should replicate device elements that have the M parameter.</p>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName Required">LVS SPICE REPLICATE DEVICES</span> {<span class="keyword ParameterName RequiredDefault">NO</span> | <span class="keyword ParameterName Required">YES</span> | <span class="keyword ParameterName Required">LPI</span>}</p>
</div>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="id23fd4078-9768-4cf6-a55c-17739e957a29__ida9a60ac9-7c8f-49ed-999b-5a6d7edf3596"><span class="keyword ParameterName RequiredDefault">NO</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">Specifies that the M property
in SPICE netlists does not cause copies of elements owning M parameters
to be made in the SPICE netlist. This is the default if you do not
include this statement in a rule file.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id23fd4078-9768-4cf6-a55c-17739e957a29__ide0be8f03-e5a8-40d3-af7f-7f56a53303aa"><span class="keyword ParameterName Required">YES</span></dt>
<dd class="dd ArgumentDescription"><p class="p">Specifies that the M property
in SPICE netlists causes creation of multiple copies of elements
owning M parameters in the SPICE netlist.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id23fd4078-9768-4cf6-a55c-17739e957a29__id1b6824f0-a3c5-4ec5-b6a6-34550192517e"><span class="keyword ParameterName Required">LPI</span></dt>
<dd class="dd ArgumentDescription"><p class="p">Specifies that <a class="xref fm:HeadingOnly" href="Command_LvsPropertyInitialize_id3bb7778b.html#id3bb7778b-bf27-4a89-8e1d-59ab2ca4fb14__Command_LvsPropertyInitialize_id3bb7778b.xml#id3bb7778b-bf27-4a89-8e1d-59ab2ca4fb14" title="Instructs the tool to add numeric properties simultaneously to instances in the layout and source databases in memory and initialize those properties to specified values.">LVS Property Initialize</a> programs are run prior to the
interpretation of M parameters in the SPICE netlist. After the initialization
program is run (if any), the M parameters are handled as for the
YES keyword. This option can be used to override existing M properties
or to initialize them when they do not previously exist.</p>
</dd>
</dl>
</div>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">Specifies whether the SPICE parser
should replicate device elements in a netlist that have the M parameter.
This specification statement may appear in the rule file once.</p>
<p class="p">In SPICE netlists, property M
is evaluated immediately and not handed down through parameter passing.
If you specify YES, for every SPICE device element that owns an
M parameter, the parser creates M copies of the device element connected
in parallel. All copies are identical except for element names.
The first copy receives the element name specified in the netlist.
Subsequent copies receive that element name followed by character
strings of the form ==2, ==3, … ==n respectively, where n is the
serial number of the copy. For example, R10, R10==2, R10==3, and
so forth. </p>
<p class="p">All copies own the M property
with value 1 (not the original M value). All other parameter values
are original values as specified in the netlist; the M parameter
in this mode does not modify other parameter values. M parameters
in this mode are required to have positive integer values within
integer range (specifically, unsigned long integer: 1 to 2<span class="ph FontProperty LiteralSuperScript">64</span>-1).
If M=1 then only one copy of the device element is created.</p>
<p class="p">If you specify NO, or if this
statement is omitted from the rule file, then the M parameter in SPICE
netlists does not create multiple copies of the owner element. Instead,
a single copy of the element is created and the M parameter merely
modifies the values of certain other parameters of the element,
as appropriate (see “<a class="xref Link" href="../../calbr_ver_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'SPICE Format', 'calbr_ver_user'); return false;">SPICE Format</a>”
in the <cite class="cite">Calibre Verification User’s Manual</cite>). The element
owns the M property with the original M value as indicated in the netlist.
M parameters in this mode are not limited to positive integer values
and may have fractional and/or negative values.</p>
<p class="p">This specification statement
operates on SPICE device elements, including R, C, L, D, Q, J, M, V
and other device elements. Subcircuit calls (X elements) are not
affected by this statement; the M parameter in subcircuit calls
always creates multiple copies of the subcircuit.</p>
<p class="p">Note that a YES setting may carry
a penalty in performance and process size, because more device instances
must be created and processed. If you specify a YES value and also
disable parallel device reduction then the performance penalty may
be more severe because you introduce ambiguity to the design.</p>
<p class="p">When the LPI keyword is specified,
any LVS Property Initialize program is executed first, and M parameters
are calculated according to that program (this is true for built-in
and user-defined devices). Then the M parameters are used for device
replication as for the YES option. If LPI is specified and there
is no property initialization program that calculates M parameters,
then the LPI behavior is the same as for YES.</p>
<p class="p">Consider the following rule file
code:</p>
<pre class="pre codeblock"><code>LVS SPICE REPLICATE DEVICES LPI</code></pre><pre class="pre codeblock"><code>LVS PROPERTY INITIALIZE M [ 
  property M, L, W, PS, PD, SL, DL
  W  = input_num_val(M) * input_num_val(W)
  PS = input_num_val(SL) * 2 + input_num_val(M) * 2 * input_num_val(W)
  PD = input_num_val(DL) * 2 + input_num_val(M) * 2 * input_num_val(W)
  SL = input_num_val(SL)
  DL = input_num_val(DL)
  L  = input_num_val(SL) + input_num_val(DL)
  M  = 1
]</code></pre><p class="p">The initialization program causes
device properties such as this:</p>
<p class="p BlockIndent">M1 drn gate src blk
aaa W=1 SL=0.4 DL=0.6</p>
<p class="p">to be calculated with initialized
values like this:</p>
<p class="p BlockIndent">M1 drn gate src blk
aaa L=1 W=1 PD=3.2 PS=2.8 $M=1 $DL=0.6 $SL=0.4</p>
<p class="p">Properties such as this:</p>
<p class="p BlockIndent">M1 src gate drn blk
aaa M=5 W=1 SL=0.4 DL=0.6 </p>
<p class="p">are calculated with initialized
values like this:</p>
<p class="p BlockIndent">M1 src gate drn blk
aaa L=1 W=5 PD=11.2 PS=10.8 $M=1 $DL=0.6 $SL=0.4</p>
<p class="p">The program breaks up the L parameter
into source-side (SL) and drain-side (DL) length terms, then computes
L as the sum of the two. These values are then used to compute the
source and drain perimeters (PS and PD) using the M factor multiplied
by the width W and the appropriate L value.</p>
<p class="p">Defining M = 1 at the end of
the initialization program indicates no further M factor processing is
needed (that is, $M=1 is written rather than $M=5). If setting M
= 1 is not done, then the effect of this MOSFET would be to internally
generate the following because originally M = 5:</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="id23fd4078-9768-4cf6-a55c-17739e957a29__idf6d7a9a6-1414-4ff1-9636-46a6a375498a" class="table" frame="void" border="0" rules="none"><colgroup><col style="width:6.175in" /></colgroup><tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">M1 src gate
drn blk aaa L=1 W=5 PD=11.2 PS=10.8 $M=1 $DL=0.6 $SL=0.4 </p>
<p class="p">M1==2 src gate drn blk aaa L=1
W=5 PD=11.2 PS=10.8 $M=1 $DL=0.6 $SL=0.4</p>
<p class="p">M1==3 src gate drn blk aaa L=1
W=5 PD=11.2 PS=10.8 $M=1 $DL=0.6 $SL=0.4</p>
<p class="p">M1==4 src gate drn blk aaa L=1
W=5 PD=11.2 PS=10.8 $M=1 $DL=0.6 $SL=0.4</p>
<p class="p">M1==5 src gate drn blk aaa L=1
W=5 PD=11.2 PS=10.8 $M=1 $DL=0.6 $SL=0.4 </p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p">Here the MOSFET properties are
scaled by the initialization program, but then the device is also replicated.
(Note that the replication process resets the M to 1 after it reads
the value and before it performs the replication.)</p>
<p class="p">The initialization program can
also be used to change the value of M and then allow standard replication
rules to run. Here is another example:</p>
<pre class="pre codeblock"><code>LVS SPICE REPLICATE DEVICES LPI</code></pre><pre class="pre codeblock"><code>LVS PROPERTY INITIALIZE M [ 
  property M, NFIN
  M = input_num_val(M) * input_num_val(NFIN)
  NFIN = 1
]</code></pre><p class="p">Suppose this device exists:</p>
<p class="p BlockIndent">M1 drn gate src blk
aaa NFIN=5</p>
<p class="p">The initialization program followed
by device replication causes these devices to be generated internally:</p>
<p class="p BlockIndent">M1 drn gate src blk
aaa $M=1 $NFIN=1 </p>
<p class="p BlockIndent">M1==2 drn gate src
blk aaa $M=1 $NFIN=1 </p>
<p class="p BlockIndent">M1==3 drn gate src
blk aaa $M=1 $NFIN=1 </p>
<p class="p BlockIndent">M1==4 drn gate src
blk aaa $M=1 $NFIN=1 </p>
<p class="p BlockIndent">M1==5 drn gate src
blk aaa $M=1 $NFIN=1 </p>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><div class="section Subsection" id="id23fd4078-9768-4cf6-a55c-17739e957a29__id18df791a-44bc-489c-b186-94382df39cdb"><h2 class="title Subheading sectiontitle">Example 1</h2><p class="p">Netlist:</p>
<pre class="pre codeblock"><code>C1 1 2 C=10 AAA=20 M=3</code></pre><p class="p">If you specify LVS Spice Replicate
Devices YES, then the SPICE parser creates three physical copies
of the capacitor connected in parallel, with each copy having the
original values for C and AAA, and an M value of 1:</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="id23fd4078-9768-4cf6-a55c-17739e957a29__id76ca4bf5-f1ca-42b0-b8b2-291535919143" class="table" frame="void" border="0" rules="none"><colgroup><col style="width:1.365in" /><col style="width:1.286in" /><col style="width:1.899in" /></colgroup><tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">Element Name</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">Pins</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">Properties</p>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">C1</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">pos=1, neg=2</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">c=10, aaa=20, m=1</p>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">C1==2</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">pos=1, neg=2</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">c=10, aaa=20, m=1</p>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">C1==3</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">pos=1, neg=2</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">c=10, aaa=20, m=1</p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p">If you specify NO, or if this statement
is omitted, then the SPICE parser creates a single copy of the capacitor
with a multiplied value for C, original value for AAA, and original
value for M:</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="id23fd4078-9768-4cf6-a55c-17739e957a29__ide37be8bb-e7d7-4ddd-8715-f5ed3b56143c" class="table" frame="void" border="0" rules="none"><colgroup><col style="width:1.240in" /><col style="width:1.212in" /><col style="width:1.773in" /></colgroup><tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">Element Name</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">Pins</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">Properties</p>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">C1</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">pos=1, neg=2</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">c=30, aaa=20, m=3</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section Subsection" id="id23fd4078-9768-4cf6-a55c-17739e957a29__iddb418793-39e7-41c6-8d44-999b573befc3"><h2 class="title Subheading sectiontitle">Example 2</h2><p class="p">If you specify YES, LVS can match
a group of parallel devices to a single SPICE device that owns an
M parameter, even if parallel device reduction is disabled. For
example:</p>
<p class="p">Rule file:</p>
<pre class="pre codeblock"><code>LVS SPICE REPLICATE DEVICES YES
LVS REDUCE PARALLEL CAPACITORS NO
TRACE PROPERTY C C C 0
TRACE PROPERTY C AAA AAA 0</code></pre><p class="p">Layout:</p>
<pre class="pre codeblock"><code>C1 1 2 C=10 AAA=20
C2 1 2 C=10 AAA=20
C3 1 2 C=10 AAA=20</code></pre><p class="p">Source:</p>
<pre class="pre codeblock"><code>C1 1 2 C=10 AAA=20 M=3</code></pre><p class="p">With these settings, the layout
and source match. If you specify NO, or if you omit this statement,
then LVS tells you that there are three capacitor devices in the
layout but only one in the source.</p>
</div>
<div class="section Subsection" id="id23fd4078-9768-4cf6-a55c-17739e957a29__id86a94165-bdfe-45f7-9520-68e07e68630f"><h2 class="title Subheading sectiontitle">Example 3</h2><p class="p">In this example, we see how to use
LVS Spice Replicate Devices YES to apply effectively the M parameter
in SPICE to properties that normally are not affected by that parameter,
like user-defined properties. </p>
<p class="p">Rule file:</p>
<pre class="pre codeblock"><code>LVS SPICE REPLICATE DEVICES YES
LVS REDUCE PARALLEL CAPACITORS YES [
  EFFECTIVE AAA
  AAA = SUM(AAA)
]
TRACE PROPERTY C AAA AAA 0 </code></pre><p class="p">Layout:</p>
<pre class="pre codeblock"><code>C1 1 2 AAA=20
C2 1 2 AAA=20
C3 1 2 AAA=20</code></pre><p class="p">Source:</p>
<pre class="pre codeblock"><code>C1 1 2 AAA=20 M=3</code></pre><p class="p">With these settings, the layout
and source initially contain three capacitors each. The capacitors are
reduced in parallel and the effective property value for AAA is
60 in both layout and source. Notice that if you specify LVS Spice
Replicate Devices NO, or if you omit this statement, then LVS reports
a discrepancy for property AAA, because AAA is 60 in the layout
but 20 in the source.</p>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_LvsCommands_id497866fa.html" title="The commands in this section begin with “LVS.”">LVS … Commands</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "svrf_ur"
                DocTitle = "Standard Verification Rule Format (SVRF) Manual"
                PageTitle = "LVS Spice Replicate Devices"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_LvsSpiceReplicateDevices_id23fd4078.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Standard Verification Rule Format (SVRF) Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>