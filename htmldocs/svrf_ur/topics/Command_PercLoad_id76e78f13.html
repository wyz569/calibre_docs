<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="PERC Load" />
<meta name="abstract" content="Specifies the initialization procedures and rule check procedures to execute during a Calibre PERC run." />
<meta name="description" content="Specifies the initialization procedures and rule check procedures to execute during a Calibre PERC run." />
<meta name="prodname" content="Standard Verification Rule Format (SVRF) Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-26" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="HighlightChanges" content="yes" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="svrf_ur" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="3/25/21" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Standard Verification Rule Format (SVRF) Manual" />
<meta name="CSHelp" content="No" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P10089,product.id.P10099,product.id.P10119,product.id.P10101,product.id.P11427,product.id.P10115,product.id.P11426,product.id.P10122,product.id.P11493" />
<meta name="ConditionFiltering" content="XML" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id76e78f13-26d5-4473-ac6b-9107ef199e2a" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>PERC Load</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="PERC Load" />
<meta name="attributes" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P10089,product.id.P10099,product.id.P10119,product.id.P10101,product.id.P11427,product.id.P10115,product.id.P11426,product.id.P10122,product.id.P11493" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">PERC Load</h1>
<div class="body refbody CommandRefBody"><div class="abstract CommandRefAbstract"><p class="p ContextMGC">Specification
statement</p>
<p class="shortdesc">Specifies the initialization
procedures and rule check procedures to execute during a Calibre PERC
run.</p>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"> <span class="keyword ParameterName Required">PERC LOAD</span> <span class="keyword ParameterName RequiredReplaceable">tvf_function</span> [XFORM {REDUCTION | INJECTION | ALL}]<br />
[INIT <span class="keyword ParameterName OptionalReplaceable">init_proc</span>] [PATTERN <span class="keyword ParameterName OptionalReplaceable">filename</span>] <br />
<span class="keyword ParameterName Required">SELECT</span> {<span class="keyword ParameterName RequiredReplaceable">select_group</span> | <span class="keyword ParameterName RequiredReplaceable">select_parallel_group</span> | {<span class="keyword ParameterName RequiredReplaceable">select_group</span> <span class="keyword ParameterName RequiredReplaceable">select_parallel_group</span>}}<br />
[SELECTTYPE {INFO | UNWAIVABLE} <span class="keyword ParameterName OptionalReplaceable">check_proc</span> [<span class="keyword ParameterName OptionalReplaceable">check_proc</span> …]] </p>
</div>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__idd5a3cfb7-ef19-4cfd-b457-a46fce1ec44b"><span class="keyword ParameterName RequiredReplaceable">tvf_function</span></dt>
<dd class="dd ArgumentDescription"><p class="p">A required parameter that specifies
the <a class="xref fm:HeadingOnly" href="Command_TVFFunction_id7a9f1c9b.html#id7a9f1c9b-4b64-4768-8e1a-ca6b448bb1a7__Command_TVFFunction_id7a9f1c9b.xml#id7a9f1c9b-4b64-4768-8e1a-ca6b448bb1a7" title="Defines a function block of Tcl code.">TVF Function</a> to be
loaded into an embedded Tcl interpreter. All <span class="keyword ParameterName OptionalReplaceable">init_proc</span>, <span class="keyword ParameterName RequiredReplaceable">select_group</span>,
and <span class="keyword ParameterName RequiredReplaceable">select_parallel_group</span> procedures
specified in the PERC Load statement must be defined within <span class="keyword ParameterName RequiredReplaceable">tvf_function</span>.
The parameter <span class="keyword ParameterName RequiredReplaceable">tvf_function</span> is
case-insensitive.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__id9b65beee-c177-4e75-a57b-4f1576aeeedb">XFORM {REDUCTION | INJECTION | ALL}</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword set that
instructs Calibre PERC to perform the indicated netlist transformation
before executing any <span class="keyword ParameterName OptionalReplaceable">init_proc</span>, <span class="keyword ParameterName RequiredReplaceable">select_group</span>,
or <span class="keyword ParameterName RequiredReplaceable">select_parallel_group</span> procedures.
See “<a class="xref fm:HeadingOnly" href="#id76e78f13-26d5-4473-ac6b-9107ef199e2a__iddb968c8d-c0f9-4d55-a572-e04895823fc9">Netlist Transformations</a>” for details about the keywords
associated with the transformation process. This keyword set must
be specified after <span class="keyword ParameterName RequiredReplaceable">tvf_function </span>and before <span class="keyword ParameterName Required">SELECT</span>.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__idaf91d3fb-2f88-410c-b1f8-1619d3d7748a">INIT <span class="keyword ParameterName OptionalReplaceable">init_proc</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword and parameter
that specify a Calibre PERC initialization procedure, where <span class="keyword ParameterName OptionalReplaceable">init_proc</span> is
defined in <span class="keyword ParameterName RequiredReplaceable">tvf_function</span> and
must be a Tcl proc that takes no arguments. The parameter <span class="keyword ParameterName OptionalReplaceable">init_proc</span> is
case-sensitive. Calibre PERC initialization procedures are described
in the “<a class="xref Link" href="../../calbr_perc_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Initialization Procedures and Commands', 'calbr_perc_user'); return false;">Initialization Procedures and Commands</a>” chapter of the <cite class="cite">Calibre PERC User’s
Manual</cite>. This keyword set must be specified after <span class="keyword ParameterName RequiredReplaceable">tvf_function</span> and
before <span class="keyword ParameterName Required">SELECT</span>.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__id6bdc831a-9681-4bf9-9318-de652db7b512">PATTERN <span class="keyword ParameterName OptionalReplaceable">filename</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword and pathname
of a SPICE pattern file. The pattern file is of the same form used
in <a class="xref fm:HeadingOnly" href="Command_PercPatternPath_id8f946b39.html#id8f946b39-54b1-4cce-8bed-6aca03a05e1a__Command_PercPatternPath_id8f946b39.xml#id8f946b39-54b1-4cce-8bed-6aca03a05e1a" title="Specifies a Calibre PERC pattern file.">PERC Pattern Path</a>. The <span class="keyword ParameterName OptionalReplaceable">filename</span> is
the only pattern file that applies to the <span class="keyword ParameterName Required">SELECT</span> procedures.
This keyword set must be specified after <span class="keyword ParameterName RequiredReplaceable">tvf_function</span> and
before <span class="keyword ParameterName Required">SELECT</span>.</p>
<p class="p">The <span class="keyword ParameterName RequiredReplaceable">filename</span> parameter
can contain environment variables. For information regarding the use
of environment variables in the <span class="keyword ParameterName RequiredReplaceable">filename</span> parameter,
refer to “<a class="xref fm:HeadingOnly" href="Concept_EnvironmentVariablesInPathnameParameters_id227f5401.html#id227f5401-c3e0-428d-97cb-cc1872c793cc__Concept_EnvironmentVariablesInPathnameParameters_id227f5401.xml#id227f5401-c3e0-428d-97cb-cc1872c793cc" title="When specifying a pathname parameter in a rule file statement, you can use an environment variable as a component of the filename (this does not apply to ICverify). The environment variable is signified by preceding it with a dollar sign ($). The tool evaluates the environment variable at compilation time and substitutes it into the filename string.">Environment Variables in Pathname Parameters</a>” in the “<a class="xref fm:HeadingOnly" href="MGCChap_KeyConcepts_id1d4cfc17.html#id1d4cfc17-3ef0-42a5-9c22-f833aed72cb3__MGCChap_KeyConcepts_id1d4cfc17.xml#id1d4cfc17-3ef0-42a5-9c22-f833aed72cb3" title="This chapter covers the basic concepts needed to write and use a SVRF rule file for the Calibre and ICverify products.">Key Concepts</a>” chapter.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__ida62cb32d-8c70-4fd6-a45a-f89660fb5f68"><span class="keyword ParameterName Required">SELECT</span></dt>
<dd class="dd ArgumentDescription"><p class="p">A required keyword that precedes <span class="keyword ParameterName RequiredReplaceable">select_group</span> or <span class="keyword ParameterName RequiredReplaceable">select_parallel_group</span>.
This keyword must appear after any other parameter set except SELECTTYPE.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__idac879a1b-8956-46f2-b4d2-96377dddb192"><span class="keyword ParameterName RequiredReplaceable">select_group</span></dt>
<dd class="dd ArgumentDescription"><p class="p">A list of rule check procedure
names following <span class="keyword ParameterName Required">SELECT</span> and
of this form:</p>
<p class="p BlockIndent"><span class="keyword ParameterName RequiredReplaceable">check_proc</span> [<span class="keyword ParameterName OptionalReplaceable">check_proc</span> …]</p>
<p class="p">The <span class="keyword ParameterName RequiredReplaceable">check_proc</span> parameter
is the name of a Tcl proc or a <a class="xref fm:HeadingOnly" href="Command_PERCGroup_idcfa9e570.html#idcfa9e570-a648-4b4c-9c67-7432ca094f41__Command_PERCGroup_idcfa9e570.xml#idcfa9e570-a648-4b4c-9c67-7432ca094f41" title="Specifies a group name for a set of rule check procedures. The group name can be referenced in a PERC Load statement to execute the checks specified in the group.">PERC Group</a> <span class="keyword ParameterName OptionalReplaceable">name. </span>At
least one procedure or group name must be specified. Each rule check
procedure takes no arguments and is defined in the <span class="keyword ParameterName RequiredReplaceable">tvf_function</span> block.
These procedures are run single-threaded.</p>
<p class="p">You can specify any number
of <span class="keyword ParameterName OptionalReplaceable">check_proc</span> procedures.
If multiple <span class="keyword ParameterName OptionalReplaceable">check_proc</span> parameters are
specified, each must have a unique name. Calibre PERC rule checks
are described in the “<a class="xref Link" href="../../calbr_perc_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Rule Check Procedures and Commands', 'calbr_perc_user'); return false;">Rule Check Procedures and Commands</a>” chapter of the <cite class="cite">Calibre PERC
User’s Manual</cite>.</p>
<p class="p"><span class="keyword ParameterName RequiredReplaceable">select_group</span> or <span class="keyword ParameterName RequiredReplaceable">select_parallel_group</span> must
be specified. If both are specified, then the <span class="keyword ParameterName RequiredReplaceable">select_group</span> specification
must precede the <span class="keyword ParameterName RequiredReplaceable">select_parallel_group</span> specification.
In this case, the <span class="keyword ParameterName RequiredReplaceable">select_group</span> procedures
are executed in the main thread prior to the <span class="keyword ParameterName RequiredReplaceable">select_parallel_group</span> procedures.
Further details about propagation of main thread conditions to parallel
threads are given in the Description section. Also see <a class="xref fm:HeadingOnly" href="#id76e78f13-26d5-4473-ac6b-9107ef199e2a__idecf3b38b-4d9c-4397-8787-bacdc650797c">Example 5</a>.</p>
<p class="p">It is permissible to enclose a set of <span class="keyword ParameterName OptionalReplaceable">check_proc</span> arguments
in a <span class="keyword ParameterName RequiredReplaceable">select_group</span> in
parentheses, and the parentheses are ignored. In the context of <span class="keyword ParameterName RequiredReplaceable">select_parallel group</span>,
this usage of parentheses is not ignored, and the semantics are
discussed under <span class="keyword ParameterName RequiredReplaceable">select_parallel_group</span>. See <a class="xref fm:HeadingOnly" href="#id76e78f13-26d5-4473-ac6b-9107ef199e2a__id9cd9faa2-368f-4d3d-976b-448643457993">Example 6</a>.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__idccb7a613-816f-452c-a60c-c6f3e5ae27de"><span class="keyword ParameterName RequiredReplaceable">select_parallel_group</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">A keyword and parameter set
following <span class="keyword ParameterName Required">SELECT</span> or <span class="keyword ParameterName RequiredReplaceable">select_group</span> that
specify rule check procedures and having this form:</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__idfc269411-1eaf-4fc7-948f-60271ffeef0c" class="table" frame="void" border="0" rules="none"><colgroup><col style="width:5.200in" /></colgroup><tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p"><span class="keyword ParameterName Required">PARALLEL</span> {{<span class="keyword ParameterName RequiredReplaceable">check_proc_A</span> <span class="keyword ParameterName RequiredReplaceable">check_proc_B</span> …}
| </p>
<p class="p">                         {<span class="keyword ParameterName Required">(</span><span class="keyword ParameterName RequiredReplaceable">check_proc_C</span> <span class="keyword ParameterName RequiredReplaceable">check_proc_D</span> …<span class="keyword ParameterName Required">)</span>}
…}</p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p">Each <span class="keyword ParameterName RequiredReplaceable">check_proc_*</span> argument
follows the same semantics as <span class="keyword ParameterName RequiredReplaceable">select_group</span>,
except that <span class="keyword ParameterName Required">PARALLEL</span> checks
are run in multithreaded mode (when -turbo is specified on the command
line) and at least two <span class="keyword ParameterName RequiredReplaceable">check_proc_*</span> arguments
must be specified in order for multithreading to occur. </p>
<p class="p"><span class="keyword ParameterName RequiredReplaceable">select_parallel_group</span> or <span class="keyword ParameterName RequiredReplaceable">select_group</span> must
be specified. The case where both <span class="keyword ParameterName RequiredReplaceable">select_group</span> and <span class="keyword ParameterName RequiredReplaceable">select_parallel_group</span> are
specified is described under <span class="keyword ParameterName RequiredReplaceable">select_group</span>.</p>
<p class="p">When <span class="keyword ParameterName RequiredReplaceable">select_parallel_group</span> rule
check procedures are specified in parentheses ( ), the proc names
within that set of parentheses are run in the order specified in
that set. A set of checks in parentheses is called a <span class="ph FontProperty emphasis">sequential parallel check set</span>.</p>
<p class="p">A primary use of sequential
parallel check sets is to facilitate procedures accessing and modifying
the same global variables. If more than one sequential parallel
check set is used, each check set behaves independently of the others.
Parentheses cannot be nested. Proc names outside parentheses are
run in the order determined by the system. </p>
<p class="p">Parallel processing is triggered
by the -turbo command line option in addition to the <span class="keyword ParameterName Required">PARALLEL</span> keyword.
If -turbo is not used, then the rule checks are not multithreaded. Only
Calibre MT mode is supported for multithreading (MTflex is not).</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__id4a43bd30-5c60-43f1-9cc3-97300519cf65">SELECTTYPE INFO <span class="keyword ParameterName OptionalReplaceable">check_proc </span>[<span class="keyword ParameterName OptionalReplaceable">check_proc</span> …]</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword and parameter
set that specify a rule check procedure is for informational purposes
only and does not produce a PASSED or FAILED status in the <a class="xref fm:HeadingOnly" href="Command_PercReport_idd057988d.html#idd057988d-2730-40c8-9bd2-5e78ac0f8f46__Command_PercReport_idd057988d.xml#idd057988d-2730-40c8-9bd2-5e78ac0f8f46" title="Specifies the pathname of the Calibre PERC report file.">PERC Report</a>. SELECTTYPE
INFO must appear after the <span class="keyword ParameterName Required">SELECT</span> procedures.
The <span class="keyword ParameterName OptionalReplaceable">check_proc</span> must
also be a member of the <span class="keyword ParameterName Required">SELECT</span> procedure
set. The result counts of INFO type checks are shown in the PERC Report
in an “Info Count” category. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__id5365a6f5-dd5a-4a1e-a3de-83c8254bce10">SELECTTYPE UNWAIVABLE <span class="keyword ParameterName OptionalReplaceable">check_proc </span>[<span class="keyword ParameterName OptionalReplaceable">check_proc</span> …]</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional
keyword and parameter set that specify rule check procedures whose
topology results cannot be waived. An attempt to waive results from
the specified procedures causes warnings to be written to the transcript
and PERC Report.</p>
</dd>
</dl>
</div>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">Selects the Calibre PERC initialization
procedures and rule check procedures to execute. This statement
must be present in the rule file in a calibre -perc run. Unlike
many SVRF statements, the order of the keyword sets in this statement
is important.</p>
<p class="p">The PERC Load statement may appear
any number of times in the rule file. For each unique combination
of <span class="keyword ParameterName RequiredReplaceable">tvf_function</span> and
optional <span class="keyword ParameterName OptionalReplaceable">init_proc</span>,
XFORM choice, PATTERN <span class="keyword ParameterName OptionalReplaceable">filename</span>,
and <span class="keyword ParameterName RequiredReplaceable">select_parallel_group</span>,
there can be at most one PERC Load statement. For example, these
two statements are allowed because one has an <span class="keyword ParameterName OptionalReplaceable">init_proc</span>,
while the other does not:</p>
<pre class="pre codeblock"><code>PERC LOAD perc_func INIT init SELECT rule1
PERC LOAD perc_func SELECT rule2</code></pre><p class="p">But this set of statements gives
an LPL4 compiler error because only the <span class="keyword ParameterName RequiredReplaceable">select_group</span> names differ:</p>
<pre class="pre codeblock"><code>PERC LOAD perc_func INIT init SELECT rule1
PERC LOAD perc_func INIT init SELECT rule2 // bad.</code></pre><p class="p">To clear the error, both proc
names must appear in the same statement.</p>
<div class="note tip"><span class="tiptitle">Tip</span> <p class="p">If an
initialization procedure takes a long time to execute in comparison
to its associated rule check procs, it is a good practice to write
separate initialization procedures with only the net type definitions
that are required for a given set of checks and then to specify
these in separate PERC Load statements. This results in better performance
and less flattening of the design than using a single INIT procedure
for all rule check procs when there are many net types.</p>
</div>
<p class="p">Each PERC Load statement is independent
of any other in the same rule file. More precisely, Calibre PERC
follows these steps for each PERC Load statement:</p>
<ol class="ol"><li class="li" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__id3c555772-3cb7-4fca-8edc-e15232d29281"><p class="p">Create new Tcl interpreter.</p>
</li>
<li class="li" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__id64883295-3357-4df3-8a0d-5f7a626554fd"><p class="p">Read original netlist.</p>
</li>
<li class="li" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__id455a8619-30e6-4ad3-a622-c635c36d2be0"><p class="p">Perform the netlist transformation,
if specified.</p>
</li>
<li class="li" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__idb1e7d7be-4fa2-46ff-bc11-1872a86094c1"><p class="p">Execute the initialization procedure,
if provided.</p>
</li>
<li class="li" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__ida6e60f13-f26b-4a95-bfc0-1a8b2d93369b"><p class="p">Execute the check procs in the
order listed in the statement, except for a <span class="keyword ParameterName RequiredReplaceable">select_parallel_group</span> that
is executed in a -turbo run.</p>
</li>
</ol>
<p class="p">When <span class="keyword ParameterName RequiredReplaceable">select_parallel_group</span> is
used with the -turbo command line option, the parallel check procs
are executed on multiple threads similar to the way layer operations
are assigned to HDBs when running calibre -turbo -hyper. The main
thread of the process is referred to as thread 0; the MT threads
are numbered 1…N, where N is the number of threads the run uses.</p>
<p class="p">Rule check procs are assigned
to threads depending on which sequential parallel check set they are
in. All rule check procs in a sequential parallel check set execute
on the same thread in the order specified within the set. All sequential
parallel check sets run in parallel (limited by the thread count),
in arbitrary order, and with arbitrary assignment to threads. The
same is true for check proc names not specified as part of a sequential
parallel check set.</p>
<p class="p">For example, consider this statement:</p>
<pre class="pre codeblock"><code>    PERC LOAD perc_func SELECT PARALLEL A (B C) D (E F)</code></pre><p class="p">Checks A and D run in parallel,
as do the set composed of B and C, and the set composed of E and
F. Here is how this example might run concurrently (with arbitrary
assignment to threads):</p>
<p class="p BlockIndent">Thread 1: E then F</p>
<p class="p BlockIndent">Thread 2: A</p>
<p class="p BlockIndent">Thread 3: B then C</p>
<p class="p BlockIndent">Thread 4: D</p>
<p class="p">Each thread has its own Tcl interpreter.
Prior to running any checks, an <span class="keyword ParameterName OptionalReplaceable">init_proc</span> is
run on the main thread. If both <span class="keyword ParameterName RequiredReplaceable">select_group</span> and <span class="keyword ParameterName RequiredReplaceable">select_parallel_group</span> are
specified, the <span class="keyword ParameterName RequiredReplaceable">select_group</span> checks
are run on the main thread. When additional threads are subsequently
created, conditions in the main thread are copied to the other threads.
These conditions include Tcl global variables, perc::set_parameters
settings, and global procs that are not already defined in the new
threads.</p>
<p class="p">When <span class="keyword ParameterName RequiredReplaceable">select_parallel_group</span> is
specified, TVF portions of the rule file that are affected by multithreading
are sanity checked by a static Tcl analyzer, and any error conditions
abort the run. See “<a class="xref Link" href="../../calbr_perc_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Static Tcl Analyzer', 'calbr_perc_user'); return false;">Static Tcl Analyzer</a>”
in the <cite class="cite">Calibre PERC User’s Manual</cite> for details.</p>
<p class="p"><span class="keyword ParameterName RequiredReplaceable">select_parallel_group</span> procs
are restricted to accessing global variables that are set up in
the main thread. Improper use of global variables (created by the
global command) is detected and causes a Tcl error during runtime
like this:</p>
<pre class="pre codeblock"><code>ERROR: can’t set "total": Global variable "total", modified by RuleCheck
"cd_dn", is now being modified by RuleCheck "cd_up".</code></pre><p class="p">Specifically, global variables
accessed across multiple sequential parallel check sets trigger
the error, as follows:</p>
<ul class="ul"><li class="li" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__idcd441764-5285-4408-8aff-d319ceb893bb"><p class="p">A global variable is modified
by procs from different sequential parallel check sets.</p>
</li>
<li class="li" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__idf7359f6d-5b9e-4d63-9f01-262fc3f6d1d0"><p class="p">A global variable is read
by a proc in one sequential parallel check set and then modified by
a proc in another.</p>
</li>
<li class="li" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__id11b962c4-3176-455c-9b15-ad455b020c55"><p class="p">A global variable is modified
by the proc in one sequential parallel check set and then read by
another proc in a different set.</p>
</li>
</ul>
<p class="p">It is possible an error could
be given where the use of a global variable would not cause incorrect
results. The tool has no way to determine if a global variable issue
affects results, so it takes a conservative approach and gives an
error. For variables that cause errors, these remedial actions can
be taken:</p>
<ul class="ul"><li class="li" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__idb7c32000-fc1c-490e-b964-36131b1f38cf"><p class="p">Declare any “static” global
variables in the initialization procedure. All check procs that depend
on the initialization procedure then call that global variable.</p>
</li>
<li class="li" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__id547b33fa-640a-44ae-a563-4c5fdf4e4595"><p class="p">Place all the checks that
manipulate or reference the global variable into the same sequential
parallel check set.</p>
</li>
<li class="li" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__id4c22e7b1-b9e1-4764-bde4-087fc89f31b6"><p class="p">Rewrite the rules to refrain
from using global variables (use collections instead), in which
case the previous two actions are not needed.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">Reading
from and writing to the same file from multiple checks should generally
be avoided. This has problems similar to global variables discussed
previously.</p>
</div>
</li>
</ul>
<p class="p">The PATTERN keyword set enables
pattern matching within the check procs specified in the given PERC
Load statement. If PERC Pattern Path is also specified, the PATTERN <span class="keyword ParameterName OptionalReplaceable">filename</span> takes
precedence over the PERC Pattern Path statement for the check procs
within the PERC Load statement. SPICE subcircuits in separate pattern
files may not call subcircuits outside a file itself; each pattern
file is treated as self-contained. A complete discussion of pattern
matching is found under “<a class="xref Link" href="../../calbr_perc_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Pattern-Based Checks', 'calbr_perc_user'); return false;">Pattern-Based Checks</a>” in the <cite class="cite">Calibre PERC User’s Manual</cite>.</p>
<p class="p">When SELECTTYPE INFO is specified,
the PERC Report shows additional results classification fields for
informational checks. In the OVERALL VERIFICATION RESULTS section,
an “info count” field appears summarizing informational results:</p>
<pre class="pre codeblock"><code>Results:  Total RuleCheck result count = 3 (3) info count = 4 (4)</code></pre><p class="p">The CELL SUMMARY and RULECHECK
SUMMARY sections show corresponding “Info Count” columns, as shown
here:</p>
<pre class="pre codeblock"><code>*************************************************************************                              CELL  SUMMARY
*************************************************************************

  Status      Result Count  Info Count    Cell
  ---------   ------------  ------------  --------------
  COMPLETED   0 (0)         1 (1)         CellB
  COMPLETED   3 (3)         3 (3)         TOPCELL

*************************************************************************
                           RULECHECK  SUMMARY
*************************************************************************

  Total RuleChecks Selected  = 2
  Total RuleChecks Completed = 2
  Total RuleChecks Aborted   = 0
  Total RuleChecks Skipped   = 0

  Status      Result Count  Info Count    Rule
  ---------   ------------  ------------  --------------

PERC LOAD perc.rules INIT init_2

  COMPLETED   3 (3)                       rule_1

PERC LOAD perc.rules

  COMPLETED                 4 (4)         rule_2</code></pre><p class="p">Individual check proc results
show the (SELECTTYPE INFO) string when they are informational only:</p>
<pre class="pre codeblock"><code>o PERC LOAD perc.rules
o RuleCheck(SELECTTYPE INFO):  rule_2</code></pre><p class="p">INFO type results appear in a
separate <span class="ph uicontrol">PERC Info Results</span> tab in Calibre
RVE.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">Waivers
for INFO type checks are ignored with a warning. Additionally, PERC
Report Option SKIP_PASSED_CELL causes cells that have only INFO
type results not to be reported because they are not failing cells.</p>
</div>
<p class="p">The SELECTTYPE UNWAIVABLE option is useful
to enforce the output of unwaived results from specified checks
(with warnings). If you prefer to have the tool abort the run in
cases where waivers are attempted for checks specified with SELECTTYPE
UNWAIVABLE, use the PERC Wavier Path ABORT UNWAIVABLE keyword.</p>
<p class="p">If <a class="xref fm:HeadingOnly" href="Command_PercLdlProbePath_id7dff22c6.html#id7dff22c6-7fa3-44aa-94bd-1634f790d150__Command_PercLdlProbePath_id7dff22c6.xml#id7dff22c6-7fa3-44aa-94bd-1634f790d150" title="Specifies the pathname of a probe mapping file, which defines probe locations for an LDL CD or P2P run.">PERC LDL Probe Path</a> is specified,
then PERC Load statements are ignored. This configuration is used
only in certain LDL CD or P2P runs when one defines probe points
in a file rather than by using perc::export_pin_pair.</p>
<p class="p"><span class="ph FontProperty HeadingLabel">Processing Order of PERC Load statements</span>— PERC Load
statements are not necessarily processed in the order that they
appear in the rule file. Instead, Calibre PERC arranges them into four
groups based on the netlist transformation selection and processes
them in the following order: </p>
<ol class="ol"><li class="li" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__id12488b4c-01d1-4ebf-a39a-64aff918e6f5"><p class="p">No netlist transformation.</p>
</li>
<li class="li" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__id614235d7-d6fa-4450-a01a-b7427b45e40f"><p class="p">REDUCTION transformation.</p>
</li>
<li class="li" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__id5f9e3a3d-251a-4803-8801-9c6a24b43812"><p class="p">INJECTION transformation.</p>
</li>
<li class="li" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__id17a0fd1d-1e6b-493c-8660-19163a203519"><p class="p">ALL transformation.</p>
</li>
</ol>
<p class="p">Within each group, the PERC Load
statements are processed in the order that they appear in the rule
file, except in MT mode, in which case checks are processed by thread
in the order determined most efficient by the tool.</p>
<div class="section Subsection" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__iddb968c8d-c0f9-4d55-a572-e04895823fc9"><h2 class="title Subheading sectiontitle">Netlist
Transformations</h2><p class="p">Calibre PERC is designed primarily
as a netlist checker. The presumption is that checking of literal
netlist elements is preferred rather than implicit structures such
as reduced devices, filtered unused devices, or logic injection
components. For this reason, device reduction, unused device filtering,
and logic injection <span class="ph FontProperty emphasis">are not performed</span> in
Calibre PERC unless explicitly requested through the XFORM keyword
set.</p>
<p class="p">The allowed transformations are
controlled through various Calibre nmLVS specification statements: </p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__idc5fc5353-04de-4b90-adf1-5d77e7acf089" class="table" frame="void" border="0" rules="none"><colgroup><col style="width:1.775in" /><col style="width:4.075in" /></colgroup><tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">Device reduction and unused
filtering</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">As specified by the <a class="xref fm:HeadingOnly" href="Command_LvsReduce_id10daf172.html#id10daf172-9945-4f03-9210-9461dd0a3aa3__Command_LvsReduce_id10daf172.xml#id10daf172-9945-4f03-9210-9461dd0a3aa3" title="Specifies generic device reduction instructions.">LVS Reduce</a> … family of statements and the <a class="xref fm:HeadingOnly" href="Command_LvsFilter_id873b982a.html#id873b982a-2d33-49e2-a752-62a443c57fb3__Command_LvsFilter_id873b982a.xml#id873b982a-2d33-49e2-a752-62a443c57fb3" title="Filters out source and layout instances having properties with the specified values.">LVS Filter</a> Unused … family of statements.</p>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">Logic injection </p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">As specified by <a class="xref fm:HeadingOnly" href="Command_LvsInjectLogic_ide178ef43.html#ide178ef43-14cf-4d2e-a37d-19c4d890a3e0__Command_LvsInjectLogic_ide178ef43.xml#ide178ef43-14cf-4d2e-a37d-19c4d890a3e0" title="Specifies whether to perform logic injection. Used only in Calibre nmLVS-H and Calibre PERC.">LVS Inject Logic</a>.</p>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">Gate recognition </p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">As specified by <a class="xref fm:HeadingOnly" href="Command_LvsRecognizeGates_id9fdc96dd.html#id9fdc96dd-a321-44dc-8823-43c1d0b12b9a__Command_LvsRecognizeGates_id9fdc96dd.xml#id9fdc96dd-a321-44dc-8823-43c1d0b12b9a" title="Specifies whether to recognize logic gates from transistor-level data.">LVS Recognize Gates</a>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p">The use of the statements is
shown in “<a class="xref fm:HeadingAndPage" href="#id76e78f13-26d5-4473-ac6b-9107ef199e2a__id8575de8b-1904-476f-97b5-25bdcc6ae778">Example 1</a>”. Also see
the “<a class="xref Link" href="../../calbr_ver_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'LVS Circuit Comparison', 'calbr_ver_user'); return false;">LVS Circuit Comparison</a>” chapter in the <cite class="cite">Calibre Verification User’s
Manual</cite> for a discussion of these topics.</p>
<p class="p">Even if any of these statements
are enabled from the LVS perspective, the transformations are <span class="ph FontProperty emphasis">not performed</span> in
Calibre PERC unless the XFORM keyword set is specified. The XFORM selections
are progressive, as shown in the following table.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__idb5a9c4c1-f774-4831-8f46-0d88b6e2c49a" class="table" frame="border" border="1" rules="cols"><caption><span class="tablecap"><span class="table--title-label">Table 1. </span>XFORM Keyword Options for PERC Load</span></caption><colgroup><col style="width:1.562in" /><col style="width:1.562in" /><col style="width:1.362in" /><col style="width:1.362in" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d27897e877"><p class="p">Keyword</p>
</th>
<th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d27897e880"><p class="p">Device Reduction and
Unused Filtering</p>
</th>
<th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d27897e883"><p class="p">Logic Injection</p>
</th>
<th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d27897e886"><p class="p">Gate Recognition</p>
</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27897e877 "><p class="p">REDUCTION</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27897e880 "><p class="p">Yes</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27897e883 "><p class="p">No</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27897e886 "><p class="p">No</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27897e877 "><p class="p">INJECTION</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27897e880 "><p class="p">Yes</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27897e883 "><p class="p">Yes</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27897e886 "><p class="p">No</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27897e877 "><p class="p">ALL</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27897e880 "><p class="p">Yes</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27897e883 "><p class="p">Yes</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27897e886 "><p class="p">Yes</p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p">Be aware that for any of the
LVS Reduce family, LVS Filter Unused family, LVS Inject Logic, or
LVS Recognize Gates statements for which you explicitly disable
the associated functionality by specifying NO or NONE, PERC Load <span class="ph FontProperty emphasis">will not override</span> these
explicit settings.</p>
<p class="p">If you specify PERC Load … XFORM
ALL, you should normally specify LVS Inject Logic NO if your Calibre
PERC check procs depend upon finding normal logic gates in the netlist.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">If you
specify XFORM and you experience runtime errors due to numeric properties
not being found (the transformed netlist shows UNKNOWN property
values), you should check the effective property computation for
the affected device to ensure it calculates the necessary reduced
properties.</p>
</div>
<p class="p">The XFORM keyword should be avoided
in Calibre PERC LDL applications.</p>
</div>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><div class="section Subsection" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__id8575de8b-1904-476f-97b5-25bdcc6ae778"><h2 class="title Subheading sectiontitle">Example 1</h2><p class="p">Assume the rule file has the following
statements: </p>
<pre class="pre codeblock"><code>  LVS FILTER UNUSED MOS yes
  LVS REDUCE SPLIT GATES no
  LVS INJECT LOGIC no
  LVS RECOGNIZE GATES simple
  PERC LOAD ex_func XFORM all INIT setup SELECT check_w</code></pre><p class="p">The choice of ALL in the PERC Load
statement triggers the following netlist transformations: device
reduction, unused device filtering, logic injection, and gate recognition.
However, the transformations are done according to the LVS specification
statements present in the rule file. In this case, unused MOS devices
are filtered out. The structures enabled by the default reduction
rules, such as parallel MOS devices, are reduced, but split gates
are not reduced. Logic injection is not performed because it is
disabled. Finally, simple gates are formed while complex gates are
not. </p>
</div>
<div class="section Subsection" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__id7f10ba23-fc55-43c5-a288-5a49557f3ad4"><h2 class="title Subheading sectiontitle">Example 2</h2><p class="p">This example demonstrates the execution
order for procedures. Assume the rule file has two TVF functions
and four PERC Load statements: </p>
<pre class="pre codeblock"><code>TVF FUNCTION func_1 [/*

    proc setup_1 {} {
      # PERC commands
    }
    proc check_1 {} {
      # PERC commands
    }
    proc check_2 {} {
      # PERC commands
    }
    proc check_3 {} {
      # PERC commands
    }
    proc check_4 {} {
      # PERC commands
    }
  */]

  TVF FUNCTION func_2 [/*

    proc setup_a {} {
      # PERC commands
    }
    proc setup_b {} {
      # PERC commands
    }
    proc check_a {} {
      # PERC commands
    }
    proc check_b {} {
      # PERC commands
    }
*/]

PERC LOAD func_1 INIT setup_1 SELECT check_1 check_2
PERC LOAD func_1 XFORM all INIT setup_2 SELECT check_3
PERC LOAD func_1 XFORM reduction INIT setup_1 SELECT check_4 
PERC LOAD func_2 XFORM all INIT setup_a SELECT check_b

LVS INJECT LOGIC NO // recommended setting with XFORM all</code></pre><p class="p">Calibre PERC executes the check
procs in this order:</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__id858719d7-6b93-416e-9afb-14c47ffab5b5" class="table" frame="border" border="1" rules="cols"><caption><span class="tablecap"><span class="table--title-label">Table 2. </span>Order of Check Proc Execution in Calibre
PERC</span></caption><colgroup><col style="width:1.106in" /><col style="width:5.068in" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d27897e969"><p class="p">Procedure</p>
</th>
<th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d27897e972"><p class="p">PERC Load statements</p>
</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27897e969 "><p class="p">setup_1, </p>
<p class="p">check_1, </p>
<p class="p">check_2</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27897e972 "><p class="p">PERC LOAD func_1 INIT
setup_1 SELECT check_1 check_2</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27897e969 "><p class="p">setup_1,</p>
<p class="p">check_4</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27897e972 "><p class="p">PERC LOAD func_1 XFORM
reduction INIT setup_1 SELECT check_4</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27897e969 "><p class="p">setup_2,</p>
<p class="p">check_3</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27897e972 "><p class="p">PERC LOAD func_1 XFORM
all INIT setup_2 SELECT check_3</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27897e969 "><p class="p">setup_a,</p>
<p class="p">check_b</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27897e972 "><p class="p">PERC LOAD func_2 XFORM
all INIT setup_a SELECT check_b</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section Subsection" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__idb169cd71-9dcd-4985-9e26-4f952f4e2c62"><h2 class="title Subheading sectiontitle">Example 3</h2><p class="p">In this example, SPICE patterns
in <span class="ph filepath">global_pattern.sp</span> are available for the
checks in the first PERC Load statement, but not the second. SPICE
patterns in <span class="ph filepath">local_pattern.sp</span> are available
only for the checks in the second PERC Load statement.</p>
<pre class="pre codeblock"><code>PERC PATTERN PATH global_pattern.sp

PERC LOAD func_1 INIT setup_1 SELECT check_1 check_2

// use local pattern file instead
PERC LOAD func_1 INIT setup_2 PATTERN local_pattern.sp 
  SELECT check_3 check_4</code></pre></div>
<div class="section Subsection" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__idb3548443-3a03-486f-927f-d0d12526f207"><h2 class="title Subheading sectiontitle">Example
4</h2><p class="p">Here, rule2 is processed for informational purposes only and
does not contribute to the discrepancy count:</p>
<pre class="pre codeblock"><code>PERC LOAD perc.rules INIT setup SELECT rule1 rule2 rule3
SELECTTYPE INFO rule2</code></pre></div>
<div class="section Subsection" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__idecf3b38b-4d9c-4397-8787-bacdc650797c"><h2 class="title Subheading sectiontitle">Example 5</h2><p class="p">When checks are run in parallel in MT runs, each thread has its
own Tcl interpreter. It is not permitted to modify global variables
or handles, or to pass global iterators across threads running parallel
rule checks. It is possible to read from global variables or collection
handles across threads.</p>
<p class="p">In the following rule file code, a global ::DEBUG variable and
a global ::g_test_collection handle are set in the input_pad_init
proc. The ::DEBUG variable is referenced both in the TEST_1 check
run on the main thread (thread 0) and in the PARALLEL checks. The ::g_test_collection
handle is referenced in the TEST_1 proc to populate the hash collection
keys with net paths. This occurs in the main thread before the PARALLEL
rule checks are run. The PARALLEL rule checks then access the collection
to verify which net paths were stored in it.</p>
<pre class="pre codeblock"><code>LVS POWER NAME VDD
LVS GROUND NAME GND

PERC REPORT OPTION all_net_type
PERC REPORT perc.report

// run input_pad_init and TEST_1 on thread 0
// then run the info checks in parallel
PERC LOAD perc_lib INIT input_pad_init SELECT TEST_1
  PARALLEL
    INFO_Power_Net
    INFO_Ground_Net
    INFO_Signal_Net
  SELECTTYPE INFO
    INFO_Power_Net
    INFO_Ground_Net
    INFO_Signal_Net</code></pre><pre class="pre codeblock"><code>TVF FUNCTION perc_lib [/*
package require CalibreLVS_PERC

  proc input_pad_init {} {
    perc::define_net_type Power lvsPower
    perc::define_net_type Ground lvsGround
    perc::define_net_type TopPorts lvsTopPorts
    perc::define_type_set Signal {TopPorts &amp;&amp; !Power &amp;&amp; !Ground}
    perc::create_net_path -type R -pin {POS NEG} -break {TopPorts}
  # define global hash collection handle
    set ::g_test_collection [perc::collection -create -name "TEST" \
      -lifetime currentLoad]
  # enable for debug messaging
    set ::DEBUG 1
  }</code></pre><pre class="pre codeblock"><code>  # get flattened net path.
  # -fromTop can be computationally expensive when used many times.
  proc get_path {net} {
    set path [perc::name $net -fromTop]
    if {[info exists ::DEBUG]} {
      puts "---NET PATH: $path"
    }
    return $path
  }

  # populate global collection with net paths
  proc in_cond {net} {
    if {[info exists ::DEBUG]} {
      puts "---PROCESSED NET on thread 0: [perc::name $net]"
    }
    set net_path [get_path $net]
    perc::collection $::g_test_collection -add -key $net_path -value 1
    return 1
  }</code></pre><pre class="pre codeblock"><code>  # this check is run on thread 0
  proc TEST_1 {} {
    perc::check_net -netType Signal -condition in_cond \
      -comment "populate Signal nets"
  }

  # these checks are run on parallel threads
  proc INFO_Ground_Net {} {perc::check_net -netType Ground \
    -comment "Ground nets"}
  proc INFO_Power_Net  {} {perc::check_net -netType Power  \
    -comment "Power nets"}</code></pre><pre class="pre codeblock"><code>  # check for the existence of net paths in the global collection
  proc test_cond {net} {
    if {[info exists ::DEBUG]} {
      puts "---PROCESSED NET: [perc::name $net]"
    }
    set net_path [get_path $net]
    set val [perc::collection $::g_handle -hasKey $net_path]
    if {$val} {
      perc::report_base_result -value "NET IN COLLECTION"
      return 1
    }
    return 0
  }

  # check for existence of net paths in the global collection outside
  # of thread 0
  proc INFO_Signal_Net {} {
    set ::g_handle [perc::collection -get -name TEST]
    perc::check_net -netType Signal -condition test_cond \
      -comment "test Signal nets"
  }
*/
]</code></pre><p class="p">The transcript could contain entries like the following. Notice
the global ::DEBUG variable has been accessed from threads 0 and
1.</p>
<pre class="pre codeblock"><code>  RuleCheck "TEST_1" executed on thread 0.  CPU TIME = 0  REAL TIME = 0 
 LVHEAP = 3/5/5  MALLOC = 40/40/40  ELAPSED TIME =3
    Checking RULE: populate Signal nets
---PROCESSED NET on thread 0: A
---NET PATH: A
---PROCESSED NET on thread 0: Z
---NET PATH: Z
...</code></pre><pre class="pre codeblock"><code>  RuleCheck "INFO_Signal_Net" executed on thread 1.  CPU TIME = 0  
REAL TIME = 0  LVHEAP = 4/5/5  MALLOC = 45/45/45  ELAPSED TIME = 3
    Checking RULE: test Signal nets
---PROCESSED NET: A
---NET PATH: A
---PROCESSED NET: Z
---NET PATH: Z</code></pre><p class="p">Here is an excerpt from a <span class="ph filepath">perc.report</span>:</p>
<pre class="pre codeblock"><code>o RuleCheck(SELECTTYPE INFO):  INFO_Signal_Net 
(test Signal nets)
-------------------------------------------------------------------------

  5    Net  Z [ Signal TopPorts ]
       NET IN COLLECTION


  6    Net  A [ Signal TopPorts ]
       NET IN COLLECTION</code></pre><p class="p">This indicates the global handle ::g_test_collection was accessed
by the INFO_Signal_Net check on thread 1, but was defined and populated
by the TEST_1 check on thread 0.</p>
</div>
<div class="section Subsection" id="id76e78f13-26d5-4473-ac6b-9107ef199e2a__id9cd9faa2-368f-4d3d-976b-448643457993"><h2 class="title Subheading sectiontitle">Example 6</h2><p class="p">It is permissible to enclose a set of <span class="keyword ParameterName OptionalReplaceable">check_proc</span> arguments
in a <span class="keyword ParameterName RequiredReplaceable">select_group</span> in
parentheses, and the parentheses are ignored. Consider this rule
file excerpt:</p>
<pre class="pre codeblock"><code>#IFDEF SELECT_PARALLEL
  PERC LOAD tvf_func INIT init SELECT PARALLEL 
#ELSE
  PERC LOAD tvf_func INIT init SELECT 
#ENDIF
  rule1 rule4

#IFDEF RUN_ADDITIONAL
  (rule5 rule6)
#ENDIF
  (rule2 rule3)</code></pre><p class="p">If SELECT_PARALLEL is undefined, then any parentheses
in this code are ignored, and any active rule checks enclosed by
parentheses are run single-threaded. If SELECT_PARALLEL is defined,
then active rule checks enclosed in parentheses are treated as a
sequential parallel check set.</p>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_PercCommands_id42270203.html" title="The commands in this section begin with “PERC” and are used in Calibre PERC runs.">PERC … Commands</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "svrf_ur"
                DocTitle = "Standard Verification Rule Format (SVRF) Manual"
                PageTitle = "PERC Load"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_PercLoad_id76e78f13.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Standard Verification Rule Format (SVRF) Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>