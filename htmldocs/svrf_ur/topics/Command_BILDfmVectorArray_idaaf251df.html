<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="dfm_vector_array" />
<meta name="abstract" content="Provides access to DFM vector properties from a set of polygons on a pin, pin layer, or auxiliary layer. The set of properties is accessible through a TVF object created by this function." />
<meta name="description" content="Provides access to DFM vector properties from a set of polygons on a pin, pin layer, or auxiliary layer. The set of properties is accessible through a TVF object created by this function." />
<meta name="prodname" content="Standard Verification Rule Format (SVRF) Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-26" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="HighlightChanges" content="yes" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="svrf_ur" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="3/25/21" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Standard Verification Rule Format (SVRF) Manual" />
<meta name="CSHelp" content="No" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P10089,product.id.P10099,product.id.P10119,product.id.P10101,product.id.P11427,product.id.P10115,product.id.P11426,product.id.P10122,product.id.P11493" />
<meta name="ConditionFiltering" content="XML" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idaaf251df-6c1d-442d-ac52-b6ff19374976" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>dfm_vector_array</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="dfm_vector_array" />
<meta name="attributes" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P10089,product.id.P10099,product.id.P10119,product.id.P10101,product.id.P11427,product.id.P10115,product.id.P11426,product.id.P10122,product.id.P11493" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="idaaf251df-6c1d-442d-ac52-b6ff19374976">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">dfm_vector_array</h1>
<div class="body refbody CommandRefBody"><div class="abstract CommandRefAbstract"><p class="p ContextMGC">Device DFM
Property data retrieval function.</p>
<p class="shortdesc">Provides access to DFM vector
properties from a set of polygons on a pin, pin layer, or auxiliary layer.
The set of properties is accessible through a TVF object created
by this function.</p>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName Required">DFM_VECtor_ARRay(</span><span class="keyword ParameterName RequiredReplaceable">pin_or_layer</span><span class="keyword ParameterName Required">,</span> <span class="keyword ParameterName Required">“</span><span class="keyword ParameterName RequiredReplaceable">property_name</span><span class="keyword ParameterName Required">”)</span></p>
</div>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="idaaf251df-6c1d-442d-ac52-b6ff19374976__id7e18fbaa-b86d-49a0-bcf3-68c15fb13d63"><span class="keyword ParameterName RequiredReplaceable">pin_or_layer</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">A required pin or layer name.
A layer is derived from a <a class="xref fm:HeadingOnly" href="Command_DfmProperty_idf1f176c5.html#idf1f176c5-0d5a-4406-95d0-b54438157ae8__Command_DfmProperty_idf1f176c5.xml#idf1f176c5-0d5a-4406-95d0-b54438157ae8" title="Associates user-defined properties to individual objects on the input layer and creates a derived layer containing only those objects that meet the specified criteria.">DFM Property</a> or <a class="xref fm:HeadingOnly" href="Command_DeviceLayer_id07477deb.html#id07477deb-3662-4853-8481-687bda4880a4__Command_DeviceLayer_id07477deb.xml#id07477deb-3662-4853-8481-687bda4880a4" title="Generates a layer that contains seed shapes from all device instances with the specified type and model name. Seed shapes are those from device_layer arguments in Device operations. Used only in Calibre nmLVS/Calibre nmLVS-H, Calibre YieldAnalyzer, and ICtrace.">Device Layer</a> ANNOTATE operation. A pin must
have DFM properties associated with it.</p>
<p class="p">In a device property computation
program, this parameter is a required pin, pin layer, or auxiliary
layer name.</p>
<p class="p">In a device annotation program
this parameter is a name of a pin layer or an annotation auxiliary
layer in a <a class="xref fm:HeadingOnly" href="Command_Device_id89f67149.html#id89f67149-593d-4a42-bf07-d2052c906774__Command_Device_id89f67149.xml#id89f67149-593d-4a42-bf07-d2052c906774" title="Defines devices and calculates properties for circuit extraction.">Device</a> operation. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="idaaf251df-6c1d-442d-ac52-b6ff19374976__idda171aa4-2a43-4b44-8d92-db16982fd586"><span class="keyword ParameterName RequiredReplaceable">property_name</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">A required DFM property name.
The property must be defined in the same layer operation used to
derive the layer for the <span class="keyword ParameterName RequiredReplaceable">pin_or_layer</span> argument.</p>
</dd>
</dl>
</div>
</div>
<div class="section ReturnedValues"><h2 class="title Subheading sectiontitle">Return Values</h2><p class="p">TVF object.</p>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">This function may be used in
device annotation and device property computation programs.</p>
<p class="p">This function accesses a set
of DFM vector properties (such as those generated by the DFM Property
VECTOR or VPROPERTY functions). DFM vector properties are arranged
as a sequence of measurement tuples. They are arranged by name from <span class="ph FontProperty emphasis">multiple</span> polygons
on a pin, pin layer, or auxiliary layer of the device. </p>
<p class="p">This function is similar to <a class="xref fm:HeadingOnly" href="Command_BILDfmVectorValue_id4b951b76.html#id4b951b76-1ce6-466d-bc87-9fdf3685a4b8__Command_BILDfmVectorValue_id4b951b76.xml#id4b951b76-1ce6-466d-bc87-9fdf3685a4b8" title="Provides access to a DFM vector property from a single polygon on a pin, pin layer, or auxiliary layer. The set of properties is accessible through a TVF object created by this function.">dfm_vector_value</a> except
that it is not limited to a single polygon. The output object of
this function is used by <a class="xref fm:HeadingOnly" href="Command_BILDfmDeviceDfmVecArrMeasurements_id6f39e4e4.html#id6f39e4e4-68a2-4009-af8f-1612973d2b28__Command_BILDfmDeviceDfmVecArrMeasurements_id6f39e4e4.xml#id6f39e4e4-68a2-4009-af8f-1612973d2b28" title="Converts DFM-style rectilinear measurement array vectors into Device enclosure-vector-style width and length measurements in database units.">device::dfm_vec_arr_measurements</a> and <a class="xref fm:HeadingOnly" href="Command_BILDfmDeviceScaledDfmVecArrMeasurements_id652e0e1c.html#id652e0e1c-f0d5-4cfc-af79-fc04960bed45__Command_BILDfmDeviceScaledDfmVecArrMeasurements_id652e0e1c.xml#id652e0e1c-f0d5-4cfc-af79-fc04960bed45" title="Converts DFM-style rectilinear measurement array vectors into scaled Device enclosure-vector-style width and length measurements in database units.">device::scaled_dfm_vec_arr_measurements</a> functions.</p>
<div class="section Subsection" id="idaaf251df-6c1d-442d-ac52-b6ff19374976__id1cfcb688-b2f9-4bfe-805e-aa9f54a023db"><h2 class="title Subheading sectiontitle">TVF Object for dfm_vector_array</h2><p class="p">This function returns a TVF object
that represents a set of individual polygons, each of which has
a DFM Property vector value associated with it. The DFM Property
operation produces an array of measurement tuples that are associated
with a particular shape. These properties are in turn transferred
from a device pin, pin layer, or auxiliary layer to the property
computation program by the DFM_VECtor_ARRay function. The object
is referenced in a Tcl proc within a TVF Function block, which is
called by TVF_NUMeric_FUNction.</p>
<p class="p">The TVF object
provides subcommands for determining the number of polygons represented
by the referenced layer or pin, determining the dimensions of the
DFM Property vector for a particular polygon, and accessing individual
values by polygon and vector index coordinates. It also provides
a subcommand by which a device can be flagged to the Calibre device
extraction system as a bad device. </p>
<p class="p">Throughout
this section, <span class="keyword ParameterName RequiredReplaceable">object</span> refers
to the TVF object produced by the DFM_VECtor_ARRay function. The
following subcommands are provided for the DFM_VECtor_ARRay object:</p>
<ul class="ul"><li class="li" id="idaaf251df-6c1d-442d-ac52-b6ff19374976__idbebef7b1-c99a-4314-a512-22352e4f904f"><p class="p"><span class="keyword ParameterName RequiredReplaceable">object</span> <span class="keyword ParameterName Required">polygon_count</span> —
Returns the number of polygons associated with the pin, pin layer,
or auxiliary layer referenced by the DFM_VECtor_ARRay function. </p>
</li>
<li class="li" id="idaaf251df-6c1d-442d-ac52-b6ff19374976__id54499bc8-9caa-49ab-a22f-e6e0f02add2a"><p class="p"><span class="keyword ParameterName RequiredReplaceable">object</span> <span class="keyword ParameterName Required">row_count</span> <span class="keyword ParameterName RequiredReplaceable">polygon_number</span> —
Returns the number of measurement rows or measurement tuples in
the DFM vector property associated with <span class="keyword ParameterName RequiredReplaceable">polygon_number</span>.
The <span class="keyword ParameterName RequiredReplaceable">polygon_number</span> must
evaluate to a non-negative integer less than polygon_count.</p>
</li>
<li class="li" id="idaaf251df-6c1d-442d-ac52-b6ff19374976__id272815d7-cb8d-4a64-b267-8981a89c24d1"><p class="p"><span class="keyword ParameterName RequiredReplaceable">object</span> <span class="keyword ParameterName Required">measurement_count</span> <span class="keyword ParameterName RequiredReplaceable">polygon_number</span> —
Returns the dimension of the measurement tuples in the DFM vector
property associated with <span class="keyword ParameterName RequiredReplaceable">polygon_number</span>.
The <span class="keyword ParameterName RequiredReplaceable">polygon_number</span> must
evaluate to a non-negative integer less than polygon_count.</p>
</li>
<li class="li" id="idaaf251df-6c1d-442d-ac52-b6ff19374976__id32d90718-5ff8-4ed8-9af4-2b17d8db0c63"><p class="p"><span class="keyword ParameterName RequiredReplaceable">object</span> <span class="keyword ParameterName Required">value</span> <span class="keyword ParameterName RequiredReplaceable">polygon_number row measurement</span> —
Returns the value of the DFM vector property associated with the
polygon having the <span class="keyword ParameterName RequiredReplaceable">polygon_number</span>,
at the <span class="keyword ParameterName RequiredReplaceable">row measurement</span> location
of the DFM vector property. The <span class="keyword ParameterName RequiredReplaceable">row</span> and <span class="keyword ParameterName RequiredReplaceable">measurement</span> arguments
are expected to evaluate to non-negative integers. The <span class="keyword ParameterName RequiredReplaceable">polygon_number</span> must evaluate
to a non-negative integer less than polygon_count.</p>
</li>
<li class="li" id="idaaf251df-6c1d-442d-ac52-b6ff19374976__idbf4e057c-4793-481a-b929-71bac537a558"><p class="p"><span class="keyword ParameterName RequiredReplaceable">object</span> <span class="keyword ParameterName Required">bad_device</span> —
Flags a device as bad to the Calibre device extraction system. After
a device is flagged as bad it is handled similarly to other bad
devices (that is, devices missing pin interactions, and so forth.)</p>
</li>
</ul>
</div>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><div class="section Subsection" id="idaaf251df-6c1d-442d-ac52-b6ff19374976__idcab5f6f3-9160-412d-b42d-f940c3ee13aa"><h2 class="title Subheading sectiontitle">Example 1</h2><p class="p">This example shows the calculation of well
enclosure or stress effect (strained silicon) properties. </p>
<p class="p">The SEFFA_DFM and SEFFB_DFM properties that
are calculated in this example are for MN devices and are measured
perpendicularly from the “width” edges of gate polygons. If enclosure properties
measured parallel to width edges are needed, then those calculations
would need to be added to the example, and the code would be similar
to what is used. The code can be configured for MP devices also.</p>
<p class="p">The use of DFM_VECtor_ARRay in the DEVice property computation
facilitates retrieval of measurement values when there is more than
one ngate_prop polygon interacting with an ngate polygon.</p>
<p class="p">The use of <a class="xref fm:HeadingOnly" href="Command_BILDfmDeviceScaledDfmVecArrMeasurements_id652e0e1c.html#id652e0e1c-f0d5-4cfc-af79-fc04960bed45__Command_BILDfmDeviceScaledDfmVecArrMeasurements_id652e0e1c.xml#id652e0e1c-f0d5-4cfc-af79-fc04960bed45" title="Converts DFM-style rectilinear measurement array vectors into scaled Device enclosure-vector-style width and length measurements in database units.">device::scaled_dfm_vec_arr_measurements</a> in the
TVF FUNCTION block is consistent with the need to scale the measurement
values from DFM Property (which are in database units) to user units,
which are consistent with typical device properties. If user units
are not needed, then <a class="xref fm:HeadingOnly" href="Command_BILDfmDeviceDfmVecArrMeasurements_id6f39e4e4.html#id6f39e4e4-68a2-4009-af8f-1612973d2b28__Command_BILDfmDeviceDfmVecArrMeasurements_id6f39e4e4.xml#id6f39e4e4-68a2-4009-af8f-1612973d2b28" title="Converts DFM-style rectilinear measurement array vectors into Device enclosure-vector-style width and length measurements in database units.">device::dfm_vec_arr_measurements</a> may be
used.</p>
<pre class="pre codeblock leveled"><code>VARIABLE wproxd 5 // well proximity background distance</code></pre><pre class="pre codeblock leveled"><code>// n-gate "width" orientation edges
ngate_width_orient = <a class="xref fm:HeadingOnly" href="Command_CoincidentEdge_ida9774540.html#ida9774540-e5aa-4674-8d3e-8cd0acdd246b__Command_CoincidentEdge_ida9774540.xml#ida9774540-e5aa-4674-8d3e-8cd0acdd246b" title="Selects edges or portions of edges that coincide with an edge from a second layer.">Coincident Edge</a> ngate sd</code></pre><pre class="pre codeblock leveled"><code>// measure the enclosure perpendicular to the gate width
ngate_width_enclosure = <a class="xref fm:HeadingOnly" href="Command_Enclosure_id9928c11b.html#id9928c11b-e12e-4a3e-8ac9-99ce99c28758__Command_Enclosure_id9928c11b.xml#id9928c11b-e12e-4a3e-8ac9-99ce99c28758" title="Measures the separation between the exterior sides of edges from one layer and the interior sides of edges from another layer. Measured edge pairs which satisfy the given constraint are output. Intersecting edge pairs are never measured, by default.">Enclosure</a> ngate_width_orient pwell &lt; wproxd 
                        OPPOSITE</code></pre><pre class="pre codeblock leveled"><code>// assign measurement properties to the ngate sides
ngate_width_prop = <a class="xref fm:HeadingOnly" href="Command_DfmProperty_idf1f176c5.html#idf1f176c5-0d5a-4406-95d0-b54438157ae8__Command_DfmProperty_idf1f176c5.xml#idf1f176c5-0d5a-4406-95d0-b54438157ae8" title="Associates user-defined properties to individual objects on the input layer and creates a derived layer containing only those objects that meet the specified criteria.">DFM Property</a> ngate_width_orient 
                                ngate_width_enclosure
                                ngate_length_orient
                    OVERLAP ABUT ALSO MULTI SPLIT
              [ PER = <a class="xref fm:HeadingOnly" href="Command_DfmFuncRangeXxy_id4ab4f3c9.html#id4ab4f3c9-442c-4ae2-a1b4-bce7afc26eb6__Command_DfmFuncRangeXxy_id4ab4f3c9.xml#id4ab4f3c9-442c-4ae2-a1b4-bce7afc26eb6" title="Computes a vector of tuples, with each tuple containing a coordinate point value and associated measurement values from the input vector. The coordinate values of the output tuples must be within a specified interval.">RANGE_XXY</a>( 
                        <a class="xref fm:HeadingOnly" href="Command_DfmFuncSortMergeXxy_ida90abbb2.html#ida90abbb2-8bbd-409b-896d-825b44cad29d__Command_DfmFuncSortMergeXxy_ida90abbb2.xml#ida90abbb2-8bbd-409b-896d-825b44cad29d" title="Computes minimum measurement values associated with coordinate intervals contained in a set of input vectors. Outputs the minimum measurement values with associated interval coordinates in vector form.">SORT_MERGE_XXY</a>( 
                          <a class="xref fm:HeadingOnly" href="Command_DfmFuncConcat_idcc1f217f.html#idcc1f217f-396d-4f00-8b42-8c155c97fa70__Command_DfmFuncConcat_idcc1f217f.xml#idcc1f217f-396d-4f00-8b42-8c155c97fa70" title="Concatenates input vectors into a vector of vectors. Valid only in a DFM Property operation.">CONCAT</a>(
                            <a class="xref fm:HeadingOnly" href="Command_DfmFuncVector_id1984fb95.html#id1984fb95-a789-4ddf-8df7-f4eec2b76c36__Command_DfmFuncVector_id1984fb95.xml#id1984fb95-a789-4ddf-8df7-f4eec2b76c36" title="Creates a vector of numeric type properties. Supported only in DFM Property and DFM Property Merge operations.">VECTOR</a>(<a class="xref fm:HeadingOnly" href="Command_DfmFuncEcmin_id6dc567d0.html#id6dc567d0-2e92-4eb9-bd2a-a533fd463050__Command_DfmFuncEcmin_id6dc567d0.xml#id6dc567d0-2e92-4eb9-bd2a-a533fd463050" title="Returns the smaller value of the two endpoint coordinates of the EC segment, where EC is the mutual edge projection length of two edges or the length of a single edge. Supported only for DFM Property operations.">ECMIN</a>(ngate_width_enclosure), 
                              <a class="xref fm:HeadingOnly" href="Command_DfmFuncEcmax_id1866328c.html#id1866328c-38c5-4923-910f-1966ebcdbe73__Command_DfmFuncEcmax_id1866328c.xml#id1866328c-38c5-4923-910f-1966ebcdbe73" title="Returns the larger value of the two endpoint coordinates of the EC segment, where EC is the mutual edge projection length of two edges or the length of a single edge. Only supported in DFM Property operations.">ECMAX</a>(ngate_width_enclosure), 
                              <a class="xref fm:HeadingOnly" href="Command_DfmFuncEw_idac5649ef.html#idac5649ef-f3bd-4059-8291-390fa58ff2cd__Command_DfmFuncEw_idac5649ef.xml#idac5649ef-f3bd-4059-8291-390fa58ff2cd" title="Returns the minimum distance (Edge Width) between each edge pair on the input layer.">EW</a>(ngate_width_enclosure) 
                            ), // measure any error clusters
                            VECTOR( ECMIN(ngate_width_orient), 
                              ECMAX(ngate_width_orient), 
                              wproxd  // 5 in VARIABLE statement
                                      // defined previously.
                             ) // set maximum background distance.
                          ) // end CONCAT
                        ), // end SORT_MERGE_XXY
                         VECTOR( ECMIN(ngate_width_orient), 
                         ECMAX(ngate_width_orient))
                       ) // end RANGE_XXY
              ]</code></pre><pre class="pre codeblock leveled"><code>// assign the perpendicular measurement properties to ngate
ngate_prop = DFM PROPERTY ngate ngate_width_prop 
             OVERLAP ABUT ALSO
             [ PER1 = <a class="xref fm:HeadingOnly" href="Command_DfmFuncVProperty_id37e22261.html#id37e22261-405e-4628-96d5-f85f98b47ad1__Command_DfmFuncVProperty_id37e22261.xml#id37e22261-405e-4628-96d5-f85f98b47ad1" title="Accesses vector type DFM properties from objects on the input layer. Supported only with DFM Property operations and DFM Function.">VPROPERTY</a>( ngate_width_prop, PER, 1) ]
             [ PER2 = VPROPERTY( ngate_width_prop, PER, 2) ]</code></pre><pre class="pre codeblock leveled"><code>DEVICE MN ngate ngate(G) sd(S) sd(D) pwell(B) &lt;ngate_prop&gt;
[
  property SEFFA_DFM, SEFFB_DFM

// Note that DFM PROPERTY produces database unit measurements while
// the Enclosure operation returns user units.
//
// Adjustment by UNIT_LENGTH() may be required to convert the
// measurements to values expected by downstream tools.
//
// DFM_VECTOR_ARRAY is used because there is more than one sd shape
// per side interacting with the gate
  A_DFM = DFM_VEC_ARR( ngate_prop, "PER1" )
  B_DFM = DFM_VEC_ARR( ngate_prop, "PER2" )
  SEFFA_DFM = TVF_NUM_FUN::device_func::calc_seff( A_DFM, UNIT_LENGTH() )
  SEFFB_DFM = TVF_NUM_FUN::device_func::calc_seff( B_DFM, UNIT_LENGTH() )
]

TVF FUNCTION device_func [/*
  package require CalibreLVS_DEVICE_DFM
  proc calc_seff { dfm_vec_array unit_length } {

    set polygon_count [ $dfm_vec_array polygon_count ]
    set sum 0.0
    set total_W 0.0
# iterate over all the property-bearing polygons
    for {set p 0} {$p &lt; $polygon_count} {incr p} {
      set measure_list [ device::scaled_dfm_vec_arr_measurements \
                         $dfm_vec_array $p [ $unit_length ] ]
# use this if there is no need to scale the measurements
#     set measure_list [ device::dfm_vec_arr_measurements \
#                        $dfm_vec_array $p ]
      foreach segment $measure_list {
        foreach { W L } $segment {
          set sum [ expr { $sum + $W * $L } ]
          set total_W [ expr { $total_W + $W } ]
        }
      }
    }
    return [ expr { $sum / $total_W } ]
  }
*/]</code></pre></div>
<div class="section Subsection" id="idaaf251df-6c1d-442d-ac52-b6ff19374976__id602b60ab-55c9-4b8b-ac20-b9d2f372f1f1"><h2 class="title Subheading sectiontitle">Example
2</h2><p class="p">The following computation creates
a device property called sum_res from the DFM property RES that
is constructed on the aux_prop auxiliary layer shape. </p>
<p class="p">A tcl proc get_sum is defined in
a <a class="xref fm:HeadingOnly" href="Command_TVFFunction_id7a9f1c9b.html#id7a9f1c9b-4b64-4768-8e1a-ca6b448bb1a7__Command_TVFFunction_id7a9f1c9b.xml#id7a9f1c9b-4b64-4768-8e1a-ca6b448bb1a7" title="Defines a function block of Tcl code.">TVF Function</a> block to process the TVF object output by the DFM_VECtor_ARRay
function. The get_sum proc sums the properties across all input polygons.
Any device that includes more than two polygons on this device layer
is marked as bad.</p>
<pre class="pre codeblock"><code>aux_prop = DFM PROPERTY aux1 g2s OVERLAP ABUT ALSO MULTI
           [ RES = RANGE_XXY( SORT_MERGE_XXY( 
                     VECTOR( ECMIN(g2s), ECMAX(g2s), EW(g2s) )
                     ),
                     VECTOR( ECMIN(g2s), ECMAX(g2s) )
                   ) 
           ]</code></pre><pre class="pre codeblock"><code>DEVICE MP gate gate(G) sd(S) sd(D) &lt;aux_prop&gt; [
  property sum_res
  sum_res_tcl = DFM_VECtor_ARRay( aux_prop, "RES" )
  sum_res = <a class="xref fm:HeadingOnly" href="Command_BILDevPropTvfNumericFunction_id3a059e8f.html#id3a059e8f-46c1-4ea9-8e26-147a4b8fcb57__Command_BILDevPropTvfNumericFunction_id3a059e8f.xml#id3a059e8f-46c1-4ea9-8e26-147a4b8fcb57" title="Provides access to a numeric value returned by a Tcl procedure defined within a TVF Function definition.">tvf_numeric_function</a>::device_func::get_sum( sum_res_tcl )
]</code></pre><pre class="pre codeblock"><code>// Define the tcl proc get_sum in a TVF Function block
TVF FUNCTION device_func [/*
package require CalibreLVS_DEVICE_DFM</code></pre><pre class="pre codeblock"><code>proc get_sum { dfm_vec_array } {
  set pc [ $dfm_vec_array polygon_count ]
  if { $pc &gt; 2 } {
    $dfm_vec_array bad_device
    return 0.0
  }
  set accum 0.0
    for { set p 0 } { $p &lt; $pc } { incr p } {
      set meas_count [ $dfm_vec_array measurement_count $p ]
      set row_count [ $dfm_vec_array row_count $p]
        for { set i 0 } { $i &lt; $row_count } { incr i } {
          for {set j 0} { $j &lt; $meas_count } { incr j } {
            set accum [ expr { $accum + [ $dfm_vec_array value $p $i $j ] } ]
          }
        }
      }
      return $accum
}
*/]</code></pre></div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_DeviceAnnotationBuiltInLanguage_id7f618268.html" title="The Device annotation built-in language is useful for MOS device well proximity and shallow trench isolation (STI) stress effect property calculations and similar applications. It is primarily used to extract physical parameters for the newer BSIM4 models.">Device Annotation Built-In Language</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../topics/General_DeviceAnnotationFunctionReference_idb2a64cb2.html#idb2a64cb2-22e9-491f-a8e8-fa279180e4f2__" title="A variety of built-in functions, which are based upon DFM properties, provide access to geometric and connectivity information. You can use these functions within numeric, string, or complex expressions for device property computation. Numeric results can be used as arguments to relational operators.">Device Annotation Function Reference</a></div>
<div><a class="link" href="../topics/General_TvfFunctionalInterfaceDevicePropertyCalculation_idea8bad97.html#idea8bad97-46ea-48f8-aec1-7ee829d325cb__" title="The TVF functional interface calculates advanced device properties. The Device property computation and annotation languages call Tcl procedures defined in TVF Function statements in the SVRF rule file in order to calculate the properties.">TVF Functional Interface for Device Property Calculation</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "svrf_ur"
                DocTitle = "Standard Verification Rule Format (SVRF) Manual"
                PageTitle = "dfm_vector_array"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_BILDfmVectorArray_idaaf251df.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Standard Verification Rule Format (SVRF) Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>