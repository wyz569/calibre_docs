<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="device::enclosure_measurements" />
<meta name="abstract" content="Returns a layer containing a DFM property vector of numbers that correspond to edge enclosure measurements for device seed shapes. The output layer is used as an auxiliary layer argument (or to derive such a layer) in a Device statement. This function may only be called in a tvf::SETLAYER command." />
<meta name="description" content="Returns a layer containing a DFM property vector of numbers that correspond to edge enclosure measurements for device seed shapes. The output layer is used as an auxiliary layer argument (or to derive such a layer) in a Device statement. This function may only be called in a tvf::SETLAYER command." />
<meta name="prodname" content="Standard Verification Rule Format (SVRF) Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-26" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="HighlightChanges" content="yes" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="svrf_ur" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="3/25/21" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Standard Verification Rule Format (SVRF) Manual" />
<meta name="CSHelp" content="No" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P10089,product.id.P10099,product.id.P10119,product.id.P10101,product.id.P11427,product.id.P10115,product.id.P11426,product.id.P10122,product.id.P11493" />
<meta name="ConditionFiltering" content="XML" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idb90e06d6-8682-4151-811f-998cea4e2f21" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>device::enclosure_measurements</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="device::enclosure_measurements" />
<meta name="attributes" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P10089,product.id.P10099,product.id.P10119,product.id.P10101,product.id.P11427,product.id.P10115,product.id.P11426,product.id.P10122,product.id.P11493" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="idb90e06d6-8682-4151-811f-998cea4e2f21">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">device::enclosure_measurements</h1>
<div class="body refbody CommandRefBody"><div class="abstract CommandRefAbstract"><p class="p ContextMGC">Device TVF
layer generation function. Used only in a compile-time TVF rule
file.</p>
<p class="shortdesc">Returns a layer containing a
DFM property vector of numbers that correspond to edge enclosure measurements
for device seed shapes. The output layer is used as an auxiliary
layer argument (or to derive such a layer) in a Device statement.
This function may only be called in a tvf::SETLAYER command.</p>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName Required">device::enclosure_measurements</span> <span class="keyword ParameterName Required">‑base</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> <span class="keyword ParameterName Required">‑measurement</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> <span class="keyword ParameterName Required">‑orient</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> [‑connect] <br />
 [<span class="keyword ParameterName Optional">‑max_par</span> <span class="keyword ParameterName OptionalReplaceable">value</span>] [<span class="keyword ParameterName Optional">‑max_per</span> <span class="keyword ParameterName OptionalReplaceable">value</span>] [<span class="keyword ParameterName Optional">‑help</span> | ?]</p>
</div>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="idb90e06d6-8682-4151-811f-998cea4e2f21__id4c993467-8ef3-4096-99b8-21823ba54f41"><span class="keyword ParameterName Required">-base</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument set that
defines the layer from which to measure the enclosure. Usually this
is the gate layer of a MOS transistor. Base shapes must be rectangles
with edges parallel to the database axes.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idb90e06d6-8682-4151-811f-998cea4e2f21__id58e9a93d-249b-4f5d-9d2f-d4e48b0ed3e7"><span class="keyword ParameterName Required">-measurement</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument set that
defines the layer that encloses the <span class="keyword ParameterName Required">‑base</span> layer.
Usually the <span class="keyword ParameterName Required">‑measurement</span> layer
is a well layer.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idb90e06d6-8682-4151-811f-998cea4e2f21__id94666942-744d-41f8-ad12-49db5e6a3ff2"><span class="keyword ParameterName Required">-orient</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument that defines
an orientation layer. Usually this is a source/drain layer.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idb90e06d6-8682-4151-811f-998cea4e2f21__idc9d86144-53d9-48dc-9f91-872362d38782">-connect </dt>
<dd class="dd ArgumentDescription"><p class="p">An option
that specifies the output layer should include PER_NETID_&lt;N&gt;
properties. This option is used when verifying that the measurements
taken by device<span class="ph fmvar:double_colon">::</span>enclosure_measurements
correlate with the same pins as the measurements taken by the Device
property computation. If the -connect option is used, connectivity
must be established on the <span class="keyword ParameterName Required">-orient</span> <span class="keyword ParameterName RequiredReplaceable">layer</span>. <a class="xref fm:HeadingOnly" href="#idb90e06d6-8682-4151-811f-998cea4e2f21__id4df80497-fe66-4d2f-9f36-40217c1d5af2">Example 2</a> discusses
this option.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idb90e06d6-8682-4151-811f-998cea4e2f21__id88fc0fe1-fda1-46f5-875c-7b58159314db">-max_par <span class="keyword ParameterName OptionalReplaceable">value</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set that
defines the maximum parallel-oriented search distance in user units
from a <span class="keyword ParameterName Required">-base</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> edge
to an enclosing <span class="keyword ParameterName Required">-measurement</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> edge.
The <span class="keyword ParameterName OptionalReplaceable">value</span> must evaluate
to a number. This option overrides any global specification of this
search distance. The default <span class="keyword ParameterName OptionalReplaceable">value</span> is
-1.0, which indicates the option is not set locally.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idb90e06d6-8682-4151-811f-998cea4e2f21__id8a8d08db-3f4e-4aab-9751-ab5e363f9bc8">-max_per <span class="keyword ParameterName OptionalReplaceable">value</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set that
defines the maximum perpendicular-oriented search distance in user
units from a <span class="keyword ParameterName Required">-base</span> <span class="keyword ParameterName RequiredReplaceable">layer </span>edge
to an enclosing <span class="keyword ParameterName Required">-measurement</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> edge.
The <span class="keyword ParameterName OptionalReplaceable">value</span> must
evaluate to a number. This option overrides any global specification
of this search distance. The default <span class="keyword ParameterName OptionalReplaceable">value</span> is
-1.0, which indicates the option is not set locally.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idb90e06d6-8682-4151-811f-998cea4e2f21__id92022696-568a-4410-93e5-a7488d7b21eb">-help | ? </dt>
<dd class="dd ArgumentDescription"><p class="p">Prints the usage message for
this function in a Tcl shell.</p>
</dd>
</dl>
</div>
</div>
<div class="section ReturnedValues"><h2 class="title Subheading sectiontitle">Return Values</h2><p class="p">Layer.</p>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><div class="note note"><span class="notetitle">Note:</span> <p class="p">The device::enclosure_parallel_measurements and device::enclosure_perpendicular_measurements
functions are generally preferable to this one because they handle
coordinate transforms appropriately throughout the hierarchy.</p>
</div>
<p class="p">The device<span class="ph fmvar:double_colon">::</span>enclosure_measurements function is used
in conjunction with the <a class="xref fm:HeadingOnly" href="General_TvfFunctionalInterfaceDevicePropertyCalculation_idea8bad97.html#idea8bad97-46ea-48f8-aec1-7ee829d325cb__General_TvfFunctionalInterfaceDevicePropertyCalculation_idea8bad97.xml#idea8bad97-46ea-48f8-aec1-7ee829d325cb" title="The TVF functional interface calculates advanced device properties. The Device property computation and annotation languages call Tcl procedures defined in TVF Function statements in the SVRF rule file in order to calculate the properties.">TVF Functional Interface for Device Property Calculation</a> and must be used in a TVF rule
file. This function has performance advantages over other device
enclosure functions that were introduced in releases prior to 2008.3,
especially for well layers derived from the <a class="xref fm:HeadingOnly" href="Command_Extent_id8383f43f.html#id8383f43f-ecb8-471b-97a6-04ed1887acb2__Command_Extent_id8383f43f.xml#id8383f43f-ecb8-471b-97a6-04ed1887acb2" title="Constructs a derived polygon layer that represents the least enclosing rectangle of the database.">Extent</a> operation and having a large number
of vertices.</p>
<p class="p">This function provides takes
similar measurements to <a class="xref fm:HeadingOnly" href="Command_BILDevPropEnclosureParallel_id8d473446.html#id8d473446-1261-4c6c-be4e-07417706e744__Command_BILDevPropEnclosureParallel_id8d473446.xml#id8d473446-1261-4c6c-be4e-07417706e744" title="Returns a vector of numbers that correspond to trapezoidal dimensions of average enclosure distances and widths.">enclosure_parallel</a> and <a class="xref fm:HeadingOnly" href="Command_BILDevPropEnclosurePerpendicular_id0d1c1874.html#id0d1c1874-facd-4d19-81ac-c9584b841377__Command_BILDevPropEnclosurePerpendicular_id0d1c1874.xml#id0d1c1874-facd-4d19-81ac-c9584b841377" title="Returns a vector of numbers that correspond to trapezoidal dimensions of average enclosure distances and widths.">enclosure_perpendicular</a>. Also see the section “<a class="xref fm:HeadingAndPage" href="Concept_ComparisonEnclosureCalculationFunctionsMethods_id6b1c8701.html#id6b1c8701-fe2b-4f15-9c4e-7b045e790d65__Concept_ComparisonEnclosureCalculationFunctionsMethods_id6b1c8701.xml#id6b1c8701-fe2b-4f15-9c4e-7b045e790d65" title="The enclosure functions, the DFM Property data retrieval functions, and the Device TVF functions are useful for MOS device well proximity computation and similar applications. They are primarily used to extract physical parameters for BSIM4 device models.">Comparison of Enclosure Calculation Functions and Methods</a>” for further
details of other enclosure functions. </p>
<p class="p">The device<span class="ph fmvar:double_colon">::</span>enclosure_measurements function is a
part of the CalibreDFM_DEVICE package and requires a Calibre Advanced
Device Properties (ADP) product license.</p>
<p class="p">The following figure shows the
parameters with their associated layers and measurement distances.</p>
<div class="fig fignone" id="idb90e06d6-8682-4151-811f-998cea4e2f21__id51b07908-1070-4df8-aa81-877ddc6f98f9"><span class="figcap"><span class="fig--title-label">Figure 1. </span>device::enclosure_measurements
Parameters</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/builtin_langs18.png" /></div><br /></div>
<p class="p">In a typical application of device<span class="ph fmvar:double_colon">::</span>enclosure_measurements,
the <span class="keyword ParameterName Required">-base</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> contains
MOS gates, the <span class="keyword ParameterName Required">-measurement</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> is
a MOS well layer, and the <span class="keyword ParameterName Required">-orient</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> is
a MOS source/drain layer.</p>
<p class="p">The -max_par and -max_per arguments
are optional. If those arguments are not used, then the corresponding
parameters must be specified in the global scope of the rules. To
set the search distances (in user units) in the global scope, specify
the following variables using your own search distances:</p>
<pre class="pre codeblock"><code>set device::max_per &lt;value&gt;
set device::max_par &lt;value&gt;</code></pre><p class="p">These settings apply to all instances
of device<span class="ph fmvar:double_colon">::</span>enclosure_measurements
functions unless overridden with the local function arguments. The
distance parameters must evaluate to numbers. Global variables are
generally easier to maintain than local arguments to the functions.</p>
<p class="p">Each search distance must be
specified explicitly in the rule file. There are no default values contained
in the TVF package. You may set any of the search distances to 0
if the process allows it. Any missing search distances result in
a compile-time error.</p>
<p class="p">You may not use the <a class="xref fm:HeadingOnly" href="Command_Variable_idef5949b0.html#idef5949b0-b789-4a00-9cce-cf32826c65c9__Command_Variable_idef5949b0.xml#idef5949b0-b789-4a00-9cce-cf32826c65c9" title="Defines the value of a variable in the rule file.">Variable</a> statement to set the Tcl program’s
search distance variables, either globally or locally. For example,
this is not allowed:</p>
<pre class="pre codeblock"><code>VARIABLE MAX_PAR 3 ... 
set device::max_par MAX_PAR; 
# bad. cannot set this value from a Variable. 

tvf::SETLAYER prop = device::enclosure_measurements ...  \
  -max_par MAX_PAR;</code></pre><p class="p">This is allowed:</p>
<pre class="pre codeblock"><code>set device::max_par 3; # in global scope
tvf::SETLAYER prop = device::enclosure_measurements ... -max_par 3</code></pre><p class="p">You may use valid Tcl expressions
to set search distance variables. For example:</p>
<pre class="pre codeblock"><code>set device::max_par 3
set device::max_per [ expr { $device::max_par * 2 } ]</code></pre><pre class="pre codeblock"><code>set myvar 12
tvf::SETLAYER prop = device::enclosure_measurements ... \
    -max_par [ expr { $myvar * 2 } ] -max_per $myvar</code></pre><p class="p">The output of device<span class="ph fmvar:double_colon">::</span>enclosure_measurements is a <span class="keyword ParameterName OptionalReplaceable">layer</span> that
can be specified as an auxiliary layer (in angle brackets: &lt;<span class="keyword ParameterName OptionalReplaceable">layer</span>&gt;)
in a Device statement. The output layer may not be used as a seed
layer in a Device statement. The output layer need not be derived
uniquely for each specialized device seed. The device::enclosure_measurements
function can be used with the most general predecessor of the actual
device layers. For example, if you derive your gate layer this way:</p>
<pre class="pre codeblock"><code>gate = poly and diff</code></pre><p class="p">and gate is the predecessor of
all gate layers in the design, then this layer can be used for device<span class="ph fmvar:double_colon">::</span>enclosure_measurements
function as the <span class="keyword ParameterName Required">-base</span> layer
to generate the auxiliary layer. This can simplify the rule file.</p>
<p class="p">The device<span class="ph fmvar:double_colon">::</span>enclosure_measurements output layer
contains DFM property annotations. These properties are available
in the Device property computation program through the DFM_* vector functions
(“<a class="xref fm:HeadingAndPage" href="General_DfmPropertyDataRetrievalFunctions_idc81af6e3.html#idc81af6e3-4181-4b46-aee8-8d3047f821c6__General_DfmPropertyDataRetrievalFunctions_idc81af6e3.xml#idc81af6e3-4181-4b46-aee8-8d3047f821c6" title="The Device Layer ANNOTATE operation and the Device statement’s device_annotation_program support data access functions that are used in conjunction with the DFM Property operation to retrieve values for use within device property computations. This capability is part of the TVF functional interface for device property computation. For vector functions, there are corresponding functions for converting DFM vector properties into Device enclosure function measurement format.">DFM Property Data Retrieval Functions</a>”), and can be used by your Tcl procs
to compute an effective property to netlist.</p>
<p class="p">Each polygon on the device<span class="ph fmvar:double_colon">::</span>enclosure_measurements
output layer includes four DFM vector objects. The objects have
these names and definitions:</p>
<ul class="ul"><li class="li" id="idb90e06d6-8682-4151-811f-998cea4e2f21__id048c5e2b-d169-4907-8cf5-25e667530b31"><p class="p"><span class="ph FontProperty HeadingLabel">PAR_1</span>, <span class="ph FontProperty HeadingLabel">PAR_2</span> —
Coordinate values taken from the gate edges <span class="ph FontProperty emphasis">not coincident</span> with source/drain
shapes together with enclosure measurements taken perpendicular
to those edges.</p>
</li>
<li class="li" id="idb90e06d6-8682-4151-811f-998cea4e2f21__id0186b371-e831-475f-bc5c-16b4f8631472"><p class="p"><span class="ph FontProperty HeadingLabel">PER_1</span>, <span class="ph FontProperty HeadingLabel">PER_2</span> —
Coordinate values taken from the gate edges coincident with source/drain
shapes together with enclosure measurements taken perpendicular
to those edges.</p>
</li>
</ul>
<p class="p">The enclosure vectors, one for
each side of the base polygon) are of arbitrary length. There is one
segment for each jog in either the base or the measurement polygons.
Each member of the enclosure vector contains two values:</p>
<ul class="ul"><li class="li" id="idb90e06d6-8682-4151-811f-998cea4e2f21__id79492fd1-fd58-4e80-a422-9e408c33d059"><p class="p">First coordinate of the segment</p>
</li>
<li class="li" id="idb90e06d6-8682-4151-811f-998cea4e2f21__id79daecf8-8b5f-4bcf-836f-558647daca9c"><p class="p">Enclosure distance for the
segment</p>
</li>
</ul>
<p class="p">The final member of the enclosure
vector has this form: final coordinate of segment, 0.</p>
<p class="p">The following figure shows an
example of the perpendicular measurements. </p>
<div class="fig fignone" id="idb90e06d6-8682-4151-811f-998cea4e2f21__id0fea830b-65a1-47f2-abad-d54f71ab7ead"><span class="figcap"><span class="fig--title-label">Figure 2. </span>device::enclosure_measurements
PER Vector Values</span><br /><div class="imageleft"><img class="image imageleft" height="160" src="../graphics/builtin_langs19.png" width="468" /></div><br /></div>
<p class="p">Given the preceding diagram,
the perpendicular vectors for each side of the gate have these forms.</p>
<pre class="pre codeblock"><code>PER_1 &lt;y1,b&gt; &lt;y2,a&gt; &lt;y3,0&gt;
PER_2 &lt;y1,c&gt; &lt;y3,0&gt;</code></pre><p class="p">The parallel measurements would
be made in the vertical direction, one for each horizontal gate edge,
and the PAR vectors would have similar forms to the ones just shown
(although there is an extra jog in the well layer that is taken
into account for the vertical direction here).</p>
<p class="p">Vector elements are reported
in user units. You must use the <a class="xref fm:HeadingOnly" href="Command_BILDevPropUnitLength_id74a23eca.html#id74a23eca-0d5c-4e06-b503-d854fa8e4213__Command_BILDevPropUnitLength_id74a23eca.xml#id74a23eca-0d5c-4e06-b503-d854fa8e4213" title="Returns the value of the Unit Length statement.">unit_length</a> function to convert to meters
in order to get appropriately-valued device properties into the
extracted netlist. This is shown in the example later in this section.</p>
<p class="p">To assist in obtaining the desired
information from the enclosure vectors, the CalibreLVS_DEVICE_DFM
TVF package in the software tree includes some helper functions for
processing DFM vector objects. The measurement operations included
in this package have been optimized for performance. This package
must be referenced in your TVF Function block.</p>
<p class="p">A useful function from this package
is <a class="xref fm:HeadingOnly" href="Command_BILDfmDeviceDfmVecMeasurements_id7ffc76fb.html#id7ffc76fb-35f3-4893-92ce-2d56d84eec1b__Command_BILDfmDeviceDfmVecMeasurements_id7ffc76fb.xml#id7ffc76fb-35f3-4893-92ce-2d56d84eec1b" title="Converts DFM-style rectilinear measurement vectors into Device enclosure-vector-style width and length measurements in database units.">device::dfm_vec_measurements</a>. This function converts the DFM
enclosure vectors into Tcl lists of {width value} segments, where
width is the length of a segment and value is the enclosure distance.
From the preceding example, we have these vectors:</p>
<pre class="pre codeblock"><code>PER_1 &lt;y1,b&gt; &lt;y2,a&gt; &lt;y3,0&gt;
PER_2 &lt;y1,c&gt; &lt;y3,0&gt;</code></pre><p class="p">Evaluating these vectors using
device<span class="ph fmvar:double_colon">::</span>dfm_vec_measurements
produces the desired {width value} lists. One PER_1 {width value}
list would be {|y2-y1| b}, and the other would be {|y3‑y2| a}. The
PER_2 {width value} list would be {|y3-y1| c}.</p>
<p class="p">The product of width × value
gives an enclosure area for one segment of the gate edge. This is used
in the example later in this section.</p>
<p class="p">The CalibreDFM_DEVICE package
provides two variables to maximize the optimization for your layout
style:</p>
<ul class="ul"><li class="li" id="idb90e06d6-8682-4151-811f-998cea4e2f21__id11dece53-337b-485e-9980-13f62ca7c623"><p class="p"><span class="ph FontProperty HeadingLabel">device<span class="ph fmvar:double_colon">::</span>avg_sp3</span> —
Average width of a box drawn around three measurement polygons. Default
is 0.5 user units.</p>
</li>
<li class="li" id="idb90e06d6-8682-4151-811f-998cea4e2f21__idea3125f1-845c-486b-8655-5e92e8aa519f"><p class="p"><span class="ph FontProperty HeadingLabel">device<span class="ph fmvar:double_colon">::</span>avg_enc</span> —
Average measurement polygon to base polygon enclosure distance. Default
is 1.5 user units.</p>
</li>
</ul>
<p class="p">The values need not be exact.
It is usually sufficient to use one set of values for each process technology.
There may be performance penalties if the settings are either too
large or too small for the technology. The default settings are
targeted for 45nm SOC designs.</p>
<p class="p">Any errors in specifying the
function are reported at compilation time.</p>
</div>
<div class="section Examples" id="idb90e06d6-8682-4151-811f-998cea4e2f21__idb64f4049-6ede-4ea0-9f5e-6c4c8ab19bb2"><h2 class="title Subheading sectiontitle">Examples</h2><div class="section Subsection" id="idb90e06d6-8682-4151-811f-998cea4e2f21__idf2400811-831c-4366-8770-51fc02fa2a37"><h2 class="title Subheading sectiontitle">Example
1</h2><div class="note note"><span class="notetitle">Note:</span> <p class="p">These examples compute simulation properties in Device
property computation program blocks. For better performance during
LVS, these properties can instead be annotated using the LVS Annotate
Devices flow or the pushdown separated properties (PDSP) flow, and
then extracted to a netlist using the Query Server. See “<a class="xref fm:HeadingAndPage" href="Concept_ExampleDeviceLayerAnnotateProgramsUsingDfmProperty_id834a8436.html#id834a8436-ffb5-42a8-a234-19c777df4304__Concept_ExampleDeviceLayerAnnotateProgramsUsingDfmProperty_id834a8436.xml#id834a8436-ffb5-42a8-a234-19c777df4304" title="The Device Annotation Built-In Language provides a means for combining DFM Property measurements with devices recognized using Calibre nmLVS. DFM Property is an efficient and versatile operation for collecting and combining complex device property measurements used in parasitic extraction flows.">Example Device Annotation Programs Using DFM Property</a>” for related
information about the LVS Annotate Devices flow.</p>
</div>
<p class="p">This shows a complete example for
MN and MP transistors.</p>
</div>
<pre class="pre codeblock"><code>#!tvf
 
 tvf::VERBATIM {</code></pre><pre class="pre codeblock"><code>   TVF FUNCTION mytcl [/*</code></pre><pre class="pre codeblock"><code>  # This package is required for helper functions.
    package require CalibreLVS_DEVICE_DFM

  # This proc computes average enclosure values. The dfmvec argument
  # is a property vector passed from the mos_prop macro. 
    proc avg_dfm_vec { dfmvec } {

  # $dfmvec contains vectors from which {width value} lists are
  # calculated using the following line.
      set measurements [ <a class="xref fm:HeadingOnly" href="Command_BILDfmDeviceDfmVecMeasurements_id7ffc76fb.html#id7ffc76fb-35f3-4893-92ce-2d56d84eec1b__Command_BILDfmDeviceDfmVecMeasurements_id7ffc76fb.xml#id7ffc76fb-35f3-4893-92ce-2d56d84eec1b" title="Converts DFM-style rectilinear measurement vectors into Device enclosure-vector-style width and length measurements in database units.">device::dfm_vec_measurements</a> $dfmvec ]
  # sum of enclosure areas.
      set sum 0.0
  # total length of a gate edge.
      set tot 0.0

      foreach segment $measurements {
        foreach { width value } $segment {
          puts "DFM: SEGMENT LENGTH $width ENCLOSURE $value"
          set sum [ expr { $sum + $value * $width } ]
          set tot [ expr { $tot + $width } ]
        }
      }
  # This returns an average enclosure distance for a gate edge.
      return [ expr { $sum / $tot } ]
    }

  */] 
// end TVF FUNCTION</code></pre><pre class="pre codeblock"><code>// This macro defines four enclosure measurement properties 
// for each device. The PAR_1, PAR_2, PER_1, and PER_2 objects
// are stored with the layers ngate_prop, and pgate_prop, which
// are passed in as the prop_layer parameter.

  <a class="xref fm:HeadingOnly" href="Concept_Macros_id10ff3492.html#id10ff3492-b113-46e5-9939-93c4b00a26a0__idbf0d9767-a21a-40db-923b-1b5477ea32d3">DMACRO</a> mos_prop prop_layer {
    [
    PROPERTY perA, perB, parA, parB
  // get the four vectors from the vector property layers.
    par_dfm_A = <a class="xref fm:HeadingOnly" href="Command_BILDfmVectorValue_id4b951b76.html#id4b951b76-1ce6-466d-bc87-9fdf3685a4b8__Command_BILDfmVectorValue_id4b951b76.xml#id4b951b76-1ce6-466d-bc87-9fdf3685a4b8" title="Provides access to a DFM vector property from a single polygon on a pin, pin layer, or auxiliary layer. The set of properties is accessible through a TVF object created by this function.">dfm_vector_value</a>(prop_layer,"PAR_1")
    par_dfm_B = dfm_vec_val(prop_layer,"PAR_2")
    per_dfm_A = dfm_vec_val(prop_layer,"PER_1")
    per_dfm_B = dfm_vec_val(prop_layer,"PER_2")
  // calculate the average enclosure values on the four sides
  // of the gate. call the avg_dfm_vec proc to do this.
    parA = <a class="xref fm:HeadingOnly" href="Command_BILDevPropTvfNumericFunction_id3a059e8f.html#id3a059e8f-46c1-4ea9-8e26-147a4b8fcb57__Command_BILDevPropTvfNumericFunction_id3a059e8f.xml#id3a059e8f-46c1-4ea9-8e26-147a4b8fcb57" title="Provides access to a numeric value returned by a Tcl procedure defined within a TVF Function definition.">tvf_numeric_function</a>::mytcl::avg_dfm_vec(par_dfm_A) * \
           <a class="xref fm:HeadingOnly" href="Command_BILDevPropUnitLength_id74a23eca.html#id74a23eca-0d5c-4e06-b503-d854fa8e4213__Command_BILDevPropUnitLength_id74a23eca.xml#id74a23eca-0d5c-4e06-b503-d854fa8e4213" title="Returns the value of the Unit Length statement.">unit_length</a>()
    parB = tvf_num_fun::mytcl::avg_dfm_vec(par_dfm_B) * unit_length()
    perA = tvf_num_fun::mytcl::avg_dfm_vec(per_dfm_A) * unit_length()
    perB = tvf_num_fun::mytcl::avg_dfm_vec(per_dfm_B) * unit_length()
    ] 
  }</code></pre><pre class="pre codeblock"><code>// These are the device statements. The auxiliary layers ngate_prop and
// pgate_prop are derived from device::enclosure_measurements functions.
// The mos_prop macro defines the four enclosure measurement
// properties for each device.</code></pre><pre class="pre codeblock"><code>  DEVICE mn ngate nsd nsd psub &lt;ngate_prop&gt; <a class="xref fm:HeadingOnly" href="Concept_Macros_id10ff3492.html#id10ff3492-b113-46e5-9939-93c4b00a26a0__id56f97430-5128-4859-a5e7-56eac3a14e6a">CMACRO</a> mos_prop ngate_prop
  DEVICE mp pgate psd psd nw  &lt;pgate_prop&gt; CMACRO mos_prop pgate_prop
 } 
tvf::// end VERBATIM block</code></pre><pre class="pre codeblock"><code>tvf::// Package required for device::enclosure_measurements.
  package require CalibreDFM_DEVICE

tvf::// Globally set the maximum perpendicular and parallel enclosure 
tvf::// distances.</code></pre><pre class="pre codeblock"><code>  set device::max_par 15.0
  set device::max_per 3.0

tvf::// Define the auxiliary layers for the Device statements.

  tvf::SETLAYER ngate_prop = [ device::enclosure_measurements \
-base ngate  -measurement psub -orient nsd ]</code></pre><pre class="pre codeblock"><code>  tvf::SETLAYER pgate_prop = [ device::enclosure_measurements \
 -base pgate  -measurement nw -orient psd ]</code></pre><div class="section Subsection" id="idb90e06d6-8682-4151-811f-998cea4e2f21__id4df80497-fe66-4d2f-9f36-40217c1d5af2"><h2 class="title Subheading sectiontitle">Example
2</h2></div>
<p class="p">When the -connect option is used,
each output polygon includes two DFM numeric properties in addition
to the four vector properties discussed previously. The two numeric
properties are these:</p>
<ul class="ul"><li class="li" id="idb90e06d6-8682-4151-811f-998cea4e2f21__ide09bfd42-5ee7-4559-b994-b81a9115bae4"><p class="p"><span class="ph FontProperty HeadingLabel">PER_NETID_1</span> —
Contains the net ID of the shape for which the PER_1 property is measured.</p>
</li>
<li class="li" id="idb90e06d6-8682-4151-811f-998cea4e2f21__id57168b0c-3bae-48f5-a71c-4eaff4c25ceb"><p class="p"><span class="ph FontProperty HeadingLabel">PER_NETID_2</span> —
Contains the net ID of the shape for which the PER_2 property is measured.</p>
</li>
</ul>
<p class="p">The net ID values stored by these
properties may be retrieved using the <a class="xref fm:HeadingOnly" href="Command_BILDfmNumericValue_id0d606d9b.html#id0d606d9b-2922-43a8-84a7-5ed59d7705c1__Command_BILDfmNumericValue_id0d606d9b.xml#id0d606d9b-2922-43a8-84a7-5ed59d7705c1" title="Provides access to a DFM property from a single polygon on a pin, pin layer, or auxiliary layer. The DFM property is accessible as a regular numeric value.">dfm_numeric_value</a> function and compared to what
the <a class="xref fm:HeadingOnly" href="Command_BILDevPropPinNet_idcf11862c.html#idcf11862c-9d9c-4d4e-b598-b620766fcdf7__Command_BILDevPropPinNet_idcf11862c.xml#idcf11862c-9d9c-4d4e-b598-b620766fcdf7" title="Returns the net number of a specified pin. In hierarchical applications, this function returns node number local to the cell, which is a limitation.">pin_net</a> function returns. This is done
to correlate the device<span class="ph fmvar:double_colon">::</span>enclosure_measurements
computations with the Device operation’s computations on the same
pin. This ensures that the measurements refer to the same pin, as
shown here:</p>
<pre class="pre codeblock"><code>#!tvf
...
package require CalibreDFM_DEVICE

tvf::SETLAYER ENC_PROP = [ device::enclosure_measurements -base gate \
                           -orient sd -measurement well -connect ]

tvf::VERBATIM {

DEVICE MN gate poly sd sd well &lt;ENC_PROP&gt; [
  PROPERTY AS, AD, ES, ED
  AS = AREA(S)
  AD = AREA(D)
  EV_1 = DFM_VEC_VAL(ENC_PROP,"PER_1")
  E_1  = TVF_NUM_FUN::devlib::avg(EV_1)
  EV_2 = DFM_VEC_VAL(ENC_PROP,"PER_2")
  E_2  = TVF_NUM_FUN::devlib::avg(EV_2)
  N_1  = DFM_NUM_VAL(ENC_PROP,"PER_NETID_1")
  N_2  = DFM_NUM_VAL(ENC_PROP,"PER_NETID_2")

  IF (PIN_NET(S) == N_1) { ES = E_1 ED = E_2 }
  ELSE IF (PIN_NET(S) == N_2) { ES = E_2 ED = E_1 }
  ELSE { ES = -1 ED = -1 } 
]
}
tvf::// end VERBATIM block</code></pre><p class="p">The IF block is used to correlate
the device<span class="ph fmvar:double_colon">::</span>enclosure_measurements
computations with the Device operation’s computations. The function
called devlib and the proc called avg would be defined in a TVF
Function block.</p>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_DeviceAnnotationBuiltInLanguage_id7f618268.html" title="The Device annotation built-in language is useful for MOS device well proximity and shallow trench isolation (STI) stress effect property calculations and similar applications. It is primarily used to extract physical parameters for the newer BSIM4 models.">Device Annotation Built-In Language</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../topics/General_HistoricalDeviceEnclosureFunctionReference_ided9874b5.html#ided9874b5-28a1-43cf-b827-d131fd1ee609__" title="The commands in this section have been historically used to calculate complex device enclosure properties. This information is provided to document functionality you may find in a foundry rule file but is not the currently recommended methodology for calculating well enclosure properties.">Historical Device Enclosure Function Reference</a></div>
<div><a class="link" href="../topics/Command_BILDevPropdevice_enclosure_parallel_measurements_id0fada000.html" title="Returns a layer containing a DFM property vector of numbers that correspond to edge enclosure measurements parallel to device seed shape edges. The output layer is an edge layer with DFM vector properties used to derive an auxiliary layer argument in a Device statement. This function may only be called in the context of a tvf::SETLAYER command.">device::enclosure_parallel_measurements</a></div>
<div><a class="link" href="../topics/Command_BILDevPropdeviceenclosure_perpendicular_measurements_idc6a6dc3e.html" title="Returns a layer containing a DFM property vector of numbers that correspond to edge enclosure measurements perpendicular to device seed shape edges. The output layer is an edge layer with DFM vector properties used to derive an auxiliary layer argument in a Device statement. This function may only be called in the context of a tvf::SETLAYER command.">device::enclosure_perpendicular_measurements</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "svrf_ur"
                DocTitle = "Standard Verification Rule Format (SVRF) Manual"
                PageTitle = "device::enclosure_measurements"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_BILDevPropDeviceEnclosureMeasurements_idb90e06d6.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Standard Verification Rule Format (SVRF) Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>