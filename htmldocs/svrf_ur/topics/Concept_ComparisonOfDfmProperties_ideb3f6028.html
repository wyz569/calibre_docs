<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Comparison of DFM Properties" />
<meta name="abstract" content="DFM properties can be compared with the relational operators: ==, !=, &lt;, &lt;=, &gt;, &gt;=. Numeric, string, numeric vector, and string vector properties can be compared using these operators. Net number and vector net number properties can be compared only for equality (==) or inequality (!=). Care must be taken when testing for equality of floating point values or comparing to an expression that may evaluate to a negative value with a small magnitude." />
<meta name="description" content="DFM properties can be compared with the relational operators: ==, !=, &lt;, &lt;=, &gt;, &gt;=. Numeric, string, numeric vector, and string vector properties can be compared using these operators. Net number and vector net number properties can be compared only for equality (==) or inequality (!=). Care must be taken when testing for equality of floating point values or comparing to an expression that may evaluate to a negative value with a small magnitude." />
<meta name="prodname" content="Standard Verification Rule Format (SVRF) Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-26" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="HighlightChanges" content="yes" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="svrf_ur" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="3/25/21" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Standard Verification Rule Format (SVRF) Manual" />
<meta name="CSHelp" content="No" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P10089,product.id.P10099,product.id.P10119,product.id.P10101,product.id.P11427,product.id.P10115,product.id.P11426,product.id.P10122,product.id.P11493" />
<meta name="ConditionFiltering" content="XML" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="ideb3f6028-2066-42c7-9512-e84821a03e07" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Comparison of DFM Properties</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Comparison of DFM Properties" />
<meta name="attributes" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P10089,product.id.P10099,product.id.P10119,product.id.P10101,product.id.P11427,product.id.P10115,product.id.P11426,product.id.P10122,product.id.P11493" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="ideb3f6028-2066-42c7-9512-e84821a03e07">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Comparison of DFM Properties</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">DFM properties can
be compared with the relational operators: ==, !=, &lt;, &lt;=,
&gt;, &gt;=. Numeric, string, numeric vector, and string vector properties
can be compared using these operators. Net number and vector net
number properties can be compared only for equality (==) or inequality (!=).
Care must be taken when testing for equality of floating point values
or comparing to an expression that may evaluate to a negative value
with a small magnitude. </span>
</div>
<div class="section Subsections"><div class="section Subsection" id="ideb3f6028-2066-42c7-9512-e84821a03e07__id8bd1bf33-e039-4732-9fbf-adee0150dd37"><p class="p">Consider the following DFM Property operation,
which uses <a class="xref fm:HeadingOnly" href="General_ConditionalExpressions_ide027a325.html#ide027a325-8bb9-4a37-8131-9256af5f6d60__General_ConditionalExpressions_ide027a325.xml#ide027a325-8bb9-4a37-8131-9256af5f6d60" title="A conditional expression is a way to specify an if/then expression within a DFM expression—it returns one result if the specified condition is true and another result if the condition is false. You can use conditional expressions in the DFM expressions within DFM Analyze, DFM Spec Fill Optimizer, DFM Property and its related operations, and DFM Function.">Conditional Expressions</a> (the
?: operator):</p>
<pre class="pre codeblock leveled"><code>clock_1_out = DFM PROPERTY L 
	[ - = (SPROPERTY(L, SIGNAL) == "clock1" ) ? 1 : 0 ] == 1</code></pre><p class="p">If the geometries on layer L have a string
property SIGNAL, this DFM Property operation selects only those
geometries where SIGNAL equals “clock1”.</p>
<p class="p">These topics are covered:</p>
<ul class="ul"><li class="li" id="ideb3f6028-2066-42c7-9512-e84821a03e07__id176ae17c-4145-424a-b80c-0835761c858e"><p class="p"><a class="xref fm:HeadingOnly" href="#ideb3f6028-2066-42c7-9512-e84821a03e07__id57b7c4a9-ddfd-40c0-8393-c7f157f99bc9">Net Number Comparison</a></p>
</li>
<li class="li" id="ideb3f6028-2066-42c7-9512-e84821a03e07__id04292544-186f-4ac4-8682-2564b677b1c5"><p class="p"><a class="xref fm:HeadingOnly" href="#ideb3f6028-2066-42c7-9512-e84821a03e07__idde09544d-b23a-4e91-b2b0-728d8d3b6edf">Vector Comparison</a></p>
</li>
<li class="li" id="ideb3f6028-2066-42c7-9512-e84821a03e07__id8faff917-1f1c-4a0a-837a-9a01097461d0"><p class="p"><a class="xref fm:HeadingOnly" href="#ideb3f6028-2066-42c7-9512-e84821a03e07__ideb73b56b-916f-452e-992c-9b1d0df1f8f0">Equality Tests and Comparisons for Floating-Point Values</a></p>
</li>
<li class="li" id="ideb3f6028-2066-42c7-9512-e84821a03e07__id550dc597-68d8-4d2b-b267-c923bb23487c"><p class="p"><a class="xref fm:HeadingOnly" href="#ideb3f6028-2066-42c7-9512-e84821a03e07__id31b55579-12a6-48be-afc9-1915bf9bec38">Negative Property Expressions with Small Magnitudes</a></p>
</li>
</ul>
</div>
<div class="section Subsection" id="ideb3f6028-2066-42c7-9512-e84821a03e07__id57b7c4a9-ddfd-40c0-8393-c7f157f99bc9"><h2 class="title Subheading sectiontitle">Net
Number Comparison</h2><p class="p">Net numbers (type netIDs) and vectors of netIDs (type vnetID)
can only be compared for equality (==) or inequality (!=). The following
example compares two <a class="xref fm:HeadingOnly" href="Concept_NetNumberDfmProperties_id9fbf4298.html#id9fbf4298-30ad-43ee-8435-9d46ea2df8d6__Concept_NetNumberDfmProperties_id9fbf4298.xml#id9fbf4298-30ad-43ee-8435-9d46ea2df8d6" title="Net number properties store the net ID for a geometry. You can create a vector of net IDs. Net number properties have some special restrictions in DFM expressions.">Net Number DFM Properties</a>:</p>
<pre class="pre codeblock leveled"><code>D = DFM PROPERTY B
	[C = (NETPROPERTY(B, N1) == NETPROPERTY(B, N2)) ? 0 : 1]</code></pre><p class="p">Assuming that the two netID-valued properties
N1 and N2 exist on layer B, then the value of property C is 0 if
the two properties have the same netID value, and 1 otherwise. </p>
<p class="p">Net IDs can only be compared in the context of the cell in which
the calculation takes place. For more information, see GLOBALNETID,
NETID, and “<a class="xref fm:HeadingAndPage" href="General_CellContextDependentPropertyFunctionsResultsInHierarchicalBatchRuns_idb321e600.html#idb321e600-abf8-4d48-9ed1-89e5ecbfab65__General_CellContextDependentPropertyFunctionsResultsInHierarchicalBatchRuns_idb321e600.xml#idb321e600-abf8-4d48-9ed1-89e5ecbfab65" title="All measurement functions that return coordinates, or values based upon orientation with respect to a coordinate system, return them in the context of the cell in which the property expression is evaluated. This may not be the same cell in which the geometries originated in cases where promotion occurs. For these functions, the terms x-axis, y-axis, horizontal, and vertical refer to the coordinate system of the evaluation cell, not to the global coordinate system. Cell-context-dependent property functions do not provide predictable results in hierarchical batch runs and should be treated with care.">Cell-Context-Dependent Property Functions Results in Hierarchical Batch Runs</a>”. </p>
</div>
<div class="section Subsection" id="ideb3f6028-2066-42c7-9512-e84821a03e07__idde09544d-b23a-4e91-b2b0-728d8d3b6edf"><h2 class="title Subheading sectiontitle">Vector
Comparison</h2><p class="p">For <a class="xref fm:HeadingOnly" href="Concept_VectorDFMProperties_idf6ea0cc7.html#idf6ea0cc7-cf94-4e41-a273-eb69f35eed95__Concept_VectorDFMProperties_idf6ea0cc7.xml#idf6ea0cc7-cf94-4e41-a273-eb69f35eed95" title="A vector is a two-dimensional array (or matrix) of numbers composed of tuples. Some DFM properties may be vectors.">Vector DFM Properties</a>, two vectors
are equal if they have the same tuple size, tuple count, and the
same values (in the same order). Two vectors that differ in any
of these characteristics are not equal. For relational comparisons
(&lt;, &lt;=, &gt;, &gt;=), the tuple sizes and tuple counts may differ;
missing values are considered to be strictly less than any other
values.</p>
<p class="p">Vectors of netID’s (type vnetID) can only be compared for equality
(==) or inequality (!=). </p>
<p class="p">This example uses a conditional expression to compare two vectors
for equality. The vector properties v1 and v2 were saved to the
input layer in a previous DFM Property operation.</p>
<pre class="pre codeblock"><code>out = DFM PROPERTY lay1 
		[ vec_eq = ( VPROPERTY(lay1, v1) == VPROPERTY(lay1, v2) ) ? 1 : 0 ]</code></pre></div>
<div class="section Subsection" id="ideb3f6028-2066-42c7-9512-e84821a03e07__ideb73b56b-916f-452e-992c-9b1d0df1f8f0"><h2 class="title Subheading sectiontitle">Equality Tests
and Comparisons for Floating-Point Values</h2><p class="p">Due to the algorithms used for computational mathematics, comparison
of two floating point properties may give unexpected results. When
constructing an equality comparison for floating point values, the
best practice is to compare the difference to a small number; for
example: abs( prop1 - prop2 ) &lt; 0.001</p>
<p class="p">For cases requiring accurate comparison to many decimal places,
it is recommended to magnify the results first to reduce the number
of decimal places.</p>
<p class="p">Consider the following example, which may not work as intended
in some cases. The intent is to output geometries with attached
properties AreaA and AreaB if AreaA does not equal AreaB: </p>
<pre class="pre codeblock"><code>// not recommended
area_out = DFM PROPERTY A B OVERLAP MULTI ABUT ALSO
	[AreaA = (AREA(A) == AREA(B)) ? 0 : AREA(A) ] &gt; 0
	[AreaB = AREA(B) ]</code></pre><p class="p">If you send the output layer area_out to a
DFM RDB and view the properties in Calibre RVE, it is possible to
get a polygon where the displayed properties for AreaA and AreaB
are identical. This can happen if the difference in areas is smaller
than the resolution of the displayed numbers. A very small difference
in areas can occur if the shapes have vertices that were snapped
to grid. In such a case, it may be that areas should be considered
equal within a given tolerance. </p>
<p class="p">The following is better coding practice: </p>
<pre class="pre codeblock"><code>// recommended
area_out = DFM PROPERTY A B OVERLAP MULTI ABUT ALSO
	[AreaA = (( ABS(AREA(A) - AREA(B)) ) &lt; 0.001) ? 0 : AREA(A) ] &gt; 0
	[AreaB = AREA(B) ]</code></pre><p class="p">If the DFM Property operation is being used, the DBU keyword
can be used to avoid rounding effects from math with floating point
numbers. The DBU keyword causes all measurements to be performed
and returned in database units, rather than user units. See “<a class="xref fm:HeadingAndPage" href="Command_DfmProperty_idf1f176c5.html#idf1f176c5-0d5a-4406-95d0-b54438157ae8__id50aa1f55-6cfd-4887-beaf-0f7ccfe19ff3">Example 9</a>” with the
DFM Property operation.</p>
<p class="p">You can also use DFM comparison functions that
incorporate a built-in tolerance of 10e‑8. This is the same tolerance
that layer operations use when evaluating constraints. The comparison functions
examine both the absolute and relative difference of two numbers.
These functions are appropriate to use when comparing numbers that
result from geometric measurements, or other cases in which exact
double precision comparison is not desired. <a class="xref fm:HeadingOnly" href="Command_DfmFuncDRCEQ_idd9602080.html#idd9602080-ffd2-4498-b9c7-2ca37ae7f973__Command_DfmFuncDRCEQ_idd9602080.xml#idd9602080-ffd2-4498-b9c7-2ca37ae7f973" title="Performs an equal to (==) comparison with a built-in tolerance of 10e‑8.">DRC_EQ</a> performs an equality comparison with a built-in tolerance
of 10e‑8. The original layer derivation looks like this with DRC_EQ:</p>
<pre class="pre codeblock"><code>area_out = DFM PROPERTY A B OVERLAP MULTI ABUT ALSO
	[AreaA = ( DRC_EQ(AREA(A), AREA(B)) &gt; 0 ) ? 0 : AREA(A) ] &gt; 0
	[AreaB = AREA(B) ]</code></pre><p class="p">If the areas are equal, DRC_EQ returns 1.0 and
the conditional expression evaluates to true, which is the intent.
See “<a class="xref fm:HeadingAndPage" href="Contain_DrcConstraintOperators_id74b7398e.html#id74b7398e-7c1b-4caa-ae37-700831aae137__Contain_DrcConstraintOperators_id74b7398e.xml#id74b7398e-7c1b-4caa-ae37-700831aae137" title="The DRC constraint comparison functions are DRC_EQ, DRC_GE, DRC_GT, DRC_LE, DRC_LT, and DRC_NE. These functions have a built-in tolerance of 10e‑8, making them more suitable for use when comparing geometric measurements than the exact double precision comparison operators (==, &gt;=, &gt;, &lt;=, &lt;, and !=).">DRC Constraint Comparison Functions</a>” for details.</p>
</div>
<div class="section Subsection" id="ideb3f6028-2066-42c7-9512-e84821a03e07__id31b55579-12a6-48be-afc9-1915bf9bec38"><h2 class="title Subheading sectiontitle">Negative
Property Expressions with Small Magnitudes</h2><p class="p">In order to manage certain layout coordinate issues, such as
skew edge handling and grid snapping, layer operations apply a small
tolerance (unrelated to DRC Tolerance Factor) when evaluating constraints.
The evaluation of DFM expression equality and inequality operators does
not apply this tolerance, however. This can yield unexpected results
when DFM property expressions evaluate as negative and have a small
magnitude.</p>
<p class="p">Consider this operation:</p>
<pre class="pre codeblock"><code>logarea_prop = DFM PROPERTY pri [logarea = LOG10(AREA(pri))] &gt;= 0</code></pre><p class="p">It is possible the DFM expression evaluates to a negative number
with a small magnitude, but after application of the small constraint
tolerance mentioned previously, the expression could “satisfy” the
constraint, which is non-negative. This should be avoided.</p>
<p class="p">One possible way is the following:</p>
<pre class="pre codeblock"><code>logarea_prop = DFM PROPERTY pri 
						[ logarea = LOG10(AREA(pri)) ]
						[ - = ( LOG10(AREA(pri)) &gt;= 0 ) ? 1 : 0] == 1 </code></pre><p class="p">In this case, the expression must evaluate to non-negative in
order for output to occur to logarea_prop.</p>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_DfmProperties_id7d747680.html" title="DFM properties are a form of metadata associated with objects on derived layers. They are often numerical values used for calculating scores and filtering data. Some operations support net number, string, and vector properties. Each property has a name and a value.">DFM Properties</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "svrf_ur"
                DocTitle = "Standard Verification Rule Format (SVRF) Manual"
                PageTitle = "Comparison of DFM Properties"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_ComparisonOfDfmProperties_ideb3f6028.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Standard Verification Rule Format (SVRF) Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>