<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="LVS Box" />
<meta name="abstract" content="Specifies cells whose contents are to be excluded from circuit comparison or circuit extraction, or both. Used only in Calibre nmLVS/Calibre nmLVS-H, Calibre PERC, Calibre xACT, and Calibre xRC." />
<meta name="description" content="Specifies cells whose contents are to be excluded from circuit comparison or circuit extraction, or both. Used only in Calibre nmLVS/Calibre nmLVS-H, Calibre PERC, Calibre xACT, and Calibre xRC." />
<meta name="prodname" content="Standard Verification Rule Format (SVRF) Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-26" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="HighlightChanges" content="yes" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="svrf_ur" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="3/25/21" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Standard Verification Rule Format (SVRF) Manual" />
<meta name="CSHelp" content="No" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P10089,product.id.P10099,product.id.P10119,product.id.P10101,product.id.P11427,product.id.P10115,product.id.P11426,product.id.P10122,product.id.P11493" />
<meta name="ConditionFiltering" content="XML" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idb01922c2-6ae1-4d23-85d2-766e8172c088" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>LVS Box</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="LVS Box" />
<meta name="attributes" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P10089,product.id.P10099,product.id.P10119,product.id.P10101,product.id.P11427,product.id.P10115,product.id.P11426,product.id.P10122,product.id.P11493" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="idb01922c2-6ae1-4d23-85d2-766e8172c088">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">LVS Box</h1>
<div class="body refbody CommandRefBody"><div class="abstract CommandRefAbstract"><p class="p ContextMGC">Specification
statement</p>
<p class="shortdesc">Specifies cells whose contents
are to be excluded from circuit comparison or circuit extraction, or
both. Used only in Calibre nmLVS/Calibre nmLVS-H, Calibre PERC,
Calibre xACT, and Calibre xRC.</p>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName Required">LVS BOX</span> [BLACK | GRAY [DEVICES]] [LAYOUT [ONLY]] [SOURCE] {{<span class="keyword ParameterName RequiredReplaceable">cell</span> [‘(’<span class="keyword ParameterName OptionalReplaceable">pin_swap_list</span>‘)’ …]} …}</p>
</div>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__id28f8c554-66a9-401f-a1f7-da163aec09ac">BLACK</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword that specifies
only pin geometries of box cells are processed while other geometries
in the cell are ignored by default. The specified box cells are
processed independently of placement context, and the internal geometries
of the box cells are unavailable for downstream processing. Netlisting
of black box cell contents does not occur. The <a class="xref fm:HeadingOnly" href="Command_LvsBlackBoxPort_id7391e1f3.html#id7391e1f3-2a66-4c01-bd91-8d08494db5ee__Command_LvsBlackBoxPort_id7391e1f3.xml#id7391e1f3-2a66-4c01-bd91-8d08494db5ee" title="Defines port objects for the LVS Box BLACK statement.">LVS Black Box Port</a> specification
statement is required when using this keyword.</p>
<p class="p">See “<a class="xref fm:HeadingOnly" href="#idb01922c2-6ae1-4d23-85d2-766e8172c088__id0e6d0ce0-ee8c-4ef5-bf24-ce9030624fe6">Behaviors Common to BLACK and GRAY Box Cells</a>” and “<a class="xref fm:HeadingOnly" href="#idb01922c2-6ae1-4d23-85d2-766e8172c088__id4199ee5e-ade1-4fe1-9709-5bcb1fccc243">Black Box Cell Behaviors</a>” for details.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__id0088f731-7de9-4542-b82b-71e8d2ce1132">GRAY</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword that specifies
to process internal geometries of box cells independently from their
placement contexts. Circuit extraction occurs in gray box cells,
but device recognition and netlisting of box cell contents does
not unless DEVICES is also specified. Layer data from the isolated
cells is passed to the Mask SVDB Directory for use by downstream
client applications such as the Calibre Connectivity Interface.
GREY is accepted as an alternate keyword form. </p>
<p class="p">See “<a class="xref fm:HeadingOnly" href="#idb01922c2-6ae1-4d23-85d2-766e8172c088__id0e6d0ce0-ee8c-4ef5-bf24-ce9030624fe6">Behaviors Common to BLACK and GRAY Box Cells</a>” and “<a class="xref fm:HeadingOnly" href="#idb01922c2-6ae1-4d23-85d2-766e8172c088__id7d9d94ff-543d-4a25-a9fd-eb7898e5c214">Gray Box Cell Behaviors</a>” for details.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__id1fb55685-a90b-4a0f-8263-bae9c5b2ae96">DEVICES</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword specified with GRAY
that causes device recognition and netlisting of box cell contents.
(Device recognition does not occur when GRAY is specified without DEVICES.)
Devices in the gray box cells and any associated DFM properties
are passed to the Mask SVDB Directory in addition to layer data
passed through by using the GRAY option.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__id5c451b99-f551-447e-b945-376d6d59f6af">LAYOUT</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword that specifies
the statement applies to the layout design. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__id1805860f-00e7-4f7e-8025-1659e92c40da">ONLY</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword specified with LAYOUT
that causes box cell behavior to apply only during netlist extraction.
An LVS Box statement using this keyword is ignored during LVS comparison.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__id3f38368d-ca6e-4683-9b05-828a4f2d5cc4">SOURCE</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword that specifies
the statement applies to the source design. </p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">The combination
LAYOUT SOURCE is used by default if neither keyword is specified.</p>
</div>
</dd>
<dt class="dt ArgumentName dlterm" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__id50abd81f-b6b4-4c33-8f55-3541cb7908da"><span class="keyword ParameterName RequiredReplaceable">cell</span></dt>
<dd class="dd ArgumentDescription"><p class="p">A required name of a cell.
You can specify <span class="keyword ParameterName RequiredReplaceable">cell</span> any
number of times in one statement. A <span class="keyword ParameterName RequiredReplaceable">cell </span>parameter
may be specified as a string <a class="xref fm:HeadingOnly" href="Command_Variable_idef5949b0.html#idef5949b0-b789-4a00-9cce-cf32826c65c9__Command_Variable_idef5949b0.xml#idef5949b0-b789-4a00-9cce-cf32826c65c9" title="Defines the value of a variable in the rule file.">Variable</a>. Names of primitive subcircuits
can be specified. A cell parameter may contain one or more asterisk
(*) characters, where the * character is a wildcard that matches
zero or more characters. A string that contains a * character must
be enclosed in quotation marks because the * is a reserved symbol.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__idfc8f1534-c6f9-41a6-a2dc-cf922d508697">‘(’<span class="keyword ParameterName OptionalReplaceable">pin_swap_list</span>‘)’</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional list of pin names,
in parentheses, that specifies swappable pins. At least two pin names
delimited by space characters must appear in a <span class="keyword ParameterName OptionalReplaceable">pin_swap_list</span> for
swapping to occur. Pins within the list are interchangeable with
each other when determining cell correspondence in LVS comparison.
More than one <span class="keyword ParameterName OptionalReplaceable">pin_swap_list</span> may
be specified per <span class="keyword ParameterName RequiredReplaceable">cell</span>. Each
list is treated as a distinct set of swappable pins. Each pin name
can only appear once in the set of swap lists. Case sensitivity
of pin names is controlled by the <a class="xref fm:HeadingOnly" href="Command_LayoutCase_id4731ae33.html#id4731ae33-f293-41e7-bc08-81a7b739dbaf__Command_LayoutCase_id4731ae33.xml#id4731ae33-f293-41e7-bc08-81a7b739dbaf" title="Specifies whether the layout netlist should be processed in a case-sensitive manner. Used only in Calibre nmLVS-H, Calibre xACT, and Calibre xRC.">Layout Case</a> and <a class="xref fm:HeadingOnly" href="Command_SourceCase_id10000907.html#id10000907-843e-4a20-b391-f19e408b8344__Command_SourceCase_id10000907.xml#id10000907-843e-4a20-b391-f19e408b8344" title="Specifies whether the source SPICE netlist should be processed in a case-sensitive manner.">Source Case</a> specification statements. See
“<a class="xref fm:HeadingOnly" href="#idb01922c2-6ae1-4d23-85d2-766e8172c088__id0699a80e-c4d5-47ba-95d6-f9cab5f357a1">Example 3</a>.”</p>
</dd>
</dl>
</div>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">Specifies cells whose contents
are to be excluded from circuit comparison or circuit extraction, or
both. This statement can be specified any number of times, but the
same <span class="keyword ParameterName RequiredReplaceable">cell</span> name
cannot simultaneously be used in LVS Box statements that differ
by box cell type (discussed next). LAYOUT and SOURCE specifiers
are accumulated per cell across all LVS Box statements.</p>
<p class="p">For
the remainder of this topic, the following terms are used to disambiguate
which type of box cells are being discussed:</p>
<ul class="ul"><li class="li" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__idedfd2a81-1523-4291-9817-8cef7a3d9150"><p class="p"><span class="ph FontProperty HeadingLabel">Regular box cell</span>— LVS Box only is specified.</p>
</li>
<li class="li" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__id0aa49952-050e-42ab-990b-406537b7ccc8"><p class="p"><span class="ph FontProperty HeadingLabel">Black box cell</span> — LVS Box BLACK is specified.</p>
</li>
<li class="li" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__idaa211dd1-69fc-4a26-aee1-dc48ee2cc904"><p class="p"><span class="ph FontProperty HeadingLabel">Gray box cell</span> —
LVS Box GRAY is specified.</p>
</li>
</ul>
<p class="p">The
term “box cell” without any of the three modifiers could refer to
any of the preceding types, depending on the context.</p>
<p class="p">Warnings are given in circuit extraction and comparison, respectively,
for any box cell name that cannot be found. Warnings are given once
per cell name in either context. If circuit extraction and comparison
are performed in the same run, a box cell that exists in circuit extraction
automatically is considered as existing in comparison. As with hcells,
box cell names are case-insensitive by default. Cell names can be
treated as case-sensitive through the <a class="xref fm:HeadingOnly" href="Command_LayoutCase_id4731ae33.html#id4731ae33-f293-41e7-bc08-81a7b739dbaf__Command_LayoutCase_id4731ae33.xml#id4731ae33-f293-41e7-bc08-81a7b739dbaf" title="Specifies whether the layout netlist should be processed in a case-sensitive manner. Used only in Calibre nmLVS-H, Calibre xACT, and Calibre xRC.">Layout Case</a>, <a class="xref fm:HeadingOnly" href="Command_SourceCase_id10000907.html#id10000907-843e-4a20-b391-f19e408b8344__Command_SourceCase_id10000907.xml#id10000907-843e-4a20-b391-f19e408b8344" title="Specifies whether the source SPICE netlist should be processed in a case-sensitive manner.">Source Case</a>, and <a class="xref fm:HeadingOnly" href="Command_LvsCompareCase_idaa01e983.html#idaa01e983-cbe6-4cc9-8fc1-2e284becc311__Command_LvsCompareCase_idaa01e983.xml#idaa01e983-cbe6-4cc9-8fc1-2e284becc311" title="Controls case sensitivity in the comparison of names.">LVS Compare Case</a> statements.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">While
use of box cells provides certain advantages for parts of a verification
flow, use of box cells for a tapeout LVS run is not recommended
because they can obscure design discrepancies. Specifying <a class="xref fm:HeadingOnly" href="Command_LvsReportOption_id4e3aefd6.html#id4e3aefd6-68ca-411d-bfa7-c047733630d7__Command_LvsReportOption_id4e3aefd6.xml#id4e3aefd6-68ca-411d-bfa7-c047733630d7" title="Controls the level of detail and contents of an LVS Report. Not used in Calibre PERC.">LVS Report Option</a> BX shows box cell names in the
LVS Report.</p>
</div>
<p class="p">To get an overview of the differences between the various box
cell flows, see “<a class="xref Link" href="../../calbr_solns_pv_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'LVS Box Statement Usage', 'calbr_solns_pv_user'); return false;">LVS Box Statement Usage</a>”
in the <cite class="cite">Calibre Solutions for Physical Verification</cite> manual.</p>
<div class="section Subsection" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__id821491cf-e740-4b16-8139-d0059da88ff7"><h2 class="title Subheading sectiontitle">Box Cells
in Hierarchical Circuit Extraction</h2><p class="p">The LVS Box statement ensures
that all information necessary to process box cells in the LVS comparison
stage is preserved in the circuit extraction stage. If you want
the LVS Box statement to apply only during the circuit extraction
phase, specify LAYOUT ONLY.</p>
<div class="note tip"><span class="tiptitle">Tip</span> <p class="p">For a
layout cell containing devices to make a good regular or gray box
cell, its devices should be fully formed within the cell. Failure
to ensure this can give unexpected results.</p>
</div>
<p class="p">All placements of layout box
cells of any type are written as subcircuit calls in the extracted layout
netlist. Normally, the SPICE netlister discards placements of empty
cells (that is, cells with no devices). This filtering is disabled
for layout box cells.</p>
<p class="p">In the context
of a layout box cell, a pin (or port) is defined to be a set of
polygons of the same net that is used to connect the box cell to
other cells. All named (texted) pins of layout box cells are written
to the extracted layout netlist. A pin name is simply the name of
its respective net in the cell. Unnamed pins are netlisted when
they meet the conditions specified by <a class="xref fm:HeadingOnly" href="Command_LvsNetlistUnnamedBoxPins_id89c01205.html#id89c01205-22eb-42e6-805f-e46130fa6ada__Command_LvsNetlistUnnamedBoxPins_id89c01205.xml#id89c01205-22eb-42e6-805f-e46130fa6ada" title="Specifies whether the SPICE netlister includes certain unnamed pins of LVS Box cells in the output netlist. Used only in Calibre nmLVS-H, Calibre PERC, and Calibre xRC.">LVS Netlist Unnamed Box Pins</a> YES,
which is the default. </p>
<p class="p">Normally, the SPICE netlister
discards cell pins that are not connected to any devices or box placements
within the cell. This filtering is disabled for pins in layout box
cells that meet the netlisting criteria in the previous paragraph.</p>
<p class="p">Named port objects can be created with <a class="xref fm:HeadingOnly" href="Command_PortLayerText_idd1b41503.html#idd1b41503-cf78-45d7-b30b-c5cf6f6dd327__Command_PortLayerText_idd1b41503.xml#idd1b41503-cf78-45d7-b30b-c5cf6f6dd327" title="For input layout databases, causes text objects on the specified layer(s) in the top-level cell to be read and treated as text ports. Used only in Calibre nmLVS, Calibre nmLVS-H, Calibre PERC, and Calibre xRC.">Port Layer Text</a> specification statements. Any “unnamed”
port objects, such as those created by <a class="xref fm:HeadingOnly" href="Command_PortLayerPolygon_idaef4826f.html#idaef4826f-75c0-492b-a760-2845a4ae0bdd__Command_PortLayerPolygon_idaef4826f.xml#idaef4826f-75c0-492b-a760-2845a4ae0bdd" title="For input layout databases, causes shapes on the specified layer(s) in the top-level cell to be read and treated as geometric ports. Used only in Calibre nmLVS, Calibre nmLVS-H, Calibre PERC, and Calibre xRC.">Port Layer Polygon</a>, do not qualify. (Black box cells
use the LVS Black Box Port statement to define their ports.)</p>
<p class="p">Port Layer Text is only recognized in the top level of a regular
or gray box cell. (The <a class="xref fm:HeadingOnly" href="Command_LvsBlackBoxPortDepth_id38fd4c76.html#id38fd4c76-652b-431c-a37b-ebefed95957e__Command_LvsBlackBoxPortDepth_id38fd4c76.xml#id38fd4c76-652b-431c-a37b-ebefed95957e" title="Defines the hierarchical levels from which ports are recognized in LVS Box BLACK cells.">LVS Black Box Port Depth</a> statement
controls the recognition level for black box cells.) Port Layer
Text in the sub-hierarchy does not affect port detection for a box
cell.</p>
<p class="p">Layout box cells are preserved
during hierarchical netlist extraction and are not expanded by heuristics
such as dense overlap removal, even if they otherwise fit the criteria
for expansion. This ensures that all layout box cells are preserved
as subcircuits in the extracted layout netlist. In this respect,
layout box cells behave similarly to hcells. This special treatment
applies to all box cells in the LAYOUT set. </p>
<p class="p"><a class="xref fm:HeadingOnly" href="Command_ExpandCell_id566df504.html#id566df504-13fd-412d-ac13-74312114484b__Command_ExpandCell_id566df504.xml#id566df504-13fd-412d-ac13-74312114484b" title="Specifies cells having instances to be flattened one level into the space of parent cells in the hierarchy. Used only in hierarchical Calibre applications.">Expand Cell</a> and <a class="xref fm:HeadingOnly" href="Command_FlattenCell_id07f41b29.html#id07f41b29-9e69-47ef-88ad-c9039e0511cf__Command_FlattenCell_id07f41b29.xml#id07f41b29-9e69-47ef-88ad-c9039e0511cf" title="Specifies the cells whose instances are to be flattened up to the level of the cells in which the instances are placed. Used only in hierarchical Calibre applications.">Flatten Cell</a> have precedence over layout box
cell preservation and expand box cells just like regular cells.
LVS Box may slow down circuit extraction in cases where it would be
beneficial to expand box cells.</p>
<p class="p"><span class="ph FontProperty HeadingLabel">Cell Pushdown</span> —
Placements of layout box cells are not pushed down into other cells.
Cells that are classified as very small can be pushed down as an
optimization by the hierarchical database constructor, but box cells
do not participate in this.</p>
<p class="p"><span class="ph FontProperty HeadingLabel">Clone Cells</span> —
If a regular LVS Box cell is cloned due to <a class="xref fm:HeadingOnly" href="Command_LayoutCloneRotatedPlacements_idf04eb2dc.html#idf04eb2dc-eb9b-4935-84e8-b694155f97ce__Command_LayoutCloneRotatedPlacements_idf04eb2dc.xml#idf04eb2dc-eb9b-4935-84e8-b694155f97ce" title="Specifies whether to clone rotated cell placements during hierarchical database construction.">Layout Clone Rotated Placements</a> or <a class="xref fm:HeadingOnly" href="Command_LayoutCloneTransformedPlacements_id72e00195.html#id72e00195-7a9f-4878-bde8-d69dfc67c50d__Command_LayoutCloneTransformedPlacements_id72e00195.xml#id72e00195-7a9f-4878-bde8-d69dfc67c50d" title="Specifies whether to use cell cloning for all rotated or transformed cells during hierarchical database construction.">Layout Clone Transformed Placements</a> YES,
then all clones of that box cell are treated as box cells. </p>
</div>
<div class="section Subsection" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__id098827ee-0701-4842-b055-a847593e5928"><h2 class="title Subheading sectiontitle">Box Cells
in Hierarchical Circuit Comparison</h2><p class="p">Hierarchical LVS comparison ignores
the contents of specified box cells when it reads the layout or
source netlists, essentially comparing box cells as primitive devices
with pins. </p>
<p class="p">Box cells in the LAYOUT set are
treated like hcells and are not expanded. Regular box cells in the
SOURCE set can be expanded, but black and gray box cells cannot. </p>
<p class="p">If LAYOUT ONLY is specified,
the specified cells are not treated as box cells during comparison.</p>
<p class="p">The LVS component type of box
cells is the cell name. The cell has no subtype, but subtypes may
be specified with the $[mname] or $.MODEL = mname constructs in
subcircuit calls in SPICE netlists, just like for empty subcircuits.
LVS pin names are the cell pin names.</p>
<p class="p">Like all primitive devices, box
cells are matched by name by default. The <a class="xref fm:HeadingOnly" href="Command_Hcell_id848a5468.html#id848a5468-2f19-48ed-b42e-5b5143e750a7__Command_Hcell_id848a5468.xml#id848a5468-2f19-48ed-b42e-5b5143e750a7" title="Specifies a pair of subcircuits — one from layout and one from source — that correspond. Used only in hierarchical applications.">Hcell</a> specification statement or an
hcell file must be used to specify matching of differently-named
cells. For example, if box cell A_lay matches cell A_src, you must
specify the hcell correspondence and use this:</p>
<pre class="pre codeblock"><code>LVS BOX A_lay A_src</code></pre><p class="p">or this:</p>
<pre class="pre codeblock"><code>LVS BOX LAYOUT A_lay
LVS BOX SOURCE A_src</code></pre><p class="p">The .GLOBAL and <span class="ph fmvar:dotPARAM">.PARAM</span> statements in SPICE netlists are
processed when they appear inside LVS Box subcircuits. For example:</p>
<pre class="pre codeblock"><code>.subckt mybox p g
.global vcc
...
.ends

.subckt top gnd
X0 vcc gnd mybox
...
.ends</code></pre><p class="p">Rule file:</p>
<pre class="pre codeblock"><code>LVS BOX mybox</code></pre><p class="p">In the preceding example, vcc
is treated as a global signal for the mybox subcircuit (and for
the entire netlist).</p>
<p class="p">Specifying top cells as box cells
causes designs to appear as empty.</p>
<p class="p">High-short resolution can apply
to box cell pins. See “<a class="xref Link" href="../../calbr_ver_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'High-Short Resolution', 'calbr_ver_user'); return false;">High-Short Resolution</a>” in the <cite class="cite">Calibre Verification User’s Manual</cite> for
more details.</p>
</div>
<div class="section Subsection" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__id603f572f-26a3-4820-90b5-08d88a40ce57"><h2 class="title Subheading sectiontitle">Box Cells
in Flat LVS</h2><p class="p">In flat LVS, the LVS Box specification
statement operates on the layout or source only if the layout or
source, respectively, are SPICE netlists. The effect is then the
same as for hierarchical circuit comparison. Namely, LVS ignores
the contents of the specified cells when it reads the layout or
source netlists and treats these cells as primitive devices with
pins. LAYOUT ONLY changes this behavior for layout box cells. The
layout or source are not affected if they are not in SPICE netlist
form.</p>
</div>
<div class="section Subsection" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__id9ee789e8-23c3-43e5-98af-ca43fdb16641"><h2 class="title Subheading sectiontitle">Regular
Box Cell Behaviors</h2><p class="p">In addition to behaviors mentioned previously, the following
things apply to regular box cells.</p>
<p class="p">Device recognition occurs in regular box cells, and such box
cells are subject to seed promotion. To avoid seed promotion, it
is good practice to ensure devices are fully formed within regular box
cells.</p>
<p class="p">Regular box cell contents are
netlisted. The netlisting of these box cell contents is controlled
by the <a class="xref fm:HeadingOnly" href="Command_LvsNetlistBoxContents_id80a3cfe0.html#id80a3cfe0-f055-4360-956a-a11220930e39__Command_LvsNetlistBoxContents_id80a3cfe0.xml#id80a3cfe0-f055-4360-956a-a11220930e39" title="Specifies whether to write internal contents of layout LVS Box cells to the output netlist. Used only in Calibre nmLVS-H, Calibre PERC, and Calibre xRC.">LVS Netlist Box Contents</a> statement. The <a class="xref fm:HeadingOnly" href="Command_LvsPreserveBoxCells_id6c30644e.html#id6c30644e-84b4-4e3c-b0e8-a7f725f1aff1__Command_LvsPreserveBoxCells_id6c30644e.xml#id6c30644e-84b4-4e3c-b0e8-a7f725f1aff1" title="Specifies how LVS Box cell contents are written to an extracted layout netlist. Used only in Calibre nmLVS-H and Calibre PERC.">LVS Preserve Box Cells</a> YES statement has the same effect.
The LVS Netlist Box Contents NO and LVS Preserve Box Cells YES statements cause
regular box cells to be written as empty subcircuits with pins in
the extracted netlist. LVS Preserve Box Cells YES also suppresses
seed promotion out of regular box cells and the netlisting of any
devices that originate from within box cells.</p>
<p class="p">Any net in the cell that is connected
to nets outside of a regular box cell, in at least one placement
of the cell, becomes a pin of the cell. <a class="xref fm:HeadingOnly" href="Command_TextLayer_idb312d972.html#idb312d972-cbcd-4d55-a34a-03fac1fa9d17__Command_TextLayer_idb312d972.xml#idb312d972-cbcd-4d55-a34a-03fac1fa9d17" title="Specifies the layers in the database from which connectivity extraction text is read.">Text Layer</a> statements can be used for texting
of nets that serve as pins. </p>
<p class="p">All pins of regular layout box cells that are connected to named
(texted) port objects inside the box cell are written to the extracted
layout netlist, except when the respective net inside the box cell
is unnamed and <a class="xref fm:HeadingOnly" href="Command_LvsNetlistUnnamedBoxPins_id89c01205.html#id89c01205-22eb-42e6-805f-e46130fa6ada__Command_LvsNetlistUnnamedBoxPins_id89c01205.xml#id89c01205-22eb-42e6-805f-e46130fa6ada" title="Specifies whether the SPICE netlister includes certain unnamed pins of LVS Box cells in the output netlist. Used only in Calibre nmLVS-H, Calibre PERC, and Calibre xRC.">LVS Netlist Unnamed Box Pins</a> NO is specified. </p>
<p class="p">Unnamed nets (those with numeric
IDs only) in regular box cells can be netlisted as pins if they are
connected to devices within the box cell and LVS Netlist Unnamed
Box Pins YES is specified, which it is by default.</p>
<p class="p">Port objects from Port Layer
Text and Port Layer Polygon specification statements induce explicit
pins in regular layout box cells. Specifically, any net in a layout
regular box cell that has a port object connected to it in the cell
becomes a pin of the cell. Thus, port objects can be used in regular
box cells to ensure that a pin is recognized, even when the pin
is floating in all placements of the cell. If Port Layer Polygon
is used for this purpose, the pin might not appear in the extracted
layout netlist unless the pin is named, or it is connected to devices
or other box cell placements inside the box cell, or it is connected
to named port objects, and certain other circumstances that require
a pin to be preserved. </p>
<p class="p">Port objects can be used in box
cells to specify pins explicitly that are globally floating and normally
would not be recognized. Port objects can induce pins but do not
determine pin names or net names in regular box cells. It is not
necessary to name ports in regular box cells.</p>
</div>
<div class="section Subsection" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__id0e6d0ce0-ee8c-4ef5-bf24-ce9030624fe6"><h2 class="title Subheading sectiontitle">Behaviors
Common to BLACK and GRAY Box Cells</h2><p class="p">The <a class="xref fm:HeadingOnly" href="Command_MaskSvdbDirectory_id29b82de4.html#id29b82de4-b10f-4a4d-8959-e47cc6c0f647__Command_MaskSvdbDirectory_id29b82de4.xml#id29b82de4-b10f-4a4d-8959-e47cc6c0f647" title="Creates a Standard Verification Database Directory (SVDB) in Calibre nmLVS and Calibre PERC applications. Required for Calibre xACT, Calibre xRC, and Calibre RVE debugging of run results for topology-based tools.">Mask SVDB Directory</a> statement is required when using
the BLACK or GRAY keywords. Mask SVDB Directory with the CCI keyword
is frequently desirable when using gray box cells.</p>
<p class="p">The main distinguishing feature
of black and gray box cells versus regular box cells is that they are
processed outside of any placement context. Therefore, the BLACK
and GRAY keywords preserve hierarchy in a way that LVS Box alone
does not. Consequently, the black and gray box cells can cause LVS
comparison to be CORRECT in certain cases when it is INCORRECT for regular
box cells.</p>
<p class="p">Black and gray (by default) box cells are netlisted as empty
subcircuits with pins. However, when the DEVICES keyword is used,
gray box cells behave similarly to regular box cells when it comes
to device recognition. Gray box cells are always processed in isolation
from the rest of the design. Regular box cells never are.</p>
<p class="p">Layer operations outside of a
black or gray box cell are independent of geometries located within
the box cell or its sub-hierarchy. For example, a marker polygon
drawn on top of a placement of a black or gray box cell has no effect
on layer operations within the box cell, and a marker polygon drawn
within a box cell ordinarily has no effect on layer operations outside
the box cell. The exceptions to these behaviors are as follows:</p>
<ul class="ul"><li class="li" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__id1e7d0277-6d41-4feb-8b0c-518845865935"><p class="p">The Extent
and Extent Cell operations, which are handled differently as described
under “<a class="xref" href="#idb01922c2-6ae1-4d23-85d2-766e8172c088__idf03c5d0b-2349-4ebf-9705-c3cf4717988a">Extent-Related Operation Handling
in Black and Gray Box Cells</a>.”</p>
</li>
<li class="li" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__id28c59646-299b-403e-baaf-f02f4325e299"><p class="p">The DEVICES
option, which permits device extraction in gray box cells.</p>
</li>
<li class="li" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__idb8fc747e-2bae-4b2a-a2b1-e71f25307b75"><p class="p">The <a class="xref fm:HeadingOnly" href="Command_LvsBoxPeekLayer_idf60aea5e.html#idf60aea5e-4118-4e4e-828d-37ef96c807ae__Command_LvsBoxPeekLayer_idf60aea5e.xml#idf60aea5e-4118-4e4e-828d-37ef96c807ae" title="Specifies original layers in LVS Box BLACK and GRAY cells that can interact with layers and participate in layer derivations in the cells’ super-hierarchies.">LVS Box Peek Layer</a> statement
allows layers in black and gray box cells to interact with and participate
in layer derivations with layers in their super-hierarchies.</p>
</li>
</ul>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">ERC rule
checks, <a class="xref fm:HeadingOnly" href="Command_LvsSoftchk_idb90fd8f4.html#idb90fd8f4-c060-469d-8dbc-b2b7b4a217f0__Command_LvsSoftchk_idb90fd8f4.xml#idb90fd8f4-c060-469d-8dbc-b2b7b4a217f0" title="Selects polygons involved in conflicting connections from all Sconnect operations.">LVS Softchk</a>, and <a class="xref fm:HeadingOnly" href="Command_LvsAnnotateDevices_ideeca7934.html#ideeca7934-2e7d-46dc-b0e0-209e21ad11cc__Command_LvsAnnotateDevices_ideeca7934.xml#ideeca7934-2e7d-46dc-b0e0-209e21ad11cc" title="Specifies to annotate device shapes with properties stored on an annotation layer. Annotation properties are available using the Calibre Connectivity Interface. Used only in Calibre nmLVS‑H and Calibre PERC.">LVS Annotate Devices</a> do not apply to black or gray
box cells. (The LVS Annotate Devices limitation is lifted for gray
box cells when the DEVICES keyword is used.) While these commands
can be run in a box cell flow, the results will be incomplete since
black and gray box cells are excluded during the computation for
the necessary operations. In effect, the operations will treat the
design as all cells without the black and gray boxes. </p>
</div>
<p class="p">The start and end of the pre-processing
for black and gray box cells are noted in the transcript. For black
box cells, the following messages are shown:</p>
<pre class="pre codeblock"><code>PRE-PROCESSING FOR BLACK BOXES ...
CELL a1230 (BLACK BOX)
CELL a1240 (BLACK BOX)
     a1240 (PC=19)
     a1240 CPU TIME = 0  REAL TIME = 0  LVHEAP = 5/6/67  MALLOC = ...
     a1230 (PC=16)
     a1230 CPU TIME = 0  REAL TIME = 0  LVHEAP = 5/6/67  MALLOC = ...
THREAD COUNT = 4  CPU TIME = 0.00159075  REAL TIME = 0.0025898
PRE-PROCESSING FOR BLACK BOXES COMPLETED.</code></pre><p class="p">Gray box cells are processed
similarly. The (PC=<span class="keyword ParameterName OptionalReplaceable">n</span>)
string indicates the number of ports that were recognized for the
black box cell.</p>
<p class="p">Black and gray box cell pins
that do not appear in the source design are ignored in circuit comparison.
This allows for proper handling of feedthrough nets that may not
be present in the source.</p>
<p class="p">Black and gray box cells in the SOURCE set are not expanded during
LVS comparison.</p>
<h2 class="title Subheading sectiontitle">Extent-Related
Operation Handling in Black and Gray Box Cells</h2><p class="p"><a class="xref fm:HeadingOnly" href="Command_Extent_id8383f43f.html#id8383f43f-ecb8-471b-97a6-04ed1887acb2__Command_Extent_id8383f43f.xml#id8383f43f-ecb8-471b-97a6-04ed1887acb2" title="Constructs a derived polygon layer that represents the least enclosing rectangle of the database.">Extent</a>, <a class="xref fm:HeadingOnly" href="Command_ExtentCell_id04250c92.html#id04250c92-191a-4077-9a8c-b5393e6e3c7f__Command_ExtentCell_id04250c92.xml#id04250c92-191a-4077-9a8c-b5393e6e3c7f" title="Generates a derived polygon layer consisting of rectangles that represent the extents of cells in the given list. Used only in Calibre.">Extent Cell</a>, and <a class="xref fm:HeadingOnly" href="Command_ExtentDrawn_idd76373ef.html#idd76373ef-76a7-426c-9132-4b8a7bcaf4e6__Command_ExtentDrawn_idd76373ef.xml#idd76373ef-76a7-426c-9132-4b8a7bcaf4e6" title="Constructs a derived polygon layer consisting of the extent of shapes (not text) on original layers. Used only in Calibre.">Extent Drawn</a> operations
are handled specially in the black and gray box flows. The main
purpose of this special handling is to produce workable results
for layers that are derived from the extent operations. The <a class="xref fm:HeadingOnly" href="Command_LvsBoxCutExtent_id9f6ea953.html#id9f6ea953-ef96-43f5-a66e-c6254b8e421d__Command_LvsBoxCutExtent_id9f6ea953.xml#id9f6ea953-ef96-43f5-a66e-c6254b8e421d" title="Specifies how layers derived using Extent-based operations are handled in LVS Box BLACK and GRAY flows.">LVS Box Cut Extent</a> specification
statement controls how Extent-based layers are handled.</p>
<p class="p">Consider the example of a psub
layer that is derived from this layer operation:</p>
<pre class="pre codeblock"><code>psub = (EXTENT) NOT nwell</code></pre><div class="p">Suppose psub covers the full
extent of the design, while nwell lies completely inside a box cell.<br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/LVS/lvs_box_1.png" /></div><br /></div>
<p class="p">For a black box cell, no layer
geometries are considered inside the cell by default; hence, the EXTENT
layer above the box cell is determined by cutting around the box
cell, and the psub layer is formed accordingly.</p>
<p class="p">For the gray box cell, the layer
geometries are present for use by downstream clients, but these geometries
are completely determined during a gray box pre-processing step.
Hence, it also makes sense to cut around the gray box cell when
determining the EXTENT layer to prevent unwanted interactions between
the box cell and geometry higher up. This is done by default. </p>
<p class="p">To summarize, Extent, Extent
Cell, and Extent Drawn operations performed in the super-hierarchy
of black and gray box cells cut around the boundaries of these cells
by default (<a class="xref fm:HeadingOnly" href="Command_LvsBoxCutExtent_id9f6ea953.html#id9f6ea953-ef96-43f5-a66e-c6254b8e421d__Command_LvsBoxCutExtent_id9f6ea953.xml#id9f6ea953-ef96-43f5-a66e-c6254b8e421d" title="Specifies how layers derived using Extent-based operations are handled in LVS Box BLACK and GRAY flows.">LVS Box Cut Extent</a> NO changes
this behavior for Extent operations only). For the black and gray box
cells, no extent operation geometries are present inside of the
cells during processing of geometry in the super-hierarchy. For
gray box cells, the missing extent operation geometries are available
for connection to super-hierarchy layers and to downstream tools
through the Mask SVDB Directory PHDB, but the missing geometries
are not visible to layer operations performed above the box cells.</p>
</div>
<div class="section Subsection" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__id4199ee5e-ade1-4fe1-9709-5bcb1fccc243"><h2 class="title Subheading sectiontitle">Black
Box Cell Behaviors</h2><p class="p">Black box cells allow a simplified
LVS analysis of high-level blocks that can help to identify incorrect
pin connections and shorts at the top level of the box cells. Using
the BLACK keyword can reduce LVS run times and allows processing
of layouts that contain incomplete or incorrect cells.</p>
<p class="p">In a black box cell, no layer
operations are performed and no layer derivation occurs, except
if LVS Box Peek Layer or LVS Black Box Port Depth ALL is specified.
Circuit extraction is not performed in these cells; hence, devices
are not extracted within them.</p>
<p class="p">No high-short resolution is performed
at the top level of a black box cell. Hence, connectivity in the
super-hierarchy does not induce connections between distinct nets
in a black box cell. </p>
<h2 class="title Subheading sectiontitle">Black Box
Cell Ports</h2><p class="p">The <a class="xref fm:HeadingOnly" href="Command_LvsBlackBoxPort_id7391e1f3.html#id7391e1f3-2a66-4c01-bd91-8d08494db5ee__Command_LvsBlackBoxPort_id7391e1f3.xml#id7391e1f3-2a66-4c01-bd91-8d08494db5ee" title="Defines port objects for the LVS Box BLACK statement.">LVS Black Box Port</a> specification
statement is required when using the BLACK keyword. It defines layers
that classify port objects for black box cells. The hierarchical
depth from which black box ports are recognized is controlled by
the <a class="xref fm:HeadingOnly" href="Command_LvsBlackBoxPortDepth_id38fd4c76.html#id38fd4c76-652b-431c-a37b-ebefed95957e__Command_LvsBlackBoxPortDepth_id38fd4c76.xml#id38fd4c76-652b-431c-a37b-ebefed95957e" title="Defines the hierarchical levels from which ports are recognized in LVS Box BLACK cells.">LVS Black Box Port Depth</a> statement. The default is primary
level of a box cell. </p>
<p class="p">The ports of a black box cell
are designated with text objects. Hence, a well defined port is
a set of polygons on a named net that is used expressly for connecting
to surrounding cells. Ports are not inherent in the design database
but are created for a black box cell in a pre-processing step.</p>
<p class="p">By definition, the polygons that
comprise a port are on the same net even if they are physically disjoint.
Physically disjoint polygons can be made a part of the same port
by texting the polygons with the same name. The disjoint polygons
carrying the same name are then virtually connected. In addition,
the polygons of a port in a black box cell carry the net information
to the super-hierarchy and conjoin separate nets connected to these
port polygons in the super-hierarchy. Consequently, feedthrough
nets that traverse black box cells are recognized in the super-hierarchy. </p>
<p class="p">Distinct port polygons that have
the same name must be part of the same port. To ensure this, a form
of virtual connection of ports is automatically done for black box
cells. <a class="xref fm:HeadingOnly" href="Command_VirtualConnectBoxName_ide8713940.html#ide8713940-5c57-4ca8-a3a7-61e98f5f9189__Command_VirtualConnectBoxName_ide8713940.xml#ide8713940-5c57-4ca8-a3a7-61e98f5f9189" title="Specifies virtual connections for identical net names in LVS Box cells. Used only in Calibre nmLVS-H, Calibre PERC, and Calibre xRC.">Virtual Connect Box Name</a> does
not apply to black box cells. External connections to black box
cells are subject to <a class="xref fm:HeadingOnly" href="Command_VirtualConnectBoxColon_id24979ea1.html#id24979ea1-19b4-4b65-8fb7-2ac2cf829601__Command_VirtualConnectBoxColon_id24979ea1.xml#id24979ea1-19b4-4b65-8fb7-2ac2cf829601" title="Specifies virtual connections for identical net names containing a colon (:) in LVS Box cells. Used only in Calibre nmLVS-H, Calibre PERC, and Calibre xRC.">Virtual Connect Box Colon</a>. </p>
<p class="p">During the circuit extraction
phase, the transcript shows a complete list of recognized ports
for each black box cell:</p>
<pre class="pre codeblock"><code>-------------------------------------------------------------------------
-----        PORTS FOR BOX CELL: a1220
-------------------------------------------------------------------------
OUT 60 (metal2) (19.969,45.838)         I2 60 (metal2) (4.064,33.975)
I1 60 (metal2) (12.277,33.714)          VSS 50 (metal1) (3.6,1.9)
VDD 50 (metal1) (2.6,81.9)              OUT 50 (metal1) (19.969,45.838)
I2 50 (metal1) (4.064,33.975)           I1 50 (metal1) (12.277,33.714)</code></pre><p class="p">In the example, cell a1220 has
ports named OUT on layers metal1 and metal2 at location (19.969,
45.838). Other ports have similar semantics. If ports do not appear
in this section as expected, check the LVS Black Box Port and LVS
Black Box Port Depth statements.</p>
</div>
<div class="section Subsection" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__id7d9d94ff-543d-4a25-a9fd-eb7898e5c214"><h2 class="title Subheading sectiontitle">Gray Box Cell Behaviors</h2><p class="p">Cells that
are used for downstream timing simulations are candidates for specification
as gray box cells. For a gray box cell, all relevant geometries
located in the cell and any sub-hierarchy are processed. Layer operations
within gray box cells are independent of geometries located outside
the cell. The effect is similar to that of processing the box cell
“stand-alone” as a top-level cell. If a cell cannot be processed
in this way, then declare it as a regular box cell.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">There are other ways of achieving
the same goals as declaring a gray box cell that may be suitable.
These include <a class="xref fm:HeadingOnly" href="Command_PEXPreserveCellList_id23b8c778.html#id23b8c778-d1f3-44c0-89f1-e0e650204e30__Command_PEXPreserveCellList_id23b8c778.xml#id23b8c778-d1f3-44c0-89f1-e0e650204e30" title="Specifies a list of cells to receive special protection from hierarchical manipulation during circuit extraction performed in conjunction with PEX flows.">PEX Preserve Cell List</a>, <a class="xref fm:HeadingOnly" href="Command_LvsPreserveBoxCells_id6c30644e.html#id6c30644e-84b4-4e3c-b0e8-a7f725f1aff1__Command_LvsPreserveBoxCells_id6c30644e.xml#id6c30644e-84b4-4e3c-b0e8-a7f725f1aff1" title="Specifies how LVS Box cell contents are written to an extracted layout netlist. Used only in Calibre nmLVS-H and Calibre PERC.">LVS Preserve Box Cells</a>, <a class="xref fm:HeadingOnly" href="Command_LVSCloneByLVSBoxCells_id318feb65.html#id318feb65-22b6-4729-b8d9-2ad2f7d66092__Command_LVSCloneByLVSBoxCells_id318feb65.xml#id318feb65-22b6-4729-b8d9-2ad2f7d66092" title="Specifies whether to clone subcells of regular LVS Box cells that are also placed outside box cells. This statement is intended for certain Query Server CCI flows involving regular box cells.">LVS Clone By LVS Box Cells</a>, or <a class="xref fm:HeadingOnly" href="Command_BILdeviceblockedextent_id062bb366.html#id062bb366-4a7d-4c45-a6a0-9291bfcc75be__Command_BILdeviceblockedextent_id062bb366.xml#id062bb366-4a7d-4c45-a6a0-9291bfcc75be" title="Returns a derived polygon layer representing the extent of the input layout design. This extent is ignored in the context of a specified set of parameterized device cells (pcells). This function is only used in parasitic extraction flows that use pre-characterized device models for cells that require a specific layer (typically substrate) not to be present. This function is always called in the context of a tvf::SETLAYER command and is part of the CalibreDFM_Device Tcl package. This function is incompatible with the LVS Box GRAY keyword.">device::blocked_extent</a>.</p>
</div>
<p class="p">Connectivity
extraction occurs in gray box cells (again, in isolation from the
rest of the hierarchy), but device recognition and netlisting of
devices does not by default. Hence, the performance advantage that
can occur by using black box cells is not observed for gray box cells.
If you need extracted device information, include the DEVICES keyword.
Netlisting of gray box cell contents is affected by the LVS Netlist
Box Contents setting. Although device recognition occurs in gray
box cells when the DEVICES keyword is used, gray box cells are not susceptible
to seed promotion.</p>
<p class="p">As previously discussed, gray box cell contents are processed
outside of any placement context. However, as part of a separate
processing step, nets in a gray box cell are examined for external connections.
If there is an external connection to a net in at least one placement
of the gray box cell, that net becomes a pin of the cell. This is
similar to pin formation in regular box cells. To prevent layers
from forming pins in gray box cells, use <a class="xref fm:HeadingOnly" href="Command_LvsGrayBoxNotPort_id8cbc361b.html#id8cbc361b-0be9-4454-bc1b-de17b95d052a__Command_LvsGrayBoxNotPort_id8cbc361b.xml#id8cbc361b-0be9-4454-bc1b-de17b95d052a" title="Specifies Connect or Sconnect layers that cannot form pins in LVS Box GRAY cells.">LVS Gray Box Not Port</a>.</p>
<p class="p">The handling of port objects and the naming of pins in gray box
cells is likewise similar to “<a class="xref fm:HeadingOnly" href="#idb01922c2-6ae1-4d23-85d2-766e8172c088__id9ee789e8-23c3-43e5-98af-ca43fdb16641">Regular Box Cell Behaviors</a>” discussed
previously, as is the netlisting of unnamed pins.</p>
<p class="p">By default, layers are not promoted
outside of gray box cells. However, interactions with layers in
the super-hierarchy of a gray box cell can be enabled with LVS Box
Peek Layer. </p>
<p class="p">Gray box cells observe both Virtual Connect
Box Name and Virtual Connect Box Colon settings. High-short resolution
is performed in gray box cells.</p>
</div>
<div class="section Subsection" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__id7281772d-e466-4cdf-9da7-34662c6d3ab2"><h2 class="title Subheading sectiontitle">Problematic
Box Cells</h2><p class="p">In general, any box cell should
have its devices fully-formed within that cell. Failure to comply with
this can give results that are difficult to debug.</p>
<p class="p">Cells that rely on geometric
interaction across the boundary between box cells and cells in their super-hierarchy,
or between adjacent or overlapping box cells, do not make good candidates
for black or gray box cells because these interactions are specifically
suppressed. (This behavior can be overridden by LVS Box Peek Layer.)
This can cause unexpected outcomes when correct results depend upon
this type of interaction. Specific situations that can be problematic
include the following cases.</p>
<ul class="ul"><li class="li" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__idac8483a1-12c3-48cf-b290-e813b016bc59"><p class="p">Layer operations that depend
on original or drawn layers that reside primarily inside placements
of black or gray box cells and their interaction with shapes that
reside outside of those placements. </p>
<p class="p">For example, consider this operation
in a non-box flow:</p>
<pre class="pre codeblock"><code>X = T NOT P // T is in a top-level cell, P is in placement cells</code></pre><div class="p">In the non-box flow, the geometries
from both layers at all levels of the hierarchy are present for
the operation. For the black or gray box cell flow (right-most figure),
the geometries of P are not present and do not participate in the
derivation for layer X.<br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/LVS/lvs_box_2.png" /></div><br /></div>
<p class="p">This can result in shapes on
layer X that are larger than intended. Inaccuracies in layer shapes
can lead to connectivity problems such as short circuits and <a class="xref fm:HeadingOnly" href="Command_Sconnect_id92404882.html#id92404882-732c-417e-9003-93872909e542__Command_Sconnect_id92404882.xml#id92404882-732c-417e-9003-93872909e542" title="Specifies one-directional connection between objects on specified layers. Used in detection of soft connections. Syntax 1 establishes the connection through a contact layer while Syntax 2 does not. Used in conjunction with LVS Softchk or the lvs::softchk compile-time TVF function.">Sconnect</a> conflicts in the box flow. </p>
</li>
<li class="li" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__ida3ce92b4-8f73-42bd-bc8b-09ae841f8b6f"><p class="p">Devices that lie outside
of and overlap the boundaries of the black or gray box cells. </p>
<p class="p">Devices that overlap black or
gray box cells can lead to BAD DEVICE warnings if the proper formation
of the device requires layer geometries that reside inside the box
cells. For example, assume this Device statement:</p>
<pre class="pre codeblock"><code>DEVICE MN mos gate(G) ns(S) nd(D)</code></pre><p class="p">If the geometries for the layers
mos, gate, and ns reside outside the box cell while the geometries
for the nd layer reside inside the box cell, this will lead to a
BAD DEVICE warning. The drain pin is not located due to the box
cell, so a proper device is not formed.</p>
</li>
</ul>
<p class="p">See also <a class="xref fm:HeadingOnly" href="Command_LVSCloneByLVSBoxCells_id318feb65.html#id318feb65-22b6-4729-b8d9-2ad2f7d66092__Command_LVSCloneByLVSBoxCells_id318feb65.xml#id318feb65-22b6-4729-b8d9-2ad2f7d66092" title="Specifies whether to clone subcells of regular LVS Box cells that are also placed outside box cells. This statement is intended for certain Query Server CCI flows involving regular box cells.">LVS Clone By LVS Box Cells</a>, <a class="xref fm:HeadingOnly" href="Command_LvsPreserveBoxPorts_id9012387e.html#id9012387e-3098-43ad-a553-3b3b55bb8218__Command_LvsPreserveBoxPorts_id9012387e.xml#id9012387e-3098-43ad-a553-3b3b55bb8218" title="Specifies how LVS Box cell ports are handled during high-short resolution. Used only in Calibre nmLVS-H and Calibre PERC.">LVS Preserve Box Ports</a>, <a class="xref fm:HeadingOnly" href="Command_LvsReportOption_id4e3aefd6.html#id4e3aefd6-68ca-411d-bfa7-c047733630d7__Command_LvsReportOption_id4e3aefd6.xml#id4e3aefd6-68ca-411d-bfa7-c047733630d7" title="Controls the level of detail and contents of an LVS Report. Not used in Calibre PERC.">LVS Report Option</a> BX, <a class="xref fm:HeadingOnly" href="Command_LvsSpiceCullPrimitiveSubcircuits_id61f1fab5.html#id61f1fab5-e91f-4d8d-bcad-3a700c19ac2d__Command_LvsSpiceCullPrimitiveSubcircuits_id61f1fab5.xml#id61f1fab5-e91f-4d8d-bcad-3a700c19ac2d" title="Specifies whether to ignore primitive subcircuits having names that do not appear in the rule file.">LVS Spice Cull Primitive Subcircuits</a>, <a class="xref fm:HeadingOnly" href="Command_LvsExcludeHcell_id3558034e.html#id3558034e-ea49-403b-a089-80c10d373f4e__Command_LvsExcludeHcell_id3558034e.xml#id3558034e-ea49-403b-a089-80c10d373f4e" title="Specifies to ignore specified hcells in all circumstances. Used only in Calibre nmLVS-H and Calibre PERC. Observed by Calibre Query Server.">LVS Exclude Hcell</a>, <a class="xref fm:HeadingOnly" href="Command_LvsSpiceExcludeCell_id17d7f955.html#id17d7f955-2525-4b8a-9013-6af76d2ff381__Command_LvsSpiceExcludeCell_id17d7f955.xml#id17d7f955-2525-4b8a-9013-6af76d2ff381" title="Specifies to ignore calls to a subcircuit in a SPICE netlist. Used by Calibre nmLVS, Calibre nmLVS-H, Calibre 3DSTACK, Calibre PERC, Calibre xACT, Calibre xRC, and Calibre xL.">LVS Spice Exclude Cell</a>, and <a class="xref fm:HeadingOnly" href="Command_LvsFilter_id873b982a.html#id873b982a-2d33-49e2-a752-62a443c57fb3__Command_LvsFilter_id873b982a.xml#id873b982a-2d33-49e2-a752-62a443c57fb3" title="Filters out source and layout instances having properties with the specified values.">LVS Filter</a>.</p>
</div>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><div class="section Subsection" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__idc7489c40-43a3-431d-9980-b6fe50fd04a5"><h2 class="title Subheading sectiontitle">Example 1</h2><p class="p">In the following equivalent statement
sets, the specified cells are processed as box cells in the source
and layout:</p>
<pre class="pre codeblock"><code>LVS BOX cella cellb cellc celld</code></pre><p class="p">or</p>
<pre class="pre codeblock"><code>LVS BOX LAYOUT cella cellb cellc celld
LVS BOX SOURCE cella cellb cellc celld</code></pre></div>
<div class="section Subsection" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__id56229b58-86e8-4e29-a61f-324803d22781"><h2 class="title Subheading sectiontitle">Example 2</h2><p class="p">The following statements cause cellA
to be a box cell in layout and source. Additionally, cellA is netlisted
as an empty subcircuit with only named pins.</p>
<pre class="pre codeblock"><code>LVS BOX cellA
LVS NETLIST BOX CONTENTS NO
LVS NETLIST UNNAMED BOX PINS NO</code></pre></div>
<div class="section Subsection" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__id0699a80e-c4d5-47ba-95d6-f9cab5f357a1"><h2 class="title Subheading sectiontitle">Example 3</h2><p class="p">With LAYOUT and SOURCE keywords
used in conjunction with Hcell statements, you can match boxes of
different names that have the same pin swap conditions. Consider
these netlists:</p>
<pre class="pre codeblock"><code>** layout
.subckt cell1 a b c d
M0 a b c d n
.ends

.subckt top
x1 1 2 3 4 cell1
x2 2 1 3 4 cell1
.ends

**source
.subckt cell2 a b c d
M0 a b c d n
.ends

.subckt top
x1 1 2 3 4 cell2
x2 1 2 3 4 cell2
.ends</code></pre><p class="p">You can match the subcells with
these statements. The pin swap conditions are simply for illustration.</p>
<pre class="pre codeblock"><code>LVS BOX SOURCE cell2 (a b) (c d)
LVS BOX LAYOUT cell1 (a b) (c d)
HCELL cell1 cell2</code></pre></div>
<div class="section Subsection" id="idb01922c2-6ae1-4d23-85d2-766e8172c088__idc60eca75-9da1-4694-ad54-4a170ed46705"><h2 class="title Subheading sectiontitle">Example
4</h2><p class="p">Here as a black box setup:</p>
<pre class="pre codeblock"><code>LAYER m2     12 // original_layer used for black box ports
LAYER txt    15 // text_layer
LAYER cap    18
LAYER res    19

TEXT LAYER txt 

m2wire = m2 NOT (cap OR res) // interconnect_layer
CONNECT m2wire m2
ATTACH txt m2wire

LVS BOX BLACK ram // requires LVS BLACK BOX PORT statement
LVS BLACK BOX PORT m2 txt m2wire

MASK SVDB DIRECTORY svdb QUERY</code></pre></div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_LvsCommands_id497866fa.html" title="The commands in this section begin with “LVS.”">LVS … Commands</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "svrf_ur"
                DocTitle = "Standard Verification Rule Format (SVRF) Manual"
                PageTitle = "LVS Box"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_LvsBox_idb01922c2.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Standard Verification Rule Format (SVRF) Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>