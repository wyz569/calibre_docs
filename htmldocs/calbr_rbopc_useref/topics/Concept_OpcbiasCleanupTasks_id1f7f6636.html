<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="OPCBIAS Cleanup Tasks" />
<meta name="abstract" content="Strict interpretation of rules by OPCBIAS during biasing may lead to shapes that are not manufacturable, requiring OPCBIAS to perform clean up tasks." />
<meta name="description" content="Strict interpretation of rules by OPCBIAS during biasing may lead to shapes that are not manufacturable, requiring OPCBIAS to perform clean up tasks." />
<meta name="DC.subject" content="Clean up, before biasing, Biasing, before cleanup" />
<meta name="keywords" content="Clean up, before biasing, Biasing, before cleanup" />
<meta name="prodname" content="Calibre Rule-Based OPC User's and Reference Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014" />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-01-30" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="2" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_rbopc_useref" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 17, 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® Rule-Based OPC User’s and Reference Manual" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10115" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="HighlightChanges" content="yes" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="IncludeDraftCommentsInChangeLog" content="All" />
<meta name="ConditionFiltering" content="XML" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id1f7f6636-660a-468e-ac29-933867e9e791" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>OPCBIAS Cleanup Tasks</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="OPCBIAS Cleanup Tasks" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10115" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id1f7f6636-660a-468e-ac29-933867e9e791">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">OPCBIAS Cleanup Tasks</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">Strict interpretation
of rules by OPCBIAS during biasing may lead to shapes that are not manufacturable,
requiring OPCBIAS to perform clean up tasks.</span>
</div>
<div class="section Subsections"><div class="section Subsection" id="id1f7f6636-660a-468e-ac29-933867e9e791__id63eb8087-2666-46fc-8f5c-88c9607bbff8"><h2 class="title Subheading sectiontitle">Short Edge Handling (Pre-Bias)</h2><p class="p">The MINBIASLENGTH defines the
minimum acceptable length for an edge after biasing. To avoid creating
edges shorter than MINBIASLENGTH, the OPCBIAS operation attempts
to combine the short edge with a neighboring edge using one of the
following techniques:</p>
<dl class="dl"><dt class="dt dlterm" id="id1f7f6636-660a-468e-ac29-933867e9e791__id6afe1456-48cd-4de4-b662-f3c1973c8b35">Merging</dt>
<dd class="dd"><p class="p">Combining a short edge with a neighboring edge, resulting
in one long edge.</p>
</dd>
<dt class="dt dlterm" id="id1f7f6636-660a-468e-ac29-933867e9e791__idec5ba572-c3cb-4ae0-b043-3d37ec7e5fdb">Widening</dt>
<dd class="dd"><p class="p">Sliding the vertex point between the two edges until both
edges are longer than MINBIASLENGTH.</p>
</dd>
</dl>
<p class="p">The short edge handling process occurs after
the OPCBIAS operation fragments the edges but before it applies
the biases. <a class="xref fm:Figure" href="#id1f7f6636-660a-468e-ac29-933867e9e791__idf2accd7c-86b1-41c4-94e1-130145090621">Figure 1</a> shows a short edge in
green with a neighboring edge in red. The fact that they are separate
edges indicates that the OPCBIAS operation has calculated that they
require different biases.</p>
<div class="fig fignone" id="id1f7f6636-660a-468e-ac29-933867e9e791__idf2accd7c-86b1-41c4-94e1-130145090621"><span class="figcap"><span class="fig--title-label">Figure 1. </span>Short Edge Handling Treatments</span><br /><div class="imagecenter"><img class="image imagecenter" height="100" src="../graphics/opcbias07.png" width="417" /></div><br /></div>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">When
an edge has no neighboring edges with which it can combine to become
longer, the OPCBIAS operation overrides the MINBIASLENGTH rule and
biases the edge anyway. This might happen at a line-end, for example,
when the MINBIASLENGTH value is longer than the line-end. If you
do not want to bias short lines, you can direct OPCBIAS to ignore
edges shorter than MINBIASLENGTH using the LENGTH1 constraint.</p>
</div>
</div>
<div class="section Subsection" id="id1f7f6636-660a-468e-ac29-933867e9e791__ide4df54f5-2eb8-49d9-a498-cdfbeae7be52"><h2 class="title Subheading sectiontitle">Corners Affecting Short
Edges (Pre-Bias)</h2><p class="p">The OPCBIAS operation defines a short edge
to be any edge shorter than MINBIASLENGTH. Because the OPCBIAS operation
performs short edge handling before it applies the biases, corner
edges present a special case. <a class="xref fm:Figure" href="#id1f7f6636-660a-468e-ac29-933867e9e791__id04df1aef-573f-40da-a9b5-ea4aa90f6b35">Figure 2</a>shows how biasing can shorten
corner edges.</p>
<div class="fig fignone" id="id1f7f6636-660a-468e-ac29-933867e9e791__id04df1aef-573f-40da-a9b5-ea4aa90f6b35"><span class="figcap"><span class="fig--title-label">Figure 2. </span>Shorten Corner Edges by Biasing</span></div>
<div class="fig fignone" id="id1f7f6636-660a-468e-ac29-933867e9e791__id5fcf7f5b-4892-4a18-a1ab-21654be03afa"><br /><div class="imagecenter"><img class="image imagecenter" height="190" src="../graphics/opcbias09.png" width="468" /></div><br /></div>
<p class="p">If B1 is an outer edge,
applying a negative bias to A shortens B1 by the size of the negative
bias. If B1 is an inner edge, applying a positive bias to A shortens
B1 by the size of the positive bias. Because of this shortening,
if the OPCBIAS operation widened B1 to MINBIASLENGTH before applying
the bias to A, the final length of B1 would be less than MINBIASLENGTH. </p>
<p class="p">Short edge handling avoids this problem by
using a different definition of “short” for corner edges than other
edges. </p>
<ul class="ul"><li class="li" id="id1f7f6636-660a-468e-ac29-933867e9e791__id07aedf98-a39a-4608-942d-3a3c4a122d9d"><p class="p">For outside corner edges, short is defined
as &lt; (MINBIASLENGTH + abs(maximum possible negative bias))<a name="fnsrc_1" href="#fntarg_1"><sup>1</sup></a>.</p>
</li>
<li class="li" id="id1f7f6636-660a-468e-ac29-933867e9e791__id2d746ce4-79a9-4d9d-9697-f42826c224e7"><p class="p">For inside corner edges, short is defined
as &lt; (MINBIASLENGTH + (maximum possible positive bias)).</p>
</li>
<li class="li" id="id1f7f6636-660a-468e-ac29-933867e9e791__idb0e5aa64-ab74-46f5-b60e-8a126929642b"><p class="p">For all other edges, short is defined
as &lt; MINBIASLENGTH.</p>
</li>
</ul>
</div>
<div class="section Subsection" id="id1f7f6636-660a-468e-ac29-933867e9e791__id0123914d-8b19-4f3d-87dd-958201f3b058"><h2 class="title Subheading sectiontitle">Treatment of Short Edges
(Pre-Bias)</h2><p class="p">When an edge fragment is shorter than MINBIASLENGTH,
the OPCBIAS operation must either merge the short fragment with
an adjacent fragment or lengthen the short edge until its length
equals MINBIASLENGTH. The OPCBIAS operation bases the decision to
widen versus lengthen based on priorities it assigns to the bias
values for the fragments. These priorities also impact the decision
as to which bias to apply to the fragments that remain after clean
up.</p>
<h2 class="title Subheading sectiontitle">Corner Smoothing (Post-Bias)</h2><p class="p">If the edge shifting process
causes discontinuity at the corners of abutting edges, then the system
performs additional smoothing operation to form contiguous expanded
edge geometry. <a class="xref fm:Figure" href="#id1f7f6636-660a-468e-ac29-933867e9e791__idb875d14f-44db-41e9-ae99-6d9ebf60496d">Figure 3</a> shows corner gap filling
for a 45-degree corner on a bent geometry.</p>
<div class="fig fignone" id="id1f7f6636-660a-468e-ac29-933867e9e791__idb875d14f-44db-41e9-ae99-6d9ebf60496d"><span class="figcap"><span class="fig--title-label">Figure 3. </span>Corner Gap Filling</span><br /><div class="imagecenter"><img class="image imagecenter" height="213" src="../graphics/cornergapfilling.png" width="468" /></div><br /></div>
</div>
<div class="section Subsection" id="id1f7f6636-660a-468e-ac29-933867e9e791__idc183ab4f-e354-4c83-b967-e336602046bb"><h2 class="title Subheading sectiontitle">Snap 45 Degree Angles
(Post-Bias)</h2><p class="p">The GRID keyword directs OPCBIAS
to adjust the bias of 45-degree edges so edges are placed on a 45-degree
grid. In addition, you use the OPTION SPIKE_CLEANUP keyword to snap skewed
edges to 45 degrees.</p>
<p class="p">This feature is designed to be used when the
results from the OPCBIAS operation serve as input to the SNAP operation.
Without this special biasing, it is possible that the SNAP operation produces
skew edges that are 1 grid unit off from being a 45-degree angle.
With this special biasing, endpoints of 45-degree edges tend to
snap in a consistent direction, and the SNAP operation expediently
preserves 45-degree angles. </p>
<p class="p">When using this feature, you must define a
snap grid equal to the one used with the SNAP operation; if you
attempt to perform snapping using the SNAP operation to place OPCBIAS output
on grid, it is possible that some biased edges can have their endpoints
snapped on grid, when the original edges are skew. Using the GRID
option avoids this problem, and snaps the OPCBIAS output for most
edges to the same grid the SNAP operation uses. There are still
some edges from an OPCBIAS GRID operation that are off grid due
to internal edge breaking; however, any such off-grid edges are
then placed on grid by SNAP. <a class="xref fm:Figure" href="#id1f7f6636-660a-468e-ac29-933867e9e791__id0efbc1ae-c2f2-4771-905d-9191ce5feb78">Figure 4</a> shows an example of grid-correction
for angled edges.</p>
<div class="fig fignone" id="id1f7f6636-660a-468e-ac29-933867e9e791__id0efbc1ae-c2f2-4771-905d-9191ce5feb78"><span class="figcap"><span class="fig--title-label">Figure 4. </span>OPCBIAS GRID Option</span><br /><div class="imagecenter"><img class="image imagecenter" height="224" src="../graphics/opcbiasgridoption.png" width="423" /></div><br /></div>
<p class="p"><a class="xref fm:Figure" href="#id1f7f6636-660a-468e-ac29-933867e9e791__id00ecc28d-27fd-4320-83ce-9c5c863c933c">Figure 5</a> illustrates an example
where slivers are created from snapping. This sliver can be resolved
with spike edge clean up.</p>
<div class="fig fignone" id="id1f7f6636-660a-468e-ac29-933867e9e791__id00ecc28d-27fd-4320-83ce-9c5c863c933c"><span class="figcap"><span class="fig--title-label">Figure 5. </span>Skew Edge Clean Up</span><br /><div class="imagecenter"><img class="image imagecenter" height="205" src="../graphics/opcbias12.png" width="450" /></div><br /></div>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCChap_OpcbiasCommand_idb8da7214.html" title="The OPCBIAS command performs edge biasing on target shapes.">OPCBIAS Command</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../topics/Concept_CalculationBiasPriorities_id61fd26f6.html" title="When OPCBIAS identifies a short edge and a neighbor it can merge, it calculates the bias to use for the result. OPCBIAS determines priority of bias by comparing all biases, and space and width categories.">Calculation of Bias Priorities</a></div></div>
</div></div>
<div class="fn"><a name="fntarg_1" href="#fnsrc_1"><sup>1</sup></a>  Use the absolute value of the negative bias to
ensure that you are adding a positive number to MINBIASLENGTH.</div></div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_rbopc_useref"
                DocTitle = "Calibre® Rule-Based OPC User’s and Reference Manual"
                PageTitle = "OPCBIAS Cleanup Tasks"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_OpcbiasCleanupTasks_id1f7f6636.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Rule-Based OPC User’s and Reference Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>