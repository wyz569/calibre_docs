<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="$L query" />
<meta name="abstract" content="Returns information about an object type in a specified cell, level of hierarchy, and location." />
<meta name="description" content="Returns information about an object type in a specified cell, level of hierarchy, and location." />
<meta name="DC.subject" content="Query batch command, $L query batch command" />
<meta name="keywords" content="Query batch command, $L query batch command" />
<meta name="prodname" content="Calibre DESIGNrev Reference Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-26" />
<meta name="Topline" content="Siemens EDA" />
<meta name="IncludeDraftCommentsInChangeLog" content="2019.4" />
<meta name="GenerateOnlyChangedTopics" content="no" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="HighlightChanges" content="yes" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="2" />
<meta name="SubTitle" content="Batch Command Support for Calibre® DESIGNrev™, Calibre® WORKbench™, Calibre® LITHOview™, and Calibre® MDPview™" />
<meta name="SourceHandle" content="calbr_drv_ref" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® DESIGNrev™ Reference Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P10088,product.id.P10120" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id20e9ffd7-2510-425e-9a27-e6dc6cd39242" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>$L query</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="$L query" />
<meta name="attributes" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P10088,product.id.P10120" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">$L
query</h1>
<div class="body refbody CommandRefBody"><div class="abstract CommandRefAbstract"><span class="shortdesc">Returns
information about an object type in a specified cell, level of hierarchy,
and location.</span>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName Required">$L query</span> {<span class="keyword ParameterName Required">ref | polygon | wire | edge | vertex | closept | text</span>} <br />
<span class="keyword ParameterName RequiredReplaceable">cell</span> <span class="keyword ParameterName RequiredReplaceable">startDepth endDepth</span> <span class="keyword ParameterName RequiredReplaceable">x y</span> [<span class="keyword ParameterName OptionalReplaceable">maxSearchDistanceX maxSearchDistanceY</span>] <br />
[<span class="keyword ParameterName Optional">-path</span> | <span class="keyword ParameterName Optional">-pathlist</span>] [<span class="keyword ParameterName Optional">-list</span>] [<span class="keyword ParameterName Optional">-inside</span>]</p>
</div>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__idb1bd0b0c-6e8f-4881-9d6c-1bb7101f4124"><span class="keyword ParameterName Required">ref | polygon | wire | edge | vertex | closept | text</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument specifying
the object type to query for. Valid options include:</p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__idf9ab1dc9-d00d-41ff-ab02-11c9cb86293c"><p class="p Opt"><span class="keyword ParameterName Required">ref</span> —
Returns information about the nearest cell reference(s). If the reference
is an array, the information also lists the array dimensions and
spacing. When more than one cell reference share the same coordinates,
the query returns a list of these cell references.</p>
</li>
<li class="li ArgOption" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id5de2b137-d49a-4332-b49c-169716e9735a"><p class="p Opt"><span class="keyword ParameterName Required">polygon</span> —
Returns the polygon layer and vertices, followed by information
about a closest point on the polygon. When more than one polygon
share the same closest point, the query returns a list of these
polygons.</p>
</li>
<li class="li ArgOption" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id6046e7d5-bfb8-4353-9ea7-1f8865566f43"><p class="p Opt"><span class="keyword ParameterName Required">wire</span> —
Returns path attributes and vertices, followed by information about
a closest point on the path. When more than one wire share the same
closest point, query returns a list of these wires.</p>
</li>
<li class="li ArgOption" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id7623c996-d96c-47d7-ba7a-af8816354836"><p class="p Opt"><span class="keyword ParameterName Required">edge</span> —
Returns a nearest edge of a visible polygon.</p>
</li>
<li class="li ArgOption" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__idccc672bc-f0a0-4130-b12d-075743fd8708"><p class="p Opt"><span class="keyword ParameterName Required">vertex</span> —
Returns a nearest vertex of a visible polygon.</p>
</li>
<li class="li ArgOption" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__idd3928c71-5db5-467c-8b64-4fe07c17c429"><p class="p Opt"><span class="keyword ParameterName Required">closept</span> —
Returns the nearest point of a visible polygon. When more than one
visible polygon has the same nearest point, <span class="keyword ParameterName Required">closept</span> returns
only the first one that it found.</p>
</li>
<li class="li ArgOption" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id466a89aa-a157-4916-8099-af3bd86bcd15"><p class="p Opt"><span class="keyword ParameterName Required">text</span> —
Returns the nearest text object. When more than one text object
share the same closest point, query returns a list containing all
these text objects.</p>
</li>
</ul>
</dd>
<dt class="dt ArgumentName dlterm" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__idac5a0c1b-c9a5-4b06-b56b-536126aa595e"><span class="keyword ParameterName RequiredReplaceable">cell</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument identifying
the cell in which to search.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id9fa01799-34e9-459a-a117-3b562049ccf9"><span class="keyword ParameterName RequiredReplaceable">startDepth</span> <span class="keyword ParameterName RequiredReplaceable">endDepth</span></dt>
<dd class="dd ArgumentDescription"><p class="p">A pair of required arguments
specifying the levels of hierarchy to search. The query returns
the specified objects that are on a level between <span class="keyword ParameterName RequiredReplaceable">startDepth</span> and <span class="keyword ParameterName RequiredReplaceable">endDepth</span>, inclusive.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__idba8ef69c-3fea-4d2c-834f-c551d2466c12"><span class="keyword ParameterName RequiredReplaceable">x y</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">A pair of required arguments
specifying the coordinates of a point at which to search for an
object type. The query returns the specified objects that coincide
with the coordinates. By default, coordinates are in database units
(dbu).</p>
<p class="p">Coordinates are specified as
either an integer, an integer followed by the character ‘d’ for
dbu, or a floating point number (or integer) followed by the character
‘u’ for microns.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id02796d9d-4dfb-44c6-866e-7458b9092b0e"><span class="keyword ParameterName OptionalReplaceable">maxSearchDistanceX maxSearchDistanceY</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">A pair of optional arguments
defining the maximum width and height of the search area in which
to query for the specified objects. If not specified, these values
default to 1 micron.</p>
<p class="p">This argument acts as a filter
on the results; if no objects meet the filter criteria (are located
within the specified distance), no results are returned.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__idfc48b2c2-09c3-47a3-b26e-597bb5aa30fc">-path</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument used to
append the hierarchical path to the returned data. This option only
works for GDS and OASIS layouts, and it does not apply to MDP or
view-only OASIS data. The option cannot be used along with the -pathlist option.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id1af2f068-76f4-40e8-b300-017cb9f86c5b">-pathlist</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument used to
append the hierarchical path as a Tcl list to the returned data.
This option only works for GDS and OASIS layouts, and it does not
apply to MDP or view-only OASIS data. The option cannot be used
along with the -path option.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__ida1f93a3b-bb97-4656-bbdd-cc79bcdccd20">-list</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument which causes
the return list to always contain sublists of the matching database
objects. This assists with the processing of multiple returned objects.
This argument has no effect on the <span class="keyword ParameterName Required">ref</span>, <span class="keyword ParameterName Required">edge</span>, or <span class="keyword ParameterName Required">vertex</span> arguments,
as these arguments return sublists of the matching database objects
by default.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id365b1d9e-7cf1-4e80-887c-a84c92d41ce0">-inside</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument to check
if a point is inside a polygon. By default, the $L query command
allows you to specify the search distance. Using the -inside option
indicates that the search coordinate must be inside or on the polygon
outline. For example:</p>
<pre class="pre codeblock leveled"><code>$L query polygon TOPCELL 0 0 1600 2500 -inside</code></pre><p class="p">The results are all polygons
that match. In this example, only polygons and paths are returned
which enclose the search coordinate, 1600 2500. If the point is
on the edge of the polygon, it is considered inside as well.</p>
<p class="p">The -inside option works for
all object types, including paths, text, and refs. Zero width paths
and text are only returned if the search point is on the center
line or origin, and refs are returned if the search coordinate is
inside or on the extent (bbox) of the referenced cell.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">When the
-inside option is used, the search distance is disabled. As no search
distance is given, the query returns <span class="ph FontProperty emphasis">all</span> objects which
enclose or touch the search point, regardless of their proximity
to the search point. The information on which edge or vertex is
closest and the actual distance from the search point are also returned
with this option.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="section ReturnedValues"><h2 class="title Subheading sectiontitle">Return Values</h2><p class="p">Returns a Tcl list containing
Tcl objects. Floating point values are returned as Tcl floating
point objects. Special characters requiring escaping are escaped
as necessary. For example, a string object containing a single ‘}’
is escaped to prevent Tcl from parsing the ‘}’ as a closing string
or command clause. Strings containing special Tcl characters, such
as cell names containing $ or [1], and property text strings containing
blanks, are enclosed in braces when necessary.</p>
<p class="p">Returns are specific to the
object type being returned:</p>
<ul class="ul"><li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__idf3ede2f7-acbb-4f0e-8e8e-b165b0e6eeb8"><p class="p"><span class="ph FontProperty HeadingLabel">ref</span> —
For each reference, returns the coordinates, width, and height of
the bounding box of the reference, cell name, coordinates, and orientation,
plus array dimensions and spacing if the reference is an array.
If the layout is a GDS layout, and the reference has properties
associated with it, the command also returns those properties. The
information is returned in the following format:</p>
<p class="p">{<span class="ph FontProperty equationvariable">llcx llcy xlen ylen cell_name x y mirror angle mag</span> [<span class="ph FontProperty equationvariable">cols rows xspace yspace</span>] [{<span class="ph FontProperty equationvariable">properties</span>}]}</p>
<p class="p">where:</p>
<ul class="ul"><li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__ide57f6882-87ae-430b-a90c-35e2ca6dec4a"><p class="p"><span class="ph FontProperty equationvariable">llcx</span> and <span class="ph FontProperty equationvariable">llcy</span> —
The lower left corner of the bounding box of the reference.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id0d618a18-f342-444f-88b3-5a011e885116"><p class="p"><span class="ph FontProperty equationvariable">xlen</span> and <span class="ph FontProperty equationvariable">ylen</span> —
The width and height of the bounding box of the reference, respectively.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id44587cdd-5e1b-4cac-844f-7fea4a66f77c"><p class="p"><span class="ph FontProperty equationvariable">cell_name, x, y, mirror, angle, mag</span> —
The name of the referenced cell and orientation in the design. For
returned X and Y values, the coordinate space of the specified cell
is used.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id11c8493f-afc0-4f32-98cf-4094b0579e5b"><p class="p"><span class="ph FontProperty equationvariable">cols rows xspace yspace</span> —
Array information, returned only if the reference is an array.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__idede1f4d7-5c38-4181-a706-626ca41b3081"><p class="p">{<span class="ph FontProperty equationvariable">properties</span>}
— A list of property attribute name and value pairs, returned only
if the layout is type GDS and the reference has properties associated
with it.</p>
</li>
</ul>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id0ac10292-e4e6-41b7-926e-8ac323d87f0b"><p class="p"><span class="ph FontProperty HeadingLabel">polygon</span> —
For each polygon, returns the layer and vertices, followed by information
about the closest point on the polygon. If the layout is a GDS layout,
and the polygon has properties associated with it, the command also
returns those properties. The information is returned in the following format:</p>
<p class="p">{<span class="keyword ParameterName OptionalReplaceable">layer</span> [{<span class="keyword ParameterName OptionalReplaceable">properties</span>}]
{<span class="keyword ParameterName OptionalReplaceable">x1 y1 x2 y2 … xn yn</span>}} <span class="keyword ParameterName OptionalReplaceable">idx</span> “v”|“e” <span class="keyword ParameterName OptionalReplaceable">dist</span> {<span class="keyword ParameterName OptionalReplaceable">xpt ypt</span>}</p>
<p class="p">where:</p>
<ul class="ul"><li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__ida8506d3f-3e80-413b-8816-a891c1cfe37f"><p class="p"><span class="keyword ParameterName OptionalReplaceable">layer</span> —
The layer the polygon is on.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id160ddf4c-fd84-4a6d-9d5c-f7384254aaeb"><p class="p">{<span class="keyword ParameterName OptionalReplaceable">properties</span>}
— A list of property attribute name and value pairs, returned only
if the layout is type GDS and the polygon has properties associated
with it.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id1fbb9043-501d-4bf8-baac-73eab2eb163b"><p class="p">{<span class="keyword ParameterName OptionalReplaceable">x1 y1 x2 y2 … xn yn</span>}
— An ordered list of coordinates of the polygon vertices.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id040e4fd2-2911-4a02-becf-25da0e9f0852"><p class="p"><span class="keyword ParameterName OptionalReplaceable">idx</span> —
The index of the vertex or edge containing the nearest point.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id95ded7cc-167f-4ba7-9a5a-43dc4fe2fbcd"><p class="p">“v”| “e” — A “v” if the
closest point is a vertex, or an “e” if the closest point is on
an edge.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id5a9f5aad-b14e-4911-babe-44e181fda476"><p class="p"><span class="keyword ParameterName OptionalReplaceable">dist</span> —
The distance between the closest point and the query point.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__ide30a2713-2e5b-4daf-95b9-e26b72bcfe06"><p class="p">{<span class="keyword ParameterName OptionalReplaceable">xpt ypt</span>}
— The coordinates of the closest point.</p>
</li>
</ul>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id85448ede-b0d2-4b63-b078-aae9a793ba64"><p class="p"><span class="ph FontProperty HeadingLabel">wire</span> —
For each wire, returns the path attributes and vertices, followed
by information about the closest point on the path. If the layout
is a GDS layout, and the wire has properties associated with it,
the command also returns those properties. The information is returned
in the following format:</p>
<p class="p">{<span class="keyword ParameterName OptionalReplaceable">layer width pathtype bgnextn endextn</span> [{<span class="keyword ParameterName OptionalReplaceable">properties</span>}] {<span class="keyword ParameterName OptionalReplaceable">x1 y1 x2 y2 … xn yn</span>} <span class="keyword ParameterName OptionalReplaceable">idx</span> “v”|“e” <span class="keyword ParameterName OptionalReplaceable">dist</span> {<span class="keyword ParameterName OptionalReplaceable">xpt ypt</span>}}</p>
<p class="p">where:</p>
<ul class="ul"><li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__idb8a5a337-74d7-4bc1-8019-dc5e00d21887"><p class="p"><span class="keyword ParameterName OptionalReplaceable">layer</span> —
The layer the path is on.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__ide8e732f4-187d-44f6-91cb-d83db39525e0"><p class="p"><span class="keyword ParameterName OptionalReplaceable">width</span> —
The path width.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__idb3d5a2d1-f82c-4784-b770-489f8a5fcd25"><p class="p"><span class="keyword ParameterName OptionalReplaceable">pathtype</span> —
The path type values is one of {0, 2, 4}.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id5f17064c-45f8-4d9c-89d4-3b1b1cac0bd1"><p class="p"><span class="keyword ParameterName OptionalReplaceable">bgnextn endextn</span> —
The beginning line-end extent and ending line-end extent for the
path.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id75239517-9e33-4e51-a98d-073670d6668a"><p class="p">{<span class="keyword ParameterName OptionalReplaceable">properties</span>}
— A list of property attribute name and value pairs, returned only
if the layout is type GDS and the wire has properties associated
with it.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id206884f2-11e6-41ff-9ebb-b234cd5223de"><p class="p">{<span class="keyword ParameterName OptionalReplaceable">x1 y1 x2 y2 … xn yn</span>}
— An ordered list of coordinates of the path vertices.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id8f056699-d11e-4336-ae8a-6f6c97602d49"><p class="p"><span class="keyword ParameterName OptionalReplaceable">idx</span> —
The index of the vertex or edge containing the nearest point.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id857d3a31-717a-49a3-a12a-4dedcda0e604"><p class="p">“v” | “e” — A “v” if
the closest point is a vertex, or an “e” if the closest point is
on an edge.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__idb7a01932-827c-4dcb-a08d-3e4ee6980496"><p class="p"><span class="keyword ParameterName OptionalReplaceable">dist</span> —
The distance between the closest point and the query point.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__idb393ba24-8ef6-4c95-83e5-0701592c0884"><p class="p">{<span class="keyword ParameterName OptionalReplaceable">xpt ypt</span>}
— The coordinates of the closest point.</p>
</li>
</ul>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id33dc0581-ca91-4408-b8f2-de23bf53a6f6"><p class="p"><span class="ph FontProperty HeadingLabel">closept</span> —
Returns the nearest point on the nearest visible polygon. Information
is returned in the following format:</p>
<p class="p">{<span class="keyword ParameterName OptionalReplaceable">layer x y</span> [<span class="keyword ParameterName OptionalReplaceable">x1 y1 x2 y2</span>]}</p>
<p class="p">where:</p>
<ul class="ul"><li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id7b25abd1-7795-4dba-86f0-38297b86791e"><p class="p"><span class="keyword ParameterName OptionalReplaceable">layer</span> —
The layer the polygon is on.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id2be49cfd-a411-4ac4-8e70-60a140cc8b3d"><p class="p"><span class="keyword ParameterName OptionalReplaceable">x y</span> —
The coordinates of the nearest point.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id1b6fd716-5099-4d16-8603-390d88efeddd"><p class="p">[<span class="keyword ParameterName OptionalReplaceable">x1 y1 x2 y2</span>]
— The coordinates of the vertices of the nearest edge. This information
is returned only if the nearest point is not a vertex of the polygon.</p>
</li>
</ul>
<p class="p">If more
than one visible polygon has the same nearest point, then <span class="ph FontProperty HeadingLabel">closept</span> returns
only the first one that it found.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id0e576357-4003-4b36-b1ca-541559e0be27"><p class="p"><span class="ph FontProperty HeadingLabel">vertex</span> —
Returns information about the nearest vertex on the nearest polygon.
The information is returned in the following format:</p>
<p class="p">{{<span class="ph FontProperty equationvariable">layer x1 y1 x2 y2 … xn yn</span>} <span class="ph FontProperty equationvariable">vidx</span>}</p>
<p class="p">where: </p>
<ul class="ul"><li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id8acf1b94-b5f2-49d6-866c-37edea12de68"><p class="p"><span class="keyword ParameterName OptionalReplaceable">layer</span> —
The layer the polygon is on.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id1ceaf0a4-63ca-4362-817e-2d3cf9ae54d6"><p class="p"><span class="keyword ParameterName OptionalReplaceable">x1 y1 … xn yn</span> —
An ordered list of all the polygon vertexes.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id229d6220-28fd-4849-be7c-a95bd2fdf9b2"><p class="p"><span class="keyword ParameterName OptionalReplaceable">vidx</span> —
The index of the vertex in question, starting from x1, y1.</p>
</li>
</ul>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id91592445-ff18-4499-8328-9d3c37e748a4"><p class="p"><span class="ph FontProperty HeadingLabel">edge</span> —
Returns information about the nearest edge on the nearest polygon.
The information is returned in the following format:</p>
<p class="p">{{<span class="keyword ParameterName OptionalReplaceable">layer x1 y1 x2 y2 … xn yn</span>} <span class="keyword ParameterName OptionalReplaceable">eidx</span>}</p>
<p class="p">where: </p>
<ul class="ul"><li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id259743c9-eb5f-4ec9-909e-1f4c8316bbc0"><p class="p"><span class="keyword ParameterName OptionalReplaceable">layer</span> —
The layer the polygon is on.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__ida813a5d7-23cf-4b5e-926f-b0b5b61f2292"><p class="p"><span class="keyword ParameterName OptionalReplaceable">x1 y1 … xn yn</span> —
An ordered list of all the polygon vertexes.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id0a105cd4-fa69-4353-9254-d2c613b84954"><p class="p"><span class="keyword ParameterName OptionalReplaceable">eidx</span> —
The index of the second x in the edges x,y pair.</p>
</li>
</ul>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__idc1280740-1f30-4bae-93c5-58106609b60f"><p class="p"><span class="ph FontProperty HeadingLabel">text</span> —
For each text object, returns the layer, coordinates, and string.
The information is returned in the following format:</p>
<p class="p">{<span class="keyword ParameterName OptionalReplaceable">layer x y text</span> [<span class="keyword ParameterName OptionalReplaceable">presentation</span> [<span class="keyword ParameterName OptionalReplaceable">strans magnification angle</span>]]}</p>
<p class="p">where: </p>
<ul class="ul"><li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id3bd71894-028c-42bb-999f-0a93448b4b2b"><p class="p"><span class="keyword ParameterName OptionalReplaceable">layer</span> —
The layer the text is on.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__idb2259e16-211b-4b81-bd75-9547181c3355"><p class="p"><span class="keyword ParameterName OptionalReplaceable">x y</span> —
The coordinates of the text.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id9ba5a3d2-6b26-4817-80dd-b4bbfdfa0e7d"><p class="p"><span class="keyword ParameterName OptionalReplaceable">text </span> —
The string displayed as text.</p>
</li>
<li class="li" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id0003414e-e488-41c7-adce-757358095d5e"><p class="p">[<span class="keyword ParameterName OptionalReplaceable">presentation</span> [<span class="keyword ParameterName OptionalReplaceable">strans magnification angle</span>]]
— The text attribute values, returned only if the layout is type
GDS and the text has these attributes associated with it.</p>
</li>
</ul>
</li>
</ul>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">Outputs the requested element
nearest to the given (X,Y) coordinate and displays relevant information
about that element. The information returned varies according to
the type of object.</p>
<p class="p">If more than one object of the
same type and distance from the search point exists at the specified
coordinates, the function outputs all of the objects and their properties.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">Only
the closest or equally close objects are returned by the query.</p>
</div>
<p class="p">To perform the search, the application
creates a search area in the shape of a box, with (X,Y) located
at the center of the box. You can define the size of the box through
the optional arguments maxSearchDistanceX (width) and maxSearchDistanceY
(height). By default, the box is 1 micron square.</p>
<p class="p">The input coordinates and output
coordinates are all in database units.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">Previous
to Calibre release 2011.2, the $L query command returned strings,
and layout viewer Tcl scripts passed these returned strings on to
Tcl commands expecting true Tcl lists. Under most conditions, script
commands receiving a string treated as a Tcl list (rather than receiving
a true Tcl list) have no issues. However, occasionally these returned
strings led to floating point inaccuracies, improper handling of
special characters, poorly formatted lists, inconsistencies between
formatted objects, and unnecessary memory used to hold the strings. To
correct these issues, the $L query command has been updated to return
true Tcl lists containing Tcl_Obj objects.</p>
</div>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><div class="section Subsection" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__idebf621f9-8859-485b-86d8-320747ba274f"><h2 class="title Subheading sectiontitle">Example 1</h2><p class="p">These examples illustrate floating
point representation:</p>
<pre class="pre codeblock leveled"><code>% set cwb [find objects -class cwbWorkBench] 
::cwbWorkBench::cwbWorkBench0 
% set L [$cwb cget -_layout] 
layout0 
 
% $L query ref [$L topcell] 0 0 0 0 
{-40000 -102000 70000 122000 nand 0 -22000 0 0.0 1.0 {}} 
 
% $L query text [$L topcell] 0 0 25000 25000 
3005 10000 10000 GROUND 8 0 2.0 0.0 </code></pre></div>
<div class="section Subsection" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id46c6c72c-2388-476a-b183-07ef0955b99a"><h2 class="title Subheading sectiontitle">Example 2</h2><p class="p">These examples illustrate text string
representation:</p>
<pre class="pre codeblock leveled"><code>% $L query text [$L topcell] 0 0 -85 -85 
3006 -85 -87 {text string with blanks} 
 
% $L query text [$L topcell] 0 0 10000 10000 
3005 10000 10000 VCC 
 
% $L query ref [$L topcell] 0 0 -104000 -58000 
{-108000 -76000 27000 36000 {inv[1]} -104000 -58000 0 0.0 1.0 {}} 
 
% $L query polygon [$L topcell] 0 0 -125000 -13000 
{1 {{1 TestProp1}} -134000 -15000 -110000 -150000 -110000 -11000 -134000
-11000} 6 e 2000.0 {-125000 -11000} </code></pre></div>
<div class="section Subsection" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id4484e05f-6c48-4a10-a7db-01399b360782"><h2 class="title Subheading sectiontitle">Example 3</h2><p class="p">This example finds and lists all
references at a given point:</p>
<pre class="pre codeblock leveled"><code>% basename [info nameofexecutable] 
calibrewb 
set X 5000 
set Y 50000 
set PREC 1000 
set start_depth 0 
set end_depth 50 
set top_cell "TopCell" 
set refs_at_xy [$L query ref $top_cell $start_depth $end_depth $X $Y] 
puts "Following cells were found at location \ 
	[format “%.3f %.3f” [expr $X/$PREC] [expr $Y/$PREC]] under $top_cell:" 
foreach {llcx llcy xlen ylen cellname rest} $refs_at_xy { 
	puts "Cell name = $cellname" 
} </code></pre></div>
<div class="section Subsection" id="id20e9ffd7-2510-425e-9a27-e6dc6cd39242__id10c5d61b-8d80-40d2-bbf0-6be6f47b01bd"><h2 class="title Subheading sectiontitle">Example 4</h2><p class="p">This example illustrates escaped
characters:</p>
<pre class="pre codeblock leveled"><code>% $L query ref [$L topcell] 0 0 -104000 -58000 
{-108000 -76000 27000 36000 \}_inv -104000 -58000 0 0.0 1.0 {}} </code></pre></div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_LayoutObjectMethods_idfc06fae2.html" title="Use the layout object methods to operate on objects in a layout, such as cells, polygons, references, and layers. The layout object methods described in this section can be used for all layout viewers.">Layout Object Methods</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_drv_ref"
                DocTitle = "Calibre® DESIGNrev™ Reference Manual"
                PageTitle = "$L query"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_LQuery_id20e9ffd7.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® DESIGNrev™ Reference Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>