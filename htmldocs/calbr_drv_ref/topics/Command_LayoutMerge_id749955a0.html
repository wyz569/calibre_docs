<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="layout merge" />
<meta name="abstract" content="Merges two layouts, with automatic renaming of the cells to prevent name conflicts." />
<meta name="description" content="Merges two layouts, with automatic renaming of the cells to prevent name conflicts." />
<meta name="DC.subject" content="Layout Merge batch command" />
<meta name="keywords" content="Layout Merge batch command" />
<meta name="prodname" content="Calibre DESIGNrev Reference Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-26" />
<meta name="Topline" content="Siemens EDA" />
<meta name="IncludeDraftCommentsInChangeLog" content="2019.4" />
<meta name="GenerateOnlyChangedTopics" content="no" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="HighlightChanges" content="yes" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="2" />
<meta name="SubTitle" content="Batch Command Support for Calibre® DESIGNrev™, Calibre® WORKbench™, Calibre® LITHOview™, and Calibre® MDPview™" />
<meta name="SourceHandle" content="calbr_drv_ref" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® DESIGNrev™ Reference Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P10088,product.id.P10120" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id749955a0-2f53-484c-9eed-fa029310081c" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>layout merge</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="layout merge" />
<meta name="attributes" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P10088,product.id.P10120" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="id749955a0-2f53-484c-9eed-fa029310081c">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">layout merge</h1>
<div class="body refbody CommandRefBody"><div class="abstract CommandRefAbstract"><p class="shortdesc">Merges two
layouts, with automatic renaming of the cells to prevent name conflicts.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">This command is not supported in HC mode.</p>
</div>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName Required">layout merge </span>[<span class="keyword ParameterName OptionalReplaceable">handle_out</span>] {<span class="keyword ParameterName RequiredReplaceable">handle1 | file1</span>}<span class="keyword ParameterName RequiredReplaceable"> </span>{<span class="keyword ParameterName RequiredReplaceable">handle2 | file2</span>} <span class="keyword ParameterName RequiredReplaceable">bump</span> [<span class="keyword ParameterName OptionalReplaceable">del1 del2</span>] [<span class="keyword ParameterName Optional">‑mode</span> <span class="keyword ParameterName OptionalReplaceable">mode</span>] [‑preserveTextAttributes] [‑preserveProperties] [‑dt_expand] [‑preservePaths] [‑ignoreGdsBoxes] [‑autoAlign]</p>
</div>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="id749955a0-2f53-484c-9eed-fa029310081c__id245e65c4-68bf-4794-b24f-1501199d59b5"><span class="keyword ParameterName OptionalReplaceable">handle_out</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument specifying
a handle to assign to the merged layout.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id749955a0-2f53-484c-9eed-fa029310081c__id37058553-4741-4f7f-b875-aa3428a004ca"><span class="keyword ParameterName RequiredReplaceable">handle1 | file1</span></dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument specifying
the handle or filename of the first layout to be merged.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id749955a0-2f53-484c-9eed-fa029310081c__idc75d4b6f-aabc-4c70-af9c-be13fa7637f4"><span class="keyword ParameterName RequiredReplaceable">handle2</span> | <span class="keyword ParameterName RequiredReplaceable">file2</span></dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument specifying
the handle or filename of the second layout to be merged.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id749955a0-2f53-484c-9eed-fa029310081c__id0b8b6bb6-8557-4f97-9b56-bc975d3c4f1a"><span class="keyword ParameterName RequiredReplaceable">bump</span></dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument defining
an integer value added to the layer numbers of each layer in the
second layout (<span class="keyword ParameterName RequiredReplaceable">handle2</span> or <span class="keyword ParameterName RequiredReplaceable">file2</span>).
During the merge, data on like-numbered layers in the two layouts
are merged. Be sure to specify a large enough value for <span class="keyword ParameterName OptionalReplaceable">bump</span> to
avoid having like-numbered layers in the two layouts.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id749955a0-2f53-484c-9eed-fa029310081c__id140550ef-89d8-4c80-b25b-28acc9c93348"><span class="keyword ParameterName OptionalReplaceable">del1 del2</span></dt>
<dd class="dd ArgumentDescription"><p class="p">Optional arguments that control
whether the layouts used as input to the merge are deleted as part
of the copy. Values for both arguments must be specified. The <span class="keyword ParameterName OptionalReplaceable">del1</span> argument
applies to the first layout to be merged, and <span class="keyword ParameterName OptionalReplaceable">del2</span> applies
to the second layout to be merged. Valid values for each argument
include:</p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="id749955a0-2f53-484c-9eed-fa029310081c__id98940fff-3ceb-426e-8e6d-422d46cd8f52"><p class="p Opt">1
— Deletes the input layout.</p>
</li>
<li class="li ArgOption" id="id749955a0-2f53-484c-9eed-fa029310081c__id713ff514-d118-4729-9e31-d2ced13b931c"><p class="p Opt">0
— Does not delete the input layout. This is the default for each argument.</p>
</li>
</ul>
</dd>
<dt class="dt ArgumentName dlterm" id="id749955a0-2f53-484c-9eed-fa029310081c__id1c7a71a9-43cb-44bf-9cac-845683bf6425">-mode <span class="keyword ParameterName OptionalReplaceable">mode</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument and <span class="keyword ParameterName OptionalReplaceable">mode</span> defining
how duplicate cells (cells from each input file that have the same
name) are handled during the merge operation. Valid modes include:</p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="id749955a0-2f53-484c-9eed-fa029310081c__id3c83a142-c151-4f9d-9747-21b598939162"><p class="p Opt">append — Concatenates the contents from the
duplicate cells into one cell with that name. All cells from both layouts
with unique names appear in the final layout.</p>
</li>
<li class="li ArgOption" id="id749955a0-2f53-484c-9eed-fa029310081c__idceddc3e3-3c4c-4ebf-a63d-1aebc274d256"><p class="p Opt">overwrite — Writes the contents of duplicate cells
from the second file over the contents of the first, deleting the
contents of the cell from the first file. All cells from both layouts
with unique names appear in the final layout. Cell definitions contain
geometric data, while cell references do not.</p>
</li>
<li class="li ArgOption" id="id749955a0-2f53-484c-9eed-fa029310081c__idf262f109-839e-414f-9670-f6b69e940b7f"><p class="p Opt">rename — Renames the duplicate cell, to make it
unique. All cells from both layouts with unique names appear in
the final layout.</p>
</li>
<li class="li ArgOption" id="id749955a0-2f53-484c-9eed-fa029310081c__idd13f5897-8077-412a-932e-926f664d1802"><p class="p Opt">forcerename
— Copies all cells from both layouts into the final layout as unique
cells with unique names. The new name is created by adding a _WB<span class="keyword ParameterName OptionalReplaceable">x</span> extension
to the original name, where <span class="keyword ParameterName OptionalReplaceable">x</span> is
an integer. This is the default.</p>
</li>
</ul>
</dd>
<dt class="dt ArgumentName dlterm" id="id749955a0-2f53-484c-9eed-fa029310081c__idd85c7ee0-263f-4e0f-b134-28dd54a959bc">-preserveTextAttributes</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument instructing
the tool to preserve GDS Text Presentation and Strans attribute
data when reading data into or writing data from the tool. Use this
argument when merging a layout from a GDS file. The default is to
preserve these attributes. This option is ignored when merging data
from previously loaded layouts (using handles for both layouts).</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id749955a0-2f53-484c-9eed-fa029310081c__id24e25e88-3172-4912-9401-34b5a3526964">-preserveProperties</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument used when
merging a layout from a GDS file. Instructs the tool to preserve
GDS geometry and reference property data (PROPATTR and PROPVALUE).
The default is to preserve these properties. This option is ignored
when merging data from previously loaded layouts (using handles
for both layouts).</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id749955a0-2f53-484c-9eed-fa029310081c__id1f60fdbf-b5cc-45ad-9150-32514ba85ad2"><span class="keyword ParameterName Optional">-dt_expand</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An
optional argument to expand datatypes so that each layer and datatype
combination is mapped to a different layout layer. The layer number
within the layout is <span class="keyword ParameterName OptionalReplaceable">layer.datatype</span>.
This option is ignored when merging data from previously loaded
layouts (using handles for both layouts).</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id749955a0-2f53-484c-9eed-fa029310081c__id2b823dad-181f-4f5c-9962-c58081e4a869">-ignoreGdsBoxes</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument that instructs the
tool to ignore box records when reading the GDS file.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id749955a0-2f53-484c-9eed-fa029310081c__id447c96e3-f520-4158-b8ff-238db8a947ec">-autoAlign</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument used only
in Calibre MDPview. Calibre MDPview attempts to align two merged
layout areas on top of each other where they do not intersect. The
default is to not to automatically align merged areas.</p>
</dd>
</dl>
</div>
<div class="section ArgumentSet"><h2 class="title Subheading sectiontitle">Effects
of Merging Layouts On Database Units and $L Units Commands </h2><p class="p">Merging layouts results in a common
set of measurement values in the combined layout. The behavior and
implementation of the database units differs depending on the types
of layout files the layout viewer accepts:</p>
<dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="id749955a0-2f53-484c-9eed-fa029310081c__id451dd6ff-0faa-4c12-afba-6c6513a56468"><span class="ph FontProperty HeadingLabel">GDS files</span></dt>
<dd class="dd ArgumentDescription"><p class="p">May have a variable database unit and user
unit, and the measurement metrics are a ratio of database units
to user unit. By default, if you create a new GDS file layout, the
new layout's user unit is set to 1000 database units, and the database
unit is set to 1e-09 meters, which resolves a default user unit
to be 1 micron (1e-6 meters) after the ratio is applied.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id749955a0-2f53-484c-9eed-fa029310081c__id4c83b5bf-a66c-4d24-8219-4d116fc1136b"><span class="ph FontProperty HeadingLabel">OASIS files</span></dt>
<dd class="dd ArgumentDescription"><p class="p">Use the measurement item 'unit', which always
has a size of 1 micron. When loading or creating an OASIS file,
the layout viewer sets the database unit to be microns (1e-6 meters),
with a user unit size of 1e6 database units.</p>
</dd>
</dl>
<p class="p">If you are merging two OASIS files
or a GDS file in microns with an OASIS file, no re-scaling is required,
due to the two layouts having the same database unit. OASIS files
always use microns for units, and therefore they have the same scale.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">If two
GDS files are different sizes and a simple least common denominator cannot
be found, the tool uses a value rounded to the nearest 1e-n value
for the smaller database unit value, and scales the larger layout
to that value. For best results, define the physical size of the
coordinate units of both layouts before merging them using the <a class="xref fm:HeadingOnly" href="Command_LUnitsDatabase_id078de1f8.html#id078de1f8-4d5e-44b1-bca2-b346fdab8474__Command_LUnitsDatabase_id078de1f8.xml#id078de1f8-4d5e-44b1-bca2-b346fdab8474" title="Sets or returns the size of database unit in meters.">$L units database</a>, <a class="xref fm:HeadingOnly" href="Command_LUnitsUser_id7e511762.html#id7e511762-70b8-4fa4-a30b-cba4d72ef520__Command_LUnitsUser_id7e511762.xml#id7e511762-70b8-4fa4-a30b-cba4d72ef520" title="Sets the size of user units, expressed as a ratio of user units per database units.">$L units user</a>, and <a class="xref fm:HeadingOnly" href="Command_LUnitsMicrons_id2ff57457.html#id2ff57457-5377-45cf-a87d-41b8c6dc698f__Command_LUnitsMicrons_id2ff57457.xml#id2ff57457-5377-45cf-a87d-41b8c6dc698f" title="Sets the size of database units in microns.">$L units microns</a> commands.</p>
</div>
<p class="p">For example, changing a GDS layout
from precision 1000 to 2000 requires a change of the database units
from 1e-9 to 5e-10, the user units value from 0.001 to 0.0005, and
the layout to be scaled by 2. The scale changes an edge of 1 dbu
to 2 dbu, while maintaining the same physical size:</p>
<dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="id749955a0-2f53-484c-9eed-fa029310081c__idc7a4ff3b-8f6b-46a8-a5ec-47f3eeea7631">File_precision1000.gds:</dt>
<dd class="dd ArgumentDescription"><pre class="pre codeblock leveled"><code>$L units database = 1e-9 
$L units user = 0.001 
$L units microns = 1000   <span class="ph CodeHighlight orange">(this is the precision)</span></code></pre></dd>
<dt class="dt ArgumentName dlterm" id="id749955a0-2f53-484c-9eed-fa029310081c__idd55be64d-a0e9-4f7e-b94e-f66748490164">File_precision2000.gds:</dt>
<dd class="dd ArgumentDescription"><pre class="pre codeblock leveled"><code>$L units database = 5e-10 
$L units user = 0.0005 
$L units microns = 2000</code></pre></dd>
<dt class="dt ArgumentName dlterm" id="id749955a0-2f53-484c-9eed-fa029310081c__idd6812cd0-9caa-4a62-9e3d-1640f32bd573">Merged files yields:</dt>
<dd class="dd ArgumentDescription"><pre class="pre codeblock leveled"><code>$L units database = 5e-10 
$L units user = 0.0005 
$L units microns = 2000</code></pre></dd>
</dl>
</div>
</div>
<div class="section ReturnedValues"><h2 class="title Subheading sectiontitle">Return Values</h2><p class="p">The new layout handle.</p>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">Merges the contents of two layouts
into a third layout, with automatic renaming of the cells to prevent
name conflicts. Cell contents are concatenated or combined according
to the mode you select.</p>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><div class="section Subsection" id="id749955a0-2f53-484c-9eed-fa029310081c__id950ec05e-560d-478d-ac96-83341613c60f"><h2 class="title Subheading sectiontitle">Example
1</h2><p class="p">This example merges the contents
of two layouts, <span class="ph filepath">layout2</span> and <span class="ph filepath">layout4</span>,
into the layout named <span class="ph filepath">mhandle</span>. A value of 1000
is added to the layer numbers of each layer in <span class="ph filepath">layout4</span> in order
to prevent layer number conflicts. The default merge mode of forcerename
is used, which copies the cells from both layouts into <span class="ph filepath">mhandle</span> as
unique cells with unique names.</p>
<pre class="pre codeblock leveled"><code>% layout all 
layout2 layout4 layout6 
% layout merge mhandle layout2 layout4 1000 
mhandle </code></pre></div>
<div class="section Subsection" id="id749955a0-2f53-484c-9eed-fa029310081c__id2eb8df39-2cff-4a00-ab90-c425b030774a"><h2 class="title Subheading sectiontitle">Example
2</h2><p class="p">This example creates layouts from <span class="ph filepath">file1.gds</span> and <span class="ph filepath">file2.gds</span>,
assigning the layouts to the variables L0 and L1, respectively. The
layouts are then merged into a new layout using the layout merge
command and the new layout is assigned to the variable M2. A bump
value of 1000 is added to the layer numbers of each layer in <span class="ph filepath">file2.gds</span> and
duplicate cells are appended into one cell with the same name.</p>
<pre class="pre codeblock"><code>set L0 [layout create file1.gds -dt_expand] 
set L1 [layout create file2.gds -dt_expand] 
set M2 [layout merge $L0 $L1 1000 -mode append]</code></pre></div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_LayoutCommands_idf350df98.html" title="The layout commands are used to manipulate entire layout objects, including operations such as creating, deleting, and merging layouts.">Layout Commands</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../topics/Command_LayoutFilemerge_idc9bf4801.html" title="Performs a disk-based merge of multiple GDS files, multiple OASIS files, or a combination of GDS and OASIS files without loading them into memory.">layout filemerge</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_drv_ref"
                DocTitle = "Calibre® DESIGNrev™ Reference Manual"
                PageTitle = "layout merge"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_LayoutMerge_id749955a0.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® DESIGNrev™ Reference Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>