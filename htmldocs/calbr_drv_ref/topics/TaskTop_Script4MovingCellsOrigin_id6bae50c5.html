<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Script 4: Moving a Cell’s Origin" />
<meta name="abstract" content="You can use batch commands to move the origin of the topcell in an existing layout." />
<meta name="description" content="You can use batch commands to move the origin of the topcell in an existing layout." />
<meta name="prodname" content="Calibre DESIGNrev Reference Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-26" />
<meta name="Topline" content="Siemens EDA" />
<meta name="IncludeDraftCommentsInChangeLog" content="2019.4" />
<meta name="GenerateOnlyChangedTopics" content="no" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="HighlightChanges" content="yes" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="2" />
<meta name="SubTitle" content="Batch Command Support for Calibre® DESIGNrev™, Calibre® WORKbench™, Calibre® LITHOview™, and Calibre® MDPview™" />
<meta name="SourceHandle" content="calbr_drv_ref" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® DESIGNrev™ Reference Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P10088,product.id.P10120" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id6bae50c5-7133-4ed1-8750-d9e9b6185aa4" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Script 4: Moving a Cell’s Origin</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Script 4: Moving a Cell’s Origin" />
<meta name="attributes" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P10088,product.id.P10120" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id6bae50c5-7133-4ed1-8750-d9e9b6185aa4">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Script 4: Moving a Cell’s Origin</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><p class="shortdesc">You
can use batch commands to move the origin of the topcell in an existing
layout.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">You
can also use the $L modify origin command to change the origin of
a specified cell.</p>
</div>
<p class="p">Topics covered in this procedure include:</p>
<ul class="ul"><li class="li" id="idd5e92f08-e802-433a-98e5-6e6422532ef0"><p class="p">Creating cell references. Cell references
do not contain geometric data.</p>
</li>
<li class="li" id="id82885533-4bf4-49cf-992a-3b3bc811e1da"><p class="p">Moving the origin of a cell.</p>
</li>
<li class="li" id="ida4b6f5b4-5f6b-4bf6-99be-8b48ab17598f"><p class="p">Setting constants for convenience.</p>
</li>
</ul>
</div>
<div class="section prereq Prerequisites p"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Prerequisites</h2></div><ul class="ul"><li class="li" id="id6bae50c5-7133-4ed1-8750-d9e9b6185aa4__id3c11abd3-67c1-4663-a8fc-998f5d446372"><p class="p">An
existing layout named <span class="ph filepath">mylayout.gds</span>.</p>
</li>
</ul>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand" id="id6bae50c5-7133-4ed1-8750-d9e9b6185aa4__iddbddfe46-8ee7-4084-a2a8-d2da296bccb5"><span class="ph cmd">Create a Tcl script named <span class="ph filepath">move_cell_origin.tcl</span> and
add the following lines of code:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>set mylayout mylayout.gds 
set myoutfile myoutfile.gds</code></pre></div><div class="itemgroup stepresult"><p class="p">These lines do the
following:</p>
<ul class="ul"><li class="li" id="id6bae50c5-7133-4ed1-8750-d9e9b6185aa4__ida5f7f8c8-6c2f-4611-8312-b33f47e77c4e"><p class="p">Sets
a variable for the name of the original layout file.</p>
</li>
<li class="li" id="id6bae50c5-7133-4ed1-8750-d9e9b6185aa4__id932416f1-545f-454d-98d1-b279ce11a86a"><p class="p">Sets a variable for the resulting layout.</p>
</li>
</ul>
</div></li>
<li class="li step stepexpand" id="id6bae50c5-7133-4ed1-8750-d9e9b6185aa4__id8e7bbc4c-31dc-4414-aa3f-4779a5f64230"><span class="ph cmd">Set variables for the X and
Y deltas in user units (most of the time in microns).</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>set mydeltax 12.0 
set mydeltay 15.0</code></pre></div></li>
<li class="li step stepexpand" id="id6bae50c5-7133-4ed1-8750-d9e9b6185aa4__id4c4178d6-32a1-4856-b52d-a4d5a298ef21"><span class="ph cmd">Retrieve the topcell name,
and rename it to a temporary name.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>set L [layout create $mylayout -dt_expand] 
set mytopcell [$L topcell] 
$L cellname $mytopcell myoldtopcell</code></pre></div></li>
<li class="li step stepexpand" id="id6bae50c5-7133-4ed1-8750-d9e9b6185aa4__idb2781c2a-12d8-4ca3-a985-c8364b57ceec"><span class="ph cmd">Retrieve the database units
(dbu) and assign it to the variable “mydbunits”. A database unit
(dbu) is the unit measure of length for the input database.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>set mydbunits [$L units user] </code></pre></div></li>
<li class="li step stepexpand" id="id6bae50c5-7133-4ed1-8750-d9e9b6185aa4__ida7d289ed-d95e-490d-873f-8aa00a0f1959"><span class="ph cmd">Create a new topcell with
the old name.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>$L3 create cell $mytopcell</code></pre></div></li>
<li class="li step stepexpand" id="id6bae50c5-7133-4ed1-8750-d9e9b6185aa4__ide1940dfa-7c8d-44d6-9390-9653b4df22b9"><span class="ph cmd">Instantiate the original topcell
by the desired shift in database units.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>$L3 create ref $mytopcell myoldtopcell \ 
   [expr $mydeltax / $mydbunits] \ 
   [expr $mydeltay / $mydbunits] 0 0 1</code></pre></div></li>
<li class="li step stepexpand" id="id6bae50c5-7133-4ed1-8750-d9e9b6185aa4__idc81fcaf1-a910-4efd-8093-d591c2735626"><span class="ph cmd">Expand the old topcell.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>$L3 expand cell myoldtopcell</code></pre></div></li>
<li class="li step stepexpand" id="id6bae50c5-7133-4ed1-8750-d9e9b6185aa4__idfed40d59-cb41-4a93-90cc-f3e6b0fc50b4"><span class="ph cmd">Write the layout to a file.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>$L gdsout $myoutfile $mytopcell</code></pre></div></li>
<li class="li step stepexpand" id="id6bae50c5-7133-4ed1-8750-d9e9b6185aa4__id523f2416-4fa7-4502-bbb9-1c9951612fed"><span class="ph cmd">Save the script.</span></li>
<li class="li step stepexpand" id="id6bae50c5-7133-4ed1-8750-d9e9b6185aa4__id99a3321f-4534-4730-b2fc-b2c6004591c5"><span class="ph cmd">Run the script:</span><div class="itemgroup info StepInfo"><pre class="pre ShellCommand">calibredrv move_cell_origin.tcl</pre>
</div></li>
</ol>
<div class="section result"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Results</h2></div><p class="p">Here is the completed <span class="ph filepath">move_cell_origin.tcl</span> script:</p>
<pre class="pre codeblock"><code>set mylayout mylayout.gds
set myoutfile myoutfile.gds
set mydeltax 12.0
set mydeltay 15.0
set L [layout create $mylayout -dt_expand]
set mytopcell [$L topcell]
$L cellname $mytopcell myoldtopcell
set mydbunits [$L units user]
$L create cell $mytopcell
$L create ref $mytopcell myoldtopcell \
	[expr $mydeltax / $mydbunits] \
	[expr $mydeltay / $mydbunits] 0 0 1
$L expand cell myoldtopcell
$L gdsout $myoutfile $mytopcell</code></pre></div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_ScriptsLayoutGenerationAssembly_id9ce6fdb2.html" title="Layout generation and assembly takes existing cells or layout files and modifies or combines them. You can create Tcl scripts to automate this process.">Scripts for Layout Generation and Assembly</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../topics/Command_LayoutCreate_id84f77681.html" title="Creates a new layout.">layout create</a></div>
<div><a class="link" href="../topics/Command_LExpandCell_idf37ff4aa.html#idf37ff4aa-f8aa-45ec-bbf8-33b62224fe0e__" title="Flattens all references of the specified cell.">$L expand cell</a></div>
<div><a class="link" href="../topics/Command_LCreateCell_idbcfcf106.html#idbcfcf106-c647-4f4a-a019-786fdca1c51b__" title="Creates a new cell with the specified name.">$L create cell</a></div>
<div><a class="link" href="../topics/Command_LCreateRef_id596ebdfa.html#id596ebdfa-65d8-46b5-8c0a-d2668642e268__" title="Creates a placement of a cell reference.">$L create ref</a></div>
<div><a class="link" href="../topics/Command_LGdsout_id86e3a39d.html#id86e3a39d-643c-4fef-8e7a-c51d90751100__" title="Writes the layout to a GDS-formatted file.">$L gdsout</a></div>
<div><a class="link" href="../topics/Command_LModifyOrigin_ide975dbc9.html#ide975dbc9-ac05-4161-a093-49ded4968192__" title="Changes the origin of a specified cell.">$L modify origin</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_drv_ref"
                DocTitle = "Calibre® DESIGNrev™ Reference Manual"
                PageTitle = "Script 4: Moving a Cell’s Origin"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_Script4MovingCellsOrigin_id6bae50c5.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® DESIGNrev™ Reference Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>