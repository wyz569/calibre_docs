<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Writing TVF for use with a PDK" />
<meta name="abstract" content="This topic describes a simple process for writing a control file, which is the TVF rule file used with a PDK." />
<meta name="description" content="This topic describes a simple process for writing a control file, which is the TVF rule file used with a PDK." />
<meta name="DC.subject" content="Control file" />
<meta name="keywords" content="Control file" />
<meta name="prodname" content="Calibre Litho-Friendly Design User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-19" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_lfd_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 19, 2021" />
<meta name="Draft" content="NONE" />
<meta name="DocumentTitle" content="Calibre® Litho-Friendly Design User’s Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10115,product.id.P11426" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="2021.2" />
<meta name="HighlightChanges" content="yes" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Writing TVF for use with a PDK</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Writing TVF for use with a PDK" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10115,product.id.P11426" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Writing TVF for use with a PDK</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><span class="shortdesc">This topic describes
a simple process for writing a control file, which is the TVF rule
file used with a PDK. </span>
</div>
<div class="section prereq Prerequisites p"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Prerequisites</h2></div><ul class="ul"><li class="li" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__id86b18f5d-20d2-4c60-af06-32da5758a3c8"><p class="p">Knowledge
of TVF programming. See “<a class="xref fm:HeadingAndPage" href="Contain_WritingRulesUsingTvf_iddcae0727.html#iddcae0727-c903-48cf-ba9b-9c72a1f2047c__Contain_WritingRulesUsingTvf_iddcae0727.xml#iddcae0727-c903-48cf-ba9b-9c72a1f2047c" title="The Tcl Verification Format (TVF) is a programmable expansion to the Standard Verification Rule Format (SVRF) language for Calibre. The rule files used to run Calibre LFD must be written using TVF.">Writing Rules Using TVF</a>”.</p>
</li>
<li class="li" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__id7ecc507e-758b-45f6-87da-ea48777236b4"><p class="p">A
layout database.</p>
</li>
<li class="li" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__ida5c6aa2b-121a-47ff-974c-0c365e8d2e83"><p class="p">The
PDK for the process you are using.</p>
</li>
<li class="li" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__id84c8c3b5-b17e-431d-9cf9-ddb9b8043f3b"><p class="p">The
following information about the PDK:</p>
<ul class="ul"><li class="li" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__id790a75e7-43dd-4781-bb25-a21c37ea0986"><p class="p">Names
and descriptions of the layer processes defined in the PDK.</p>
</li>
<li class="li" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__id9742d362-aea0-49ce-80ac-3e5b2e267a47"><p class="p">Names
and descriptions of the check models defined in the PDK.</p>
</li>
</ul>
</li>
</ul>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__id3d489704-dcec-4e3a-a378-b0d069b53288"><span class="ph cmd">Create a new file in your
ASCII text editor. This becomes the TVF rule file.</span></li>
<li class="li step stepexpand" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__id8b8492d8-ca43-43e3-8a92-0685bdd4fef8"><span class="ph cmd">Begin the file with the following
required first line and <span class="keyword ParameterName Required">package require</span> statement:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>#! tvf 
#================================================================== 
# Load LFD-generic library 
package require CalibreDFM_LFD   </code></pre></div></li>
<li class="li step stepexpand" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__id5577e2f6-bf2f-4694-b116-03a0d9f9ace4"><span class="ph cmd">If you
want to create variables storing the pathnames for output databases
as variables, add <span class="keyword ParameterName Required">set</span> commands
to create those variables:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>set lfdErrorDatabase     "./rdb/lfd_New.rdb" 
set lfdBandDatabase      "./rdb/bands_New.rdb" 
set lfdTopClassification "/dev/null"  </code></pre></div></li>
<li class="li step stepexpand" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__idbb762f4a-c5a8-4f35-a6d1-dd0da13c0df7"><span class="ph cmd">Supply the SVRF statements
needed to read in and evaluate your layout database:</span><ol type="a" class="ol substeps"><li class="li substep" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__ideeaf4595-0304-4f70-880f-ddfcecc54b0a"><span class="ph cmd">Begin with VERBATIM:</span><div class="itemgroup info SubStepInfo"><pre class="pre codeblock leveled"><code>		tvf::VERBATIM "  </code></pre></div></li>
<li class="li substep" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__id4b2245ae-26d7-421f-9104-5ef22ef5a79a"><span class="ph cmd">Define the database and topcell:</span><div class="itemgroup info SubStepInfo"><pre class="pre codeblock leveled"><code>		LAYOUT SYSTEM GDSII 
		LAYOUT PATH \../MODELSandLAYOUT/DIGBLK65.gds\ 
		LAYOUT PRIMARY \dffrxl\  </code></pre></div></li>
<li class="li substep" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__ideb8d5b7c-560c-4830-9f71-d08f1173c703"><span class="ph cmd">Define the database precision:</span><div class="itemgroup info SubStepInfo"><pre class="pre codeblock leveled"><code>		PRECISION 1000 
		RESOLUTION 1  </code></pre></div></li>
<li class="li substep" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__id2bcf24a3-09eb-4d51-ab1d-0b2346f9f516"><span class="ph cmd">Set the error controls:</span><div class="itemgroup info SubStepInfo"><pre class="pre codeblock leveled"><code>		FLAG SKEW YES 
		LAYOUT ERROR ON INPUT NO   </code></pre></div></li>
<li class="li substep" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__id5a987417-6fef-4456-9226-2eda78f40870"><span class="ph cmd">Load in the design layers:</span><div class="itemgroup info SubStepInfo"><pre class="pre codeblock leveled"><code>		LAYER active   11 
		LAYER poly     13 
		LAYER contact  15  
		LAYER metal1   16  
		LAYER emptyLayer 1000  </code></pre></div></li>
<li class="li substep" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__id4b7e84d7-8e92-46c7-91fd-d5695a4184f4"><span class="ph cmd">End the VERBATIM command with
a closing quote:</span><div class="itemgroup info SubStepInfo"><pre class="pre codeblock leveled"><code>"  </code></pre></div></li>
</ol>
</li>
<li class="li step stepexpand" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__idf5a8a740-bb18-4c40-a4ae-e9949b975a2e"><span class="ph cmd">Supply the SVRF statements
needed to write the Calibre LFD results to a RDB file:</span><ol type="a" class="ol substeps"><li class="li substep" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__id388722e2-a01c-492e-b8bb-bf3e5d0ca649"><span class="ph cmd">Begin with VERBATIM:</span><div class="itemgroup info SubStepInfo"><pre class="pre codeblock leveled"><code>		tvf::VERBATIM "  </code></pre></div></li>
<li class="li substep" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__id1e8069f6-b695-4c63-9e11-5734f88e78a6"><span class="ph cmd">Supply the SVRF code required </span><div class="itemgroup info SubStepInfo"><pre class="pre codeblock leveled"><code>		DRC MAXIMUM RESULTS ALL 
		DRC RESULTS DATABASE \"$lfdTopClassification\" ASCII  
		DRC SUMMARY REPORT \"/dev/null\"\ 
		DRC MAXIMUM VERTEX 199 
		DRC KEEP EMPTY YES  </code></pre></div></li>
<li class="li substep" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__id164811f8-dea9-436d-81c5-e5229ee29fba"><span class="ph cmd">End the VERBATIM command with
a closing quote:</span><div class="itemgroup info SubStepInfo"><pre class="pre codeblock leveled"><code>" 
 </code></pre></div></li>
</ol>
</li>
<li class="li step stepexpand" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__id530de5c7-7da1-4e76-87bd-f58e973f1471"><span class="ph cmd">Add LFD::<a class="xref fm:HeadingOnly" href="Command_Begin_idb82ae23e.html#idb82ae23e-c1d1-4897-b166-dd5b8f189b58__Command_Begin_idb82ae23e.xml#idb82ae23e-c1d1-4897-b166-dd5b8f189b58" title="Command used to mark the start of the Calibre LFD processing block.">Begin</a> to start the block used to perform
Calibre LFD processing:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>	LFD::Begin  </code></pre></div></li>
<li class="li step stepexpand" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__id9ac59de1-3579-4cb0-a3d6-f136f8e77606"><span class="ph cmd">If you need to define any
custom simulation settings (path to models, simulation size, or image
grid) add the <a class="xref fm:HeadingOnly" href="Command_Simconfig_id2b547006.html#id2b547006-b025-447a-8289-40ffcdca3980__Command_Simconfig_id2b547006.xml#id2b547006-b025-447a-8289-40ffcdca3980" title="Configures the simulations to be performed as part of Calibre LFD.">SimConfig</a> command:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>	LFD::SimConfig -modelpath $env(MODEL_DIR)  </code></pre></div></li>
<li class="li step stepexpand" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__id5dbcd46d-17f8-4fe6-8841-b31f8fb50bd1"><span class="ph cmd">Add the <a class="xref fm:HeadingOnly" href="Command_Loadpdk_id41b83ca9.html#id41b83ca9-a50d-4991-950a-f4bbe4d38be1__Command_Loadpdk_id41b83ca9.xml#id41b83ca9-a50d-4991-950a-f4bbe4d38be1" title="Loads the specified PDK and makes it available to Calibre LFD command calls.">LoadPDK</a> command to load the PDK.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>	LFD::LoadPDK ../PDK/generic.pdk  </code></pre></div></li>
<li class="li step stepexpand" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__idfb7d4b50-1f1b-4572-8712-d56b71af909a"><span class="ph cmd">Use the <a class="xref fm:HeadingOnly" href="Command_Registerlayer_id022d3318.html#id022d3318-65ac-4379-8433-997004ab008d__Command_Registerlayer_id022d3318.xml#id022d3318-65ac-4379-8433-997004ab008d" title="Registers a design layer with the Calibre LFD processing engine.">RegisterLayer</a> statement to map your design layers
to the layer processes defined in the PDK:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>	LFD::RegisterLayer -Designlayer active  -Processlayer diff -pdk myPDK 
	LFD::RegisterLayer -Designlayer contact -Processlayer holes -pdk myPDK  </code></pre></div></li>
<li class="li step stepexpand" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__ida869de2d-b401-4b4b-bf5f-13e17631d1e5"><span class="ph cmd">If any layers require special
handling when generating the PV-bands, optionally use the <a class="xref fm:HeadingOnly" href="Command_Pvband_id5279462d.html#id5279462d-b17c-4ff8-bc0f-a256a905e66b__Command_Pvband_id5279462d.xml#id5279462d-b17c-4ff8-bc0f-a256a905e66b" title="Generates PV-band data for the specified layer.">PVband</a> command to define the treatment
required:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>	LFD::PVband -layer active -pixel 0.01  </code></pre></div></li>
<li class="li step stepexpand" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__id8ff4a90b-f99f-4589-b008-38387f1a77fa"><span class="ph cmd">For each check you want to
perform, add a call to that check (see “<a class="xref fm:HeadingAndPage" href="MGCChap_CalibreLfdSyntaxDescriptions_id5bf4f74c.html#id5bf4f74c-c93c-4ddb-997c-630f4fa6b98b__MGCChap_CalibreLfdSyntaxDescriptions_id5bf4f74c.xml#id5bf4f74c-c93c-4ddb-997c-630f4fa6b98b" title="Calibre LFD includes an extensive set of commands to define and run LFD checks. Most checks produce system-generated properties, scores, and priority values.">Calibre LFD Syntax Descriptions</a>”):</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>	LFD::MinSpaceCheck -layer contact -pdkCheckName contactMSC_PDK \
		‑database $lfdErrorDatabase 
	LFD::MinSpaceCheck -layer active -pdkCheckName activeMSC_PDK \
		-database $lfdErrorDatabase  
 </code></pre></div></li>
<li class="li step stepexpand" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__id3d133f56-54ba-42a1-98b9-d2fd13667f0c"><span class="ph cmd">If you believe you benefit
from being able to visualize the actual PV-band data, include the
-pdk version of the <a class="xref fm:HeadingOnly" href="Command_Outputbands_id87526daf.html#id87526daf-7acd-4747-9de6-e983a41cf7bd__Command_Outputbands_id87526daf.xml#id87526daf-7acd-4747-9de6-e983a41cf7bd" title="Writes PV-band data to the specified database.">OutputBands</a> command for each layer:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>	LFD::OutputBands -layer active -pdkCheckName diffusionBands \
		-database $lfdBandDatabase  </code></pre></div></li>
<li class="li step stepexpand" id="idc9c69eeb-e33a-404f-8c6e-3caccdce06ce__ideebaab85-0f3e-4d0b-9b66-d8d6131fedf0"><span class="ph cmd">End the Calibre LFD processing
block with the LFD::<a class="xref fm:HeadingOnly" href="Command_End_id44cb6ab2.html#id44cb6ab2-abe2-4999-8f43-9dae65ec6a60__Command_End_id44cb6ab2.xml#id44cb6ab2-abe2-4999-8f43-9dae65ec6a60" title="Command used to signal the end of the Calibre LFD block.">End</a> statement:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code> 
	LFD::End  </code></pre></div></li>
</ol>
<div class="section result"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Results</h2></div><p class="p">See “<a class="xref fm:HeadingAndPage" href="Concept_SampleRuleFile_id156338e8.html#id156338e8-ce1b-4068-9260-9d42772447a8__Concept_SampleRuleFile_id156338e8.xml#id156338e8-ce1b-4068-9260-9d42772447a8" title="The rule file is written using TVF. The Tcl Verification Format (TVF) is a programmable expansion to the Standard Verification Rule Format (SVRF) language for Calibre.">Sample Rule File</a>” for an example TVF rule file
referencing a PDK.</p>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCChap_CadGroupsWritingCalibreLfdRuleFiles_id7208f448.html" title="The Computer Aided Designers (CAD) group’s role in implementing the Litho-Friendly Design flow is to write the process-specific Calibre LFD kits designers use to analyze a design using Calibre LFD rules. The following topics describe how to create process-specific Calibre LFD kits:">For CAD Groups — Writing Calibre LFD Rule Files</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_lfd_user"
                DocTitle = "Calibre® Litho-Friendly Design User’s Manual"
                PageTitle = "Writing TVF for use with a PDK"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_WritingTvfUsePdk_idc9c69eeb.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Litho-Friendly Design User’s Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>