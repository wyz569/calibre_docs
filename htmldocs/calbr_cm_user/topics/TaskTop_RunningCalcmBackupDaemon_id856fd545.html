<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Running CalCM with a Backup Daemon" />
<meta name="abstract" content="Running CalCM with a backup daemon is necessary to ensure the continuous operation of CalCM in the event the primary daemon fails or is terminated. After launching the primary daemon, you can launch the backup daemon using the same CalCM configuration. The backup daemon then waits until the primary daemon fails or is terminated." />
<meta name="description" content="Running CalCM with a backup daemon is necessary to ensure the continuous operation of CalCM in the event the primary daemon fails or is terminated. After launching the primary daemon, you can launch the backup daemon using the same CalCM configuration. The backup daemon then waits until the primary daemon fails or is terminated." />
<meta name="prodname" content="Calibre Cluster Manager (CalCM) User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-26" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="2" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_cm_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® Cluster Manager (CalCM) User’s Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,doc.type.documentation.sys,product.version.v2021.2,product.id.P10101" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="2021.1" />
<meta name="HighlightChanges" content="yes" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id856fd545-a207-4c83-8ae2-4309532f6c52" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Running CalCM with a Backup Daemon</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Running CalCM with a Backup Daemon" />
<meta name="attributes" content="doc.type.documentation.user,doc.type.documentation.sys,product.version.v2021.2,product.id.P10101" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id856fd545-a207-4c83-8ae2-4309532f6c52">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Running CalCM with a Backup Daemon</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><span class="shortdesc">Running CalCM
with a backup daemon is necessary to ensure the continuous operation
of CalCM in the event the primary daemon fails or is terminated.
After launching the primary daemon, you can launch the backup daemon
using the same CalCM configuration. The backup daemon then waits
until the primary daemon fails or is terminated.</span>
</div>
<div class="section prereq Prerequisites p"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Prerequisites</h2></div><ul class="ul"><li class="li" id="id856fd545-a207-4c83-8ae2-4309532f6c52__ida0da4d5a-ef93-4562-b7e1-01a07f75fea5"><p class="p">Primary
and backup hosts for running multiple CalCM daemons.</p>
</li>
</ul>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand" id="id856fd545-a207-4c83-8ae2-4309532f6c52__id597b2c17-c703-4794-8779-336f3b3b38bc"><span class="ph cmd">Open the CalCM configuration
file (<span class="ph filepath">calcmd.conf</span>) in an ASCII editor and replace
the LICENSE PORT statement with the <a class="xref fm:HeadingOnly" href="Command_LicenseServer_id5622f333.html#id5622f333-47b4-4546-889a-71538477089e__Command_LicenseServer_id5622f333.xml#id5622f333-47b4-4546-889a-71538477089e" title="Specifies a list of CalCM daemons that provide licenses for Calibre jobs.">LICENSE SERVER</a> statement, substituting the strings
shown in italics as described below. </span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>LICENSE SERVER <span class="keyword ParameterName OptionalReplaceable">primary</span>:<span class="keyword ParameterName OptionalReplaceable">port</span>;<span class="keyword ParameterName OptionalReplaceable">backup</span>:<span class="keyword ParameterName OptionalReplaceable">port</span></code></pre><ul class="ul"><li class="li" id="id856fd545-a207-4c83-8ae2-4309532f6c52__id7a9a0b03-416b-4109-85d1-3e9b7bd668af"><p class="p"><span class="keyword ParameterName OptionalReplaceable">primary</span> —
Replace this string with the hostname of the license server running
the primary CalCM daemon.</p>
</li>
<li class="li" id="id856fd545-a207-4c83-8ae2-4309532f6c52__id2c5b3568-7e52-48eb-b183-8ef44ebcc2f5"><p class="p"><span class="keyword ParameterName OptionalReplaceable">backup</span> — Replace
this string with the hostname of the license server running the
backup CalCM daemon.</p>
</li>
<li class="li" id="id856fd545-a207-4c83-8ae2-4309532f6c52__id9efe8ac0-98b3-461c-ad21-5384b6d78407"><p class="p"><span class="keyword ParameterName OptionalReplaceable">port</span> —
Replace this string with the port numbers on the primary and backup
servers to be used for the License Broker Daemon (LDB).</p>
</li>
</ul>
</div></li>
<li class="li step stepexpand" id="id856fd545-a207-4c83-8ae2-4309532f6c52__id52885702-691a-4e14-86ac-d34baf162c44"><span class="ph cmd">Run the following command
on the primary and backup hosts to start the CalCM daemon (calcmd):</span><div class="itemgroup info StepInfo"><pre class="pre ShellCommand">$CALIBRE_HOME/bin/calcmd -config calcmd.conf</pre>
</div></li>
<li class="li step stepexpand" id="id856fd545-a207-4c83-8ae2-4309532f6c52__idabce6859-49ad-456f-99a3-284856fc042b"><span class="ph cmd">Verify that the backup daemon
is waiting for the primary daemon.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>Locking “<span class="ph filepath">calcm/calcmd.conf</span>” on <span class="ph filepath">backup</span> with the process, <span class="keyword ParameterName OptionalReplaceable">pid</span>. 
WARNING: already locked on <span class="keyword ParameterName OptionalReplaceable">primary</span> by other process, <span class="keyword ParameterName OptionalReplaceable">pid</span>. 
WARNING: waiting for the lock...</code></pre></div></li>
<li class="li step stepexpand" id="id856fd545-a207-4c83-8ae2-4309532f6c52__id55e83117-578f-426a-89db-2d3572684b87"><span class="ph cmd">Use the Linux kill command
to kill the primary daemon:</span><div class="itemgroup info StepInfo"><pre class="pre ShellCommand">kill -HUP {<span class="keyword ParameterName OptionalReplaceable">primary pid</span>}</pre>
</div></li>
<li class="li step stepexpand" id="id856fd545-a207-4c83-8ae2-4309532f6c52__ide5370606-6414-44dc-8128-8c24c161141e"><span class="ph cmd">Use the Linux ps command to
verify that the backup daemon is launched.</span></li>
</ol>
<div class="section result"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Results</h2></div><p class="p">The backup daemon is now responsible
for handling the dispatching and monitoring of Calibre jobs launched
using CalCM.</p>
<p class="p">When killing CalCM with a backup daemon
already waiting, the backup should be killed first, followed by
killing the primary daemon.</p>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCChap_DeployingRunningCalcm_id535641fc.html" title="This section includes several procedures that explain how to deploy and run CalCM and monitor resources and job information using the CalCM dashboard web application.">Deploying and Running CalCM</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_cm_user"
                DocTitle = "Calibre® Cluster Manager (CalCM) User’s Manual"
                PageTitle = "Running CalCM with a Backup Daemon"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_RunningCalcmBackupDaemon_id856fd545.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Cluster Manager (CalCM) User’s Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>