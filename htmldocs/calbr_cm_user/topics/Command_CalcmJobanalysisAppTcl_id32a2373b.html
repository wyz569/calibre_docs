<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="calcm_jobanalysis_app.tcl" />
<meta name="abstract" content="Categorizes the job information based on groups and calculates the result for reference. The categorized information can be retrieved using a command‑line interface." />
<meta name="description" content="Categorizes the job information based on groups and calculates the result for reference. The categorized information can be retrieved using a command‑line interface." />
<meta name="prodname" content="Calibre Cluster Manager (CalCM) User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-26" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="2" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_cm_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® Cluster Manager (CalCM) User’s Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,doc.type.documentation.sys,product.version.v2021.2,product.id.P10101" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="2021.1" />
<meta name="HighlightChanges" content="yes" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id32a2373b-a7db-4775-8980-958980468bbc" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>calcm_jobanalysis_app.tcl</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="calcm_jobanalysis_app.tcl" />
<meta name="attributes" content="doc.type.documentation.user,doc.type.documentation.sys,product.version.v2021.2,product.id.P10101" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="id32a2373b-a7db-4775-8980-958980468bbc">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">calcm_jobanalysis_app.tcl</h1>
<div class="body refbody CommandRefBody"><div class="abstract CommandRefAbstract"><p class="shortdesc">Categorizes
the job information based on groups and calculates the result for
reference. The categorized information can be retrieved using a
command‑line interface.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">Requires CalCM+ advanced
features licenses. Refer to the <a class="xref LinkItalic" href="../../calbr_admin_gd/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'manual title', 'calbr_admin_gd'); return false;">Calibre Administrator’s Guide</a> for complete licensing information.</p>
</div>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">To use this CalCM application,
you must:</p>
<ul class="ul NoteList"><li class="li NoteListItem">Use it with
the <span class="ph filepath">calcm_notification_app.tcl</span> application</li>
<li class="li NoteListItem">Define SCANJOBINFO=1 in the <span class="ph filepath">calcm_jobqueue_app.tcl</span> application</li>
</ul>
</div>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName Required">APPLICATION TCL</span> <span class="keyword ParameterName RequiredReplaceable">path</span><span class="keyword ParameterName Required">/calcm_jobanalysis_app.tcl</span> [ FILE ‘[’ </p>
<p class="lines UsageLine">   [CONDITIONS = <span class="keyword ParameterName OptionalReplaceable">sql_filter</span>]</p>
<p class="lines UsageLine">   [CONFPATH = <span class="keyword ParameterName OptionalReplaceable">path</span>]</p>
<p class="lines UsageLine">   [COLUMNS = <span class="keyword ParameterName OptionalReplaceable">columns</span>]</p>
<p class="lines UsageLine">   [DBSTARTTIME = <span class="keyword ParameterName OptionalReplaceable">path</span>]</p>
<p class="lines UsageLine">   [GROUPS = <span class="keyword ParameterName OptionalReplaceable">groups</span>]</p>
<p class="lines UsageLine">   [RANGES = <span class="keyword ParameterName OptionalReplaceable">ranges</span>]</p>
<p class="lines UsageLine">‘]’ ]</p>
</div>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="id32a2373b-a7db-4775-8980-958980468bbc__id44bef869-0481-460e-a0e3-088a1f77ef66">CONDITIONS = <span class="keyword ParameterName OptionalReplaceable">sql_filter</span></dt>
<dd class="dd ArgumentDescription"><p class="p">Optional keyword that
can be used to ignore specific jobs from the history when building statistics
for job categorization. It accepts filters specified with the SQL
language. For example, if you recently stopped using an old Calibre
branch 2009.1 and want to ignore these results from your statistics
for more accuracy, you would define the following:</p>
<pre class="pre codeblock"><code>CONDITIONS = "calibre_version != 'v2009.1'"</code></pre></dd>
<dt class="dt ArgumentName dlterm" id="id32a2373b-a7db-4775-8980-958980468bbc__idc9de401a-5c92-4107-a095-25aaaa43522d">CONFPATH = <span class="keyword ParameterName OptionalReplaceable">path</span></dt>
<dd class="dd ArgumentDescription"><p class="p">Optional keyword that
can be used to store the configuration of this CalCM application outside
of the main configuration file so that you can update the values
without restarting the CalCM daemon.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id32a2373b-a7db-4775-8980-958980468bbc__id3a19706d-8c52-48f4-aa45-dabd25f8e12e">COLUMNS = <span class="keyword ParameterName OptionalReplaceable">columns</span></dt>
<dd class="dd ArgumentDescription"><p class="p">Optional keyword to specify
how the aggregated columns are calculated. The specified functions
can be used as a column name in the info_analysis table. For example
(specify in a single line):</p>
<pre class="pre codeblock"><code>COLUMNS = count(*),avg(runtime),max(runtime),max(max_nremotes), \
     max(max_master_lvheap)</code></pre><p class="p">The listed columns are those that the main command
calcm_jobanalysis will print when run. It is recommended to output
at least count(*) so that you know how many past jobs have been
used to compute the statistics, and whether the number is high enough
to be reliable.</p>
<p class="p">It is also recommended to include max(runtime)
and max(master_lvheap) from the history of similar jobs. </p>
<p class="p">Legal keywords: max_master_lvheap, max_nremotes,
remote_cpu_hours, master_cpu_hours, runtime, active_remote_hours,
allocated_remote_hours.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id32a2373b-a7db-4775-8980-958980468bbc__id31bc510a-caef-4e06-9835-f56ed20757d7">DBSTARTTIME = <span class="keyword ParameterName OptionalReplaceable">path</span></dt>
<dd class="dd ArgumentDescription"><p class="p">Optional
keyword to specify when the database categorization occurs. The
format is as follows.</p>
<ul class="ul"><li class="li" id="id32a2373b-a7db-4775-8980-958980468bbc__id6407243e-881e-4807-ac5f-d0b1a08d729e"><p class="p">For daily categorization, specify time as <span class="keyword ParameterName OptionalReplaceable">hour</span>:<span class="keyword ParameterName OptionalReplaceable">minute</span>.
For example, to categorize the database at 1:00 a.m. each day, specify
“01:00”.</p>
</li>
<li class="li" id="id32a2373b-a7db-4775-8980-958980468bbc__ida8a5ce23-1228-4e7f-8726-7be9ebb865de"><p class="p">For weekly categorization, specify time as <span class="keyword ParameterName OptionalReplaceable">day‑of‑week</span>‑<span class="keyword ParameterName OptionalReplaceable">hour</span>:<span class="keyword ParameterName OptionalReplaceable">minute</span>.
For example, to categorize the database on Monday at 8:00 a.m. each
week, specify “Monday‑08:00”.</p>
</li>
<li class="li" id="id32a2373b-a7db-4775-8980-958980468bbc__id664bb81c-d608-4c99-9edc-28572160e46b"><p class="p">For monthly categorization, specify time as <span class="keyword ParameterName OptionalReplaceable">week‑of‑the‑month</span>‑<span class="keyword ParameterName OptionalReplaceable">day‑of‑week</span>‑<span class="keyword ParameterName OptionalReplaceable">hour</span>:<span class="keyword ParameterName OptionalReplaceable">minute</span>.
For example, to categorize the database at 1:00 a.m.on the first
Sunday of each month, specify “1st‑Sunday‑01:00”. To categorize
on the last Sunday of each month at 1:00 a. m., specify “4th‑Sunday‑01:00”.</p>
</li>
</ul>
</dd>
<dt class="dt ArgumentName dlterm" id="id32a2373b-a7db-4775-8980-958980468bbc__idb6bb10e2-f043-4676-81d2-75917658bc40">GROUPS = <span class="keyword ParameterName OptionalReplaceable">groups</span></dt>
<dd class="dd ArgumentDescription"><p class="p">Optional keyword to specify
the columns in the info_jobs table to use for grouping during categorization.
The groups are comma‑separated. The range function specified in
RANGES can be used. For example (specify in a single line):</p>
<pre class="pre codeblock"><code>GROUPS = tech_node,module,layer,calibre_version,db_range(db_area)</code></pre><p class="p">This keyword defines which jobs are “similar”
to the one you are trying to categorize. Defining these groups is
a compromise between accuracy (fewer jobs but very similar) and
a larger dataset (many jobs but may include jobs different from
the one you are trying to categorize).</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id32a2373b-a7db-4775-8980-958980468bbc__id0d616c68-1508-4084-8fb6-a7389c2ba283">RANGES = <span class="keyword ParameterName OptionalReplaceable">ranges</span></dt>
<dd class="dd ArgumentDescription"><p class="p">Optional keyword to specify
the range functions to use in GROUPS and COLUMNS. The name can be
used as a function, and the value within the specified range is
stored as the tag. The syntax is as follows:</p>
<pre class="pre codeblock"><code>{<span class="keyword ParameterName OptionalReplaceable">name</span> <span class="keyword ParameterName OptionalReplaceable">tag</span>=<span class="keyword ParameterName OptionalReplaceable">from</span>,<span class="keyword ParameterName OptionalReplaceable">to</span>…}</code></pre><p class="p">For example:</p>
<pre class="pre codeblock"><code>RANGES = {db_range micro=0,5 tiny=5,20 small=20,100 medium=100,300 \
     large=300,500 huge=500,*} \
     {runtime_range short=0,1 medium=1,10 long=10,100 huge=100,*}</code></pre><p class="p">This CalCM application is intended to give a categorization
of jobs, but it cannot make predictions. It is based on Calibre
jobs that previously ran on your cluster with your designs, but
not exactly the same. In order to help with categorization, it is
necessary to group at least the layout sizes into “buckets,” so
that you define what a “similar” job is. Without these buckets,
CalCM will be unable to group together jobs for similar layout sizes.</p>
<p class="p">Use mm<span class="ph FontProperty LiteralSuperScript">2</span> for
db_range. In the example above, a new layout of 70 mm<span class="ph FontProperty LiteralSuperScript">2</span> will
be categorized as “small” and statistics for all “small” layouts
will be used to categorize the job.</p>
</dd>
</dl>
</div>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">The <span class="ph filepath">calcm_jobanalysis_app.tcl</span> application
categorizes the job information stored in the info_jobs table based
on the groups specified. The calculated result of the information
can be retrieved from the info_analysis table and referenced using
the command‑line interface created in <span class="ph filepath">jobqueue/calcm_jobanalysis</span>. </p>
<p class="p">Categorizing jobs provides useful data that can
be used in many different ways, including the following:</p>
<ul class="ul"><li class="li" id="id32a2373b-a7db-4775-8980-958980468bbc__id01326132-a42b-4dcb-9b1b-bc5d98e79d3e"><p class="p">Job categorization statistics enable you to make
broad predictions on the behavior of any new Calibre job, based
on the behavior of similar jobs that ran previously on your cluster.</p>
</li>
<li class="li" id="id32a2373b-a7db-4775-8980-958980468bbc__id3dd708f5-7490-4daf-895f-d665fd9c3ec6"><p class="p">Categorizing
the maximum memory size enables you to select a master host with enough
memory to avoid using swap memory or possibly to avoid a crash.</p>
</li>
<li class="li" id="id32a2373b-a7db-4775-8980-958980468bbc__id0a77cb65-5b2b-4289-a099-54114c0843f6"><p class="p">Categorizing
a relevant run time enables you to configure a relevant run time
outlier alert, so that any misbehavior can be detected earlier while
avoiding false warnings.</p>
</li>
<li class="li" id="id32a2373b-a7db-4775-8980-958980468bbc__id456556a6-e302-4c55-bbec-0d920d0953c0"><p class="p">Categorizing
maximum scalability enables you to select correct CalCM parameters, such
as MAXCOUNT. </p>
</li>
<li class="li" id="id32a2373b-a7db-4775-8980-958980468bbc__id593d5fa0-eae4-4ccb-9be4-725805496ab9"><p class="p">If
you know a job will be “small” in terms of memory, CPU, and scalability,
you can run multiple ones on the same master host to allow a global
cluster utilization.</p>
</li>
</ul>
<p class="p">The syntax follows SQL syntax convention as follows:</p>
<pre class="pre codeblock"><code>calcm_jobanalysis [–select &lt;column&gt;…] –group &lt;group&gt;…</code></pre><p class="p">For example:</p>
<pre class="pre codeblock"><code>calcm_jobanalysis -group 22,MODULE,M1,v2020.3_0.69,medium
calcm_jobanalysis –select ''count(*)', 'max(runtime)', \
   'db_range(db_area)', 'max(max_master_lvheap)'' \
   -group 22,MODULE,M1,v2020.3_0.69,medium</code></pre><p class="p">You can specify a threshold to query the row where
count(*) exceeds the specified value.</p>
<p class="p">The -group option must be used accordingly
to the GROUPS parameter defined in the CalCM application. By default,
the output of the following command will be the COLUMNS parameters
defined in the CalCM application.</p>
<pre class="pre codeblock"><code>$CALCM_HOME/jobqueue/calcm_jobanalysis -group 12NM, opc, XW, \
   v2014.1_76.63, micro</code></pre><p class="p">Multiple groups can be specified to query subsequently
until the row that meets the threshold is found. The percent sign
(%) can be specified in the group to match everything.</p>
<pre class="pre codeblock"><code>calcm_jobanalysis -threshold &lt;threshold&gt; [–select &lt;column&gt;…] \
   –group &lt;group&gt;… [–group &lt;group&gt;…]… </code></pre><p class="p">For example:</p>
<pre class="pre codeblock"><code>calcm_jobanalysis –threshold 5 \
   -group 22,MODULE,M1,v2020.3_0.69,medium \
   -group 22,MODULE,M1,v2020.3_0.69,small \
   -group 22,MODULE,M1,v2020.3_0.69,% \
   -group 12,MODULE,M1,v2020.3_0.69,%</code></pre><div class="note tip"><span class="tiptitle">Tip</span> <p class="p">If your history
of jobs is not statistically large enough to produce relevant values,
the accuracy of the categorization is reduced. In this case, try
to select jobs exactly similar first, then expand to similar jobs
if there are not enough jobs, and finally only approximately-similar
jobs.</p>
</div>
<p class="p">The following options are supported to query and
modify the info_jobs table contents. All arguments must be specified
in SQL syntax.</p>
<pre class="pre codeblock"><code>calcm_jobanalysis –select &lt;column&gt;… [–where &lt;condition&gt;…]
 						-insert &lt;column&gt;… -values &lt;value&gt;…
 						-delete –where &lt;condition&gt;…
 						-update &lt;assignment&gt;… –where &lt;condition&gt;…</code></pre></div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><div class="section Subsection" id="id32a2373b-a7db-4775-8980-958980468bbc__id6cff5976-1d84-4549-a351-27ac721f32cb"><h2 class="title Subheading sectiontitle">Example 1</h2><p class="p">To get an idea of how a 12 nm OPC job on layer
Metal1 with Calibre 2020.2 will behave on your new medium-sized
chip (100-300 mm<span class="ph FontProperty LiteralSuperScript">2</span>),
based on your history, you would run the following:</p>
<pre class="pre codeblock"><code>% ./jobqueue/calcm_jobanalysis -group 12nm, OPC, Metal1, \
     v2020.2_58.53,  medium</code></pre></div>
<div class="section Subsection" id="id32a2373b-a7db-4775-8980-958980468bbc__idd5f0243d-cf00-43d5-a062-5dddeadcf971"><h2 class="title Subheading sectiontitle">Example 2</h2><pre class="pre codeblock"><code>APPLICATION TCL calcm_jobanalysis_app.tcl FILE [
  GROUPS = tech_node,module,layer,calibre_version,db_range(db_area)
  COLUMNS = count(*),avg(runtime),max(runtime),count(*),avg(runtime),count(*),avg(runtime),max(runtime),max(max_nremotes),max(max_master_lvheap)
  RANGES = {db_range micro=0,5 tiny=5,20 small=20,100 medium=100,300
large=300,500 huge=500,*} \
    {runtime_range short=0,1 medium=1,10 long=10,100 huge=100,*}
  CONDITIONS = "calibre_version != 'v2020.3'"
  DBSTARTTIME = 23:00 ]</code></pre></div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_CalcmTclApplicationReference_id59ca9376.html" title="This section provides reference information on the CalCM Tcl applications (default unless noted otherwise).">CalCM Tcl Application Reference</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_cm_user"
                DocTitle = "Calibre® Cluster Manager (CalCM) User’s Manual"
                PageTitle = "calcm_jobanalysis_app.tcl"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_CalcmJobanalysisAppTcl_id32a2373b.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Cluster Manager (CalCM) User’s Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>