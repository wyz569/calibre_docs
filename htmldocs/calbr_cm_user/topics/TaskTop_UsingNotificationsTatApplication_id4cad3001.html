<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Using Notifications with the TAT Application" />
<meta name="abstract" content="In the following procedure, you configure TAT to support the notification of runtime events." />
<meta name="description" content="In the following procedure, you configure TAT to support the notification of runtime events." />
<meta name="prodname" content="Calibre Cluster Manager (CalCM) User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-26" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="2" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_cm_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® Cluster Manager (CalCM) User’s Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,doc.type.documentation.sys,product.version.v2021.2,product.id.P10101" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="2021.1" />
<meta name="HighlightChanges" content="yes" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id4cad3001-9aea-4e6c-9473-a4783fb4cc88" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Using Notifications with the TAT Application</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Using Notifications with the TAT Application" />
<meta name="attributes" content="doc.type.documentation.user,doc.type.documentation.sys,product.version.v2021.2,product.id.P10101" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id4cad3001-9aea-4e6c-9473-a4783fb4cc88">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Using Notifications with the TAT Application</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><span class="shortdesc">In the following
procedure, you configure TAT to support the notification of runtime
events. </span>
</div>
<div class="section prereq Prerequisites p"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Prerequisites</h2></div><ul class="ul"><li class="li" id="id4cad3001-9aea-4e6c-9473-a4783fb4cc88__idd8d5553c-c41e-42d9-a017-8dedfc7c2fc3"><p class="p">CalCM
configuration file (<span class="ph filepath">calcmd.conf</span>)</p>
</li>
<li class="li" id="id4cad3001-9aea-4e6c-9473-a4783fb4cc88__id00cceea6-fa15-4f79-adbd-bd142b410ab8"><p class="p">Job
configuration file (<span class="ph filepath">job.conf</span>)</p>
</li>
<li class="li" id="id4cad3001-9aea-4e6c-9473-a4783fb4cc88__id017f9959-1aeb-4bf3-90ea-a2a4bbe47a25"><p class="p">CalCM
daemon is running</p>
</li>
</ul>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step" id="id4cad3001-9aea-4e6c-9473-a4783fb4cc88__id2adc1643-6763-4067-ae89-cd1400786050"><span class="ph cmd">Edit the CalCM configuration
file (<span class="ph filepath">calcmd.conf</span>) located in the <span class="ph filepath">config</span> directory
to add support for estimation exceed and runtime exceed events.</span><ol type="a" class="ol substeps"><li class="li substep" id="id4cad3001-9aea-4e6c-9473-a4783fb4cc88__id7f00cd78-dd26-4335-9ab8-f8fab84fe40d"><span class="ph cmd">Add the lines shown in bold
to the configuration file:</span><div class="itemgroup info SubStepInfo"><pre class="pre codeblock leveled"><code>... 
APPLICATION TCL $CALCM_APP/calcm_tat_app.tcl FILE [ 
	DBPATH = $CALCM_HOME/dbfiles/calcm_tat.db 
	MAX_REMOTE = 1000  
	MIN_REMOTE = 200 
<span class="ph CodeHighlight orange">	NOTIFICATION_FILE_PATH = $CALCM_HOME/notify.sh</span> 
	NOTIFICATION_EXCEED_RATIO = 30 
	NOTIFICATION_INTERVAL = 5 
	NOTIFICATION_ESTATUS = 1 
	] 
	...</code></pre><p class="p">The NOTIFICATION_FILE_PATH
argument specifies the path to a notification script (<span class="ph filepath">notify.sh</span>)
that you create in step <a class="xref fm:NumberOnly" href="#id4cad3001-9aea-4e6c-9473-a4783fb4cc88__id89af737a-4bdb-475e-be95-72002c742d28">2</a>. The NOTIFICATION_EXCEED_RATIO
argument specifies a ratio for detecting the conditions under which
to issue a notification event. The NOTIFICATION_INTERVAL argument
specifies a minimum time interval for issuing a notification event.</p>
</div></li>
<li class="li substep" id="id4cad3001-9aea-4e6c-9473-a4783fb4cc88__id35a4fb25-50fd-464f-855b-cdacf8328b37"><span class="ph cmd">Save and close the file.</span></li>
</ol>
</li>
<li class="li step" id="id4cad3001-9aea-4e6c-9473-a4783fb4cc88__id89af737a-4bdb-475e-be95-72002c742d28"><span class="ph cmd">Create a <span class="ph filepath">notify.sh</span> script
in the $CALCM_HOME directory.</span><ol type="a" class="ol substeps"><li class="li substep" id="id4cad3001-9aea-4e6c-9473-a4783fb4cc88__idfbf4978c-42b7-4c3e-8362-8c9904c64a16"><span class="ph cmd">In an ASCII editor, add the
following:</span><div class="itemgroup info SubStepInfo"><pre class="pre codeblock leveled"><code>#!/bin/csh 
 
if ($1 == "CHECK") then 
  # This is CHECK event 
  set mbody="CHECK point error, ID:$2, Operation:$3, Time:$4, Duration:$5" 
  echo "$mbody" | mail -s "$mbody" calcm_admin@company.com  
else if ($1 == "ESTATUS") then 
  # This is ESTATUS event 
  set mbody="ESTATUS event, ID:$2, Estatus:$3, Start:$4, End:$5" 
  echo "$mbody" | mail -s "$mbody" calcm_admin@company.com  
endif </code></pre></div></li>
<li class="li substep" id="id4cad3001-9aea-4e6c-9473-a4783fb4cc88__id7ee6ee56-aaf6-4f00-9489-3623691839e3"><span class="ph cmd">Save and close the file.</span></li>
</ol>
</li>
<li class="li step" id="id4cad3001-9aea-4e6c-9473-a4783fb4cc88__id5415d8d0-b6fa-4633-8a50-fdd3593bac23"><span class="ph cmd">Edit the job configuration
file (<span class="ph filepath">job.conf</span>) located in the <span class="ph filepath">job1</span> directory
to add support for a check point event.</span><ol type="a" class="ol substeps"><li class="li substep" id="id4cad3001-9aea-4e6c-9473-a4783fb4cc88__id27f27080-a9b2-4f52-bb6f-a9b3434b1e86"><span class="ph cmd">Modify the JOB BUDGET statement
to include the CHECK argument. For example:</span><div class="itemgroup info SubStepInfo"><pre class="pre codeblock leveled"><code>JOB BUDGET CHECK:dens_out=80;opcv_out=25 </code></pre><p class="p">The CHECK argument can be specified
multiple times in a JOB BUDGET string or in other JOB BUDGET statements. </p>
</div></li>
<li class="li substep" id="id4cad3001-9aea-4e6c-9473-a4783fb4cc88__id2abc3678-1c7a-452a-a202-33f18fdaf10f"><span class="ph cmd">Save and close the file.</span></li>
</ol>
</li>
<li class="li step" id="id4cad3001-9aea-4e6c-9473-a4783fb4cc88__id81eabf57-f710-4f74-85dc-8335d2f6f9ad"><span class="ph cmd">Execute job1 under CalCM.</span></li>
<li class="li step" id="id4cad3001-9aea-4e6c-9473-a4783fb4cc88__iddd40131c-f6f8-40c7-b1f5-bc11bb735090"><span class="ph cmd">Review the transcript for
any “CHECK”, “ESTIMATE”, or “EXCEED” notifications.</span></li>
</ol>
<div class="section result"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Results</h2></div><p class="p">During the run, notifications are
sent when the following events occur:</p>
<ul class="ul"><li class="li" id="id4cad3001-9aea-4e6c-9473-a4783fb4cc88__id7c53dc2a-d56a-4043-ae2d-6c26a546151f"><p class="p">Check point — This event occurs
when the dens_out or opcv_out operation do not finish within the
time specified by the JOB BUDGET statement. The following parameters
are passed to the notification script (notify.sh) upon execution:</p>
<pre class="pre codeblock leveled"><code>“CHECK” <span class="keyword ParameterName OptionalReplaceable">job_id</span> <span class="keyword ParameterName OptionalReplaceable">operation_name</span> <span class="keyword ParameterName OptionalReplaceable">specified_time</span> <span class="keyword ParameterName OptionalReplaceable">job_duration quota</span> <span class="keyword ParameterName OptionalReplaceable">user</span> </code></pre></li>
<li class="li" id="id4cad3001-9aea-4e6c-9473-a4783fb4cc88__iddb2ec210-f420-438e-88b5-a64af999f936"><p class="p">Estimation exceed — This event
occurs when the estimated job duration exceeds the budget by more
than the ratio specified by the NOTIFICATION_EXCEED_RATIO argument
(30%). In this procedure, the budgeted time for the dens_out procedure
is 80 minutes and the opcv_out procedure is 25 minutes. An estimation
exceed notification is sent when the estimated duration for the
dens_out procedure exceeds 104 (80 + 80 x 0.3) minutes or the opcv_out
procedure exceeds 32.5 (25 +25 x 0.3) minutes. The following parameters
are passed to the notification script (notify.sh) upon execution:</p>
<pre class="pre codeblock leveled"><code>“ESTIMATE” <span class="keyword ParameterName OptionalReplaceable">job_id operation_name exceed_time budget job_duration 
	quota user</span> </code></pre></li>
<li class="li" id="id4cad3001-9aea-4e6c-9473-a4783fb4cc88__id4ea547e7-b693-4603-b278-54557ec00bbd"><p class="p">Runtime exceed — This event
occurs when the actual job duration exceeds the total budget by
more than the ratio specified by the NOTIFICATION_EXCEED_RATIO argument.
In this procedure, the total budget is 105 (80 + 25) minutes. A
runtime exceed notification is sent when the job duration exceeds
the budget of 136.5 (105 + 105 x 0.3) minutes. The following parameters
are passed to the notification script (notify.sh) upon execution:</p>
<pre class="pre codeblock leveled"><code>“EXCEED” <span class="keyword ParameterName OptionalReplaceable">job_id operation_name exceed_time budget job_duration quota
	user</span> </code></pre></li>
<li class="li" id="id4cad3001-9aea-4e6c-9473-a4783fb4cc88__id7a3801e8-b5b1-4a94-8eb3-12094c596c89"><p class="p">Exit status — This event occurs
when the CalCM job finishes. In this procedure, a value of “1” is
specified for the NOTIFICATION_ESTATUS argument which causes an
“exit status” event to occur regardless of the exit status. The
following parameters are passed to the notification script (notify.sh)
when the job completes with a non-zero exit status:</p>
<pre class="pre codeblock leveled"><code>“ESTATUS” <span class="keyword ParameterName OptionalReplaceable">job_id exit_status start_time end_time quota user</span></code></pre></li>
</ul>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCAppe_ConfiguringUsingCalcmTatApplication_id36e1c9f7.html" title="This section includes procedures that explain how to set up and run the TAT application with CalCM.">Configuring and Using the CalCM TAT Application</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../topics/Command_JobBudget_idf9bca40a.html#idf9bca40a-21df-4c28-831f-838bc3c75202__" title="Specifies a budget time for operations.">JOB BUDGET</a></div>
<div><a class="link" href="../topics/Command_CalcmTatAppTcl_idaa57a8e6.html#idaa57a8e6-273c-4474-bd51-dff3b4f099b5__" title="Controls the job turn-around time (or TAT) by sending a remote count request to the resource monitor application. Job budget time is specified in the job configuration file. The CalCM TAT application supports increasing the priority when the duration of a job is expected to exceed the budget.">calcm_tat_app.tcl</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_cm_user"
                DocTitle = "Calibre® Cluster Manager (CalCM) User’s Manual"
                PageTitle = "Using Notifications with the TAT Application"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_UsingNotificationsTatApplication_id4cad3001.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Cluster Manager (CalCM) User’s Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>