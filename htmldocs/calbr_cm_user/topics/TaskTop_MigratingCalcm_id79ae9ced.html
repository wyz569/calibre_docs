<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Migrating CalCM" />
<meta name="abstract" content="Once CalCM has been qualified with the new version of Calibre, you can now perform the actual process of migrating CalCM." />
<meta name="description" content="Once CalCM has been qualified with the new version of Calibre, you can now perform the actual process of migrating CalCM." />
<meta name="prodname" content="Calibre Cluster Manager (CalCM) User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-26" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="2" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_cm_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® Cluster Manager (CalCM) User’s Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,doc.type.documentation.sys,product.version.v2021.2,product.id.P10101" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="2021.1" />
<meta name="HighlightChanges" content="yes" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id79ae9ced-c07d-4e9c-b74a-96d3f85bf395" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Migrating CalCM</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Migrating CalCM" />
<meta name="attributes" content="doc.type.documentation.user,doc.type.documentation.sys,product.version.v2021.2,product.id.P10101" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id79ae9ced-c07d-4e9c-b74a-96d3f85bf395">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Migrating CalCM</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><span class="shortdesc">Once CalCM has
been qualified with the new version of Calibre, you can now perform
the actual process of migrating CalCM.</span>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand" id="id79ae9ced-c07d-4e9c-b74a-96d3f85bf395__id01f1e9f8-7fe3-41b9-a18c-4fbee20d2f0f"><span class="ph cmd">Kill the CalCM daemons.</span><ol type="a" class="ol substeps"><li class="li substep" id="id79ae9ced-c07d-4e9c-b74a-96d3f85bf395__idea6cc92f-8ec1-446f-8d23-9697807c537c"><span class="ph cmd">Start by killing the “backup”
CalCM daemon first.</span><div class="itemgroup info SubStepInfo"><pre class="pre ShellCommand">% kill -HUP &lt;pid(calcm_daemon)&gt;</pre>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">If not
killed first, it can lead to issues such as a corrupted job database,
jobs unable to reconnect to CalCM, and licenses hanging.</p>
</div>
<p class="p">Alternative command to kill
the CalCM daemon:</p>
<pre class="pre ShellCommand">% killall -HUP calcmd</pre>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">Do not
use the ‘-9’ switch when killing any process with CalCM. This can
cause processes such as the LBD to not shut down properly.</p>
</div>
</div></li>
<li class="li substep" id="id79ae9ced-c07d-4e9c-b74a-96d3f85bf395__id8ea8138f-7c5e-44ef-a60a-8b1ef0d53d96"><span class="ph cmd">Next, kill the production
CalCM daemon.</span><div class="itemgroup info SubStepInfo"><pre class="pre ShellCommand">% kill -HUP &lt;pid(calcm_backup_deamon)&gt;</pre>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">If production
runs are in process, shutting down the daemon should have little
or no impact on the jobs. However, the dynamic CPU allocation ceases
to occur and jobs continue to completion with their current number
of cores. The startup procedure for CalCM attempts to reconnect
to these jobs automatically.</p>
</div>
</div></li>
</ol>
</li>
<li class="li step stepexpand" id="id79ae9ced-c07d-4e9c-b74a-96d3f85bf395__idadda8a9f-9d55-44b3-8c25-eca8f7c9610f"><span class="ph cmd">Copy over the applications
to the production directory and make a backup of the production
databases.</span><div class="itemgroup info StepInfo"><pre class="pre ShellCommand">	% cp ./tmp/app/* $CALCM_HOME/app		
	% mkdir ./db/bak.&lt;timestamp&gt;
	% cp $CALCM_HOME/db/* ./db/bak.&lt;timestamp&gt;</pre>
</div></li>
<li class="li step stepexpand" id="id79ae9ced-c07d-4e9c-b74a-96d3f85bf395__id2f0279cf-d603-4282-be4a-6e03192d1507"><span class="ph cmd">Verify that MGC_HOME is pointing
to the correct version of Calibre.</span></li>
<li class="li step stepexpand" id="id79ae9ced-c07d-4e9c-b74a-96d3f85bf395__id8cc9e6bd-577b-49b0-b659-db4faf72514c"><span class="ph cmd">Start a production and backup
CalCM daemon.</span><ol type="a" class="ol substeps"><li class="li substep" id="id79ae9ced-c07d-4e9c-b74a-96d3f85bf395__id3c753c94-be60-4058-959e-eca744be7f85"><span class="ph cmd">Start the new production-ready,
tested version of the CalCM daemon.</span><div class="itemgroup info SubStepInfo"><pre class="pre ShellCommand">	% cd $CALCM_HOME
	% $MGC_HOME/bin/calcmd -config conf/calcmd.conf 
		-log log/calcmd.log &amp;</pre>
</div></li>
<li class="li substep" id="id79ae9ced-c07d-4e9c-b74a-96d3f85bf395__id32308b7c-00ae-4bda-a1f6-e956fa91dd7b"><span class="ph cmd">Start a backup daemon.</span><div class="itemgroup info SubStepInfo"><div class="note note"><span class="notetitle">Note:</span> <p class="p">It is recommended to start
the backup daemon on a different system than the one the primary
daemon is running on. This will avoid a system crash resulting in
no CalCM daemon running at all.</p>
</div>
<pre class="pre ShellCommand">	% $MGC_HOME/bin/calcmd -config conf/calcmd.conf 
		-log log/calcmd.log &amp;</pre>
</div></li>
</ol>
</li>
<li class="li step stepexpand" id="id79ae9ced-c07d-4e9c-b74a-96d3f85bf395__id8192374b-4477-41ae-9fbc-7914a5255fbd"><span class="ph cmd">If it is necessary to shut
down the production and backup daemons, you should shut down the
backup daemon first. The backup daemon is the one with the latest
timestamp.</span><ol type="a" class="ol substeps"><li class="li substep" id="id79ae9ced-c07d-4e9c-b74a-96d3f85bf395__idf284720d-9fba-4ecb-9e9b-22ee94668dc0"><span class="ph cmd">Follow the monitoring procedures
in “<a class="xref fm:HeadingOnly" href="TaskTop_StartingUpQualifyingNewVersionCalcm_id11f61775.html#id11f61775-d701-4327-9652-4bd84242fab5__TaskTop_StartingUpQualifyingNewVersionCalcm_id11f61775.xml#id11f61775-d701-4327-9652-4bd84242fab5" title="This procedure makes sure that CalCM is behaving as expected when running within the non-production environment using the new CalCM version.">Starting Up and Qualifying the New Version of CalCM</a>” to make sure the daemon is launched
successfully.</span></li>
<li class="li substep" id="id79ae9ced-c07d-4e9c-b74a-96d3f85bf395__id579bdb12-0abd-42d0-9614-3e863da151c7"><span class="ph cmd">Monitor the <span class="ph filepath">calcmd.log</span> file
to look for the announcements from production running jobs coming
back to CalCM.</span><div class="itemgroup info SubStepInfo"><p class="p">This assumes that SCANJOBS
= 1 and PRUNEJOBS were set within the CalCM configuration file. </p>
</div></li>
<li class="li substep" id="id79ae9ced-c07d-4e9c-b74a-96d3f85bf395__id5917986a-f8a5-4dbb-8b8f-a4ffd3d0c5a4"><span class="ph cmd">Once all jobs have reported
back in, then the migration task has been completed.</span></li>
</ol>
</li>
</ol>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_MigrationTasks_id87a0f28d.html" title="The section includes the tasks that are required to successfully migrate the CalCM Daemon to a new release of Calibre. These tasks should be performed in the order listed.">Migration Tasks</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_cm_user"
                DocTitle = "Calibre® Cluster Manager (CalCM) User’s Manual"
                PageTitle = "Migrating CalCM"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_MigratingCalcm_id79ae9ced.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Cluster Manager (CalCM) User’s Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>