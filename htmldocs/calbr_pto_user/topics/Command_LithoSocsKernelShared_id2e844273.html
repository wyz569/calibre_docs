<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="LITHO_SOCS_KERNELS_SHARED" />
<meta name="abstract" content="Causes CPUs on the same host machine to share a copy of the optical model SOCS directory, which can significantly reduce required memory." />
<meta name="description" content="Causes CPUs on the same host machine to share a copy of the optical model SOCS directory, which can significantly reduce required memory." />
<meta name="DC.subject" content="LITHO_SOCS_KERNEL_SHARED, Memory, Cluster issues" />
<meta name="keywords" content="LITHO_SOCS_KERNEL_SHARED, Memory, Cluster issues" />
<meta name="prodname" content="Calibre Post-Tapeout Flow User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Information common to RET and MDP, plus links to product-specific tips." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-17" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="2" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_pto_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="IncludeDraftCommentsInChangeLog" content="All" />
<meta name="HighlightColor" content="mgc_light_blue" />
<meta name="HighlightChanges" content="yes" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 8, 2021" />
<meta name="Draft" content="NONE" />
<meta name="DocumentTitle" content="Calibre® Post-Tapeout Flow User’s Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,doc.type.documentation.ref,product.version.v2021.2,product.id.P10089,product.id.P10101,product.id.P10115" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id2e844273-340a-40d2-b739-2b314676478b" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>LITHO_SOCS_KERNELS_SHARED</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="LITHO_SOCS_KERNELS_SHARED" />
<meta name="attributes" content="doc.type.documentation.user,doc.type.documentation.ref,product.version.v2021.2,product.id.P10089,product.id.P10101,product.id.P10115" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="id2e844273-340a-40d2-b739-2b314676478b">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">LITHO_SOCS_KERNELS_SHARED</h1>
<div class="body refbody CommandRefBody"><div class="abstract CommandRefAbstract"><p class="p ContextMGC">Environment variable</p>
<p class="shortdesc">Causes CPUs on the same host machine to share a copy
of the optical model SOCS directory, which can significantly reduce
required memory.</p>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName Required">LITHO_SOCS_KERNELS_SHARED</span> {<span class="keyword ParameterName RequiredDefault">0</span> | <span class="keyword ParameterName Required">1</span> | <span class="keyword ParameterName Required">2</span>}</p>
</div>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="id2e844273-340a-40d2-b739-2b314676478b__id8c6d8a76-933f-465b-95ff-05d0f427054c"><span class="keyword ParameterName Required"></span> <span class="keyword ParameterName RequiredDefault">0</span> | <span class="keyword ParameterName Required">1</span> | <span class="keyword ParameterName Required">2</span></dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument that controls whether
to share the SOCS directory. By default, each core maintains its
own copy.</p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="id2e844273-340a-40d2-b739-2b314676478b__id1dd7c6d3-bc5e-4342-a2f0-624c3c5759d5"><p class="p Opt">0
— Do not share the SOCS directory. This is the default behavior.</p>
</li>
<li class="li ArgOption" id="id2e844273-340a-40d2-b739-2b314676478b__id9e9a3959-cfe6-42f8-a870-366949b07775"><p class="p Opt">1
— Use the improved algorithm, which has better memory handling when
jobs are prematurely terminated.</p>
<p class="p">1 is the recommended setting </p>
</li>
<li class="li ArgOption" id="id2e844273-340a-40d2-b739-2b314676478b__idb97ba8e1-ccc5-4afc-abb3-2293ed3ed10f"><p class="p Opt">2
— Use the original algorithm. This is equivalent to the pre-2020.3
setting of TRUE. If a cluster management system terminates processes
with SIGKILL instead of SIGTERM, the remote host needs to be rebooted
to recover the memory.</p>
<p class="p">The setting of “2” is provided for backwards compatibility only. </p>
</li>
</ul>
</dd>
</dl>
</div>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">The LITHO_SOCS_KERNELS_SHARED environment variable enables cores
on the same host that are part of the same Calibre run to share
the SOCS directory (a part of the optical model) instead of each
core having its own copy. The memory savings is generally greatest when
using advanced optical models, such as DDM.</p>
<div class="section Subsection" id="id2e844273-340a-40d2-b739-2b314676478b__id6561df62-b9aa-402f-a2b4-883805f8ce8a"><h2 class="title Subheading sectiontitle">Monitoring
Memory Savings</h2><p class="p">To track the shared memory,
add the keywords “virtual lithoshared” to the MONITOR REMOTE MEMORY
and MONITOR LOCAL MEMORY statements in the configuration file. The
log file will add a virtual memory section marked with V and a shared
litho section marked with LS to the MON:M entries.</p>
<p class="p">For
example, the following MON:M statement shows the V section in orange
and the LS in green:</p>
<pre class="pre codeblock"><code>&lt;MON:M 25449 H 3 322 471 <span class="ph CodeHighlight orange">V 1043 808 767</span> <span class="ph CodeHighlight green">LS 224 56 224</span>&gt;</code></pre><h2 class="title Subheading sectiontitle">Virtual Memory (V Section)</h2><p class="p">The virtual memory section
is shown because of the “virtual” keyword in the MONITOR statement.
Virtual memory is physically a mix of RAM and disk. The numbers
can be interpreted as follows (all measurements in Mb):</p>
<ul class="ul"><li class="li" id="id2e844273-340a-40d2-b739-2b314676478b__id2a454f5d-782b-4e60-b8ab-07cad79be430"><p class="p">The first
number is the total virtual memory, accounting for both RAM and
disk.</p>
</li>
<li class="li" id="id2e844273-340a-40d2-b739-2b314676478b__id9e126e6d-996d-4701-bdf7-a277e0872696"><p class="p">The second
number is the maximum amount of RAM memory used so far. It may go
up during the run but does not decrease.</p>
</li>
<li class="li" id="id2e844273-340a-40d2-b739-2b314676478b__id3e090ea0-1e11-4d26-8ba6-ed9f2b59041f"><p class="p">The third number
is the current amount of RAM in use, and fluctuates throughout the run.
This is also referred to as “virtual RSS” or “resident memory”.</p>
</li>
</ul>
<h2 class="title Subheading sectiontitle">Litho Shared Memory (LS Section)</h2><p class="p">The litho shared memory section
is shown because of the “lithoshared” keyword in the MONITOR statement.
It reports on the memory in use by all CPUs on the host both for
this process and any other processes that may be running. (Note
that the best practice for all Calibre runs is to ensure no other
user processes are running on the same hardware.)</p>
<ul class="ul"><li class="li" id="id2e844273-340a-40d2-b739-2b314676478b__idf216c583-a343-4269-a415-bef0f6b311c3"><p class="p">The first
number is the total shared memory used by a process. It includes
the memory reported by all cores attached to the process.</p>
</li>
<li class="li" id="id2e844273-340a-40d2-b739-2b314676478b__id936d965d-450c-465a-8ccd-ac159a6d89f4"><p class="p">The second
number is the effective memory usage. This value takes into account
that memory is shared. From the set</p>
<pre class="pre codeblock"><code>LS 224 56 224</code></pre><p class="p">you can deduce there are four cores attached to the process because
224/56 = 4.</p>
</li>
<li class="li" id="id2e844273-340a-40d2-b739-2b314676478b__id74bfe7f5-8e6e-4f3e-b04c-9c8418cff249"><p class="p">The third number
is the total memory in use on the host. It includes memory not used
by the Calibre process that the MONITOR statement is attached to. </p>
<div class="note tip"><span class="tiptitle">Tip</span> <p class="p">If a run is following best practices, the
first and third numbers in the LS section should always be the same.</p>
</div>
</li>
</ul>
<h2 class="title Subheading sectiontitle">Calculation</h2><p class="p">To calculate the percentage of memory that shared memory saves,
use the following formula, where V<span class="ph FontProperty equationvariable">number</span> and
LS<span class="ph FontProperty equationvariable">number</span> refer
to the first, second, or third number in the V or LS section.</p>
<pre class="pre codeblock"><code>{1 - (V2 - LS1 + LS2)/V2} x 100</code></pre></div>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><div class="section Subsection" id="id2e844273-340a-40d2-b739-2b314676478b__id4e2050f7-b3bf-4f21-b357-5f969565c52b"><h2 class="title Subheading sectiontitle">C
Shell</h2><p class="p">To set:</p>
<pre class="pre codeblock"><code>% setenv LITHO_SOCS_KERNELS_SHARED 1</code></pre><p class="p">To unset:</p>
<pre class="pre codeblock"><code>% unsetenv LITHO_SOCS_KERNELS_SHARED</code></pre><p class="p">or</p>
<pre class="pre codeblock"><code>% setenv LITHO_SOCS_KERNELS_SHARED 0</code></pre></div>
<div class="section Subsection" id="id2e844273-340a-40d2-b739-2b314676478b__id390046eb-4c9d-4688-9fbc-7fa60550ca97"><h2 class="title Subheading sectiontitle">Bourne
or Korn Shell</h2><p class="p">To set:</p>
<pre class="pre codeblock"><code>$ LITHO_SOCS_KERNELS_SHARED=1
$ export LITHO_SOCS_KERNELS_SHARED</code></pre><p class="p">To unset:</p>
<pre class="pre codeblock"><code>$ unset LITHO_SOCS_KERNELS_SHARED</code></pre></div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_PostTapeoutEnvironmentVariables_id18b6f179.html" title="The post-tapeout environment variables are preferred by some, but Siemens EDA recommends using the equivalent SVRF commands instead for visibility. In case of a conflict between an environment variable and an SVRF setting, the environment variable’s setting is used.">Post-Tapeout Environment Variables</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../../calbr_admin_gd/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'MONITOR LOCAL', 'calbr_admin_gd'); return false;">MONITOR LOCAL [Calibre Administrator's Guide]</a></div>
<div><a class="link" href="../../calbr_admin_gd/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'MONITOR REMOTE', 'calbr_admin_gd'); return false;">MONITOR REMOTE [Calibre Administrator's Guide]</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_pto_user"
                DocTitle = "Calibre® Post-Tapeout Flow User’s Manual"
                PageTitle = "LITHO_SOCS_KERNELS_SHARED"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_LithoSocsKernelShared_id2e844273.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Post-Tapeout Flow User’s Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>