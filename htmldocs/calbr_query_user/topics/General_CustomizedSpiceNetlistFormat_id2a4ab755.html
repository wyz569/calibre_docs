<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="GeneralRefTopic" />
<meta name="DC.Title" content="Customized SPICE Netlist Format" />
<meta name="abstract" content="CCI generates a custom SPICE netlist for use by downstream tools." />
<meta name="description" content="CCI generates a custom SPICE netlist for use by downstream tools." />
<meta name="prodname" content="Calibre Query Server Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-13" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_query_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2;show" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="HighlightChanges" content="yes" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® Query Server Manual" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P11713,product.id.P10099,product.id.P10087,product.id.P10084,product.id.P11347,product.id.P11427" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id2a4ab755-7dea-4181-a1ac-fac8e87bc245" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Customized SPICE Netlist Format</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Customized SPICE Netlist Format" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P11713,product.id.P10099,product.id.P10087,product.id.P10084,product.id.P11347,product.id.P11427" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="default" id="id2a4ab755-7dea-4181-a1ac-fac8e87bc245">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Customized SPICE Netlist Format</h1>
<div class="body refbody GeneralRefBody"><div class="abstract GeneralRefAbstract"><p class="p ContextMGC"><a class="xref Link" href="../../calbr_ys_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'dfmwrite_spice_netlist', 'calbr_ys_ref'); return false;">dfm::write_spice_netlist</a> and <a class="xref fm:HeadingOnly" href="Command_LayoutNetlistWrite_id07cc5961.html#id07cc5961-b285-4e55-934d-09ba13c9d85a__Command_LayoutNetlistWrite_id07cc5961.xml#id07cc5961-b285-4e55-934d-09ba13c9d85a" title="Writes the customized layout netlist from the CCI system.">LAYOUT NETLIST WRITE</a> output format.</p>
<p class="shortdesc">CCI generates a custom SPICE
netlist for use by downstream tools.</p>
</div>
<div class="section Subsections"><div class="section Subsection" id="id2a4ab755-7dea-4181-a1ac-fac8e87bc245__id37f077b2-1bd8-4475-bfd0-f0276b0c2b70"><p class="p">The custom netlist conforms to the extended
Calibre SPICE netlist format described in the “<a class="xref Link" href="../../calbr_ver_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'SPICE Format', 'calbr_ver_user'); return false;">SPICE Format</a>”
chapter of the <cite class="cite">Calibre Verification User’s Manual</cite>.
Note that comment-coded fields are ignored by most SPICE simulators.</p>
<p class="p">This
file is used in conjunction with an AGF file and a <a class="xref fm:HeadingOnly" href="FileRef_LayoutNetlistNamesFileFormat_ide559b392.html#ide559b392-1eab-444a-8cd3-fd871bcb369f__FileRef_LayoutNetlistNamesFileFormat_ide559b392.xml#ide559b392-1eab-444a-8cd3-fd871bcb369f" title="Specifies a correspondence between net number annotations in an AGF file and user-names in the layout netlist.">Layout Netlist Names File Format</a> (LNN) file.</p>
<p class="p">By default, the netlist follows conventions
used in netlists produced by calibre -spice. Various configuration
options alter the structure of the netlist produced.</p>
<ul class="ul"><li class="li" id="id2a4ab755-7dea-4181-a1ac-fac8e87bc245__ida3830819-fa69-4ccf-8123-d916a545d8ef"><p class="p">Subcircuit
definitions</p>
<p class="p">.SUBCKT definitions in the layout netlist
represent original cells in the input database or pseudo-cells created
by Calibre hierarchical pre-processing. For original database cells,
subcircuit names in the layout netlist are identical to cell names
in the input database. An exception occurs when a cell name in the
input database begins with a dollar sign ($) character. Cell names
that start with $ usually have the prefix __. In general, to avoid
conflicts with database names, the prefix consists of N underscores, where
N is one larger than the number of leading underscores in any database
cell named ___*$* (that is, any database cell whose name begins
with at least two underscores followed by a $). This prefix is necessary
to make those cell names valid in SPICE. Recall that a leading $
denotes a comment in SPICE.</p>
<p class="p">Subcircuit definitions indicate which nets
in the cell serve as pins of the cell. All nets in a cell that make
connections to nets outside of the cell appear as pins in the .SUBCKT line
for the cell. </p>
<p class="p">For example:</p>
<pre class="pre codeblock leveled"><code>.SUBCKT ABC 1 2
R1 1 2 50 
.ENDS </code></pre><p class="p">describes cell ABC with two pins: 1, 2. These
numbers are net numbers in the cell.</p>
</li>
<li class="li" id="id2a4ab755-7dea-4181-a1ac-fac8e87bc245__id6c5072ad-b702-412a-ac9c-d47f08e1fb3e"><p class="p">Subcircuit
calls</p>
<p class="p">Subcircuit calls are represented by standard
SPICE subcircuit call notation X. Comments provide some additional
information. For example, the line:</p>
<pre class="pre codeblock leveled"><code>X3 5 7 ABC $T=-375 13750 1 0 $X=2250 $Y=2000 </code></pre><p class="p">describes a placement of cell ABC with nets
5, and 7 connected to the first and second pins of ABC respectively.
The comment field $T represents the transform of the placement:
X translation, Y translation, reflection (0 or 1, indicating false
or true, with the X-axis being the axis of symmetry) and rotation
(0, 90, 180, or 270 degrees, counter-clockwise); $X and $Y represent
coordinates of the placement.</p>
</li>
<li class="li" id="id2a4ab755-7dea-4181-a1ac-fac8e87bc245__idf891cd7f-1b55-4e08-a794-794a14d89482"><p class="p">Devices</p>
<p class="p">When possible, devices in the layout netlist
are represented with regular SPICE elements (M, R, C, D, Q, and
so on). In other cases (for example, when the device is not a standard
SPICE element), devices in the layout netlist are represented with
subcircuit calls. In the latter case, the layout netlist contains
an empty subcircuit definition describing the device. Device lines
provide the type of device, pin connections, model name and parameters
or properties. Location of the device is presented as an X Y coordinate
pair in database units encoded as a comment at the end of the device.</p>
<p class="p">For example, this line:</p>
<pre class="pre codeblock leveled"><code>M2 4 5 6 7 p L=1 W=2 $X=-6000 $Y=1000 </code></pre><p class="p">describes a MOS device instance of type P
(in SVRF, DEVice MP) with drain, gate, source and bulk connected
to nets 4, 5, 6, and 7 respectively and W/L as specified at the coordinates
(-6000,1000) in the current cell. This line:</p>
<pre class="pre codeblock leveled"><code>X2 7 8 9 10 11 Q3E $X=1000 $Y=1000 </code></pre><p class="p">describes a device instance of type Q3E with
five pins. In this case, the netlist also contains a subcircuit
definition such as this:</p>
<pre class="pre codeblock leveled"><code>.SUBCKT Q3E C B E1 E2 E3 
.ENDS </code></pre><p class="p">Actual seed and pin device shapes that make
up the device may occur at various levels above and below the device
coordinates. Their location is governed by the Calibre nmLVS circuit
extraction seed promotion functionality. The device coordinates appear
at a vertex of the seed shape after translation into the current
cell. Device coordinates can also be configured to appear at the
center of the seed shape when the coordinates of the center lie
on the seed shape using the <a class="xref Link" href="../../calbr_ys_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'dfmset_layout_netlist_options', 'calbr_ys_ref'); return false;">dfm::set_layout_netlist_options</a> ‑device_location
command.</p>
<p class="p">Some built-in devices make use of optional
substrate pins defined by Calibre. They are specified as:</p>
<pre class="pre codeblock leveled"><code>R0 1 2 50 $SUB=3 </code></pre><p class="p">where R0 is a resistor with terminals on
nets 1 and 2 and substrate pin on net 3. This feature is controlled
with the <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'LVS Netlist Comment Coded Substrate', 'svrf_ur'); return false;">LVS Netlist Comment Coded Substrate</a> specification statement. If LVS Netlist
Comment Coded Substrate NO is specified in the rule file, the resistor
is output as a call to a subcircuit:</p>
<pre class="pre codeblock leveled"><code>.SUBCKT R pos neg sub 
.ENDS 
 
X0 1 2 3 r=50 </code></pre><p class="p">Devices included in the netlist are affected
by the <a class="xref Link" href="../../calbr_ys_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'dfmcreate_filter', 'calbr_ys_ref'); return false;">dfm::create_filter</a> -device_ids
or ‑device_names setting currently active in the Query Server. Only
devices of FILTERED types are included in the netlist.</p>
</li>
<li class="li" id="id2a4ab755-7dea-4181-a1ac-fac8e87bc245__id0cca62e6-3cee-46bb-90ef-09d912cae4bb"><p class="p">Nets</p>
<p class="p">The nets in the layout netlist can be specified
in one of three ways:</p>
<ul class="ul"><li class="li" id="id2a4ab755-7dea-4181-a1ac-fac8e87bc245__idece5a5e8-3af7-44a7-a9d9-943a22f51759"><p class="p">Using a combination of layout net names
available from text in the layout database (default) and net numbers
for untexted nets.</p>
</li>
<li class="li" id="id2a4ab755-7dea-4181-a1ac-fac8e87bc245__id387fbf1a-1839-4f6e-a37d-a9e5f61b043b"><p class="p">Pure net numbers.</p>
</li>
<li class="li" id="id2a4ab755-7dea-4181-a1ac-fac8e87bc245__ida71cd25a-7387-40d1-8043-d195981a8d31"><p class="p">Source names where source names are
available, layout names prefixed by a string where matching names
are not available. The prefix is typically _Layout_, but if there
are source names that begin with _Layout_, additional _ characters
are added to the prefix to ensure that it is unique. When devices
are reduced through series or parallel reduction, the first device
in the group is named with the corresponding source name. Other
devices in the group are named with a name like _Layout_&lt;layout_name&gt;_Source_&lt;source_name&gt;.</p>
</li>
</ul>
</li>
</ul>
<ul class="ul"><li class="li" id="id2a4ab755-7dea-4181-a1ac-fac8e87bc245__idfa9ab0f8-fc85-44e6-b79a-6c1b8c0a48d3"><p class="p">Name format is controlled with the dfm::set_layout_netlist_options
-names command. </p>
</li>
</ul>
<ul class="ul"><li class="li" id="id2a4ab755-7dea-4181-a1ac-fac8e87bc245__idd59b68da-b927-49c6-9381-6c750ac70f4f"><p class="p">Net
numbers</p>
<p class="p">Net numbers are determined arbitrarily by
Calibre during circuit extraction. The combination of subcircuit
calls and subcircuit definitions in the layout netlist describes how
electrical nets traverse levels of hierarchy in the design. </p>
</li>
<li class="li" id="id2a4ab755-7dea-4181-a1ac-fac8e87bc245__idcf48dbd1-3aa3-426d-88ae-9804febe6279"><p class="p">Expanded
placements</p>
<p class="p">The <a class="xref Link" href="../../calbr_ys_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'dfmset_layout_netlist_options', 'calbr_ys_ref'); return false;">dfm::set_layout_netlist_options</a> -hierarchy
command can be used to expand cells in place within the netlist.
When cells are expanded, the names of cell placements are of the
form XXi/[Xj…]/Xk.</p>
<p class="p">Note that all device and cell placement names
have exactly one extra letter at the front when compared with names
in the unexpanded netlist (dfm::set_layout_netlist_options ‑hierarchy
ALL). This extra letter ensures that the generated netlist is compatible
with SPICE readers and that the generated names can all be easily
mapped to regular Calibre hierarchical names by simply removing
the first letter. The extra letter is applied within all cells (those
that have expanded placements as well as those that do not). </p>
<p class="p">For example, consider the following non-flattened
circuit:</p>
<pre class="pre codeblock leveled"><code>.SUBCKT CELL_1 14 13 
M0 11 IN 10 13 p L=1e-06 W=1.8e-05 $X=3000 $Y=9500 
M1 9 IN 8 14 n L=1e-06 W=1.8e-05 $X=3000 $Y=-10500 
X2 23 13 24 14 26 CELL_2 
.ENDS 
 
.SUBCKT CELL_2 I1 13 OUT 14 I2 
M0 13 I1 OUT 13 p L=1e-06 W=1e-05 $X=-20000 $Y=20500 
M1 13 I2 OUT 13 p L=1e-06 W=1e-05 $X=0 $Y=24500 
M2 6 I2 14 14 n L=1e-06 W=1e-05 $X=-10000 $Y=-50500 
M3 OUT I1 6 14 n L=1e-06 W=1e-05 $X=-10000 $Y=-29500 
.ENDS 
 
.SUBCKT TOP 14 13 
M0 13 4 5 13 p L=3e-06 W=1.3e-05 $X=47000 $Y=-2000 
M1 3 2 14 14 n L=1e-06 W=9e-06 $X=-52000 $Y=-35000 
M2 5 4 14 14 n L=2e-06 W=1e-05 $X=49000 $Y=-42000 
X3 14 13 CELL_1 $T=-104000 -58000 0 0 $X=-108000  
$Y=-76000 
.ENDS </code></pre><p class="p">when CELL_1 is expanded, the circuit is represented
as this:</p>
<pre class="pre codeblock leveled"><code>.SUBCKT CELL_2 I1 13 OUT 14 I2 
MM0 13 I1 OUT 13 p L=1e-06 W=1e-05 $X=-20000 $Y=20500 
MM1 13 I2 OUT 13 p L=1e-06 W=1e-05 $X=0 $Y=24500 
MM2 6 I2 14 14 n L=1e-06 W=1e-05 $X=-10000 $Y=-50500 
MM3 OUT I1 6 14 n L=1e-06 W=1e-05 $X=-10000 $Y=-29500 
.ENDS 
 
SUBCKT TOP 14 13 
MM0 13 4 5 13 p L=3e-06 W=1.3e-05 $X=47000 $Y=-2000 
MM1 3 2 14 14 n L=1e-06 W=9e-06 $X=-52000 $Y=-35000 
MM2 5 4 14 14 n L=2e-06 W=1e-05 $X=49000 $Y=-42000 
MX3/M0 X3/11 X3/1 X3/10 6 p L=1e-06 W=1.8e-05 $X=3000 $Y=9500 
MX3/M1 X3/9 X3/1 X3/8 1 n L=1e-06 W=1.8e-05 $X=3000 $Y=-10500 
XX3/X2 X3/23 13 X3/24 14 X3/26 CELL_2 $T=0 -22000 0 0 $X=-40000  
$Y=-102000 
.ENDS </code></pre><p class="p">See the <a class="xref Link" href="../../calbr_ys_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'dfmset_layout_netlist_options', 'calbr_ys_ref'); return false;">dfm::set_layout_netlist_options</a> ‑hierarchy
command for more details on types of flattening available.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_CciGeneratedFilesReference_id36d12dcb.html" title="The Calibre Connectivity Interface is used to generate a number of formatted files used by downstream simulation tools. These files are produced by Tcl shell and standard interface commands.">CCI Generated Files Reference</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_query_user"
                DocTitle = "Calibre® Query Server Manual"
                PageTitle = "Customized SPICE Netlist Format"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/General_CustomizedSpiceNetlistFormat_id2a4ab755.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Query Server Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>