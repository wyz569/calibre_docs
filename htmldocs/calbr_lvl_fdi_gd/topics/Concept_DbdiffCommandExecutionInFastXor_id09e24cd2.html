<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="DBdiff Command Execution in FastXOR" />
<meta name="abstract" content="During a FastXOR run, DBdiff is automatically called as an initial processing step to analyze the layouts for differences. It is unnecessary to call DBdiff explicitly." />
<meta name="description" content="During a FastXOR run, DBdiff is automatically called as an initial processing step to analyze the layouts for differences. It is unnecessary to call DBdiff explicitly." />
<meta name="prodname" content="Calibre Layout Comparison and Translation Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-12-14" />
<meta name="Topline" content="Siemens EDA" />
<meta name="GenerateOnlyChangedTopics" content="no" />
<meta name="IncludeDraftCommentsInChangeLog" content="all;show" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="HighlightChanges" content="yes" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="DBdiff, FastXOR, fdi2gds, fdi2oasis, and fdiBA" />
<meta name="SourceHandle" content="calbr_lvl_fdi_gd" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® Layout Comparison and Translation Guide" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,doc.type.documentation.ref,product.version.v2021.2,product.id.P10099,product.id.P11427,product.id.P11426,product.id.P10119,product.id.P10089,product.id.P10122,product.id.P11427,product.id.P11493,product.id.P11802,product.id.P11803,product.id.P11801" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id09e24cd2-dea9-4782-9ad5-e19eade65604" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>DBdiff Command Execution in FastXOR</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="DBdiff Command Execution in FastXOR" />
<meta name="attributes" content="doc.type.documentation.user,doc.type.documentation.ref,product.version.v2021.2,product.id.P10099,product.id.P11427,product.id.P11426,product.id.P10119,product.id.P10089,product.id.P10122,product.id.P11427,product.id.P11493,product.id.P11802,product.id.P11803,product.id.P11801" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id09e24cd2-dea9-4782-9ad5-e19eade65604">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">DBdiff Command Execution in FastXOR</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">During a FastXOR
run, DBdiff is automatically called as an initial processing step
to analyze the layouts for differences. It is unnecessary to call
DBdiff explicitly.</span>
</div>
<div class="section Subsections"><div class="section Subsection" id="id09e24cd2-dea9-4782-9ad5-e19eade65604__id0cb80421-51f0-47f5-960f-14653252214e"><h2 class="title Subheading sectiontitle">Setting
DBdiff Options</h2><p class="p">You can specify DBdiff options using different methods. The tool
reads the options in the following order:</p>
<dl class="dl"><dt class="dt dlterm">Template file in the Calibre installation directory</dt>
<dd class="dd"><p class="p">Internally, DBdiff uses a template file
that contains default options. The template file is stored in <span class="keyword ParameterName OptionalReplaceable">&lt;calibre_install_dir&gt;/shared/pkgs/fdi/templates/fastxor.template</span>.
This template file is used by default in all runs.</p>
<p class="p">You can copy and modify the template file in
a custom location and specify it with the ‑template option using
the SVRF statement or environment variable. If you specify a custom
template file, the options from the custom file are used and the
default template settings are ignored. </p>
</dd>
<dt class="dt dlterm">SVRF statement in rule file</dt>
<dd class="dd"><p class="p">Set options using the <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'SVRF DBdiff Options', 'svrf_ur'); return false;">SVRF DBdiff Options</a> statement in
your rule file. If the statement is present and the environment
variable is not set, the tool <span class="ph FontProperty emphasis">only</span> uses
the options defined in the statement and the default template file
is ignored.</p>
<p class="p">You can only specify the SVRF statement once in your rule file;
additional SVRF DBdiff Options statements are ignored without indication.</p>
</dd>
<dt class="dt dlterm">Environment variable</dt>
<dd class="dd"><p class="p">Additional command options can be specified
using the CALIBRE_FX_DB_DIFF_OPTIONS environment variable. The environment
variable options are added to the default template and the SVRF DBdiff Options
statement (if the statement does not include the ‑template option).
The environment variable options override both the default template
file and SVRF statement if the options are the same. </p>
</dd>
</dl>
<p class="p">See “<a class="xref fm:HeadingAndPage" href="Command_LayoutComparisonCommandLineSyntax_iddd548256.html#iddd548256-bd93-48b6-bcea-0b0658bfb29d__Command_LayoutComparisonCommandLineSyntax_iddd548256.xml#iddd548256-bd93-48b6-bcea-0b0658bfb29d" title="The DBdiff application compares databases of different types. This section covers the syntax and arguments for DBdiff.">Layout Comparison Command Line Syntax</a>” for the complete DBdiff command line.
Executing dbdiff -h as a shell command shows a list of options.</p>
<h2 class="title Subheading sectiontitle">Examples</h2><p class="p">The
following examples cause DBdiff to rotate the design that is compared
to the reference design by 90 degrees, counter-clockwise. There
are additional options for translating (offset) or reflecting (mirroring)
the compared design.</p>
<pre class="pre codeblock leveled"><code>SVRF DBDIFF OPTIONS "-transform R90"</code></pre><pre class="pre codeblock leveled"><code>setenv CALIBRE_FX_DB_DIFF_OPTIONS "-transform R90" </code></pre><p class="p">If there is at least one unique layer (deleted
or added) between compared designs, consider doing one of the following
to improve performance:</p>
<ul class="ul"><li class="li" id="id09e24cd2-dea9-4782-9ad5-e19eade65604__id9d62988d-1337-4824-8090-3e420e2935a1"><p class="p">Include the following statement in your SVRF
rule file:</p>
<pre class="pre codeblock leveled"><code>SVRF DBDIFF OPTIONS "-passthroughlayer"</code></pre></li>
<li class="li" id="id09e24cd2-dea9-4782-9ad5-e19eade65604__id171ab71a-7a69-443c-99ad-e48c5b2711f9"><p class="p">Set
the following environment variable:</p>
<pre class="pre codeblock leveled"><code>setenv CALIBRE_FX_PASS_THROUGH_LAYER_ENABLE 1 </code></pre></li>
</ul>
<p class="p">When enabled, FastXOR passes unique layers
directly to the traditional DRC XOR engine, bypassing unnecessary
dbdiff operations.</p>
</div>
<div class="section Subsection" id="id09e24cd2-dea9-4782-9ad5-e19eade65604__id366d4e0f-aa2d-4536-b2f5-923f731d10f6"><h2 class="title Subheading sectiontitle">Management of Large Numbers of Differences</h2><p class="p">In cases where the number of differences between
two designs is large, it is more efficient to enable a maximum difference
threshold to switch from FastXOR mode to conventional XOR mode automatically.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">The -maxdiff option
is provided for rare instances when unexpectedly large difference
counts exist between the input databases. The time spent before
a FastXOR run is halted by the threshold plus the total runtime
for restarting the conventional XOR job must be less than the time
it would have taken for FastXOR to complete for the option to be
advantageous.</p>
</div>
<p class="p">To automatically stop a
FastXOR run and restart it as a standard XOR run when a certain number
of total differences is exceeded, set the CALIBRE_FX_DB_DIFF_OPTIONS environment
variable to include the -maxdiff argument set as follows: </p>
<pre class="pre codeblock leveled"><code>setenv CALIBRE_FX_DB_DIFF_OPTIONS "-maxdiff 5.0e+06" </code></pre><p class="p">In this example, the FastXOR run halts at five
million violations and <span class="keyword ParameterName OptionalReplaceable">restarts</span> the
run as a conventional XOR comparison. The numeric argument must
evaluate to a non-negative integer and may be written in scientific
notation, as shown.</p>
<p class="p">You can also specify the “auto” keyword instead
of specifying a number of differences. This instructs the tool to
use a built-in value for the number of differences. For example:</p>
<pre class="pre codeblock leveled"><code>setenv CALIBRE_FX_DB_DIFF_OPTIONS "-maxdiff auto"</code></pre><p class="p">The auto keyword enables an internal algorithm
that switches from FastXOR to XOR when high difference counts are
detected.</p>
<p class="p">You can enable this new feature using any of the
following methods:</p>
<ul class="ul"><li class="li" id="id09e24cd2-dea9-4782-9ad5-e19eade65604__idfb36dcd8-e77e-408d-82f4-f09b6adb0d0b"><p class="p">Set the MGC_DBDIFF_MAXDIFF_AUTO environment variable
to any non-null value before running dbdiff ‑write_xor_rules to
create XOR rules. DBdiff includes the ‑maxdiff auto option in the
generated rule file.</p>
</li>
<li class="li" id="id09e24cd2-dea9-4782-9ad5-e19eade65604__idedff3841-8160-4557-8323-2c664021f05e"><p class="p">Include the <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'SVRF DBdiff Options', 'svrf_ur'); return false;">SVRF DBdiff Options</a> statement
in your XOR rule file as follows:</p>
<pre class="pre codeblock"><code>SVRF DBDIFF OPTIONS "-maxdiff auto"</code></pre></li>
<li class="li" id="id09e24cd2-dea9-4782-9ad5-e19eade65604__id0f028a6b-d376-4b78-80e2-4af6288afb51"><p class="p">Set the CALIBRE_FX_DB_DIFF_OPTIONS environment
variable with the new option as follows:</p>
<pre class="pre codeblock"><code>setenv CALIBRE_FX_DB_DIFF_OPTIONS "-maxdiff auto"</code></pre></li>
</ul>
<p class="p">The total difference count
is the sum of object (shape) differences taken per-cell instance
over all cell instances in the compared designs, as follows:</p>
<ul class="ul"><li class="li" id="id09e24cd2-dea9-4782-9ad5-e19eade65604__id4a74651a-2675-4da4-89ab-cc6e5127a505"><p class="p">If a cell instance appears in one design
but not the other, all objects in the corresponding master cell
contribute to the total difference count. </p>
</li>
<li class="li" id="id09e24cd2-dea9-4782-9ad5-e19eade65604__idd06226cb-0aaa-45d3-8773-305cf26e4f7f"><p class="p">If a cell instance appears in both designs
and its master cell differs between the designs, then the objects
that differ between the two versions of the master cell contribute
to the total difference count.</p>
</li>
</ul>
<p class="p">If the -maxdiff threshold is reached
at any point, the run shifts to conventional XOR mode.</p>
<p class="p">The following sections provide a detailed explanation of how
DBdiff counts differences when you apply the ‑maxdiff option.</p>
<h2 class="title Subheading sectiontitle">Missing and New Shapes</h2><p class="p">Assume your current layout consists only of a square polygon
and your reference layout contains a triangular polygon. If you
run layout comparison on these two layouts, DBdiff reports a total
difference count of two as follows:</p>
<ul class="ul"><li class="li" id="id09e24cd2-dea9-4782-9ad5-e19eade65604__id10180624-a559-491c-b4a2-e81e807eaa2b"><p class="p">1 MISSING
SHAPE</p>
</li>
<li class="li" id="id09e24cd2-dea9-4782-9ad5-e19eade65604__id4ed27ce4-50a6-435d-b7e5-ffae8f10272c"><p class="p">1 NEW SHAPE</p>
</li>
</ul>
<p class="p">In other words, DBdiff could not find the triangular polygon
that is in the reference design and additionally found a new square
polygon that was not in the reference design. </p>
<h2 class="title Subheading sectiontitle">Instance Differences</h2><p class="p">If a cell is modified between the current and reference designs,
then the total difference count depends on the number of placed
instances of that cell as follows:</p>
<p class="p BlockIndent">diff_count = <span class="ph FontProperty emphasis">num_cell_differences × num_cell_instances</span> </p>
<h2 class="title Subheading sectiontitle">FastXOR Log File</h2><p class="p">The generated FastXOR log file includes additional
information when you set the ‑maxdiff option.</p>
<ul class="ul"><li class="li" id="id09e24cd2-dea9-4782-9ad5-e19eade65604__id0a98c12d-0260-49d3-8cb8-3fe698a8b22c"><p class="p">Summary of the flat object count of both designs
and the applied ‑maxdiff value (if you specified the auto keyword,
then the log includes the automatically calculated value here).
For example:</p>
<pre class="pre codeblock"><code>--- DBDIFF: FLAT OBJECTS COUNT = 30925013533 MAXDIFF THRESHOLD = 137724865</code></pre></li>
<li class="li" id="id09e24cd2-dea9-4782-9ad5-e19eade65604__ida1862163-a84c-46a3-b4da-50fa16cde69d"><p class="p">Current
progress regarding the found differences between the designs. The
tool writes the percentage of found differences versus the ‑maxdiff
threshold and displays the value at intervals of 10%. For example:</p>
<pre class="pre codeblock"><code>--- DBDIFF: FOUND 110180046 OBJECT DIFFERENCES (80%)</code></pre></li>
<li class="li" id="id09e24cd2-dea9-4782-9ad5-e19eade65604__idce66d560-5dd7-4a19-9e2e-2116ba11d75a"><p class="p">If
the ‑maxdiff threshold is not exceeded, the log includes the number
of found differences. For example:</p>
<pre class="pre codeblock"><code>--- DBDIFF: MAXDIFF DETECTED DIFFERENCES COUNT = 148492029</code></pre></li>
</ul>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCChap_FastXorLayoutComparison_id2665bec9.html" title="Calibre FastXOR uses the DBdiff utility to decrease Layout Versus Layout (LVL) XOR comparison run times. FastXOR often runs five times faster than a normal dual-database XOR run.">FastXOR Database Comparison</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_lvl_fdi_gd"
                DocTitle = "Calibre® Layout Comparison and Translation Guide"
                PageTitle = "DBdiff Command Execution in FastXOR"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_DbdiffCommandExecutionInFastXor_id09e24cd2.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Layout Comparison and Translation Guide, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>