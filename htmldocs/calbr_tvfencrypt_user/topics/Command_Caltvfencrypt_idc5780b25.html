<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="caltvfencrypt" />
<meta name="abstract" content="Creates an encrypted TVF file that runs on an encrypted interpreter when the file is used for a Calibre job." />
<meta name="description" content="Creates an encrypted TVF file that runs on an encrypted interpreter when the file is used for a Calibre job." />
<meta name="prodname" content="Calibre TVFencrypt User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-26" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="3" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_tvfencrypt_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® TVFencrypt User’s Manual" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10117,product.id.P10119" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="NONE" />
<meta name="HighlightChanges" content="yes" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id965463e7-79c7-4a20-8cc3-52e957ef15c5" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>caltvfencrypt</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="caltvfencrypt" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10117,product.id.P10119" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="syn-par" id="id965463e7-79c7-4a20-8cc3-52e957ef15c5">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">caltvfencrypt</h1>
<div class="body refbody CommandRefBody"><div class="abstract CommandRefAbstract"><span class="shortdesc">Creates
an encrypted TVF file that runs on an encrypted interpreter when
the file is used for a Calibre job.</span>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Syntax</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName Required">caltvfencrypt</span> <span class="keyword ParameterName Required">-id</span> <span class="keyword ParameterName RequiredReplaceable">id_string</span> [<span class="keyword ParameterName Optional">-new</span> | <span class="keyword ParameterName Optional">-old</span>] {<span class="keyword ParameterName Required">-stdin</span> | <span class="keyword ParameterName RequiredReplaceable">input_file</span>} [<span class="keyword ParameterName OptionalReplaceable">output_file</span>] [<span class="keyword ParameterName Optional">‑E</span> [<span class="keyword ParameterName Optional">‑tvfarg</span> <span class="keyword ParameterName OptionalReplaceable">tvf_arg_value</span>]]  <span class="keyword ParameterName Optional">-debug</span> </p>
</div>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Parameters</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="id965463e7-79c7-4a20-8cc3-52e957ef15c5__ide5141a4d-dee4-496d-a7f7-b2d86328379d"><span class="keyword ParameterName Required">-id </span><span class="keyword ParameterName RequiredReplaceable">id_string</span></dt>
<dd class="dd ArgumentDescription"><p class="p">A
required argument that assigns a user-supplied <span class="keyword ParameterName RequiredReplaceable">id_string</span> to
the output file. Each output file identified with the same <span class="keyword ParameterName RequiredReplaceable">id_string</span> is
read into the same encrypted Tcl interpreter. If <span class="keyword ParameterName RequiredReplaceable">id_string</span> contains
spaces, it must be enclosed in quotes. </p>
<div class="note caution"><span class="cautiontitle">CAUTION:</span> <p class="p">Do not share or distribute the value of <span class="keyword ParameterName RequiredReplaceable">id_string</span>.
Using this string elsewhere may allow other TCL code to run in the
same interpreter with the encrypted code.</p>
</div>
<p class="p">See also <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'tvfrun_as_encrypted', 'svrf_ur'); return false;">tvf::run_as_encrypted</a> in
the <span class="ph FontProperty emphasis">Standard Verification Rule Format (SVRF) Manual</span>. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="id965463e7-79c7-4a20-8cc3-52e957ef15c5__id8b97aabf-a582-4346-b1f2-52081d5e1a7a"><span class="keyword ParameterName Optional">-new</span> | <span class="keyword ParameterName Optional">-old</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">Optional encoding format switches
that control encryption compatibility with older versions of Calibre.
The switches work as follows: </p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="id965463e7-79c7-4a20-8cc3-52e957ef15c5__id3d72ac52-cdaf-4fba-b28b-63e819674936"><p class="p Opt">-new
— Provides the new encoding format. TVF files encoded with this
switch will not run on versions of Calibre earlier than 2014.4. </p>
</li>
<li class="li ArgOption" id="id965463e7-79c7-4a20-8cc3-52e957ef15c5__idbf5b3719-707a-4278-b3b5-b76ed9b09b9c"><p class="p Opt">-old
— Provides the old encoding format. TFV files encoded with this
switch will not run on future versions of Calibre that may use newer versions
of the Tcl programming language. </p>
</li>
</ul>
<p class="p">If a switch is not specified,
caltvfencrypt defaults to a dual encoding scheme for encrypting
the TVF code. </p>
<p class="p">The dual encoding scheme provides
the following formats:</p>
<ul class="ul"><li class="li" id="id965463e7-79c7-4a20-8cc3-52e957ef15c5__idbe6edd66-787f-47d3-b5af-aa46d8dc746d"><p class="p">A new format provides forward
compatibility for future versions of Calibre. Future versions may
use newer versions of the Tcl programming language.</p>
</li>
<li class="li" id="id965463e7-79c7-4a20-8cc3-52e957ef15c5__id55c2b007-1702-4365-aa89-f42969b1006e"><p class="p">The original encoding format
that provides back compatible operation in the older versions of
Calibre.</p>
</li>
</ul>
<p class="p">Using the default dual encoding
scheme results in a larger file size than previous releases. If
the file size is a concern, then use one of the switches to control
the output size. This will affect the compatibility of the encrypted
file with either newer or older versions of Calibre.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">Default
dual encoding is recommended for most situations. The TVF interface
is subject to possible changes in syntax and compatibility in a
release. An effort is made to maintain backward compatibility in
the TVF interface. However, any changes can cause previously working
TVF code to require maintenance in order to run on newer Calibre
releases. The dual encoding encryption format is critical for maintaining
the ability to repair and regenerate encrypted TVF files for future releases.</p>
</div>
</dd>
<dt class="dt ArgumentName dlterm" id="id965463e7-79c7-4a20-8cc3-52e957ef15c5__idcb26b671-d9e4-47ae-aba8-27f506f7bd8e"><span class="keyword ParameterName Required">-stdin</span> | <span class="keyword ParameterName RequiredReplaceable">input_file</span></dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument set that
specifies that the input to the compiler is read either from standard
input (for example, from a pipe in a Tcl script), or from a user-supplied <span class="keyword ParameterName RequiredReplaceable">input_file</span>.
You must specify a value for <span class="keyword ParameterName OptionalReplaceable">output_file</span> when
using <span class="keyword ParameterName Required">‑stdin</span>.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id965463e7-79c7-4a20-8cc3-52e957ef15c5__idce1bb784-daf8-4a4e-9216-f5eb264b09e6"><span class="keyword ParameterName OptionalReplaceable">output_file</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument that specifies
a user-supplied output file. This argument is required if you specify <span class="keyword ParameterName Required">‑stdin</span>.</p>
<p class="p">If you do not specify this
argument, the output is written to a file created by replacing the
file extension of <span class="keyword ParameterName RequiredReplaceable">input_file</span> with
“.tbc”. For example, if the input file is “<span class="ph filepath">test.tcl</span>”,
the output file becomes “<span class="ph filepath">test.tbc</span>”. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="id965463e7-79c7-4a20-8cc3-52e957ef15c5__id3c67acae-cd2c-4679-be02-b451b7c6ac17"><span class="keyword ParameterName Optional">-E</span> [<span class="keyword ParameterName Optional">-tvfarg </span><span class="keyword ParameterName OptionalReplaceable">tvf_arg_value</span>]</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument that checks
for issues with an encrypted TVF file. </p>
<p class="p">Use the -E option with a compiled
TVF file that generates one SVRF rule file. Rule files generated
with parameter variations will not work with this option.</p>
<p class="p">The -tvfarg and <span class="keyword ParameterName OptionalReplaceable">tvf_arg_value</span> parameter
set specifies a user‑defined value to pass to the TVF script, where <span class="keyword ParameterName OptionalReplaceable">tvf_arg_value</span> is
a valid string with no spaces. Use the <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'tvfget_tvf_arg', 'svrf_ur'); return false;">tvf::get_tvf_arg</a> command
to access the value of <span class="keyword ParameterName OptionalReplaceable">tvf_arg_value</span>.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id965463e7-79c7-4a20-8cc3-52e957ef15c5__idce6ef1ef-b1ac-4433-b35c-5e74e67b81a1"><span class="keyword ParameterName Optional">-debug</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument that directs Calibre
to emit more debug information when executing an encrypted TVF file.</p>
<p class="p">By default, errors that occur in the encrypted interpreter produce
very little information. The <span class="keyword ParameterName Optional">-debug</span> argument
allows more information about missing variables, call stacks, and
so forth to be produced from the TVF environment. This information
is helpful in debugging differences between unencrypted TVF runs
and encrypted TVF runs.</p>
</dd>
</dl>
</div>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">Invokes the Tcl compiler and creates
an encrypted file from standard input or a user-supplied input file.
The file runs on an encrypted interpreter when it is used for a
Calibre job. Refer to “<a class="xref fm:HeadingAndPage" href="Concept_TclInterpretersAndTvfFiles_idcbc992a7.html#idcbc992a7-299c-4679-963d-dd0e46949b70__Concept_TclInterpretersAndTvfFiles_idcbc992a7.xml#idcbc992a7-299c-4679-963d-dd0e46949b70" title="The master interpreter (m_interp) reads Tcl code to define the TVF namespace. The user interpreter (u_interp) reads the TVF file specified as the Calibre rule file. If the rule file includes any encrypted files specified with the Tcl source command, then each encrypted file is read into an encrypted interpreter (e_interp).">Tcl Interpreters and TVF Files</a>” for information
on Tcl interpreters.</p>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><div class="section Subsection" id="id965463e7-79c7-4a20-8cc3-52e957ef15c5__id3d9bf4b1-1209-4d2d-a6c3-76d75ef0da14"><h2 class="title Subheading sectiontitle">Example 1</h2><p class="p">The following example reads <span class="ph filepath">width_check.tvf</span> from
standard input and writes the encrypted output to <span class="ph filepath">width_check.tbc</span> with
the id check1.</p>
<pre class="pre codeblock"><code>cat width_check.tvf | caltvfencrypt -id check1 -stdin width_check.tbc</code></pre></div>
<div class="section Subsection" id="id965463e7-79c7-4a20-8cc3-52e957ef15c5__id990936bf-6c18-48fa-8001-4d45edf5f9c8"><h2 class="title Subheading sectiontitle">Example 2</h2><p class="p">This example creates three encrypted files named <span class="ph filepath">rule1.tbc</span>, <span class="ph filepath">rule2.tbc</span>,
and <span class="ph filepath">rule3.tbc</span>.</p>
<pre class="pre codeblock leveled"><code>caltvfencrypt -id str1 rule1.tvf 
caltvfencrypt -id str2 rule2.tvf 
caltvfencrypt -id str1 rule3.tvf</code></pre><p class="p">An unencrypted TVF file contains the following <span class="ph FontProperty shellcommand">source</span> commands.</p>
<pre class="pre codeblock leveled"><code>source rule1.tbc 
source rule2.tbc 
source rule3.tbc</code></pre><p class="p">Specifying the unencrypted TVF file
as the rule file for a Calibre job creates four Tcl interpreters.
Specifically, a master interpreter (m_interp), a user interpreter
(u_interp, which reads the TVF rule file), and two encrypted Tcl
interpreters. Because <span class="ph filepath">rule1.tbc</span> and <span class="ph filepath">rule3.tbc</span> have
the same id string, they run on the same encrypted interpreter,
while <span class="ph filepath">rule2.tbc</span> runs on a separate encrypted interpreter.</p>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_CommandReference_id8e9cd880.html" title="There are two modes of the caltvfencrypt command: one mode creates an encrypted TVF file that runs on an encrypted interpreter while the other mode creates an encrypted TVF file that runs on the user interpreter (referred to unsecured mode). Typically, you will want to create an encrypted TVF file that runs on an encrypted interpreter.">Command Reference</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_tvfencrypt_user"
                DocTitle = "Calibre® TVFencrypt User’s Manual"
                PageTitle = "caltvfencrypt"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_Caltvfencrypt_idc5780b25.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® TVFencrypt User’s Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>