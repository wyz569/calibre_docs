<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="GeneralRefTopic" />
<meta name="DC.Title" content="Subcircuit Calls" />
<meta name="abstract" content="Strings beginning with X, having pin names, and referencing a subcircuit definition name constitute subcircuit calls." />
<meta name="description" content="Strings beginning with X, having pin names, and referencing a subcircuit definition name constitute subcircuit calls." />
<meta name="DC.subject" content="X calls, Element statements, X" />
<meta name="keywords" content="X calls, Element statements, X" />
<meta name="prodname" content="Calibre Verification User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-15" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_ver_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="HighlightChanges" content="yes" />
<meta name="EclipsePluginName" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2;show" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® Verification User’s Manual" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10089,product.id.P11800,product.id.P11801,product.id.P11802,product.id.P11426,product.id.P10099,product.id.P10084,product.id.P10090,product.id.P11493,product.id.P11427" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idd0a516db-6d6e-4ffa-a991-8789b4b4fa64" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Subcircuit Calls</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Subcircuit Calls" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10089,product.id.P11800,product.id.P11801,product.id.P11802,product.id.P11426,product.id.P10099,product.id.P10084,product.id.P10090,product.id.P11493,product.id.P11427" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="default" id="idd0a516db-6d6e-4ffa-a991-8789b4b4fa64">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Subcircuit Calls</h1>
<div class="body refbody GeneralRefBody"><div class="abstract GeneralRefAbstract"><span class="shortdesc">Strings
beginning with X, having pin names, and referencing a subcircuit
definition name constitute subcircuit calls.</span>
</div>
<div class="section Subsections"><div class="section Subsection" id="idd0a516db-6d6e-4ffa-a991-8789b4b4fa64__id2e5dbc53-8c01-4c4f-986c-39a90706bdb4"><pre class="pre codeblock"><code><span class="ph CodeHighlight orange">Xyyy</span> &lt; <span class="ph CodeHighlight orange">n1 n2</span> … &gt; &lt; / &gt; &lt;<span class="ph CodeHighlight orange">subname</span>&gt; &lt; parnam = pval &gt; … &lt;M=m&gt;
+ &lt;$[mname] | $.MODEL=mname&gt; &lt;$T=tx ty r a&gt; 
+ &lt;$X=x&gt; &lt;$Y=y&gt; &lt;$D=d&gt; &lt;$PINS &lt;pin=node&gt; … &gt; </code></pre><p class="p">Here is an example:</p>
<pre class="pre codeblock leveled"><code>.SUB opamp 1 2 3 
... 
.ENDS opamp 
X1  2  4  17  opamp  wn=100  ln=5 pp="abc" </code></pre>
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="idd0a516db-6d6e-4ffa-a991-8789b4b4fa64__id502eff7e-9615-45fe-9aac-de0eea843696" class="table" frame="border" border="1" rules="cols"><caption><span class="tablecap"><span class="table--title-label">Table 1. </span>Subcircuit Calls </span></caption><colgroup><col style="width:1.402in" /><col style="width:5.098in" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d5766e199"><p class="p">Argument</p>
<p class="p">Name</p>
</th>
<th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d5766e208"><p class="p">Description</p>
</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d5766e199 "><p class="p">Xyyy</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d5766e208 "><p class="p">Subcircuit call name.
Must begin with an X followed by any number of allowed characters.</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d5766e199 "><p class="p">n1 n2 …</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d5766e208 "><p class="p">Node names for external
reference. Strings of any number of allowed characters. The program
references the names in the order they are specified in the subcircuit
definition.</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d5766e199 "><p class="p">/</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d5766e208 "><p class="p">Optional. The / characters
in the node name list and in the subcircuit reference name are treated
as white space, unless you specify the <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'LVS Spice Slash Is Space', 'svrf_ur'); return false;">LVS Spice Slash Is Space</a> NO specification statement in your rule file.
See $PINS also.</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d5766e199 "><p class="p">subname</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d5766e208 "><p class="p">Subcircuit reference
name. Must appear in a corresponding .SUBCKT or .MACRO definition
in the netlist. A subcircuit call can appear before or after the
corresponding subcircuit definition.</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d5766e199 "><p class="p">parnam = pval</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d5766e208 "><p class="p">Optional parameter name
set to a numeric or string value for use only in this subcircuit
call. The value applies to the referenced subcircuit, and to any
subcircuits called indirectly by the referenced subcircuit. (Within
the referenced subcircuit, parameter values explicitly defined in
a subcircuit call, or explicitly defined in the original subcircuit
definition of a called subcircuit, are not overridden.) Overrides
a parameter value assigned in the referenced subcircuit’s definition,
but can be overridden by a value set in a .PARAM statement. The
parameter does not have to be specified in the subcircuit definition
in order to apply. The parnam must begin with a letter followed
by any number of allowed characters. See “<a class="xref fm:HeadingAndPage" href="Concept_StringParameters_id2488fbea.html#id2488fbea-7d94-4335-8ae0-1171efe7a60d__Concept_StringParameters_id2488fbea.xml#id2488fbea-7d94-4335-8ae0-1171efe7a60d" title="The Calibre SPICE parser supports character-string parameters in addition to standard SPICE numerical parameters.">String Parameters</a>” for complete details on string
parameters.</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d5766e199 "><p class="p">m</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d5766e208 "><p class="p">Optional multiplier factor.
Generates M subcircuit calls connected in parallel. Property m is
evaluated immediately and not handed down through parameter passing.
The name of the first subcircuit call is Xyyy. The names of subsequent
calls receive ==n suffixes, where n are serial numbers starting
with 2. For example the line:</p>
<pre class="pre codeblock leveled"><code>X1 1 2 3 AAA M=3</code></pre><p class="p">generates 3 subcircuit calls of AAA connected
in parallel. The subcircuit names are X1, X1==2, X1==3. Alternative
multiplier names can be specified with the <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'LVS Spice Multiplier Name', 'svrf_ur'); return false;">LVS Spice Multiplier Name</a> rule file statement.</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d5766e199 "><p class="p">mname</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d5766e208 "><p class="p">Optional model name,
coded as a comment. String of any number of allowed characters.
Valid only on calls to primitive subcircuits. Used as LVS component
subtype for the call.</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d5766e199 "><p class="p">$T=tx ty r a </p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d5766e208 "><p class="p">Optional layout transform
consisting of x translation, y translation, reflection, and rotation-angle.
Used in hierarchical applications only. The translation components
tx and ty are integer numbers in database units. The reflection
r is along the x-axis and is either 0 or 1 which denote the absence
or presence of reflection respectively. The rotation angle a is
an integer number in degrees and the only valid values are 0, 90,
180, or 270; rotation is counter-clockwise.</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d5766e199 "><p class="p">$X=x</p>
<p class="p">$Y=y</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d5766e208 "><p class="p">Optional x,y coordinates
coded as comments. Integer numbers in database units. </p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d5766e199 "><p class="p">$D=d</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d5766e208 "><p class="p">Optional rule file <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Device', 'svrf_ur'); return false;">Device</a> statement identifier, coded
as comment, where d is a non-negative integer. Used in extracted layout
netlists to identify the rule file Device statement that generated
the device. For example, $D=0 means the first Device statement in
the rule file was used to define the netlist element. Parsed but
not used.</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d5766e199 "><p class="p">$PINS &lt;pin=node&gt; …</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d5766e208 "><p class="p">Optional argument that
specifies pin connections by name (as opposed to by order). Coded
as a comment. Each pin is a pin name in the .SUBCKT definition,
and each node is a node name in the subcircuit call. The specified
node connects to the specified pin in the subcircuit. Pin and node
names are strings of any number of allowed characters. Embedded
/ characters are treated as part of the names. For example:</p>
<pre class="pre codeblock"><code>.SUBCKT F A B
$ subcircuit contents…
.ENDS

X1 F $PINS B=1 A=2</code></pre><p class="p">In subcircuit call X1, pin B connects to node
1 and pin A connects to node 2.</p>
<p class="p">A subcircuit call may reference fewer pins
than specified in the respective .SUBCKT definition; any pins that
are not referenced in the subcircuit call are floating. For example:</p>
<pre class="pre codeblock"><code>.SUBCKT SSS A B C D
$ subcircuit contents…
.ENDS

X2 1 2 SSS
X3 SSS $PINS B=1 D=2</code></pre><p class="p">In subcircuit call X2, pins C and D are floating.
In subcircuit call X3, pins A and C are floating. </p>
<p class="p">Notes:</p>
<p class="p">a. Duplicate pins are not supported. That
is, you cannot use the $PINS specification when the respective .SUBCKT
definition has multiple pins with the same name.</p>
<p class="p">b. The $PINS argument overrides the standard
SPICE node specification &lt;n1 n2 …&gt; if one is present.</p>
<p class="p">c. The SPICE parser performs consistency checking
regarding number of pins and pin names in the subcircuit call and
the respective .SUBCKT definition. Mismatches are reported as errors.
The number of &lt;pin=node&gt; pairs in a $PINS argument determines
number of pins. Note that floating pins in the subcircuit call are
usually allowed; see discussion of floating pins later in this section.</p>
<p class="p">d. Subcircuit definitions and subcircuit calls
are classified by subcircuit name and number of pins. For example,
you can have 2-pin and 3-pin versions with the same subcircuit name.
The number of pins specified in a $PINS argument in a subcircuit
call classifies the subcircuit call.</p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p">Here is an example that shows how a subcircuit
call redefines a defined subcircuit parameter:</p>
<pre class="pre codeblock leveled"><code>.SUBCKT yyy a b res=5      $ 'res' defaulted to 5 ohm… 
R1 a b res                 $ …and used to specify resistance. 
.ENDS yyy 

X1 5 6 yyy res=7           $ 'res' redefined on subcircuit call. </code></pre><p class="p">The following example concerns what happens
in the x2 call:</p>
<pre class="pre codeblock leveled"><code>.subckt test1 plus minus pw=10 pl=10 
r1 plus minus pr w=pw l=pl 
.ends 

.subckt test2 in out pw=99 pl=99 
x1 in tmp test1 pw=20 pl=20 
r2 tmp out pr w=pw l=pl 
.ends 

x2 a b test2 pw=30 </code></pre><p class="p">In this example, pw=30 is substituted in the
place of pw=99 for the subcircuit test2 in the subcircuit call x2.
However, pw=30 does not apply to test1 in x1 for this series of
calls because x1 explicitly defines pw=20. If x1 did not define
pw at all, then the value pw=10 would apply to test1, because the
original subcircuit definition of test1 has pw=10. If neither x1
nor the original definition of test1 specified parameter pw, then
pw=30 would apply to test1 in x1.</p>
</div>
<div class="section Subsection" id="idd0a516db-6d6e-4ffa-a991-8789b4b4fa64__ide904c707-04a1-4223-8628-bb372e607b8e"><h2 class="title Subheading sectiontitle">Primitive Subcircuit Calls</h2><p class="p">A primitive subcircuit call is a subcircuit
call that references a primitive subcircuit. A primitive subcircuit
does not contain any element statements or subcircuit calls. The corresponding
cell name to a primitive subcircuit can appear in an LVS Box specification statement. </p>
<p class="p">Example:</p>
<pre class="pre codeblock leveled"><code>.SUBCKT primitive a b c  
.ENDS 

X1 1 2 3 primitive par1=5U  par2=10U $[model1] </code></pre><p class="p">You can enter the parameter names (<span class="keyword ParameterName OptionalReplaceable">parnam</span>)
as property names in the <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Trace Property', 'svrf_ur'); return false;">Trace Property</a> specification
statement. As always, they override parameter values assigned in
the subcircuit definition. In the previous example, you could trace
properties par1 and par2.</p>
<p class="p">All primitive subcircuit calls have a special
property called M, which is available for tracing. The trace property
name is M. The value is always 1. Note that when you specify the optional
M multiplier factor in a primitive subcircuit call, you get M individual
subcircuit calls connected in parallel, each with property M equal
to 1. The M property is <span class="ph FontProperty emphasis">not</span> available
for tracing in non-primitive subcircuit calls.</p>
<p class="p">You can instruct the tool to ignore primitive
subcircuit names that do not appear in the rule file (in <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Device', 'svrf_ur'); return false;">Device</a> or <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'LVS Box', 'svrf_ur'); return false;">LVS Box</a> statements) by
using the <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'LVS Spice Cull Primitive Subcircuits', 'svrf_ur'); return false;">LVS Spice Cull Primitive Subcircuits</a> specification statement.</p>
</div>
<div class="section Subsection" id="idd0a516db-6d6e-4ffa-a991-8789b4b4fa64__id7aa4b3f1-e0c4-4961-9c20-ccd954cf2a13"><h2 class="title Subheading sectiontitle">Duplicate Subcircuit Calls</h2><p class="p">Duplicate subcircuit calls are subcircuit calls
having the same parent and identical names.</p>
<p class="p">Duplicate subcircuit calls are reported as
warnings, and their names are modified to make them unique. The
modification consists of appending a unique string to the end of
the subcircuit call name. The string is of the form ===&lt;number&gt;,
where &lt;number&gt; is a running count of duplicate subcircuit calls
in each parent subcircuit, starting with 2. The count is re-initialized
in each parent subcircuit. The SPICE parser ensures that these generated
names are unique; if a generated name was already encountered in
the subcircuit, then the running count is incremented and a new
name is generated.</p>
<p class="p">Example:</p>
<pre class="pre codeblock leveled"><code>.SUBCKT AAA 
C1 1 2 
.ENDS 

.SUBCKT BBB 
X1 AAA 
X1 AAA $ Duplicate; renamed X1===2. 
X1 AAA $ Duplicate; renamed X1===3. 
X2 AAA 
X2 AAA $ Duplicate; renamed X2===4. 
.ENDS 

.SUBCKT CCC 
X1 AAA 
X1 AAA $ Duplicate; renamed X1===2. 
X1 AAA $ Duplicate; renamed X1===3. 
.ENDS </code></pre><p class="p">The following warnings are issued by the previous
example:</p>
<pre class="pre codeblock leveled"><code>Warning: Duplicate subckt call "X1" at line 7 in file "z.net" renamed "X1===2" 
Warning: Duplicate subckt call "X1" at line 8 in file "z.net" renamed "X1===3" 
Warning: Duplicate subckt call "X2" at line 10 in file "z.net" renamed "X2===4" 
Warning: Duplicate subckt call "X1" at line 15 in file "z.net" renamed "X1===2" 
Warning: Duplicate subckt call "X1" at line 16 in file "z.net" renamed "X1===3" </code></pre><p class="p">You can prevent the SPICE parser from modifying
duplicate subcircuit call names by specifying <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'LVS Spice Option', 'svrf_ur'); return false;">LVS Spice Option </a>X in the rule file. This option is provided for backward
compatibility with older versions of Calibre nmLVS or ICtrace and
should be used with caution because it may generate incorrect connectivity.</p>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_ElementStatements_idf08b9c7c.html" title="SPICE uses element statements to represent circuit components. Most of these components are primitive devices. A subcircuit definition frequently specifies a more complex structure.">Element Statements</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_ver_user"
                DocTitle = "Calibre® Verification User’s Manual"
                PageTitle = "Subcircuit Calls"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/General_SubcircuitCalls_idd0a516db.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Verification User’s Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>