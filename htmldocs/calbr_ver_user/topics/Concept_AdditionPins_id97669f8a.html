<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Addition of Pins" />
<meta name="abstract" content="You can add pins or ports using the v2lvs::add_pin command (command line: -addpins)." />
<meta name="description" content="You can add pins or ports using the v2lvs::add_pin command (command line: -addpins)." />
<meta name="prodname" content="Calibre Verification User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-15" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_ver_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="HighlightChanges" content="yes" />
<meta name="EclipsePluginName" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2;show" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® Verification User’s Manual" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10089,product.id.P11800,product.id.P11801,product.id.P11802,product.id.P11426,product.id.P10099,product.id.P10084,product.id.P10090,product.id.P11493,product.id.P11427" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id97669f8a-6f62-4c50-addc-e4121be690fe" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Addition of Pins</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Addition of Pins" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10089,product.id.P11800,product.id.P11801,product.id.P11802,product.id.P11426,product.id.P10099,product.id.P10084,product.id.P10090,product.id.P11493,product.id.P11427" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id97669f8a-6f62-4c50-addc-e4121be690fe">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Addition
of Pins</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">You can add
pins or ports using the v2lvs::add_pin command (command line: -addpins).</span>
</div>
<p class="p">Using the following Verilog and
SPICE netlists:</p>
<pre class="pre codeblock leveled"><code>//---- file lib.v ----------- 
// Verilog Library Module 
// v2lvs::add_pin pins are added to calls to this module 
module B ( P1,P2 ); 
input  P1; 
output P2; 
endmodule 

$$---- file lib.s ----------- 
** Spice Library Module 
** 
** No VSS or VDD pins are defined in A0 
** -addpin pins are not added to calls to this SUBCKT 
.SUBCKT A0 P[3] P[2] P[1] P[0] Q 
.ENDS 

** VSS and VDD pins are declared here 
** -addpin pins are added to calls to this SUBCKT 
.SUBCKT A1 P[3] P[2] P[1] P[0] Q VSS VDD 
.ENDS </code></pre><pre class="pre codeblock leveled"><code>//---- file ex.v ------- 
module C (); 

wire a, b, c, d, e, f, g; 

// Call to Module from SPICE Library 
A0 inst1 ( a, b ); 
A1 inst2 ( a, b ); 

// Call to Module from Verilog Library 
B inst3( .P1(c), .P2(d) ); 

// Undeclared Module 
// v2lvs::add_pin pins are added to calls to undeclared modules. 
UNDECL inst4 ( .P(a), .Q(a) ); 
// Undeclared gate-level primitive 
// v2lvs::add_pin pins are added to gate instantiations in the order 
// specified in the command script. 
nand inst5( e, f, g ); 

endmodule </code></pre><p class="p">You can translate the file <span class="ph FontProperty emphasis">ex.v</span> with <span class="ph FontProperty emphasis">libraries lib.s</span> and <span class="ph FontProperty emphasis">lib.v</span> by using
the v2lvs::add_pin command to add VSS and VDD pins with the following
command sequence:</p>
<pre class="pre codeblock leveled"><code><a class="xref fm:HeadingOnly" href="Command_V2lvsloadVerilog_ida6b20476.html#ida6b20476-ba78-42f0-83a3-86b49eaac201__Command_V2lvsloadVerilog_ida6b20476.xml#ida6b20476-ba78-42f0-83a3-86b49eaac201" title="Specifies a Verilog structural netlist or library file.">v2lvs::load_verilog</a> -filename ex.v 
v2lvs::load_verilog -filename lib.v -lib_mode 
<a class="xref fm:HeadingOnly" href="Command_V2lvsloadSpice_id23946bc3.html#id23946bc3-7234-45f6-a75a-18381ffa2564__Command_V2lvsloadSpice_id23946bc3.xml#id23946bc3-7234-45f6-a75a-18381ffa2564" title="Specifies a SPICE library file with translation mode for SPICE pins.">v2lvs::load_spice</a> -filename lib.s -range_mode 
<a class="xref fm:HeadingOnly" href="Command_V2lvssetIncludes_id50ba0115.html#id50ba0115-1ce0-4b94-89c6-b86add5e2af9__Command_V2lvssetIncludes_id50ba0115.xml#id50ba0115-1ce0-4b94-89c6-b86add5e2af9" title="Specifies a SPICE netlist to be referenced in a .INCLUDE statement in the output.">v2lvs::set_includes</a> -filename lib.s 
<a class="xref fm:HeadingOnly" href="Command_V2lvsaddPin_id43a2aadc.html#id43a2aadc-526f-40fb-81d7-f21b224d6f8e__Command_V2lvsaddPin_id43a2aadc.xml#id43a2aadc-526f-40fb-81d7-f21b224d6f8e" title="Adds pins to subcircuit calls and definitions where such pins do not exist in the Verilog or SPICE inputs.">v2lvs::add_pin</a> -pin VSS -pin VDD 
<a class="xref fm:HeadingOnly" href="Command_V2lvswriteOutput_id9fb31825.html#id9fb31825-aa26-4092-9575-68231a218d93__Command_V2lvswriteOutput_id9fb31825.xml#id9fb31825-aa26-4092-9575-68231a218d93" title="Specifies to output a translated SPICE netlist of the input Verilog design. Optionally specifies the name of a consolidated SPICE library file.">v2lvs::write_output</a> -filename ex.spi 
exit </code></pre><p class="p">Warnings are generated for the UNDECL module
and nand primitive because they are not defined. This has the following
SPICE output:</p>
<pre class="pre codeblock leveled"><code>.INCLUDE "lib.s" 

.SUBCKT C VSS VDD 
Xinst1 A0 $PINS P[0]=a Q=b 
Xinst2 A1 $PINS P[0]=a Q=b VSS=VSS VDD=VDD 
Xinst3 B $PINS P1=c P2=d VSS=VSS VDD=VDD 
Xinst4 UNDECL $PINS P=a Q=a VSS=VSS VDD=VDD 
Xinst5 e f g VSS VDD nand 
.ENDS </code></pre><p class="p">In Place and Route flows where a third-party
provides SPICE library files for standard cells and you want to
manage bulk pin connections, the -addpins command line option does
not work. The <a class="xref fm:HeadingOnly" href="Command_V2lvsaddActualPort_id58bbd3e6.html#id58bbd3e6-58f6-4910-915b-1db4c8af0097__Command_V2lvsaddActualPort_id58bbd3e6.xml#id58bbd3e6-58f6-4910-915b-1db4c8af0097" title="Specifies to add an actual port/pin.">v2lvs::add_actual_port</a> and <a class="xref fm:HeadingOnly" href="Command_V2lvsaddFormalPort_id0d571c36.html#id0d571c36-fca2-46eb-9c54-e053384563a8__Command_V2lvsaddFormalPort_id0d571c36.xml#id0d571c36-fca2-46eb-9c54-e053384563a8" title="Specifies to add a formal port/pin.">v2lvs::add_formal_port</a> commands in the Tcl shell are
suited to this purpose.</p>
<div class="section Subsections" id="id97669f8a-6f62-4c50-addc-e4121be690fe__id5f79694a-fb1a-4ab4-afb0-5fdbcf55fb9a"><div class="section Subsection" id="id97669f8a-6f62-4c50-addc-e4121be690fe__idf4a8ff3c-c7f6-4dff-bf52-df2ef4a69357"><h2 class="title Subheading sectiontitle">Example — Adding actual pins</h2><p class="p">This example shows the adding of actual pins.
See “<a class="xref fm:HeadingAndPage" href="Contain_TclInterfaceCommandEncyclopedia_id2cd4726d.html#id2cd4726d-3fe0-4b37-8615-59636efb80fb__Contain_TclInterfaceCommandEncyclopedia_id2cd4726d.xml#id2cd4726d-3fe0-4b37-8615-59636efb80fb" title="Throughout the command encyclopedia, the brace characters “{ }” indicate choices between required options. The bracket characters “[ ]” indicate non-required options. Both of these characters have special meaning in Tcl so it is important not to include these markup characters as part of the literal command syntax in a script.">Tcl Interface Command Encyclopedia</a>” for the definition of “actual.”</p>
<p class="p">Here are the input files. Verilog file:</p>
<pre class="pre codeblock leveled"><code>/////////////////////// test1.v Verilog file /////////////////////// 
module test (a,b,x,clk,<span class="ph CodeHighlight orange">vddx</span>,<span class="ph CodeHighlight orange">vdd_abc</span>,vss); 
  input a,b,clk,<span class="ph CodeHighlight orange">vdd_abc</span>,<span class="ph CodeHighlight orange">vddx</span>,vss; 
  output x; 
  inv u1 (.A(a), .Z(net1), .<span class="ph CodeHighlight orange">VDD</span>(<span class="ph CodeHighlight orange">vddx)</span>, .VSS(vss)); 
  inv u2 (.A(b), .Z(iso_net), .<span class="ph CodeHighlight orange">VDD</span>(vddx), .VSS(vss)); 
  isobf io1 (.A(net1), .Z(net2), .ISOB(iso_net), .<span class="ph CodeHighlight orange">VDD</span>(<span class="ph CodeHighlight orange">vddx</span>), .<span class="ph CodeHighlight orange">VDD1</span>(<span class="ph CodeHighlight orange">vddx</span>), .<span class="ph CodeHighlight orange">VDD2</span>(<span class="ph CodeHighlight orange">vdd_abc</span>), .VSS(vss)); 
  inv u3 (.A(net2), .Z(x), .<span class="ph CodeHighlight orange">VDD</span>(<span class="ph CodeHighlight orange">vdd_abc</span>), .VSS(vss)); 
// PLL Macro 
  pll pll_u1 (.ref_clk(net2), .en(x), .clk_out(clk), .VDD_1p8v(<span class="ph CodeHighlight orange">vdd_abc</span>),   .<span class="ph CodeHighlight orange">VDD</span>(<span class="ph CodeHighlight orange">vddx</span>), .<span class="ph CodeHighlight orange">VDDB</span>(<span class="ph CodeHighlight orange">vdd_abc</span>), .VSS(vss)); 
endmodule 
///////////////////////// End of Verilog file //////////////////// </code></pre><p class="p">SPICE library:</p>
<pre class="pre codeblock leveled"><code>***************** Included lib1.s SPICE library ***************** 
.SUBCKT pll ref_clk en clk_out VDD_1p8v <span class="ph CodeHighlight orange">VDD VDDB</span> VSS 
.ENDS 
.SUBCKT isobf <span class="ph CodeHighlight orange">VDD</span> VSS <span class="ph CodeHighlight orange">VDD1 VDD2</span> A ISOB Z <span class="ph CodeHighlight orange">VDD1B VDD2B</span> 
.ENDS 
.SUBCKT inv <span class="ph CodeHighlight orange">VDD</span> VSS A Z <span class="ph CodeHighlight orange">VDDB</span> 
.ENDS 
*******************    End of SPICE library    ******************** </code></pre><p class="p">Command script:</p>
<pre class="pre codeblock leveled"><code>###################### v2lvs.command_1 file ####################### 
# Connect the bulk signals to the correct supplies. 
#RULE 1 
<a class="xref fm:HeadingOnly" href="Command_V2lvsaddActualPort_id58bbd3e6.html#id58bbd3e6-58f6-4910-915b-1db4c8af0097__Command_V2lvsaddActualPort_id58bbd3e6.xml#id58bbd3e6-58f6-4910-915b-1db4c8af0097" title="Specifies to add an actual port/pin.">v2lvs::add_actual_port</a> -module * -inst * -if_formal_actual {<span class="ph CodeHighlight orange">VDD vddx</span>}\
 ‑connect_formal_actual {<span class="ph CodeHighlight orange">VDDB vddx</span>} 
#RULE 2 
v2lvs::add_actual_port -module * -inst * -if_formal_actual {<span class="ph CodeHighlight orange">VDD vdd_abc</span>}\
 ‑connect_formal_actual {<span class="ph CodeHighlight orange">VDDB vdd_abc</span>} 
#RULE 3 
v2lvs::add_actual_port -module * -inst * -if_formal_actual {<span class="ph CodeHighlight orange">VDD1 vddx</span>}\
 ‑connect_formal_actual {<span class="ph CodeHighlight orange">VDD1B vddx</span>} 
#RULE 4 
v2lvs::add_actual_port -module * -inst * -if_formal_actual {<span class="ph CodeHighlight orange">VDD2 vdd_abc</span>}\
 -connect_formal_actual {<span class="ph CodeHighlight orange">VDD2B vdd_abc</span>} 
# Have to reconnect the pll instance bulk connection to the original net.\
 # This could be solved by not using wildcard previously. 
#RULE 5 
v2lvs::add_actual_port -module * -inst pll_u1 \
-connect_formal_actual {<span class="ph CodeHighlight orange">VDDB vdd_abc</span>} 
###################### End of command file ####################### </code></pre><p class="p">Where the rules might conflict, the first rule
in the file has priority.</p>
<p class="p">The command sequence is this:</p>
<pre class="pre codeblock leveled"><code><a class="xref fm:HeadingOnly" href="Command_V2lvsloadVerilog_ida6b20476.html#ida6b20476-ba78-42f0-83a3-86b49eaac201__Command_V2lvsloadVerilog_ida6b20476.xml#ida6b20476-ba78-42f0-83a3-86b49eaac201" title="Specifies a Verilog structural netlist or library file.">v2lvs::load_verilog</a> -filename test1.v 
<a class="xref fm:HeadingOnly" href="Command_V2lvsloadSpice_id23946bc3.html#id23946bc3-7234-45f6-a75a-18381ffa2564__Command_V2lvsloadSpice_id23946bc3.xml#id23946bc3-7234-45f6-a75a-18381ffa2564" title="Specifies a SPICE library file with translation mode for SPICE pins.">v2lvs::load_spice</a> -filename lib1.s -pin_mode 
<a class="xref fm:HeadingOnly" href="Command_V2lvssetIncludes_id50ba0115.html#id50ba0115-1ce0-4b94-89c6-b86add5e2af9__Command_V2lvssetIncludes_id50ba0115.xml#id50ba0115-1ce0-4b94-89c6-b86add5e2af9" title="Specifies a SPICE netlist to be referenced in a .INCLUDE statement in the output.">v2lvs::set_includes</a> -filename lib1.s 
<a class="xref fm:HeadingOnly" href="Command_V2lvsdoSource_ide89f8758.html#ide89f8758-1316-455d-ad1d-16fa938f82e2__Command_V2lvsdoSource_ide89f8758.xml#ide89f8758-1316-455d-ad1d-16fa938f82e2" title="Specifies to read and execute a Tcl script.">v2lvs::do_source</a> -filename v2lvs.command_1 
<a class="xref fm:HeadingOnly" href="Command_V2lvswriteOutput_id9fb31825.html#id9fb31825-aa26-4092-9575-68231a218d93__Command_V2lvswriteOutput_id9fb31825.xml#id9fb31825-aa26-4092-9575-68231a218d93" title="Specifies to output a translated SPICE netlist of the input Verilog design. Optionally specifies the name of a consolidated SPICE library file.">v2lvs::write_output</a> -filename test1.spi 
exit </code></pre><p class="p">The expected SPICE output is this:</p>
<pre class="pre codeblock leveled"><code>.INCLUDE "lib1.s" 

.SUBCKT test a b x clk <span class="ph CodeHighlight orange">vddx vdd_abc</span> vss 
Xu1 inv $PINS A=a Z=net1 <span class="ph CodeHighlight orange">VDD=vddx</span> VSS=vss <span class="ph CodeHighlight orange">VDDB=vddx</span> $$ Due to RULE 1 
Xu2 inv $PINS A=b Z=iso_net <span class="ph CodeHighlight orange">VDD=vddx</span> VSS=vss <span class="ph CodeHighlight orange">VDDB=vddx</span> $$ Due to RULE 1 
Xio1 isobf $PINS A=net1 Z=net2 ISOB=iso_net <span class="ph CodeHighlight orange">VDD=vddx VDD1=vddx</span> 
+ <span class="ph CodeHighlight orange">VDD2=vdd_abc</span> VSS=vss <span class="ph CodeHighlight orange">VDD1B=vddx VDD2B=vdd_abc</span> $$ Due to RULE 3 and 4 
Xu3 inv $PINS A=net2 Z=x <span class="ph CodeHighlight orange">VDD=vdd_abc</span> VSS=vss <span class="ph CodeHighlight orange">VDDB=vdd_abc</span> $$ Due to RULE 5 
Xpll_u1 pll $PINS ref_clk=net2 en=x clk_out=clk VDD_1p8v=vdd_abc <span class="ph CodeHighlight orange">VDD=vddx</span> 
+ <span class="ph CodeHighlight orange">VDDB=vdd_abc</span> VSS=vss 
.ENDS </code></pre><p class="p">Notice that RULE 1 and RULE 2 are conflicting
rules for the instance statements Xu1 and Xu2. RULE1 has priority
because it came first.</p>
</div>
<div class="section Subsection" id="id97669f8a-6f62-4c50-addc-e4121be690fe__id44094751-84f2-45d7-864a-b57cc1a4b282"><h2 class="title Subheading sectiontitle">Example — Adding actual pins using a
cell list</h2><p class="p">This example illustrates how to use a cell
list. After grouping the subcircuits inv and isobuf in a list, all
the <a class="xref fm:HeadingOnly" href="Command_V2lvsaddActualPort_id58bbd3e6.html#id58bbd3e6-58f6-4910-915b-1db4c8af0097__Command_V2lvsaddActualPort_id58bbd3e6.xml#id58bbd3e6-58f6-4910-915b-1db4c8af0097" title="Specifies to add an actual port/pin.">v2lvs::add_actual_port</a> rules that use the -group option
are applicable to inv and isobuf.</p>
<p class="p">Here are the input files. Verilog file:</p>
<pre class="pre codeblock leveled"><code>/////////////////////// test2.v Verilog file /////////////////////// 
module test (a,b,x,clk,<span class="ph CodeHighlight orange">vddx</span>,<span class="ph CodeHighlight orange">vdd_abc</span>,vss); 
  input a,b,clk,<span class="ph CodeHighlight orange">vdd_abc</span>,<span class="ph CodeHighlight orange">vddx</span>,vss; 
  output x; 
  inv u1 (.A(a), .Z(net1), .<span class="ph CodeHighlight orange">VDD</span>(<span class="ph CodeHighlight orange">vddx</span>), .VSS(vss)); 
  isobf io1 (.A(net1), .Z(net2), .ISOB(iso_net), .<span class="ph CodeHighlight orange">VDD</span>(<span class="ph CodeHighlight orange">vddx</span>), .VDD1(<span class="ph CodeHighlight orange">vddx</span>), .<span class="ph CodeHighlight orange">VDD2</span>(<span class="ph CodeHighlight orange">vdd_abc</span>), .VSS(vss)); 
// PLL Macro 
  pll pll_u1 (.ref_clk(net2), .en(x), .clk_out(clk), .VDD_1p8v(<span class="ph CodeHighlight orange">vdd_abc</span>), .<span class="ph CodeHighlight orange">VDD</span>(<span class="ph CodeHighlight orange">vddx</span>), .<span class="ph CodeHighlight orange">VDDB</span>(<span class="ph CodeHighlight orange">vdd_abc</span>),.VSS(vss)); 
endmodule 
////////////////////// End of Verilog input file  ///////////////// </code></pre><p class="p">SPICE library:</p>
<pre class="pre codeblock leveled"><code>***************** Included lib2.s SPICE library ******************* 
.SUBCKT pll ref_clk en clk_out VDD_1p8v <span class="ph CodeHighlight orange">VDD VDDB</span> VSS 
.ENDS 
.SUBCKT isobf <span class="ph CodeHighlight orange">VDD </span>VSS VDD1 <span class="ph CodeHighlight orange">VDD2</span> A ISOB Z VDD1B <span class="ph CodeHighlight orange">VDD2B</span> 
.ENDS 
.SUBCKT inv <span class="ph CodeHighlight orange">VDD</span> VSS A Z <span class="ph CodeHighlight orange">VDDB</span> 
.ENDS 
********************* End of SPICE library ************************ </code></pre><p class="p">Command script:</p>
<pre class="pre codeblock leveled"><code>###################### v2lvs.command_2 file ####################### 
# Define cells list 
set cell_list [list inv isobf] 
# Connect the bulk signals to the correct supplies for stdcells only. 
#RULE 1 
<a class="xref fm:HeadingOnly" href="Command_V2lvsaddActualPort_id58bbd3e6.html#id58bbd3e6-58f6-4910-915b-1db4c8af0097__Command_V2lvsaddActualPort_id58bbd3e6.xml#id58bbd3e6-58f6-4910-915b-1db4c8af0097" title="Specifies to add an actual port/pin.">v2lvs::add_actual_port</a> -module * -group $cell_list \
-if_formal_actual {<span class="ph CodeHighlight orange">VDD vddx</span>} -connect_formal_actual {<span class="ph CodeHighlight orange">VDDB vddx</span>} 
#RULE 2 
v2lvs::add_actual_port -module * -group $cell_list \
-if_formal_actual {<span class="ph CodeHighlight orange">VDD2 vdd_abc</span>} -connect_formal_actual {<span class="ph CodeHighlight orange">VDD2B vdd_abc</span>} 
####################### End of command file ####################### </code></pre><p class="p">The command sequence is the following:</p>
<pre class="pre codeblock leveled"><code><a class="xref fm:HeadingOnly" href="Command_V2lvsloadVerilog_ida6b20476.html#ida6b20476-ba78-42f0-83a3-86b49eaac201__Command_V2lvsloadVerilog_ida6b20476.xml#ida6b20476-ba78-42f0-83a3-86b49eaac201" title="Specifies a Verilog structural netlist or library file.">v2lvs::load_verilog</a> -filename test2.v 
<a class="xref fm:HeadingOnly" href="Command_V2lvsloadSpice_id23946bc3.html#id23946bc3-7234-45f6-a75a-18381ffa2564__Command_V2lvsloadSpice_id23946bc3.xml#id23946bc3-7234-45f6-a75a-18381ffa2564" title="Specifies a SPICE library file with translation mode for SPICE pins.">v2lvs::load_spice</a> -filename lib2.s -pin_mode 
<a class="xref fm:HeadingOnly" href="Command_V2lvssetIncludes_id50ba0115.html#id50ba0115-1ce0-4b94-89c6-b86add5e2af9__Command_V2lvssetIncludes_id50ba0115.xml#id50ba0115-1ce0-4b94-89c6-b86add5e2af9" title="Specifies a SPICE netlist to be referenced in a .INCLUDE statement in the output.">v2lvs::set_includes</a> -filename lib2.s 
<a class="xref fm:HeadingOnly" href="Command_V2lvsdoSource_ide89f8758.html#ide89f8758-1316-455d-ad1d-16fa938f82e2__Command_V2lvsdoSource_ide89f8758.xml#ide89f8758-1316-455d-ad1d-16fa938f82e2" title="Specifies to read and execute a Tcl script.">v2lvs::do_source</a> -filename v2lvs.command_2 
<a class="xref fm:HeadingOnly" href="Command_V2lvswriteOutput_id9fb31825.html#id9fb31825-aa26-4092-9575-68231a218d93__Command_V2lvswriteOutput_id9fb31825.xml#id9fb31825-aa26-4092-9575-68231a218d93" title="Specifies to output a translated SPICE netlist of the input Verilog design. Optionally specifies the name of a consolidated SPICE library file.">v2lvs::write_output</a> -filename test2.spi 
exit </code></pre><p class="p">The expected SPICE output is this:</p>
<pre class="pre codeblock leveled"><code>.INCLUDE "lib2.s" 
.SUBCKT test a b x clk <span class="ph CodeHighlight orange">vddx vdd_abc</span> vss 
Xu1 inv $PINS A=a Z=net1 <span class="ph CodeHighlight orange">VDD=vddx</span> VSS=vss <span class="ph CodeHighlight orange">VDDB=vddx</span> $$ Due to RULE 1 
Xio1 isobf $PINS A=net1 Z=net2 ISOB=iso_net VDD=vddx VDD1=vddx  
+ VDD2=vdd_abc VSS=vss <span class="ph CodeHighlight orange">VDD2B=vdd_abc</span> $$ Due to RULE 2  
Xpll_u1 pll $PINS ref_clk=net2 en=x clk_out=clk VDD_1p8v=vdd_abc VDD=vddx 
+ VDDB=vdd_abc VSS=vss 
.ENDS </code></pre></div>
<div class="section Subsection" id="id97669f8a-6f62-4c50-addc-e4121be690fe__idc819cda5-d71c-4a70-a366-bde77ea344f9"><h2 class="title Subheading sectiontitle">Example — Adding actual and formal pins</h2><p class="p">This example shows the impact of adding pins
across the hierarchy where pins vdd1, vdd2, and VDDB are added to
different modules. It shows the use of the <a class="xref fm:HeadingOnly" href="Command_V2lvsaddFormalPort_id0d571c36.html#id0d571c36-fca2-46eb-9c54-e053384563a8__Command_V2lvsaddFormalPort_id0d571c36.xml#id0d571c36-fca2-46eb-9c54-e053384563a8" title="Specifies to add a formal port/pin.">v2lvs::add_formal_port</a> command. It also shows how <a class="xref fm:HeadingOnly" href="Command_V2lvsaddActualPort_id58bbd3e6.html#id58bbd3e6-58f6-4910-915b-1db4c8af0097__Command_V2lvsaddActualPort_id58bbd3e6.xml#id58bbd3e6-58f6-4910-915b-1db4c8af0097" title="Specifies to add an actual port/pin.">v2lvs::add_actual_port</a> can be used for a specific parent
cell and a specific instance.</p>
<p class="p">The following are the input files. Verilog
file:</p>
<pre class="pre codeblock leveled"><code>/////////////////////// test3.v Verilog file /////////////////////// 
module <span class="ph CodeHighlight orange">test</span> (in,out1,out2); 
  input in; 
  output out1, out2; 
  domain1 <span class="ph CodeHighlight orange">d1</span> (.a(in), .z(out1)); 
  domain2 <span class="ph CodeHighlight orange">d2</span> (.a(in), .z(out2)); 
endmodule 

module domain1 (a,z); 
  input a; 
  output z; 
  supply1 <span class="ph CodeHighlight orange">vdd1</span>; 
  supply0 vss; 
  inv u1 (.A(a), .Z(net1), .VDD(<span class="ph CodeHighlight orange">vdd1</span>), .VSS(vss)); 
  inv u2 (.A(net1), .Z(z), .VDD(<span class="ph CodeHighlight orange">vdd1</span>), .VSS(vss)); 
endmodule 

module domain2 (a,z); 
  input a; 
  output z; 
  supply1 <span class="ph CodeHighlight orange">vdd2</span>; 
  supply0 vss; 
  inv u1 (.A(a), .Z(net1), .VDD(<span class="ph CodeHighlight orange">vdd2</span>), .VSS(vss)); 
  inv u2 (.A(net1), .Z(z), .VDD(<span class="ph CodeHighlight orange">vdd2</span>), .VSS(vss)); 
endmodule 
////////////////////// End of Verilog input file  ///////////////// </code></pre><p class="p">SPICE library:</p>
<pre class="pre codeblock leveled"><code>***************** Included lib3.s SPICE library ******************* 
.SUBCKT pll ref_clk en clk_out VDD_1p8v VDD <span class="ph CodeHighlight orange">VDDB</span> VSS 
.ENDS 
.SUBCKT isobf VDD VSS VDD1 VDD2 A ISOB Z VDD1B VDD2B 
.ENDS 
.SUBCKT inv VDD VSS A Z <span class="ph CodeHighlight orange">VDDB</span> 
.ENDS 
********************** End of SPICE library *********************** </code></pre><p class="p">Command file:</p>
<pre class="pre codeblock leveled"><code>###################### v2lvs.command_3 file ####################### 
# This propagates the bulk singals and different power signals 
# through the hierarchy. 
# RULE 1 
<a class="xref fm:HeadingOnly" href="Command_V2lvsaddFormalPort_id0d571c36.html#id0d571c36-fca2-46eb-9c54-e053384563a8__Command_V2lvsaddFormalPort_id0d571c36.xml#id0d571c36-fca2-46eb-9c54-e053384563a8" title="Specifies to add a formal port/pin.">v2lvs::add_formal_port</a> -port <span class="ph CodeHighlight orange">vdd1</span> 
# RULE 2 
v2lvs::add_formal_port -port <span class="ph CodeHighlight orange">vdd2</span> 
# RULE 3 
v2lvs::add_formal_port -port <span class="ph CodeHighlight orange">VDDB</span> -under <span class="ph CodeHighlight orange">test</span> 
# Connect the bulk signals to the correct supplies based on module  
# hierarchy. 
# RULE 4 
<a class="xref fm:HeadingOnly" href="Command_V2lvsaddActualPort_id58bbd3e6.html#id58bbd3e6-58f6-4910-915b-1db4c8af0097__Command_V2lvsaddActualPort_id58bbd3e6.xml#id58bbd3e6-58f6-4910-915b-1db4c8af0097" title="Specifies to add an actual port/pin.">v2lvs::add_actual_port</a> -module <span class="ph CodeHighlight orange">test</span> -inst <span class="ph CodeHighlight orange">d1</span> \
  -connect_formal_actual {<span class="ph CodeHighlight orange">VDDB vdd1</span>} 
# RULE 5 
v2lvs::add_actual_port -module test -inst d2 \
  -connect_formal_actual {<span class="ph CodeHighlight orange">VDDB vdd2</span>} 
###################### End of command file ######################## </code></pre><p class="p">The command line is the following:</p>
<pre class="pre codeblock leveled"><code><a class="xref fm:HeadingOnly" href="Command_V2lvsloadVerilog_ida6b20476.html#ida6b20476-ba78-42f0-83a3-86b49eaac201__Command_V2lvsloadVerilog_ida6b20476.xml#ida6b20476-ba78-42f0-83a3-86b49eaac201" title="Specifies a Verilog structural netlist or library file.">v2lvs::load_verilog</a> -filename test3.v 
<a class="xref fm:HeadingOnly" href="Command_V2lvsloadSpice_id23946bc3.html#id23946bc3-7234-45f6-a75a-18381ffa2564__Command_V2lvsloadSpice_id23946bc3.xml#id23946bc3-7234-45f6-a75a-18381ffa2564" title="Specifies a SPICE library file with translation mode for SPICE pins.">v2lvs::load_spice</a> -filename lib3.s -pin_mode 
<a class="xref fm:HeadingOnly" href="Command_V2lvssetIncludes_id50ba0115.html#id50ba0115-1ce0-4b94-89c6-b86add5e2af9__Command_V2lvssetIncludes_id50ba0115.xml#id50ba0115-1ce0-4b94-89c6-b86add5e2af9" title="Specifies a SPICE netlist to be referenced in a .INCLUDE statement in the output.">v2lvs::set_includes</a> -filename lib3.s 
<a class="xref fm:HeadingOnly" href="Command_V2lvsdoSource_ide89f8758.html#ide89f8758-1316-455d-ad1d-16fa938f82e2__Command_V2lvsdoSource_ide89f8758.xml#ide89f8758-1316-455d-ad1d-16fa938f82e2" title="Specifies to read and execute a Tcl script.">v2lvs::do_source</a> -filename v2lvs.command_3 
<a class="xref fm:HeadingOnly" href="Command_V2lvswriteOutput_id9fb31825.html#id9fb31825-aa26-4092-9575-68231a218d93__Command_V2lvswriteOutput_id9fb31825.xml#id9fb31825-aa26-4092-9575-68231a218d93" title="Specifies to output a translated SPICE netlist of the input Verilog design. Optionally specifies the name of a consolidated SPICE library file.">v2lvs::write_output</a> -filename test3.spi 
exit </code></pre><p class="p">The expected SPICE output is this (comments
added for clarity):</p>
<pre class="pre codeblock leveled"><code>.INCLUDE "lib3.s" 

.SUBCKT <span class="ph CodeHighlight orange">test</span> in out1 out2 <span class="ph CodeHighlight orange">vdd1 vdd2</span>  
* vdd1 and vdd2 added due to RULE 1 and RULE 2 
X<span class="ph CodeHighlight orange">d1 domain1</span> $PINS a=in z=out1 <span class="ph CodeHighlight orange">vdd1=vdd1 VDDB=vdd1</span>  
* vdd1=vdd1 written due to RULE 1 and VDDB=vdd1 due to RULE 4 
X<span class="ph CodeHighlight orange">d2 domain2</span> $PINS a=in z=out2 <span class="ph CodeHighlight orange">vdd2=vdd2 VDDB=vdd2</span>  
* vdd2=vdd2 written due to RULE 2 and VDDB=vdd2 due to RULE 5 
.ENDS 

.SUBCKT <span class="ph CodeHighlight orange">domain1</span> a z vdd1 <span class="ph CodeHighlight orange">VDDB</span> $$ VDDB added due to RULE 3 
Xu1 inv $PINS A=a Z=net1 VDD=vdd1 VSS=vss <span class="ph CodeHighlight orange">VDDB=VDDB</span>  
* VDDB=VDDB written due to RULE 3 
Xu2 inv $PINS A=net1 Z=z VDD=vdd1 VSS=vss <span class="ph CodeHighlight orange">VDDB=VDDB</span>  
* VDDB=VDDB written due to RULE 3 
.ENDS 

.SUBCKT <span class="ph CodeHighlight orange">domain2</span> a z vdd2 <span class="ph CodeHighlight orange">VDDB</span> $$ VDDB added due to RULE 3 
Xu1 inv $PINS A=a Z=net1 VDD=vdd2 VSS=vss <span class="ph CodeHighlight orange">VDDB=VDDB</span>  
* VDDB=VDDB written due to RULE 3 
Xu2 inv $PINS A=net1 Z=z VDD=vdd2 VSS=vss <span class="ph CodeHighlight orange">VDDB=VDDB</span>  
* VDDB=VDDB written due to RULE 3 
.ENDS 
.GLOBAL vdd1 
.GLOBAL vdd2 
.GLOBAL vss </code></pre></div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_Declarations_id05193903.html" title="The following declaration types are meaningful to V2LVS: input, output, inout, all net types, and parameter.">Declarations</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_ver_user"
                DocTitle = "Calibre® Verification User’s Manual"
                PageTitle = "Addition of Pins"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_AdditionPins_id97669f8a.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Verification User’s Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>