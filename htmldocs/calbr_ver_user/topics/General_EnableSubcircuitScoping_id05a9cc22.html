<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="GeneralRefTopic" />
<meta name="DC.Title" content="Enable Subcircuit Scoping" />
<meta name="abstract" content="V2LVS supports a configuration file that allows subcircuit scoping of lower-level SPICE blocks that are incorporated into a top-level Verilog design." />
<meta name="description" content="V2LVS supports a configuration file that allows subcircuit scoping of lower-level SPICE blocks that are incorporated into a top-level Verilog design." />
<meta name="prodname" content="Calibre Verification User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-15" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_ver_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="HighlightChanges" content="yes" />
<meta name="EclipsePluginName" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2;show" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® Verification User’s Manual" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10089,product.id.P11800,product.id.P11801,product.id.P11802,product.id.P11426,product.id.P10099,product.id.P10084,product.id.P10090,product.id.P11493,product.id.P11427" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id05a9cc22-414e-4d3e-a2ed-ce687c02d4c0" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Enable Subcircuit Scoping</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Enable Subcircuit Scoping" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10089,product.id.P11800,product.id.P11801,product.id.P11802,product.id.P11426,product.id.P10099,product.id.P10084,product.id.P10090,product.id.P11493,product.id.P11427" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="default" id="id05a9cc22-414e-4d3e-a2ed-ce687c02d4c0">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Enable Subcircuit Scoping</h1>
<div class="body refbody GeneralRefBody"><div class="abstract GeneralRefAbstract"><span class="shortdesc">V2LVS supports
a configuration file that allows subcircuit scoping of lower-level
SPICE blocks that are incorporated into a top-level Verilog design. </span>
</div>
<div class="section Subsections"><div class="section Subsection" id="id05a9cc22-414e-4d3e-a2ed-ce687c02d4c0__id020b33cf-a1a8-45ca-8763-0cb443fd3001"><p class="p">This uses the SPICE scoping method described
under “<a class="xref fm:HeadingAndPage" href="Concept_BlockLevelChipAssemblyUsingScopedSpiceSubcircuits_id5ce2ac60.html#id5ce2ac60-5576-4e5e-b114-4163f3fc2dd7__Concept_BlockLevelChipAssemblyUsingScopedSpiceSubcircuits_id5ce2ac60.xml#id5ce2ac60-5576-4e5e-b114-4163f3fc2dd7" title="When assembling a schematic design from several block-level components, some high-level SPICE blocks may use lower-level subcircuits that conflict with block names used by other high-level blocks. Because SPICE cannot distinguish between the calls to the conflicting cells, this situation results in an incorrect instantiation of the first encountered cell for all instances of the conflicting name.">Block-Level Chip Assembly Using Scoped SPICE Subcircuits</a>”. V2LVS implements this scoping
method through the <a class="xref fm:HeadingOnly" href="Command_V2lvssetConfigFile_id23aafb2e.html#id23aafb2e-7a7d-4fce-be67-f5630ea24740__Command_V2lvssetConfigFile_id23aafb2e.xml#id23aafb2e-7a7d-4fce-be67-f5630ea24740" title="Specifies a configuration file that allows scoping of lower-level SPICE blocks incorporated into the top-level Verilog design.">v2lvs::set_config_file</a> command (command line: -cfg).</p>
<p class="p">The configuration file has the following format:</p>
<pre class="pre codeblock leveled"><code>&lt;custom_cell_filename&gt; &lt;top_subckt&gt; &lt;wrapper_subckt&gt; {PIN | RANGE}</code></pre><p class="p">The entries in the file are defined as follows:</p>
<p class="p BlockIndent"><span class="keyword ParameterName RequiredReplaceable">custom_cell_filename</span> —
The SPICE file that includes the block-level subcircuit definition
that V2LVS uses for the scoped block.</p>
<p class="p BlockIndent"><span class="keyword ParameterName RequiredReplaceable">top_subckt</span> —
The name of the block-level subcircuit definition that exists in
the <span class="keyword ParameterName RequiredReplaceable">custom_cell_filename</span> file.
This is the top-level cell that is being incorporated into the Verilog
file.</p>
<p class="p BlockIndent"><span class="keyword ParameterName RequiredReplaceable">wrapper_subckt</span> —
The wrapper name for the top-level cell that will be represented
as a Verilog signature with the top-level cell instantiated inside
it. The wrapper name can be same as the <span class="keyword ParameterName RequiredReplaceable">top_subckt</span> name,
although this prevents use of this name as an hcell.</p>
<p class="p BlockIndent"><span class="ph FontProperty HeadingLabel">PIN</span> —
Pin mode is used, similar to <a class="xref fm:HeadingOnly" href="Command_V2lvsloadSpice_id23946bc3.html#id23946bc3-7234-45f6-a75a-18381ffa2564__Command_V2lvsloadSpice_id23946bc3.xml#id23946bc3-7234-45f6-a75a-18381ffa2564" title="Specifies a SPICE library file with translation mode for SPICE pins.">v2lvs::load_spice</a> -pin_mode. </p>
<p class="p BlockIndent"><span class="ph FontProperty HeadingLabel">RANGE</span> —
Range mode is used, similar to <a class="xref fm:HeadingOnly" href="Command_V2lvsloadSpice_id23946bc3.html#id23946bc3-7234-45f6-a75a-18381ffa2564__Command_V2lvsloadSpice_id23946bc3.xml#id23946bc3-7234-45f6-a75a-18381ffa2564" title="Specifies a SPICE library file with translation mode for SPICE pins.">v2lvs::load_spice</a> -range_mode.</p>
<p class="p">For example, consider the following top-level
Verilog netlist:</p>
<pre class="pre codeblock leveled"><code>//------ scoped.v ----------------------- 
module TOP ( port_A, port_B, port_C ); 
inout [1:0] port_A; 
inout port_B, port_C; 

// instances of BLK1 - port_A is passed as an array (RANGE MODE) 
BLK1 B1_0 ( port_A, port_B, port_C ); 
BLK1 B1_1 ( .A(port_A), .B(port_B), .C(port_C) ); 

// instances of BLK2 - port_A is passed as individual pins (PIN MODE) 
BLK2 B2_0 ( port_A[1], port_A[0], port_B, port_C ); 
BLK2 B2_1 ( 
  .\A[1] (port_A[1]), 
  .\A[0] (port_A[0]), 
  .B(port_B), 
  .C(port_C) 
); 
endmodule </code></pre><p class="p">The following configuration file could be used
to incorporate these three separate blocks in V2LVS:</p>
<pre class="pre codeblock leveled"><code>blk1.cdl BLK1 BLK1_WRAPPER RANGE 
blk2.cdl BLK2 BLK2_WRAPPER PIN </code></pre><p class="p">Assume the following SPICE library files:</p>
<pre class="pre codeblock leveled"><code>* blk1.cdl 
.SUBCKT A P2 P1 
C0 P1 P2 40 
.ENDS 

.SUBCKT BLK1 A[1] A[0] B C  
XA0 A[1] C A 
XA1 A[0] B A 
.ENDS 

* blk2.cdl 
.SUBCKT A P2 P1 
R0 P1 P2 
.ENDS 

.SUBCKT BLK2 A[1] A[0] B C  
XA0 A[1] C A 
XA1 A[0] B A 
.ENDS </code></pre><p class="p">The following V2LVS command sequence is used:</p>
<pre class="pre codeblock leveled"><code><a class="xref fm:HeadingOnly" href="Command_V2lvssetConfigFile_id23aafb2e.html#id23aafb2e-7a7d-4fce-be67-f5630ea24740__Command_V2lvssetConfigFile_id23aafb2e.xml#id23aafb2e-7a7d-4fce-be67-f5630ea24740" title="Specifies a configuration file that allows scoping of lower-level SPICE blocks incorporated into the top-level Verilog design.">v2lvs::set_config_file</a> -filename scoped.cfg  
<a class="xref fm:HeadingOnly" href="Command_V2lvsloadVerilog_ida6b20476.html#ida6b20476-ba78-42f0-83a3-86b49eaac201__Command_V2lvsloadVerilog_ida6b20476.xml#ida6b20476-ba78-42f0-83a3-86b49eaac201" title="Specifies a Verilog structural netlist or library file.">v2lvs::load_verilog</a> -filename scoped.v  
<a class="xref fm:HeadingOnly" href="Command_V2lvswriteOutput_id9fb31825.html#id9fb31825-aa26-4092-9575-68231a218d93__Command_V2lvswriteOutput_id9fb31825.xml#id9fb31825-aa26-4092-9575-68231a218d93" title="Specifies to output a translated SPICE netlist of the input Verilog design. Optionally specifies the name of a consolidated SPICE library file.">v2lvs::write_output</a> -filename scoped.out  </code></pre><p class="p">This generates the following SPICE netlist:</p>
<pre class="pre codeblock leveled"><code>$$----- scoped.out ------ 
$$ Spice netlist generated by v2lvs 

.SUBCKT TOP port_A[1] port_A[0] port_B port_C 
XB1_0 BLK1_WRAPPER $PINS A[1]=port_A[1] A[0]=port_A[0] B=port_B C=port_C 
XB1_1 BLK1_WRAPPER $PINS A[1]=port_A[1] A[0]=port_A[0] B=port_B C=port_C 
XB2_0 BLK2_WRAPPER $PINS A[1]=port_A[1] A[0]=port_A[0] B=port_B C=port_C 
XB2_1 BLK2_WRAPPER $PINS A[1]=port_A[1] A[0]=port_A[0] B=port_B C=port_C 
.ENDS 

.SUBCKT BLK1_WRAPPER A[1] A[0] B C 
.INCLUDE blk1.cdl 
X0 A[1] A[0] B C BLK1 
.ENDS 

.SUBCKT BLK2_WRAPPER A[1] A[0] B C 
.INCLUDE blk2.cdl 
X0 A[1] A[0] B C BLK2 
.ENDS </code></pre></div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_V2lvsUsedSpiceLibraryFiles_ide68c0ced.html" title="SPICE library files may be used to define lower-level modules. V2LVS reads SPICE library files in order to deduce Verilog module interfaces, and to establish appropriate connectivity to SPICE library subcircuits from the V2LVS output netlist.">V2LVS Used With SPICE Library Files</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_ver_user"
                DocTitle = "Calibre® Verification User’s Manual"
                PageTitle = "Enable Subcircuit Scoping"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/General_EnableSubcircuitScoping_id05a9cc22.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Verification User’s Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>