<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Virtual Memory Allocation Failures" />
<meta name="abstract" content="The most common memory allocation error you might encounter when using Calibre tools is LVHEAP MEMORY ALLOCATION FAILURE. In most cases, the Calibre tool issues this error because the platform’s swap is insufficient. Generally, you should set the platform’s stacksize no less than 8192 kilobytes." />
<meta name="description" content="The most common memory allocation error you might encounter when using Calibre tools is LVHEAP MEMORY ALLOCATION FAILURE. In most cases, the Calibre tool issues this error because the platform’s swap is insufficient. Generally, you should set the platform’s stacksize no less than 8192 kilobytes." />
<meta name="prodname" content="Calibre Administrator's Guide" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-26" />
<meta name="Topline" content="Siemens EDA" />
<meta name="GenerateOnlyChangedTopics" content="no" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="HighlightChanges" content="yes" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_admin_gd" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="all;show" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® Administrator’s Guide" />
<meta name="ConditionFiltering" content="XML" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.sys,product.version.v2021.2" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id58c6ca49-f536-43ea-a90f-0e65876b0072" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Virtual Memory Allocation Failures</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Virtual Memory Allocation Failures" />
<meta name="attributes" content="doc.type.documentation.sys,product.version.v2021.2" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id58c6ca49-f536-43ea-a90f-0e65876b0072">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Virtual Memory Allocation Failures</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">The most common
memory allocation error you might encounter when using <span class="ph fmvar:Toolset_Name">Calibre
tools</span> is LVHEAP MEMORY ALLOCATION
FAILURE. In most cases, the Calibre tool issues this error because
the platform’s swap is insufficient. Generally, you should set the
platform’s stacksize no less than 8192 kilobytes. </span>
</div>
<p class="p">If the stacksize is insufficient, the Calibre transcript
contains this warning:</p>
<pre class="pre codeblock"><code>	WARNING: Please increase stacksize for best performance</code></pre><p class="p">Failure to mitigate the warning can cause Calibre to abort.</p>
<p class="p">You can use the <span class="ph FontProperty shellcommand">limit</span> (C
shell) or <span class="ph FontProperty shellcommand">ulimit -a</span> (Bourne
shells) command to verify the stacksize. For example:</p>
<pre class="pre codeblock leveled"><code>% <span class="keyword ParameterName Required">limit
</span>cputime      unlimited
filesize     unlimited
datasize     unlimited
stacksize    8192 kbytes
coredumpsize 0 kbytes
memoryuse    unlimited
vmemoryuse   unlimited
descriptors  1024 
memorylocked 32 kbytes
maxproc      16384 </code></pre><p class="p">To temporarily modify the stacksize, enter
the following commands: </p>
<pre class="pre ShellCommand">% limit stacksize 8192; # csh</pre>
<pre class="pre ShellCommand">$ ulimit -s 8192; # Bourne shells</pre>
<p class="p">The following files can be configured with the appropriate setting:</p>
<p class="p BlockIndent">RHEL7: <span class="ph filepath">/etc/security/limits.d/20-nproc.conf</span></p>
<p class="p BlockIndent">RHEL6 and 5: <span class="ph filepath italic">/etc/security/limits.d/90-nproc.conf</span> </p>
<p class="p BlockIndent">Any: <span class="ph filepath italic">/etc/security/limits.conf</span></p>
<div class="section Subsections"><div class="section Subsection" id="id58c6ca49-f536-43ea-a90f-0e65876b0072__ide9936de0-acda-45a0-be47-f57258488ab1"><h2 class="title Subheading sectiontitle">Virtual
Memory Allocation Failure on Linux Platforms</h2><p class="p">On Linux platforms, the <span class="ph FontProperty shellcommand">numactl</span> command
is used to output additional information about the memory nodes
when a virtual memory allocation failure occurs. Following is an
example of the transcript output from a virtual memory allocation failure
on Linux:</p>
<pre class="pre codeblock leveled"><code>malloc() failed: return value = 0, errno = 12

available: 4 nodes (0-3)
node 0 size: 16127 MB
node 0 free: 76 MB
node 1 size: 16160 MB
node 1 free: 3892 MB
node 2 size: 16160 MB
node 2 free: 12667 MB
node 3 size: 16160 MB
node 3 free: 9565 MB

node distances:
node   0   1   2   3   
	0:  10  20  20  20   
	1:  20  10  20  20   
	2:  20  20  10  20   
	3:  20  20  20  10

MALLINFO:  
	arena = 1188474880  
	ordblks = 20  
	smblks = 0  
	hblks = 1361  
	hblkhd = -1439100928  
	usmblks = 0  
	fsmblks = 0  
	uordblks = 1188340496  
	fordblks = 134384  
	keepcost = 133976

LVHEAP MEMORY ALLOCATION FAILURE, requested 2097152 bytes, current allocation is 4034199836
DRC_ABORT: Success</code></pre></div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCAppe_ConfigurationOperatingSystemsVirtualMemory_ide99fc570.html" title="If you run Calibre on a 32-bit platform, you should be aware of potential 32-bit addressing limitations. There are also best practices you may want to follow to conserve memory when running Calibre, in addition to information for handling virtual memory allocation failures.">Configuration: Operating Systems and Virtual Memory</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_admin_gd"
                DocTitle = "Calibre® Administrator’s Guide"
                PageTitle = "Virtual Memory Allocation Failures"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_VirtualMemoryAllocationFailures_id58c6ca49.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Administrator’s Guide, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>