<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Executing xCalibrate With Calibre MTflex Using IBM Spectrum LSF" />
<meta name="abstract" content="You can invoke the xCalibrate tool and use the REMOTE COMMAND statement to start a Calibre MTflex server on a remote host. This example shows how to use the LAUNCH CLUSTER statement to connect a primary host to one or more remote hosts and how to run xCalibrate using the -remotefile argument." />
<meta name="description" content="You can invoke the xCalibrate tool and use the REMOTE COMMAND statement to start a Calibre MTflex server on a remote host. This example shows how to use the LAUNCH CLUSTER statement to connect a primary host to one or more remote hosts and how to run xCalibrate using the -remotefile argument." />
<meta name="prodname" content="Calibre Administrator's Guide" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-26" />
<meta name="Topline" content="Siemens EDA" />
<meta name="GenerateOnlyChangedTopics" content="no" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="HighlightChanges" content="yes" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_admin_gd" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="all;show" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® Administrator’s Guide" />
<meta name="ConditionFiltering" content="XML" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.sys,product.version.v2021.2" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idc3d7f2b8-5bff-4250-af97-c0730cff22a8" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Executing xCalibrate With Calibre MTflex Using IBM Spectrum LSF</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Executing xCalibrate With Calibre MTflex Using IBM Spectrum LSF" />
<meta name="attributes" content="doc.type.documentation.sys,product.version.v2021.2" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="idc3d7f2b8-5bff-4250-af97-c0730cff22a8">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Executing xCalibrate With Calibre MTflex Using IBM Spectrum LSF</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><span class="shortdesc">You can invoke
the xCalibrate tool and use the REMOTE COMMAND statement to start
a Calibre MTflex server on a remote host. This example shows how
to use the LAUNCH CLUSTER statement to connect a primary host to
one or more remote hosts and how to run xCalibrate using the -remotefile
argument.</span>
</div>
<div class="section prereq Prerequisites p"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Prerequisites</h2></div><ul class="ul"><li class="li" id="idc3d7f2b8-5bff-4250-af97-c0730cff22a8__id4703fa5d-6279-437d-ad35-486bacff66c5"><p class="p">The CALIBRE_HOME environment variable must be
set to the location of a Calibre software tree. This software tree
must be accessible by the remote hosts and the same version of Calibre
must be used throughout the network.</p>
</li>
<li class="li" id="idc3d7f2b8-5bff-4250-af97-c0730cff22a8__id10d56c32-4cab-4488-b46b-511833bd9e26"><p class="p">The LM_LICENSE_FILE or MGLS_LICENSE_FILE environment variable
must be set to the location of a license file.</p>
</li>
<li class="li" id="idc3d7f2b8-5bff-4250-af97-c0730cff22a8__id5f2b2fb1-8052-433a-8c58-2bc53a827413"><p class="p">The ability to run ssh (required for RHEL/CentOS
8 operating system) on all remote hosts.</p>
</li>
<li class="li" id="idc3d7f2b8-5bff-4250-af97-c0730cff22a8__idecd1624c-2e12-404e-ad54-086eaa259cee"><p class="p">A heterogeneous environment where the Calibre
MTflex configuration file is used to communicate with the primary
host to identify the path to the appropriate CALIBRE_HOME tree.</p>
</li>
<li class="li" id="idc3d7f2b8-5bff-4250-af97-c0730cff22a8__id008d4865-e758-4d03-8129-481f46c81083"><p class="p">IBM Spectrum LSF must be installed and configured
for your network. Refer to “<a class="xref fm:HeadingAndPage" href="General_IBMSpectrumLSFCommands_ided15d7bf.html#ided15d7bf-26cf-44db-b5d5-8fd93585939f__General_IBMSpectrumLSFCommands_ided15d7bf.xml#ided15d7bf-26cf-44db-b5d5-8fd93585939f" title="Some commonly used IBM Spectrum LSF commands include bsub, bjobs, and bqueues. For more information on these and other IBM Spectrum LSF commands, refer to your IBM Spectrum LSF documentation.">IBM Spectrum LSF Commands</a>” for information on some of the commonly used LSF commands.</p>
</li>
</ul>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand" id="idc3d7f2b8-5bff-4250-af97-c0730cff22a8__idd8e11192-cc51-41d7-9d25-42c2b1916e07"><span class="ph cmd">Create an executable shell script file named <span class="ph filepath">launch_remote.sh</span> that
calls the <span class="ph filepath">rxcalibrate</span> utility. For example:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock"><code>#!/bin/bash
echo "Remote Hosts selected by the bsub command: $LSB_HOSTS"
echo "Need to connect them to the master referenced by: $CALIBRE_REMOTE_CONNECTION"
echo "Checking MGC_HOME is set like the master: $MGC_HOME"
for host in $LSB_HOSTS
do
    #Usage: rxcalibrate &lt;rundir&gt; &lt;env-var-count&gt; &lt;env_var_1&gt; &lt;env_var_value&gt; &lt;env_var_2&gt; &lt;env_var_value&gt; ... [calibre_switches]
    ${MGC_HOME}/bin/rxcalibrate "/tmp" 1 MGC_HOME $MGC_HOME -mtflex $CALIBRE_REMOTE_CONNECTION -64 -f &amp;
Done</code></pre><p class="p">This script uses the rxcalibrate utility to connect
to the host machine using the IP and port specified by the CALIBRE_REMOTE_CONNECTION
environment variable. The LSB_HOSTS variable defines the set of
hosts for use by IBM Spectrum LSF. The CALIBRE_REMOTE_CONNECTION
variable defines a host and port ID for the connection between the
primary and remote host.</p>
</div></li>
<li class="li step stepexpand" id="idc3d7f2b8-5bff-4250-af97-c0730cff22a8__iddf4f4893-ec2c-426b-88b9-96eac30bbc14"><span class="ph cmd">Create a Calibre MTflex configuration file called <span class="ph filepath">remote_config</span> and
specify the LAUNCH CLUSTER and REMOTE COMMAND statements. For example: </span><div class="itemgroup info StepInfo"><pre class="pre codeblock"><code>LAUNCH CLUSTER WAIT 60 COUNT 20 MINCOUNT 20
REMOTE COMMAND bsub 
    ARGUMENTS [ -J "remotes[1-20]" -R "select[hname!='%H' &amp;&amp; defined(linux) &amp;&amp; (ostype=='CENT6.5' || ostype=='CENT6.6' || ostype=='RHEL6.6')]" -o remotes.log ./launch_remote.sh ]</code></pre><p class="p">In this example, the COUNT keyword for the LAUNCH
CLUSTER statement specifies the number of remote connections that
must be established before the run begins. The MINCOUNT keyword
specifies the minimum number of remote connections that must be
established before the specified WAIT time expires in order for the
Calibre run not to fail.</p>
<p class="p">The REMOTE COMMAND executes the <span class="ph filepath">launch_remote.sh</span> shell
script.</p>
</div></li>
<li class="li step stepexpand" id="idc3d7f2b8-5bff-4250-af97-c0730cff22a8__id86b27b53-4189-40eb-b54b-92b012868c07"><span class="ph cmd">Invoke xCalibrate using the -remotefile argument
to specify the path to the Calibre MTflex configuration file you
created in step 2.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock"><code>xcalibrate -exec -remotefile remote_config test.mipt</code></pre><p class="p">The -remotefile command line argument specifies
a path to the configuration file that includes information about
the primary and remote hosts, how to partition the run, and the
launch method. </p>
</div></li>
</ol>
<div class="section result"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Results</h2></div><p class="p">In this procedure, the job completes successfully
on 20 cores as requested.</p>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCChap_DistributedCalibreExecutingMonitoring_idd93c9d2e.html" title="Some of the more common scenarios for running a distributed Calibre job involve using the multithreaded (MT) or Calibre MTflex capabilities, with or without hyperscaling mode. Monitoring utilities allow you to track how the job is distributed along with the performance of the local and remote hosts.">Distributed Calibre: Executing and Monitoring</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../topics/Command_LaunchCluster_id24c3e5ba.html" title="Sets parameters for connection of the primary host to the remote hosts.">LAUNCH CLUSTER</a></div>
<div><a class="link" href="../topics/Command_RemoteCommand_ide34650f6.html" title="Specifies a command and arguments that provide information about how to launch a Calibre MTflex server or an LVS compare process on a remote host.">REMOTE COMMAND</a></div>
<div><a class="link" href="../topics/Command_CalibreRemoteConnection_id0e6ebc08.html" title="Specifies the primary host and port information for the remote host to use to connect with the primary host.">CALIBRE_REMOTE_CONNECTION</a></div>
<div><a class="link" href="../topics/Command_Rxcalibrate_id1d0c4cd9.html" title="Used to initiate a Calibre MTflex run for xCalibrate on remote hosts.">rxcalibrate</a></div>
<div><a class="link" href="../topics/Command_Remotefile_id2c59ad77.html" title="Used to specify a configuration file that contains remote host information.">‑remotefile</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_admin_gd"
                DocTitle = "Calibre® Administrator’s Guide"
                PageTitle = "Executing xCalibrate With Calibre MTflex Using IBM Spectrum LSF"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_RunningXCalibrateWithCalibreMTflexUsingIBMSpectrumLSF_idc3d7f2b8.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Administrator’s Guide, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>