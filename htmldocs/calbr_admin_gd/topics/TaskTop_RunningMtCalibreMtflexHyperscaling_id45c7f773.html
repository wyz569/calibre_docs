<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Running MT and Calibre MTflex with Hyperscaling" />
<meta name="abstract" content="Hyperscaling is a mode of running Calibre in either Multithreaded (MT) or Multithreaded Distributed (Calibre MTflex) environments. Hyperscaling mode enables the parallel execution of SVRF operations, allowing operations to execute concurrently thereby increasing the utilization of CPUs and improving scalability. Hyperscaling is not used for single-threaded environments." />
<meta name="description" content="Hyperscaling is a mode of running Calibre in either Multithreaded (MT) or Multithreaded Distributed (Calibre MTflex) environments. Hyperscaling mode enables the parallel execution of SVRF operations, allowing operations to execute concurrently thereby increasing the utilization of CPUs and improving scalability. Hyperscaling is not used for single-threaded environments." />
<meta name="prodname" content="Calibre Administrator's Guide" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-26" />
<meta name="Topline" content="Siemens EDA" />
<meta name="GenerateOnlyChangedTopics" content="no" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="HighlightChanges" content="yes" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_admin_gd" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="all;show" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® Administrator’s Guide" />
<meta name="ConditionFiltering" content="XML" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.sys,product.version.v2021.2" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id45c7f773-093a-4372-a536-d1078909397f" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Running MT and Calibre MTflex with Hyperscaling</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Running MT and Calibre MTflex with Hyperscaling" />
<meta name="attributes" content="doc.type.documentation.sys,product.version.v2021.2" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id45c7f773-093a-4372-a536-d1078909397f">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Running MT and Calibre MTflex with Hyperscaling</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><p class="shortdesc">Hyperscaling
is a mode of running Calibre in either Multithreaded (MT) or Multithreaded
Distributed (Calibre MTflex) environments. Hyperscaling mode enables
the parallel execution of SVRF operations, allowing operations to execute
concurrently thereby increasing the utilization of CPUs and improving
scalability. Hyperscaling is not used for single-threaded environments.</p>
<p class="p">As an internal optimization, hyperscaling
flattens very small cells like contacts and vias. It also flattens
top-level cells that it can identify after processing the <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Layout Base Layer', 'svrf_ur'); return false;">Layout Base Layer </a>(or <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Layout Top Layer', 'svrf_ur'); return false;">Layout Top Layer</a>) statements. Due to these optimizations, the hierarchical
object counts that appear in the transcript may differ between a
run that uses hyperscaling versus a traditional MT or Calibre MTflex
run.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">When using hyperscaling,
always use a correctly-specified <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Layout Base Layer', 'svrf_ur'); return false;">Layout Base Layer</a> statement in the rule file. (<a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Layout Top Layer', 'svrf_ur'); return false;">Layout Top Layer</a> may be used, but Layout Base Layer is preferred in
most situations.) Failure to do so often results in reduced performance,
which is true for any Calibre nmDRC-H run.</p>
</div>
</div>
<div class="section prereq Prerequisites p"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Prerequisites</h2></div><ul class="ul"><li class="li" id="id45c7f773-093a-4372-a536-d1078909397f__id0f8711ce-2e76-49c8-aa30-03075b5e9f26"><p class="p">The
CALIBRE_HOME environment variable must be set to the location of
a Calibre software tree that is accessible by the remote hosts.</p>
</li>
<li class="li" id="id45c7f773-093a-4372-a536-d1078909397f__id039a65c2-fda1-4749-8e7b-6a5479e33ce7"><p class="p">LM_LICENSE_FILE
or MGLS_LICENSE_FILE must be set to the location of a license file.</p>
</li>
</ul>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand" id="id45c7f773-093a-4372-a536-d1078909397f__id5722342f-c0c8-4765-9322-dc5e6ebbefa8"><span class="ph cmd">Invoke
Calibre with the -remotefile argument. For example, to invoke nmDRC-H:</span><div class="itemgroup info StepInfo"><pre class="pre ShellCommand">calibre -drc -hier -turbo 4 -hyper -remotefile mtflex.cfg rules</pre>
<p class="p">Calibre automatically determines
the appropriate hyperscaling number to assign based on the specified
-turbo number.</p>
</div></li>
<li class="li step stepexpand" id="id45c7f773-093a-4372-a536-d1078909397f__id5c95b4a7-1299-4f83-b246-800dd16dd898"><span class="ph cmd">Review the header section
for information on the hyperscaling operations:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>Running Calibre: calibre -remotefile mtflex.cfg -drc -hier -turbo 4 -hyper drc.header
...
//
//  Starting time: Fri Jan 18 14:11:40 2013
//
...
// <span class="ph CodeHighlight orange">HYPERSCALING ENABLED with 4 pseudo HDBs.</span>
//  Initializing MTflex on <span class="ph CodeHighlight orange">pseudo HDB 1</span>
//  Calibre Remote Connection &lt;host&gt;:12345
//  Launching Calibre Remote server on: node1234
//  Waiting for launch of remote hosts
//  Launching Calibre Remote server on: node1234
//  Launching Calibre Remote server on: node1234
//  Launching Calibre Remote server on: node1234
//  Launching Calibre Remote server on: node1234
//  Launching Calibre Remote server on: node1234
//  Launching Calibre Remote server on: node1234
//  Connected to CPU on remote host node1234, logfile = /tmp/CalibreRemoteLog.&lt;host&gt;.1234.1111_2222_3333.node1234.4444
...
//  Initializing MTflex on <span class="ph CodeHighlight orange">pseudo HDB 2</span>
...
//  Initializing MTflex on <span class="ph CodeHighlight orange">pseudo HDB 3</span>
...
//  Initializing MTflex on <span class="ph CodeHighlight orange">pseudo HDB 4</span>
...
//  <span class="ph CodeHighlight orange">MTflex initialization for pseudo HDBs completed.</span>
//  Running on 4 CPUs (pending licensing)
//  List of connected remote hosts:
//   REMOTE HOST node1234: np = 8, nv = 8, nc = 2, ns = 8
//  MTflex CPU resources: 8 Local, 8/8 Remote</code></pre></div></li>
<li class="li step stepexpand" id="id45c7f773-093a-4372-a536-d1078909397f__id4483545b-089a-4d2a-b240-28c6d02c850e"><span class="ph cmd">Review the Constructing Hierarchical
Database section at the end of the Calibre Layout Data Input Module:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>-------------------------------------------------------------------
-------------------------------------------------------------------
-----             CALIBRE LAYOUT DATA INPUT MODULE            -----
-------------------------------------------------------------------
-------------------------------------------------------------------
...
CONSTRUCTING HIERARCHICAL DATABASE
...
<span class="ph CodeHighlight orange">PSEUDO HDB 3 CONSTRUCTED.</span> CPU TIME = 0  REAL TIME = 0  LVHEAP = 2/3/3
<span class="ph CodeHighlight orange">PSEUDO HDB 2 CONSTRUCTED.</span> CPU TIME = 0  REAL TIME = 0  LVHEAP = 2/3/3
<span class="ph CodeHighlight orange">PSEUDO HDB 1 CONSTRUCTED.</span> CPU TIME = 0  REAL TIME = 0  LVHEAP = 2/3/3
<span class="ph CodeHighlight orange">PSEUDO HDB 4 CONSTRUCTED.</span> CPU TIME = 0  REAL TIME = 0  LVHEAP = 2/3/3
<span class="ph CodeHighlight orange">PSEUDO HDB SYSTEM CONSTRUCTION COMPLETE</span>: 12 CPU TIME = 0  REAL TIME = 0  LVHEAP = 5/11/11  SHARED = 1/32
HIERARCHICAL DATABASE CONSTRUCTOR COMPLETE.
...</code></pre><p class="p">This information means the
pseudo databases used by the CPUs are ready to store data.</p>
<p class="p">This section also list the
following two algorithms that are only used with hyperscaling:</p>
<pre class="pre codeblock leveled"><code>FLATTENING SELECTED VERY SMALL CELL PLACEMENTS
FLATTENING SELECTED TOP LAYER CELL PLACEMENTS</code></pre><p class="p">These are internal optimizations
needed for a hyperscaling run. These algorithms affect object counts
that appear in the run transcripts. Object counts can differ between
a hyperscaling run and a non-hyperscaling run, which is an expected behavior.</p>
</div></li>
<li class="li step stepexpand" id="id45c7f773-093a-4372-a536-d1078909397f__ide3001489-cbf4-4d1f-890c-1a213d531210"><span class="ph cmd">Review the summary section
located near the end of the transcript:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>Cumulative ONE-LAYER BOOLEAN Time: CPU = 0/0 + 0/2  REAL = 0/3
Cumulative TWO-LAYER BOOLEAN Time: CPU = 0/0 + 0/0  REAL = 0/1
Cumulative POLYGON TOPOLOGICAL Time: CPU = 0/0 + 0/2  REAL = 0/5
Cumulative POLYGON MEASUREMENT Time: CPU = 0/0 + 0/0  REAL = 0/0
Cumulative SIZE Time: CPU = 0/1 + 0/2  REAL = 0/2
Cumulative EDGE TOPOLOGICAL Time: CPU = 0/0 + 0/4  REAL = 0/3
Cumulative EDGE MEASUREMENT Time: CPU = 0/0 + 0/0  REAL = 0/0
Cumulative ONE-LAYER DRC Time: CPU = 0/0 + 0/2  REAL = 0/2
Cumulative TWO-LAYER DRC Time: CPU = 0/0 + 0/1  REAL = 0/1
Cumulative MISCELLANEOUS Time: CPU = 0/0 + 0/1  REAL = 0/1
Cumulative CONNECT Time: CPU = 0/0 + 4/0  REAL = 1/0
Cumulative RDB Time: CPU = 0/0 + 0/0  REAL = 0/0</code></pre><p class="p">The REAL times are reported
as follows: </p>
<p class="p BlockIndent">primary host/remote
hosts (aggregate)</p>
</div></li>
<li class="li step stepexpand" id="id45c7f773-093a-4372-a536-d1078909397f__id9cec88d2-b4a6-48ab-a7cd-6a1c14ff4462"><span class="ph cmd">The summary section also includes
data similar to the following that reports statistics for both the
primary and remote hosts: </span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>HDB 0: CPU TIME = 0 + 4  LVHEAP = 18
HDB 1: CPU TIME = 0 + 2  LVHEAP = 7  RX = 3  TX = 1
HDB 2: CPU TIME = 1 + 5  LVHEAP = 8  RX = 6  TX = 1
HDB 3: CPU TIME = 1 + 6  LVHEAP = 7  RX = 6  TX = 1
HDB 4: CPU TIME = 1 + 5  LVHEAP = 7  RX = 7  TX = 1
HDB 0-4 TOTAL LVHEAP = 47</code></pre><p class="p">The primary host CPU numbers
are reported before the + sign, and the remote host numbers are
reported after it, as follows: </p>
<p class="p BlockIndent">primary HDB 0/HDB 1-n
+ remote HDB 0/HDB 1-n</p>
<p class="p">For CPU TIME, the format is
primary host + remote hosts (aggregate).</p>
</div></li>
<li class="li step stepexpand" id="id45c7f773-093a-4372-a536-d1078909397f__id7cc06da4-453c-47c2-9075-e134c28e5312"><span class="ph cmd">At the end of the transcript,
statistics are reported for the remote hosts by HDB and per CPU
used for data processing. For example:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>MTflex HDB 0
	REMOTE CPU node1: CPU TIME = 0, STATUS = OK(0), LVHEAP = 1/4/4,
		RX = 0, TX = 0
	REMOTE CPU node2: CPU TIME = 1, STATUS = OK(0), LVHEAP = 1/20/20,
		RX = 0, TX = 0
	REMOTE CPU node3: CPU TIME = 0, STATUS = OK(0), LVHEAP = 1/4/4,
		RX = 0, TX = 0
...</code></pre></div></li>
</ol>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCChap_DistributedCalibreExecutingMonitoring_idd93c9d2e.html" title="Some of the more common scenarios for running a distributed Calibre job involve using the multithreaded (MT) or Calibre MTflex capabilities, with or without hyperscaling mode. Monitoring utilities allow you to track how the job is distributed along with the performance of the local and remote hosts.">Distributed Calibre: Executing and Monitoring</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_admin_gd"
                DocTitle = "Calibre® Administrator’s Guide"
                PageTitle = "Running MT and Calibre MTflex with Hyperscaling"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_RunningMtCalibreMtflexHyperscaling_id45c7f773.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Administrator’s Guide, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>