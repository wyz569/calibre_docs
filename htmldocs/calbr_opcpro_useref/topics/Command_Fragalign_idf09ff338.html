<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="fragalign" />
<meta name="abstract" content="Aligns fragment breaks on horizontal and vertical edges to reduce shot count." />
<meta name="description" content="Aligns fragment breaks on horizontal and vertical edges to reduce shot count." />
<meta name="prodname" content="Calibre OPCpro User's and Reference Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-17" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="2" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_opcpro_useref" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="HighlightColor" content="mgc_wheat" />
<meta name="HighlightChanges" content="yes" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="Mar. 12, 2021" />
<meta name="Draft" content="NONE" />
<meta name="DocumentTitle" content="Calibre® OPCpro™ User’s and Reference Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10115,product.id.P10108,doc.type.documentation.ref" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idf09ff338-6438-4fea-a214-ea11e8c10cd2" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>fragalign</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="fragalign" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10115,product.id.P10108,doc.type.documentation.ref" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="idf09ff338-6438-4fea-a214-ea11e8c10cd2">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">fragalign</h1>
<div class="body refbody CommandRefBody"><div class="abstract CommandRefAbstract"><p class="p ContextMGC">Type: <a class="xref fm:HeadingOnly" href="Contain_TaggingCommands_ide141a5fb.html#ide141a5fb-6352-4e0e-a029-9da6d6d10b87__Contain_TaggingCommands_ide141a5fb.xml#ide141a5fb-6352-4e0e-a029-9da6d6d10b87" title="Tagging commands work on specific subsets of fragments. These subsets are “tag sets.” You can define custom tag sets with the newTag commands and then modify the fragments in the sets using other tagging commands.">Tagging Commands</a>. <span class="ph fmvar:SupportedBy">  
Used by Calibre OPCpro, Calibre ORC, and Calibre PRINTimage.</span></p>
<p class="shortdesc">Aligns fragment breaks on horizontal
and vertical edges to reduce shot count.</p>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName Required">fragalign</span> <span class="keyword ParameterName RequiredReplaceable">layer</span> <span class="keyword ParameterName RequiredReplaceable">tag</span> <br />
<span class="keyword ParameterName Required">maxmove</span> <span class="keyword ParameterName RequiredReplaceable">max_move</span> <span class="keyword ParameterName Required">maxpolywidth</span> <span class="keyword ParameterName RequiredReplaceable">max_width</span> [alignToCorners] [copy [allowDelete]] <br />
[<span class="keyword ParameterName Optional">minedgelen</span> <span class="keyword ParameterName OptionalReplaceable">minedgelength</span>] [priorityTag <span class="keyword ParameterName OptionalReplaceable">inTagName</span>] [unalignedTag <span class="keyword ParameterName OptionalReplaceable">outTagName</span>]</p>
</div>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="idf09ff338-6438-4fea-a214-ea11e8c10cd2__id6ceff4fb-b5f7-4b30-a8f9-58606260456a"><span class="keyword ParameterName RequiredReplaceable">layer</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument specifying
the name of a layer containing fragments to align. Fragments on
other layers are not adjusted.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idf09ff338-6438-4fea-a214-ea11e8c10cd2__id8ad1224f-d83c-4617-a040-9b86876d1885"><span class="keyword ParameterName RequiredReplaceable">tag</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument that specifies
the tag set of fragments to adjust. Use “all” to align all fragments.</p>
<p class="p">Because all of the fragments
must be contiguous, it is best to specify all of the tags to be smoothed
at one time and not to use multiple calls to fragalign. Multiple
tag sets should be combined first, as shown in “<a class="xref fm:HeadingAndPage" href="#idf09ff338-6438-4fea-a214-ea11e8c10cd2__id3eb8bc4d-2c4b-43d0-a976-7169920bc2ee">Example 1 - Combining Tags</a>”.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idf09ff338-6438-4fea-a214-ea11e8c10cd2__id0b50d1b1-d4f2-4ec8-babc-dd9030fc53ca"><span class="keyword ParameterName Required">maxmove</span> <span class="keyword ParameterName RequiredReplaceable">max_move</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument specifying
the maximum distance in microns that a fragment break may move from
its original location. The <span class="keyword ParameterName RequiredReplaceable">max_move</span> must
be greater than or equal to 0.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idf09ff338-6438-4fea-a214-ea11e8c10cd2__id5bfa36e4-a2a3-45fb-9561-90d2fb83f16d"><span class="keyword ParameterName Required">maxpolywidth</span> <span class="keyword ParameterName RequiredReplaceable">max_width</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument specifying
the maximum distance across a polygon for which two edges should
have their fragments aligned. The <span class="keyword ParameterName RequiredReplaceable">max_width</span> must
be greater than or equal to 0. To prevent unintended alignment,
this should be set to the minimum acceptable value.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idf09ff338-6438-4fea-a214-ea11e8c10cd2__id23a24c94-ab28-43b8-a037-a5dbfcd32b05">alignToCorners </dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument that indicates
fragments opposite a corner should also be aligned.</p>
<p class="p">By default, fragments opposite
a corner are not aligned to a corner because that is done by <a class="xref fm:HeadingOnly" href="Command_Interfeature_id57bdc1ff.html#id57bdc1ff-93ba-4189-aff2-0ffef3581e15__Command_Interfeature_id57bdc1ff.xml#id57bdc1ff-93ba-4189-aff2-0ffef3581e15" title="Defines the fragmentation parameters that influence interfeature fragmentation.">interfeature</a> fragmentation. However, sometimes
this does not occur or fragments are adjusted so that corners are
not aligned. With alignToCorners, fragalign attempts to align fragments
opposite corners also.</p>
<p class="p">If priorityTag is set and a
fragment opposite a corner is tagged <span class="keyword ParameterName OptionalReplaceable">inTagName</span>,
priorityTag takes priority and the fragment is not adjusted.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idf09ff338-6438-4fea-a214-ea11e8c10cd2__id0887905f-45d7-410f-bb7a-3ecb93e96c8e">copy [allowDelete]</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument that copies
fragment breaks from one Manhattan edge of a polygon to the parallel
edge. The two edges must be separated by no more than <span class="keyword ParameterName RequiredReplaceable">max_width</span>.
Fragment breaks that violate <span class="keyword ParameterName OptionalReplaceable">minedgelength</span> are
not copied. Only fragments of type <span class="keyword ParameterName RequiredReplaceable">tag</span> on <span class="keyword ParameterName RequiredReplaceable">layer</span> have their
breaks copied.</p>
<p class="p">The allowDelete keyword can
only be used with copy. The keyword forces alignment when it is
not otherwise possible by allowing a fragment to be deleted if and
only if the deletion results in correct alignment. An example of
where this might occur is when one side of a polygon has promoted
fragments that cannot be moved. This means that only the opposite side
can be adjusted. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="idf09ff338-6438-4fea-a214-ea11e8c10cd2__id981cde31-6331-44f7-8912-a3583cede362"><span class="keyword ParameterName Optional">minedgelen</span> <span class="keyword ParameterName OptionalReplaceable">minedgelength</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument specifying
the shortest edge that may be created during alignment. Lengths
must be greater than 0. Although this value is optional, it is recommended
for clarity.</p>
<p class="p">The default value for minedgelen
is the minedgelength value specified in the <a class="xref fm:HeadingOnly" href="Command_Fragmentlayer_iddf1c294a.html#iddf1c294a-111a-47a2-a2a8-5e8e7a1625b8__Command_Fragmentlayer_iddf1c294a.xml#iddf1c294a-111a-47a2-a2a8-5e8e7a1625b8" title="Overrides global parameter settings for a specified layer.">fragmentLayer</a> block. If minedgelength was not
specified in a fragmentLayer block, it defaults to the global default
value. If more than one fragmentLayer block specifies a minedgelength
value the first one is used.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idf09ff338-6438-4fea-a214-ea11e8c10cd2__id2f602843-0170-4dd5-aac9-34ea6344ea66">priorityTag <span class="keyword ParameterName OptionalReplaceable">inTagName</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument specifying
the tag set of fragments that should not be changed. Other fragments
are aligned to <span class="keyword ParameterName OptionalReplaceable">inTagName</span> fragments.
The <span class="keyword ParameterName OptionalReplaceable">inTagName</span> set
should be a subset of the <span class="keyword ParameterName RequiredReplaceable">tag</span> set.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="idf09ff338-6438-4fea-a214-ea11e8c10cd2__idab75dec9-eca7-4cad-a4f4-a3fdcfb8f20b">unalignedTag <span class="keyword ParameterName OptionalReplaceable">outTagName</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument specifying
that non-aligned fragments in <span class="keyword ParameterName RequiredReplaceable">tag</span> be
tagged as <span class="keyword ParameterName OptionalReplaceable">outTagName</span>.
By default, unaligned fragments are not marked.</p>
<p class="p">For a fragment to be tagged <span class="keyword ParameterName OptionalReplaceable">outTagName</span>,
it must be able to be aligned within the constraints of <span class="keyword ParameterName Required">maxmove</span> and <span class="keyword ParameterName Required">maxpolywidth</span> but
has at least one endpoint that does not align with the fragment
across the polygon. </p>
</dd>
</dl>
</div>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">The optional fragalign keyword
aligns specified fragments so that the fragment breaks across a feature
are in line as shown in <a class="xref fm:Figure" href="#idf09ff338-6438-4fea-a214-ea11e8c10cd2__id7d0339c9-9f7c-4fd5-9ef2-23ec94c652b4">Figure 1</a>. It does not affect fragments on edges
that are not strictly horizontal or vertical. A fragment break is
adjusted to mirror its neighbor across the polygon if all of the
following conditions are met:</p>
<ul class="ul"><li class="li" id="idf09ff338-6438-4fea-a214-ea11e8c10cd2__id92e23110-c7bd-4592-9d6b-0d6aa5b50ebd"><p class="p">The two edges are parallel
and on the same polygon.</p>
</li>
<li class="li" id="idf09ff338-6438-4fea-a214-ea11e8c10cd2__id9b8a115e-fcca-4bde-bb0f-9514026c58f9"><p class="p">The distance between the
two edges does not exceed <span class="keyword ParameterName Required">maxpolywidth</span>.</p>
</li>
<li class="li" id="idf09ff338-6438-4fea-a214-ea11e8c10cd2__iddcbfda29-f7ae-424c-9ff1-a3d7aef6a2f3"><p class="p">The fragment break of one
or both does not need to be moved more than <span class="keyword ParameterName Required">maxmove</span>.</p>
</li>
<li class="li" id="idf09ff338-6438-4fea-a214-ea11e8c10cd2__id005ce9da-5871-4aff-963b-3a279bea1173"><p class="p">The adjusted fragments do
not violate minedgelen (the argument specified in fragalign, not
the minedgelength command).</p>
</li>
</ul>
<p class="p">The breakpoints to be aligned
are generally adjusted to the midpoint between the two breaks. In some
cases, this may violate minedgelen, so other points are tried. If
no suitable points are found, neither fragment’s break point is
moved.</p>
<p class="p">In some situations, you may have
fragments that should not change but still want to reduce shot count
through fragalign. Other fragments can be aligned to the fragments
that should not change. To handle this, create a tag to identify
the fragments that should not be moved and use the priorityTag argument.</p>
<div class="section Subsection" id="idf09ff338-6438-4fea-a214-ea11e8c10cd2__id4b2d5630-d7f8-4301-9bc0-45bfed7e262d"><h2 class="title Subheading sectiontitle">Exceptions</h2><p class="p">The following types of fragments
do not get aligned:</p>
<ul class="ul"><li class="li" id="idf09ff338-6438-4fea-a214-ea11e8c10cd2__id935fe2d4-f631-4109-a46f-9640f509cac4"><p class="p">Fragments on non-Manhattan
edges do not get aligned. Only vertical and horizontal edges are
considered.</p>
</li>
<li class="li" id="idf09ff338-6438-4fea-a214-ea11e8c10cd2__id7217f103-defb-4904-a49f-5bdc201f0618"><p class="p">By default, fragments opposite
a corner are not aligned. You can enable this using the alignToCorners
argument.</p>
</li>
<li class="li" id="idf09ff338-6438-4fea-a214-ea11e8c10cd2__idf2ae0e60-5dcd-4ba7-bb37-890e4eab2c0b"><p class="p">Fragments whose adjustment
would violate the minedgelen argument are not aligned.</p>
<div class="fig fignone" id="idf09ff338-6438-4fea-a214-ea11e8c10cd2__id7d0339c9-9f7c-4fd5-9ef2-23ec94c652b4"><span class="figcap"><span class="fig--title-label">Figure 1. </span>A Layout With and
Without fragalign</span><br /><div class="imagecenter"><img class="image imagecenter" height="161" src="../graphics/fragalign_comparison.png" width="453" /></div><br /></div>
</li>
</ul>
</div>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><div class="section Subsection" id="idf09ff338-6438-4fea-a214-ea11e8c10cd2__id3eb8bc4d-2c4b-43d0-a976-7169920bc2ee"><h2 class="title Subheading sectiontitle">Example 1 - Combining Tags</h2><p class="p">This example finds fragments on
the opc layer that are on lines greater than 65 nm wide and further
than 65 nm from other features. All fragments which meet both requirements
are aligned. This approach runs more quickly than trying to align
twice, and is more effective at identifying long fragment spans
which can be aligned.</p>
<pre class="pre codeblock leveled"><code>newTag wideLayer -how INTERNAL &gt; 0.065 OPPOSITE INPUT1 opc_layer all
newTag wideGap -how EXTERNAL &gt; 0.065 OPPOSITE INPUT1 opc_layer all
newTag alignTags -how andTags wideLayer wideGap

fragalign opc_layer alignTags maxmove 0.005 maxpolywidth 0.040 \
	minedgelen 0.025</code></pre></div>
<div class="section Subsection" id="idf09ff338-6438-4fea-a214-ea11e8c10cd2__id5e198e98-e859-48ff-96dd-2e37231b78df"><h2 class="title Subheading sectiontitle">Example 2 - Preserving
Corner Fragments With priorityTag</h2><p class="p">Fragments near corners are sometimes
very sensitive to adjustments and should not be lengthened or shortened
during fragalign. Preserve these fragments by creating an identifying tag
set and using priorityTag. The protected fragments serve as the
starting point for aligning other fragments.</p>
<pre class="pre codeblock leveled"><code>newTag corners -how ORTAGS convex_corner concave_corner
fragalign opcLayer all maxmove 0.005 maxpolywidth 0.040 \
	priorityTag corners</code></pre><p class="p">The fragalign command in this example
adjusts all fragments on the opcLayer except for the fragments in
the corners tag set. This permits most of the fragments to be aligned
to the midpoint between fragments. The fragments on corners are
not changed but the fragment across the polygon from them may be
lengthened or shortened to line up with the end of a corner fragment.</p>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_TaggingCommands_ide141a5fb.html" title="Tagging commands work on specific subsets of fragments. These subsets are “tag sets.” You can define custom tag sets with the newTag commands and then modify the fragments in the sets using other tagging commands.">Tagging Commands</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_opcpro_useref"
                DocTitle = "Calibre® OPCpro™ User’s and Reference Manual"
                PageTitle = "fragalign"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_Fragalign_idf09ff338.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® OPCpro™ User’s and Reference Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>