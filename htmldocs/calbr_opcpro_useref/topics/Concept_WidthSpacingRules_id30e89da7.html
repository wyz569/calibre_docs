<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Width and Spacing Rules" />
<meta name="abstract" content="A typical set of constraints are external or internal spacing and width limits. Width and spacing rules define the minimum spacing and minimum width allowed for output shapes. Fragments are not moved if doing so would cause them or their two neighbors to violate these rules. If a violation exists before performing OPC, a fragment is not moved unless movement decreases the violation." />
<meta name="description" content="A typical set of constraints are external or internal spacing and width limits. Width and spacing rules define the minimum spacing and minimum width allowed for output shapes. Fragments are not moved if doing so would cause them or their two neighbors to violate these rules. If a violation exists before performing OPC, a fragment is not moved unless movement decreases the violation." />
<meta name="prodname" content="Calibre OPCpro User's and Reference Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-17" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="2" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_opcpro_useref" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="HighlightColor" content="mgc_wheat" />
<meta name="HighlightChanges" content="yes" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="Mar. 12, 2021" />
<meta name="Draft" content="NONE" />
<meta name="DocumentTitle" content="Calibre® OPCpro™ User’s and Reference Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10115,product.id.P10108,doc.type.documentation.ref" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id30e89da7-e7d4-4849-8c60-97bde408f14d" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Width and Spacing Rules</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Width and Spacing Rules" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10115,product.id.P10108,doc.type.documentation.ref" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id30e89da7-e7d4-4849-8c60-97bde408f14d">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Width and Spacing Rules</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">A typical set
of constraints are external or internal spacing and width limits.
Width and spacing rules define the minimum spacing and minimum width
allowed for output shapes. Fragments are not moved if doing so would
cause them or their two neighbors to violate these rules. If a violation
exists before performing OPC, a fragment is not moved unless movement
decreases the violation.</span>
</div>
<p class="p">It is important to note that checking
occurs between nearby output shapes, which may be on the same polygon
or may be on different polygons.</p>
<p class="p">There are two different methods you can use
to define width and spacing rules: </p>
<ul class="ul"><li class="li" id="id30e89da7-e7d4-4849-8c60-97bde408f14d__id13214456-2758-4255-a217-4abf5127cfe4"><p class="p"><a class="xref fm:HeadingOnly" href="#id30e89da7-e7d4-4849-8c60-97bde408f14d__id21b40981-c14b-4277-a6e8-dce7bdc928ae">Method 1: OPC_MIN_INTERNAL, OPC_MIN_EXTERNAL, and opcMinCheckTag</a> </p>
</li>
<li class="li" id="id30e89da7-e7d4-4849-8c60-97bde408f14d__id03094bc8-3944-4044-806a-186d0e3aefb6"><p class="p"><a class="xref fm:HeadingOnly" href="#id30e89da7-e7d4-4849-8c60-97bde408f14d__id907a6301-25aa-456f-8c89-383f3af72c5f">Method 2: MRC_RULE</a> </p>
</li>
</ul>
<div class="section Subsections" id="id30e89da7-e7d4-4849-8c60-97bde408f14d__idf3673678-da4b-4663-b742-f028932879ce"><div class="section Subsection" id="id30e89da7-e7d4-4849-8c60-97bde408f14d__id21b40981-c14b-4277-a6e8-dce7bdc928ae"><h2 class="title Subheading sectiontitle">Method 1: OPC_MIN_INTERNAL,
OPC_MIN_EXTERNAL, and opcMinCheckTag</h2><div class="note note"><span class="notetitle">Note:</span> <p class="p">As of version 2015.4, this method is deprecated.
Use MRC_RULE (method 2) instead.</p>
</div>
<p class="p"><span class="ph FontProperty HeadingLabel">How the Checks Work. </span>The
Calibre OPCpro batch tool checks for spacing or width violations by
creating keep-out measurement regions. During OPC, edges are not
moved if moving them would bring them inside the measurement region
for a nearby, non-perpendicular edge or would bring its two neighbors
inside the measurement region for any nearby edge. </p>
<p class="p">The keep-out regions
are defined by the minimum spacing or width distance and how the distance
is measured. The OPC_MIN_INTERNAL and OPC_MIN_EXTERNAL variables
and the opcMinCheckTag command define these metrics. </p>
<p class="p">The following examples illustrate how the edge
and its neighbors are checked.</p>
<ul class="ul"><li class="li" id="id30e89da7-e7d4-4849-8c60-97bde408f14d__id9001bfc1-59e9-4726-ac41-b1752d3ced93"><p class="p"><span class="ph FontProperty HeadingLabel">Example 1</span> —
When moving a fragment or edge would result in its two neighbors violating
OPC_MIN_INTERNAL or OPC_MIN_EXTERNAL, the fragment is not allowed
to move. </p>
<p class="p">In the illustration that follows, where edge
A moving outwards would result in B and C having an OPC_MIN_INTERNAL
violation, A is no longer allowed to move.</p>
<div class="fig fignone" id="id30e89da7-e7d4-4849-8c60-97bde408f14d__id563532e0-f073-41eb-963b-615a5eedfe3b"><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/using2a.png" /></div><br /></div>
</li>
<li class="li" id="id30e89da7-e7d4-4849-8c60-97bde408f14d__id291214df-f3fa-4bae-88a6-7070150bb31a"><p class="p"><span class="ph FontProperty HeadingLabel">Example 2</span> —
When moving an edge with neighbor fragments within CORNERDIST for
either OPC_MIN_EXTERNAL or OPC_MIN_INTERNAL would cause the edge
to become shorter than the space distance for OPC_MIN_EXTERNAL or OPC_MIN_INTERNAL,
the edge is not allowed to move.</p>
<p class="p">For example, in the following illustration,
if xy is less than CORNERDIST, then ax can only move as long as
xy remains greater than or equal to the OPC_MIN_EXTERNAL space or
OPC_MIN_INTERNAL space. </p>
<div class="fig fignone" id="id30e89da7-e7d4-4849-8c60-97bde408f14d__id218aae25-be42-4bdf-8045-bff7c6bf8f5d"><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/using3a.png" /></div><br /></div>
</li>
</ul>
<p class="p">The OPC_MIN_INTERNAL and OPC_MIN_EXTERNAL variables
set up global constraints. The opcMinCheckTag command sets up constraints
specific to groups of fragments.</p>
<p class="p"><span class="ph FontProperty HeadingLabel">Prioritizing Checks.</span> When
you define different width or spacing rules for different types
of fragments, you create a situation in which multiple rules can
apply to the same fragment. If a fragment falls under multiple rules,
the rule with the highest priority is used. Most of the rules have
predefined priorities; however, you define the priority for rules
you create using opcMinCheckTag.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="id30e89da7-e7d4-4849-8c60-97bde408f14d__id15f42695-3313-40a1-ac36-3ada9c8c52f8" class="table" frame="border" border="1" rules="cols"><caption><span class="tablecap"><span class="table--title-label">Table 1. </span>Priorities for Width and Spacing Rules</span></caption><colgroup><col style="width:2.369in" /><col style="width:1.855in" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d42474e208"><p class="p">Rule</p>
</th>
<th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d42474e211"><p class="p">Priority</p>
</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d42474e208 "><p class="p">OPC_MIN_EXTERNAL</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d42474e211 "><p class="p">-1</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d42474e208 "><p class="p">OPC_MIN_INTERNAL</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d42474e211 "><p class="p">-1</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d42474e208 "><p class="p">opcMinCheckTag</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d42474e211 "><p class="p">0 - 99 (user defined)</p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p"><span class="ph FontProperty HeadingLabel">Using CORNERDIST.</span> OPC_MIN_EXTERNAL
and OPC_MIN_INTERNAL also define whether or not the application
enforces the minimum width and spacing rules with respect to nearby
edges on the same polygon. The CORNERDIST keyword for these variables
defines how far a fragment must be from a corner in order to be
considered by the check, and is expressed in microns. The default
is infinity, which means nearby edges can move during OPC, even
if they create notches or jogs that violate the width or spacing
rules. </p>
<p class="p">The CORNERDIST option applies only to fragments
that meet these conditions:</p>
<ul class="ul"><li class="li" id="id30e89da7-e7d4-4849-8c60-97bde408f14d__id93632c7e-b1f3-4eeb-9b9e-196a6f320a5a"><p class="p">They are on the same polygon as the fragment
generating the measurement region.</p>
</li>
<li class="li" id="id30e89da7-e7d4-4849-8c60-97bde408f14d__id4941c5a8-f5b4-4913-a23c-ab3695a7dd37"><p class="p">Before OPC, they are not collinear with
the fragment generating the check region.</p>
</li>
<li class="li" id="id30e89da7-e7d4-4849-8c60-97bde408f14d__id52b6e73d-758a-492d-b880-e113eda33e6c"><p class="p">They are inside the check region either
before or after OPC.</p>
</li>
<li class="li" id="id30e89da7-e7d4-4849-8c60-97bde408f14d__idf5ac20d9-857b-43b0-9df2-4e20d1c18e3c"><p class="p">The distance to the edge containing the
fragment generating the check region is greater than CORNERDIST.</p>
</li>
</ul>
<p class="p">There are further exceptions to the CORNERDIST
option. When LITHO_MRC_MODE is 1 (the default value), a CORNERDIST
violation is excluded if:</p>
<ul class="ul"><li class="li" id="id30e89da7-e7d4-4849-8c60-97bde408f14d__ida5c99be8-849f-4a2d-8250-30a90f32b030"><p class="p">The edges causing the error are separated
by less than the CORNERDIST value.</p>
</li>
<li class="li" id="id30e89da7-e7d4-4849-8c60-97bde408f14d__iddd3a1017-a32c-4e1e-8adb-d849969a06b7"><p class="p">The fragments that they are derived from
are part of the same polygon loop.</p>
</li>
<li class="li" id="id30e89da7-e7d4-4849-8c60-97bde408f14d__id3c22d20a-faac-489a-94ca-fe53ee1d0dad"><p class="p">The fragments that they are derived from
are not facing each other.</p>
</li>
</ul>
</div>
<div class="section Subsection" id="id30e89da7-e7d4-4849-8c60-97bde408f14d__id907a6301-25aa-456f-8c89-383f3af72c5f"><h2 class="title Subheading sectiontitle">Method 2: MRC_RULE</h2><p class="p">The second method for defining space and width
rules is to use the MRC_RULE command. <a class="xref fm:HeadingOnly" href="Command_MrcRule_id5566bb9d.html#id5566bb9d-05db-4927-91c1-68d9da46fd31__Command_MrcRule_id5566bb9d.xml#id5566bb9d-05db-4927-91c1-68d9da46fd31" title="Sets constraints for EXTERNAL and INTERNAL rule checks for specific tags.">MRC_RULE</a> allows you to set up external
and internal constraints for each tag. The MRC_RULE keyword provides
the following advantages over OPC_MIN_EXTERNAL or OPC_MIN_INTERNAL:</p>
<ul class="ul"><li class="li" id="id30e89da7-e7d4-4849-8c60-97bde408f14d__id679438c3-fbab-48b4-88a7-8fbd6db7a433"><p class="p">You can filter edges based on length.</p>
</li>
<li class="li" id="id30e89da7-e7d4-4849-8c60-97bde408f14d__ideef606bd-4530-489f-8ddf-03a5d5d5b0a4"><p class="p">You can filter edges based on projection.</p>
</li>
<li class="li" id="id30e89da7-e7d4-4849-8c60-97bde408f14d__id17e3f7c2-b8a2-43dd-97f7-16909e3bcd4c"><p class="p">You can specify limits from one tag to
another tag.</p>
</li>
<li class="li" id="id30e89da7-e7d4-4849-8c60-97bde408f14d__id5092dd1e-fd1e-4da7-9166-53388d43ecdc"><p class="p">A “default” check can be defined for
all structures on the same mask. Tags from exposures on different
masks are not compared by default, but can be forced to be compared
using MRC_RULE. </p>
</li>
<li class="li" id="id30e89da7-e7d4-4849-8c60-97bde408f14d__id5a0a6824-78b9-42bb-9192-fe9f4c85af00"><p class="p">Tags on the same mask can have the check
between them disabled by setting MRC_RULE … OFF. </p>
</li>
</ul>
<p class="p">The <a class="xref fm:HeadingOnly" href="Command_LithoPromotionTiling_idc9b74a04.html#idc9b74a04-56e0-4794-ade1-02502ece593f__Command_LithoPromotionTiling_idc9b74a04.xml#idc9b74a04-56e0-4794-ade1-02502ece593f" title="Enables MRC_RULE syntax.">LITHO_PROMOTION_TILING</a> environment variable must be explicitly
set to 1 in order to use the MRC_RULE syntax, as shown in the following
example:</p>
<pre class="pre codeblock leveled"><code>#----- Arbitrary Commands Can Follow This Line -----
sse LITHO_PROMOTION_TILING 1

MRC_RULE EXTERNAL poly poly { 
	USE 0.160 EUCLIDEAN 
	LENGTH 0.01 USE 0.030 OPPOSITE 
	LENGTH 0.1 USE  0.050 EUCLIDEAN
	PROJECTING
	USE 0.160 EUCLIDEAN 
	LENGTH 0.02 USE 0.050 EUCLIDEAN 
}
</code></pre><p class="p">See “<a class="xref fm:HeadingAndPage" href="Command_MrcRule_id5566bb9d.html#id5566bb9d-05db-4927-91c1-68d9da46fd31__Command_MrcRule_id5566bb9d.xml#id5566bb9d-05db-4927-91c1-68d9da46fd31" title="Sets constraints for EXTERNAL and INTERNAL rule checks for specific tags.">MRC_RULE</a>” for details on syntax and for
examples of common usage such as notches and feature-to-feature
checks.</p>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_EdgeMovementConstraints_ide3f5e940.html" title="With the Calibre OPCpro batch tool, you define both generic and specific constraints on how edges are moved to correct EPEs. Generic constraints restrict movement of all edges on the layer being corrected. Specific constraints restrict movement of individual edges or sets of edges.">Edge Movement Constraints</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_opcpro_useref"
                DocTitle = "Calibre® OPCpro™ User’s and Reference Manual"
                PageTitle = "Width and Spacing Rules"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_WidthSpacingRules_id30e89da7.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® OPCpro™ User’s and Reference Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>