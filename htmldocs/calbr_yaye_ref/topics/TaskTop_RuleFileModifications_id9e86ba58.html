<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Rule File Modifications" />
<meta name="abstract" content="You must make modifications to your SVRF rule file to specify via insertion and expand via enclosure operations." />
<meta name="description" content="You must make modifications to your SVRF rule file to specify via insertion and expand via enclosure operations." />
<meta name="prodname" content="Calibre YieldAnalyzer and YieldEnhancer User's and Reference Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-26" />
<meta name="Topline" content="Siemens EDA" />
<meta name="GenerateOnlyChangedTopics" content="no" />
<meta name="IncludeDraftCommentsInChangeLog" content="2021.2" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="HighlightChanges" content="yes" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="2" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_yaye_ref" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="15" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 24, 2021" />
<meta name="Draft" content="NONE" />
<meta name="DocumentTitle" content="Calibre® YieldAnalyzer and YieldEnhancer User’s and Reference Manual" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.ref,doc.type.documentation.user,product.version.v2021.2,product.id.P11426" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="NONE" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id9e86ba58-bf96-4ed4-89d4-c1cb96db4e8b" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Rule File Modifications</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Rule File Modifications" />
<meta name="attributes" content="doc.type.documentation.ref,doc.type.documentation.user,product.version.v2021.2,product.id.P11426" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id9e86ba58-bf96-4ed4-89d4-c1cb96db4e8b">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Rule File Modifications</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><span class="shortdesc">You must make modifications to your SVRF
rule file to specify via insertion and expand via enclosure operations.</span>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand" id="id9e86ba58-bf96-4ed4-89d4-c1cb96db4e8b__id06ca0a2e-10b9-436f-a798-caafcb1b9aa5"><span class="ph cmd">Open your
rule file in a text editor. If it is encrypted, note that there
are two types of commands: encrypted and non-encrypted. The following
steps apply to the non‑encrypted section.</span></li>
<li class="li step stepexpand" id="id9e86ba58-bf96-4ed4-89d4-c1cb96db4e8b__idac1b4bc1-5c97-4977-b680-7d685f0b5fd8"><span class="ph cmd">Specify
the database type in a <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Layout System', 'svrf_ur'); return false;">Layout System</a> statement
to match your input database, and define the path with <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Layout Path', 'svrf_ur'); return false;">Layout Path</a>.
For example,</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>LAYOUT SYSTEM LEFDEF
LAYOUT PATH $LEF_PATH1 $DEF_PATH1</code></pre></div></li>
<li class="li step stepexpand" id="id9e86ba58-bf96-4ed4-89d4-c1cb96db4e8b__id28b7b8b6-3637-4c06-8981-cdbd545ffde0"><span class="ph cmd">Modify
the values of the <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Layout Primary', 'svrf_ur'); return false;">Layout Primary</a>, <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'DRC Results Database', 'svrf_ur'); return false;">DRC Results Database</a>, and <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'DRC Summary Report', 'svrf_ur'); return false;">DRC Summary Report</a> statements as necessary to match your data and design
environment.</span></li>
<li class="li step stepexpand" id="id9e86ba58-bf96-4ed4-89d4-c1cb96db4e8b__idefcb88dc-cfe8-4b3c-bc8f-6a4e48c2c872"><span class="ph cmd">Add SVRF
statements to specify DRC checks, DFM checks, and the DFM database.
For example:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>GROUP DFM_CHECKS ?
GROUP DRC_CHECKS ?
DFM SELECT CHECK  DFM_CHECKS
DRC SELECT CHECK  DRC_CHECKS
DFM DATABASE dfmdb OVERWRITE</code></pre></div></li>
<li class="li step stepexpand" id="id9e86ba58-bf96-4ed4-89d4-c1cb96db4e8b__id8388633c-5583-4b31-8e4d-79ff95bb788b"><span class="ph cmd">If you
have your own via insertion deck, you can use the following steps
to convert it for use in this flow. The goal here is to add extra
code without changing the original via insertion deck in order to
make both your via insertion and backannotation flow work. There
are four suggested sections of script to add into the existing via
insertion deck:</span><ol type="a" class="ol substeps"><li class="li substep" id="id9e86ba58-bf96-4ed4-89d4-c1cb96db4e8b__idad024ff4-0c9a-417f-a471-5104cb35611d"><span class="ph cmd">Add
a #DEFINE keyword such as #DEFINE DB_BACK_ANNOTATION to enable Calibre
to execute the YieldEnhancer backannotation-related script.</span></li>
<li class="li substep" id="id9e86ba58-bf96-4ed4-89d4-c1cb96db4e8b__id89d01a52-d115-437b-95cd-2eeed8ab1e19"><span class="ph cmd">Add
SVRF statements to enable net name case sensitivity.</span><div class="itemgroup info SubStepInfo"><pre class="pre codeblock leveled"><code>#IFDEF DB_BACK_ANNOTATION
LAYOUT CASE YES
LAYOUT PRESERVE CASE YES
#ENDIF</code></pre></div></li>
<li class="li substep" id="id9e86ba58-bf96-4ed4-89d4-c1cb96db4e8b__id9aaa600d-1e68-492b-b7cc-44492862102e"><span class="ph cmd">Add
SVRF code to define layer mapping and distinguish between drawing
layers and obstruction layers.</span><div class="itemgroup info SubStepInfo"><pre class="pre codeblock leveled"><code>#IFDEF DB_BACK_ANNOTATION
LAYER MAP 31 DATATYPE 0 5001  // Mapping (31;0) to 5001 for M1i
LAYER MAP 31 DATATYPE 256 501 // Mapping (31;256) to 501 for M1i, 
                              // fdi2gds convert LEF Obstruction
LAYER M1i_EXCL_OBS 5001 // Metal1 layer Exclude LEF Obstruction
..
..
LAYER MAP 51 DATATYPE 0 6001  // Mapping (51;0) to 6001 for VIA1i
LAYER MAP 51 DATATYPE 256 601 // Mapping (51;256) to 601 for VIA1i, 
                              // fdi2gds convert LEF Obstruction
LAYER VIA1i_EXCL_OBS 6001 // Define connect for M2 to M1, Exclude
                          // LEF Obstruction
#ENDIF</code></pre></div></li>
<li class="li substep" id="id9e86ba58-bf96-4ed4-89d4-c1cb96db4e8b__id8dc2e8b1-d77f-4832-b0f5-1401376e42cd"><span class="ph cmd">Add
connectivity and collect added via layers and nodal information
with DFM RDB:</span><div class="itemgroup info SubStepInfo"><pre class="pre codeblock leveled"><code>#IFDEF DB_BACK_ANNOTATION // COLLECT DB FOR DATA BACKANNOTATION
VIRTUAL CONNECT NAME "?"
DRC CELL TEXT YES
LAYOUT PROPERTY TEXT 10
TEXT LAYER 31 32 33 34 35 36 37 38 39
TEXT DEPTH PRIMARY
TEXT PRINT MAXIMUM 100
DRC INCREMENTAL CONNECT YES
//DFM TRANSITION
OAM1_V1 = (AM1 AND W1RightAM1V1a) AND AM1ForV1
OAM2_V1 = (AM2 AND W1RightAM2V1a) AND AM2ForV1
OAM2_V2 = (AM2 AND W1RightAM2V2a) AND AM2ForV2
..
OAM8_V7 = (AM8 AND W1RightAM8V7a) AND AM8ForV7
OAM8_V8 = (AM8 AND W1RightAM8V8a) AND AM8ForV8
OAM9_V8 = (AM9 AND W1RightAM9V8a) AND AM9ForV8
ATTACH 31 M1i_EXCL_OBS
..
ATTACH 39 M9i_EXCL_OBS
OAV1 = OAM1_V1 AND AVIA1
..
OAV8 = OAM8_V8 AND AVIA8
CONNECT M1i_EXCL_OBS M2i_EXCL_OBS BY VIA1i_EXCL_OBS
..
CONNECT M8i_EXCL_OBS M9i_EXCL_OBS BY VIA8i_EXCL_OBS
CONNECT M1i_EXCL_OBS OAM1_V1
CONNECT M2i_EXCL_OBS OAM2_V1
CONNECT M2i_EXCL_OBS OAM2_V2
..
CONNECT M8i_EXCL_OBS OAM8_V7
CONNECT M8i_EXCL_OBS OAM8_V8
CONNECT M9i_EXCL_OBS OAM9_V8
CONNECT OAM1_V1 OAM2_V1 BY OAV1
..
CONNECT OAM8_V8 OAM9_V8 BY OAV8
dfm_rdb_AVIA1 {
DFM RDB OAM1_V1 "topbo.db" OAM2_V1 OAV1 NOPSEUDO NOEMPTY TRANSITION SAME CELL NODAL MAXIMUM ALL}
..
dfm_rdb_AVIA8 {
DFM RDB OAM8_V8 "topbo.db" OAM9_V8 OAV8 NOPSEUDO NOEMPTY TRANSITION SAME CELL NODAL MAXIMUM ALL}
#ENDIF</code></pre><p class="p">In this example script:</p>
<ul class="ul"><li class="li" id="id9e86ba58-bf96-4ed4-89d4-c1cb96db4e8b__idd029f1f4-6372-4f76-99b9-eb2894448a29"><p class="p">Property
10 that stores net name information is treated as input layout database text
using the Layout Property Text statement.</p>
</li>
<li class="li" id="id9e86ba58-bf96-4ed4-89d4-c1cb96db4e8b__id70b6c03b-55e7-43ad-8cdc-c0f3ecf159b6"><p class="p">OAM2_V1 is
derived from AM2 (the AM2 layer is added metal2 from both VIA1 and
VIA2 insertion; the AM2 layer is also a DRC-clean layer that is
a derived layer from DFM Transition, or your own SVRF derivation,
plus an extended DRC check). OAM2_V1 is added M2 for VIA1 insertion.
OAV1 is added VIA1; OAV1 is also DRC clean.</p>
</li>
<li class="li" id="id9e86ba58-bf96-4ed4-89d4-c1cb96db4e8b__idf9d4368a-5a7d-43a1-822a-8936afff3658"><p class="p">Text is passed
into M1i_EXCL_OBS (does not include LEF OBSTRUCTION), and connectivity
is established by a Connect statement for M1i_EXCL_OBS, M2i_EXCL_OBS,
VIA1i_EXCL_OBS …, OAM1_V1, OAM2_V1, OAV1 and so on.</p>
</li>
<li class="li" id="id9e86ba58-bf96-4ed4-89d4-c1cb96db4e8b__id528f8430-71dd-41c0-a54e-eff27583bbe5"><p class="p">Added via layers
are collected as a tuple (added metal1 for via1 insertion “OAM1_V1”,
added metal2 for via1 insertion “OAM2_V1”, and added via1 “OAV1”)
containing nodal information with the DFM RDB command. The order
of layers placed in the DFM RDB command must be as follows:</p>
<pre class="pre codeblock leveled"><code>   DFM RDB OAM1_V1 "topbo.db" OAM2_V1 OAV1 NOPSEUDO NOEMPTY    TRANSITION SAME CELL NODAL MAXIMUM ALL</code></pre></li>
</ul>
</div></li>
</ol>
</li>
<li class="li step stepexpand" id="id9e86ba58-bf96-4ed4-89d4-c1cb96db4e8b__id64fc747e-c399-49ec-b9c8-83c8af5432a2"><span class="ph cmd">If your
input database format is LEF/DEF, change the values of Precision
and Resolution to appropriately correspond to the DATABASE MICRONS
value in the LEF file and the UNITS DISTANCE MICRONS value in the
DEF file.</span><div class="itemgroup info StepInfo"><p class="p">For example, if both values in the LEF and DEF files
are 1000, the database unit in the converted GDS should be 1000.
This translates into a Precision and Resolution ratio equal to 1000/5,
or Precision 1000 and Resolution 5.</p>
<p class="p">Alternatively, if one of the values in the LEF or DEF file is
2000, the database unit in the converted GDS should be 2000. This
translates into a Precision and Resolution ratio equal to 2000/10,
or Precision 2000 and Resolution 10.</p>
</div></li>
<li class="li step stepexpand" id="id9e86ba58-bf96-4ed4-89d4-c1cb96db4e8b__id7e523122-e6fe-4d80-8d05-e6c765ed77c5"><span class="ph cmd">Save and
close the rule file.</span></li>
</ol>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_Stage1DefiningInputsViaInsertionEnclosureExpansion_id78068bf4.html" title="The first stage involves setting up your environment, preparing a rule file, and creating a layermap file prior to using Calibre YieldEnhancer to insert redundant vias and expand via enclosures.">Stage 1: Defining Inputs for Via Insertion and Enclosure Expansion</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_yaye_ref"
                DocTitle = "Calibre® YieldAnalyzer and YieldEnhancer User’s and Reference Manual"
                PageTitle = "Rule File Modifications"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_RuleFileModifications_id9e86ba58.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® YieldAnalyzer and YieldEnhancer User’s and Reference Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>