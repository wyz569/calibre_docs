<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="DFM Via Shift" />
<meta name="abstract" content="Improves via location and metal coverage without introducing MRC violations. Requires DFM Spec Via Shift for MRC constraint specification. Uses a Calibre YieldEnhancer license." />
<meta name="description" content="Improves via location and metal coverage without introducing MRC violations. Requires DFM Spec Via Shift for MRC constraint specification. Uses a Calibre YieldEnhancer license." />
<meta name="prodname" content="Calibre YieldAnalyzer and YieldEnhancer User's and Reference Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-26" />
<meta name="Topline" content="Siemens EDA" />
<meta name="GenerateOnlyChangedTopics" content="no" />
<meta name="IncludeDraftCommentsInChangeLog" content="2021.2" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="HighlightChanges" content="yes" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="2" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_yaye_ref" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="15" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 24, 2021" />
<meta name="Draft" content="NONE" />
<meta name="DocumentTitle" content="Calibre® YieldAnalyzer and YieldEnhancer User’s and Reference Manual" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.ref,doc.type.documentation.user,product.version.v2021.2,product.id.P11426" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="NONE" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id6ff4f16a-b113-4764-b682-a64967070805" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>DFM Via Shift</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="DFM Via Shift" />
<meta name="attributes" content="doc.type.documentation.ref,doc.type.documentation.user,product.version.v2021.2,product.id.P11426" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="id6ff4f16a-b113-4764-b682-a64967070805">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">DFM Via Shift</h1>
<div class="body refbody CommandRefBody"><div class="abstract CommandRefAbstract"><p class="p ContextMGC">SVRF Commands:
Layer operation</p>
<p class="shortdesc">Improves via location and metal
coverage without introducing MRC violations. Requires DFM Spec Via Shift
for MRC constraint specification. Uses a Calibre YieldEnhancer license.</p>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName RequiredReplaceable">shifted_via_layer</span> = <span class="keyword ParameterName Required">DFM VIA SHIFT</span><br />
[<span class="keyword ParameterName OptionalReplaceable">map_option</span>]<br />
‘<span class="keyword ParameterName Required">[</span>’ <span class="keyword ParameterName RequiredReplaceable">via_shift_args</span> ‘<span class="keyword ParameterName Required">]</span>’...<br />
[<span class="keyword ParameterName Optional">GRID</span> <span class="keyword ParameterName OptionalReplaceable">value</span>]<br />
[<span class="keyword ParameterName Optional">INVALID_VIA_MIN_SPACING</span> <span class="keyword ParameterName OptionalReplaceable">invalid_space_value</span>]<br />
[<span class="keyword ParameterName OptionalReplaceable">marker_layer</span>‘(’<span class="keyword ParameterName Optional">MASK</span> [<span class="keyword ParameterName OptionalReplaceable">oversize</span>] | <span class="keyword ParameterName Optional">MARKER</span> <span class="keyword ParameterName OptionalReplaceable">marker_size</span>‘)’]<br />
[<span class="keyword ParameterName Optional">SPEC</span> <span class="keyword ParameterName OptionalReplaceable">spec_name</span> {<span class="keyword ParameterName OptionalReplaceable">input_via_layer1</span> <span class="keyword ParameterName OptionalReplaceable">input_via_layer2</span> |<br />
    ‘(’<span class="keyword ParameterName OptionalReplaceable">input_via_layer_set</span>‘)’ <span class="keyword ParameterName OptionalReplaceable">input_via_layer |</span><span class="keyword ParameterName OptionalReplaceable"></span><br />
    <span class="keyword ParameterName OptionalReplaceable">input_via_layer</span> ‘(’<span class="keyword ParameterName OptionalReplaceable">input_via_layer_set</span>‘)’ |<br />
   ‘(’<span class="keyword ParameterName OptionalReplaceable">input_via_layer_set1</span>‘)’ ‘(’<span class="keyword ParameterName OptionalReplaceable">input_via_layer_set2</span>‘)’}<span class="keyword ParameterName OptionalReplaceable"></span>]...<br />
</p>
</div>
<div class="section UsageSet"><p class="lines UsageLine">Where <span class="keyword ParameterName RequiredReplaceable">via_shift_args</span> has the following syntax:</p>
<p class="lines UsageLine">   <span class="keyword ParameterName RequiredReplaceable">input_via_layer</span>‘(’<span class="keyword ParameterName Required">VIA</span> [<span class="keyword ParameterName Optional">MAX_SHIFTXY</span>] {<span class="keyword ParameterName RequiredReplaceable">max_shift_value1</span>[::<span class="keyword ParameterName OptionalReplaceable">max_shift_value2</span>]<br />
       [<span class="keyword ParameterName OptionalReplaceable">via_layer_options</span>]}‘)’<br />
   [{<span class="keyword ParameterName OptionalReplaceable">lower_metal_layer</span>‘(’LOWER‘)’ <span class="keyword ParameterName OptionalReplaceable">upper_metal_layer</span>‘(’UPPER‘)’} |<br />
      <span class="keyword ParameterName OptionalReplaceable">common_metal_layer</span>‘(’COMMON‘)’]<br />
   [<span class="keyword ParameterName OptionalReplaceable">exclusion_layer</span>‘(’<span class="keyword ParameterName Optional">EXCLUSION</span> [<span class="keyword ParameterName Optional">NO_CORNER_CHOP_OVERLAP</span>]‘)’]<br />
   [SPEC <span class="keyword ParameterName OptionalReplaceable">spec_name</span>]<br />
   [{TARGET_ENClosure <span class="keyword ParameterName OptionalReplaceable">enc_value</span>[::<span class="keyword ParameterName OptionalReplaceable">enc_value_long</span>]} |<br />
      {<span class="keyword ParameterName Optional">TARGET_ENClosureXY</span> <span class="keyword ParameterName OptionalReplaceable">enc_value</span>[::<span class="keyword ParameterName OptionalReplaceable">enc_value_y</span>]}]</p>
</div>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="id6ff4f16a-b113-4764-b682-a64967070805__id345218b5-7b80-4fb3-87bc-91b9d3f8081b"><span class="keyword ParameterName RequiredReplaceable">shifted_via_layer</span></dt>
<dd class="dd ArgumentDescription"><p class="p">A required output layer containing the relocated
via shapes.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id6ff4f16a-b113-4764-b682-a64967070805__id88f7e90a-199c-426c-8a19-93e7f92c38fc"><span class="keyword ParameterName OptionalReplaceable">map_option</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set that outputs additional
layers containing vias with invalid size and shape from the input
layer or separators between via geometries. The map_option arguments
are specified as one argument per DFM Via Shift instance. The DFM
Via Shift operation and required arguments can be specified with
only the map_option for input layer analysis (no shifted vias are
output).</p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="id6ff4f16a-b113-4764-b682-a64967070805__ide07b5eb7-12ac-40b1-b1c6-0c1b8319001f"><p class="p Opt"><span class="keyword ParameterName Optional">INVALID_VIA_SIZE</span> —
If specified, the output layer contains vias from the input layer that
do not match the user‑specified size.</p>
</li>
<li class="li ArgOption" id="id6ff4f16a-b113-4764-b682-a64967070805__idd3e5e396-7a61-42a5-8fb5-bfbbd1ba4dba"><p class="p Opt">INVALID_VIA_SHAPE
— If specified, the output layer contains vias from the input layer
that are neither square nor rectangular.</p>
</li>
<li class="li ArgOption" id="id6ff4f16a-b113-4764-b682-a64967070805__id6eabdc1e-8a57-4e77-ac42-b8b9d0185f8f"><p class="p Opt"><span class="keyword ParameterName Optional">CLUSTER_SEPARATORS</span> —
If specified, the output layer contains separators (edge pairs of
type‑3) connecting vias that form a cluster, where a cluster is
a group of vias that interact during the shift. This layer can be
used to select certain sizes of via clusters. The clusters are determined
using input specifications such as MRC constraints and max_shift.</p>
</li>
</ul>
<p class="p">If map_option is not specified, the output layer contains shifted
vias.</p>
<p class="p">See “<a class="xref fm:HeadingAndPage" href="#id6ff4f16a-b113-4764-b682-a64967070805__idcc3bbed5-b46a-4e8c-9fb4-1d0f9d62af14">Example 4 — Layers for Input Layout Analysis</a>”.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id6ff4f16a-b113-4764-b682-a64967070805__id50045ec2-fb84-4420-8889-92d06bfa9e47">‘<span class="keyword ParameterName Required">[</span>’ <span class="keyword ParameterName RequiredReplaceable">via_shift_args</span> ‘<span class="keyword ParameterName Required">]</span>’</dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument set, requiring enclosing
brackets. The via_shift_args set requires an input_via_layer, the
maximum shift distance, and a via size specification (for movable layers).
Optional arguments include via layer options, via enclosing metal
layers, an optional exclusion_layer, an optional SPEC keyword referencing
the rules for shifting vias, and an optional target for the via
enclosure distance. Any number of via_shift_args sets may be specified.</p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="id6ff4f16a-b113-4764-b682-a64967070805__ide78eef47-c12f-4d52-9f9f-30386498752b"><p class="p Opt"><span class="keyword ParameterName RequiredReplaceable">input_via_layer</span>‘(’<span class="keyword ParameterName Required">VIA</span> {[<span class="keyword ParameterName Optional">MAX_SHIFTXY</span>] <span class="keyword ParameterName RequiredReplaceable">max_shift_value1</span>[::<span class="keyword ParameterName OptionalReplaceable">max_shift_value2</span>] [<span class="keyword ParameterName OptionalReplaceable">via_layer_options</span>]}‘)’</p>
<p class="p">A required keyword and options
specifying the maximum distance vias on the input_via_layer may
be shifted to their new location. The input_via_layer must be a polygon
layer (layer type-1).</p>
<p class="p">The DFM Via Shift command ignores polygons with skew edges or
edge constraints not equal to four (!=4), and in these cases, the
MRC constraints are not applied.</p>
<p class="p">Vias of different types or sizes must be specified on different
input_via_layers. The VIA keyword must be specified with a value:</p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="id6ff4f16a-b113-4764-b682-a64967070805__iddb6a960f-7c86-4c80-917a-c5fdd5040504"><p class="p Opt">[<span class="keyword ParameterName Optional">MAX_SHIFTXY</span>] <span class="keyword ParameterName RequiredReplaceable">max_shift_value1</span>[::<span class="keyword ParameterName OptionalReplaceable">max_shift_value2</span>]
— A required value and options in user units specifying the maximum
distance that the via can move in the horizontal and vertical direction.
The maximum shift values are specified as positive numbers or zero.
All non‑zero values must be an integral multiple of the <span class="ph FontProperty emphasis">database precision</span>.
If max_shift_value1 is non-zero, the SPEC, LOWER and UPPER, or COMMON
keywords must be specified.</p>
<p class="p">If the MAX_SHIFTXY option is specified before the maximum shift
values, then the maximum shift is in the x‑ and y‑direction where
max_shift_value1 is the maximum shift in the x‑direction and max_shift_value2
is the maximum shift in the y‑direction for both square and rectangular
vias.</p>
<p class="p">If the MAX_SHIFTXY option is <span class="ph FontProperty emphasis">not</span> specified,
then max_shift_value1 is the maximum shift for the via edge. For
rectangular vias only, if max_shift_value2 is specified, then max_shift_value1
specifies the maximum shift in the direction perpendicular to the
short edge of the via, and max_shift_value2 specifies the maximum
shift in the direction perpendicular to the long edge of the via; otherwise,
max_shift_value1 specifies the maximum shift for all sides of square and
rectangular vias.</p>
<p class="p">The via layer is unmovable if the maximum shift in both the horizontal
and vertical direction is zero. Specify an unmovable via layer if
it interacts with a shifted via layer and you want to prevent violations
between the two via layers. Specifying zero movement disables the
SPEC, <span class="keyword ParameterName Optional">TARGET_ENClosure</span>,
LOWER, UPPER, and COMMON keywords. At least one movable input_via_layer
must be specified in a DFM Via Shift operation.</p>
</li>
<li class="li ArgOption" id="id6ff4f16a-b113-4764-b682-a64967070805__idb8ec099f-909d-4faa-9734-a3c77c60dd4c"><p class="p Opt"><span class="keyword ParameterName OptionalReplaceable">via_layer_options </span> </p>
<p class="p"><span class="keyword ParameterName Optional">SIZE</span> <span class="keyword ParameterName OptionalReplaceable">size_value</span>[::<span class="keyword ParameterName OptionalReplaceable">size_value_long</span>]
— A keyword that is required for movable via layers and optional
for unmovable via layers. This keyword specifies the size of the
via, where size_value is the short‑edge length and size_value_long
is the long‑edge length of the via. For square vias, only size_value
is needed. For rectangular vias, both size_value and size_value_long
are required. The values are in user units and are positive numbers
that must be an integral multiple of the <span class="ph FontProperty emphasis">database precision</span>.
If specified, all vias on via layer should be of the given size. Vias
that do not match the given size are filtered. See also INVALID_VIA_SIZE and
INVALID_VIA_MIN_SPACING.</p>
<p class="p">See also “<a class="xref fm:HeadingAndPage" href="Command_DFMSPECVIASHIFT_idc6e2e1a3.html#idc6e2e1a3-1d75-479d-b7aa-1d524d3901c6__Command_DFMSPECVIASHIFT_idc6e2e1a3.xml#idc6e2e1a3-1d75-479d-b7aa-1d524d3901c6" title="Specifies MRC constraints to improve via location and metal coverage, preventing MRC violations. Referenced by DFM Via Shift. Uses a Calibre YieldEnhancer license.">DFM Spec Via Shift</a>” for
the usage syntax to specify both square and rectangular vias (mixed
via types) with unknown size (SIZE <span class="ph FontProperty emphasis">not</span> specified)
in one unmovable layer.</p>
<p class="p"><span class="keyword ParameterName Optional">EXTEND BY</span> <span class="keyword ParameterName OptionalReplaceable">ext_value</span>[::<span class="keyword ParameterName OptionalReplaceable">ext_value_long</span>]
— An optional keyword specifying to resize both ends of a via edge
and apply MRC constraints to the resized edge. The via edges are
resized only for the purpose of applying the MRC constraints; the size
of the output via is unchanged. The values are in user units and
can be a positive number, zero, or a negative number. All non‑zero
values must be an integral multiple of the <span class="ph FontProperty emphasis">database precision</span>.
A positive value specifies the amount to laterally extend both ends
of an edge. A negative value specifies the amount to laterally retract
both ends of an edge. Via edges are extended or retracted by applying
ext_value to both ends of the edge. For rectangular vias only, if ext_value_long
is specified, then the short edge of the via is extended or retracted by
applying ext_value to both ends of the short edge, and the long
edge of the via is extended or retracted by applying ext_value_long
to both ends of the long edge. See “<a class="xref fm:HeadingAndPage" href="#id6ff4f16a-b113-4764-b682-a64967070805__idb03158e0-95ff-4c21-8e78-c87e4e680a97">Example 7 — Via Edge Resize for MRC Constraints with EXTEND BY</a>”.</p>
<p class="p"><span class="keyword ParameterName Optional">CHOP BY</span> [<span class="keyword ParameterName OptionalReplaceable">chop_value</span>[::<span class="keyword ParameterName OptionalReplaceable">chop_value_long</span>]
[<span class="keyword ParameterName Optional">TYPE</span> {<span class="keyword ParameterName OptionalDefault">CROSS</span> | <span class="keyword ParameterName Optional">OCTAGON</span>}]]     [<span class="keyword ParameterName Optional">SHRINK</span> <span class="keyword ParameterName OptionalReplaceable">shrink_value</span>[::<span class="keyword ParameterName OptionalReplaceable">shrink_value_long</span>]]
— An optional keyword specifying to chop (alter) the via shape internally
(during the operation) to improve centering inside the common metal
of both covered and partial vias. The shape of the output via remains
unchanged. This keyword should only be specified for movable via
layers. The values must be positive (exception noted), less than
half of the edge length, and an integral multiple of <span class="ph FontProperty emphasis">database precision</span>.</p>
<p class="p">The chop_value is the corner‑chop distance of the short side
from the corner and is applied to both corners of the side. The
chop_value_long is the corner‑chop distance of the long side from
the corner and is applied to both corners of the side. For square
vias, only chop_value is needed. For rectangular vias, both chop_value and
chop_value_long can be specified. If chop_value_long is not specified, chop_value
is applied to the long side of a via. Using the chop values, the
via shape is internally considered as either CROSS or OCTAGON by
the tool. The TYPE keyword is optional and defaults to CROSS.</p>
<p class="p">The shrink_value is the side‑chop distance by which the short
side is reduced from both ends as specified with the SHRINK option.
The shrink_value_long is the side‑chop distance by which the long
side is reduced from both ends. For a square via, only shrink_value
is needed. For rectangular vias, both shrink_value and shrink_value_long
can be specified, where one of these values can be zero. If shrink_value_long
is <span class="ph FontProperty emphasis">not</span> specified,
shrink_value is applied to the long side of a via. The side‑chop
values can be specified with or without a corner‑chop value.</p>
<p class="p">The following are examples of CHOP BY:</p>
<ul class="ul"><li class="li" id="id6ff4f16a-b113-4764-b682-a64967070805__idf031608c-dcf5-417a-bc2b-b0ebd598bc01"><p class="p">Only corner‑chop
is used:</p>
<pre class="pre codeblock"><code>   CHOP BY 0.005</code></pre></li>
<li class="li" id="id6ff4f16a-b113-4764-b682-a64967070805__idc94b2355-3942-4636-b5d5-a8e0c1007bab"><p class="p">Only side‑chop
(shrink) is used:</p>
<pre class="pre codeblock"><code>   CHOP BY SHRINK 0.001</code></pre></li>
<li class="li" id="id6ff4f16a-b113-4764-b682-a64967070805__id06dbae65-681e-4f03-88fe-b8f4bb7df11e"><p class="p">Only applies
side‑chop (shrink) to the short side of a rectangular via:</p>
<pre class="pre codeblock"><code>   CHOP BY SHRINK 0.001::0.0</code></pre></li>
<li class="li" id="id6ff4f16a-b113-4764-b682-a64967070805__id4a5199f2-9340-4cdf-a729-919415b4ca0d"><p class="p">Both corner‑chop
and side‑chop (shrink) are used:</p>
<pre class="pre codeblock"><code>   CHOP BY 0.005 SHRINK 0.001</code></pre><div class="note note"><span class="notetitle">Note:</span> <p class="p">When specifying both corner‑chop and side‑chop (shrink),
corner‑chop must be specified before side‑chop.</p>
</div>
</li>
</ul>
</li>
</ul>
</li>
<li class="li ArgOption" id="id6ff4f16a-b113-4764-b682-a64967070805__idbbb6e04c-b19f-456a-a76f-e4c2fa7f958b"><p class="p Opt">{<span class="keyword ParameterName OptionalReplaceable">lower_metal_layer</span>‘(’LOWER‘)’ <span class="keyword ParameterName OptionalReplaceable">upper_metal_layer</span>‘(’<span class="keyword ParameterName OptionalReplaceable">UPPER</span>‘)’}
| <span class="keyword ParameterName OptionalReplaceable">common_metal_layer</span>‘(’<span class="keyword ParameterName OptionalReplaceable">COMMON</span>‘)’</p>
<p class="p">These arguments are required only for non-zero max_shift values.
Specifies either the lower_metal_layer and upper_metal_layer, or
a common_metal_layer which is a logical AND of the lower_metal_layer
and upper_metal_layer. These layers enclose shapes on the input_via_layer.
The lower_metal_layer, upper_metal_layer, and common_metal_layer
must be polygon layers (layer type-1).</p>
</li>
<li class="li ArgOption" id="id6ff4f16a-b113-4764-b682-a64967070805__id6646ea43-8289-47dd-9a98-7773d9508161"><p class="p Opt"><span class="keyword ParameterName OptionalReplaceable">exclusion_layer</span>‘(’<span class="keyword ParameterName Optional">EXCLUSION</span> [<span class="keyword ParameterName Optional">NO_CORNER_CHOP_OVERLAP</span>]‘)’</p>
<p class="p">An optional argument enabled
only for via_shift_args sets specifying non-zero max_shift values.
Specifies a layer defining regions where no vias are permitted to enter
during via shifting. If vias originally overlap an exclusion_layer,
they may or may not be shifted out of the exclusion region. The
exclusion_layer must be a polygon layer (layer type‑1).</p>
<p class="p">The NO_CORNER_CHOP_OVERLAP option can be specified
in the case when CHOP BY is used. If specified, the operation uses
the corner‑chop via shape instead of the actual via shape to determine
the overlap of the exclusion region with the via. The side‑chop
(shrink) via shape from CHOP BY is not considered, and only the CROSS
shape type is supported.</p>
</li>
<li class="li ArgOption" id="id6ff4f16a-b113-4764-b682-a64967070805__ida58e6c9b-9651-4b51-af5f-da0dc72b6308"><p class="p Opt">SPEC <span class="keyword ParameterName OptionalReplaceable">spec_name</span></p>
<p class="p">This keyword is required for via_shift_args sets specifying non-zero
max_shift values. It should be specified for movable via layers.
References a set of MRCs specified in a DFM Spec Via Shift statement
that prevent violations between vias defined on input_via_layers.</p>
</li>
<li class="li ArgOption" id="id6ff4f16a-b113-4764-b682-a64967070805__id788a31cf-fa7f-400a-b862-4864635baae4"><p class="p Opt">{<span class="keyword ParameterName Optional">TARGET_ENClosure</span> <span class="keyword ParameterName OptionalReplaceable">enc_value</span>[::<span class="keyword ParameterName OptionalReplaceable">enc_value_long</span>]}
| {<span class="keyword ParameterName Optional">TARGET_ENClosureXY</span> <span class="keyword ParameterName OptionalReplaceable">enc_value</span>[::<span class="keyword ParameterName OptionalReplaceable">enc_value_y</span>]}</p>
<p class="p">An optional keyword choice enabled only for
via_shift_args sets specifying non‑zero max_shift values. Specifies
a target distance for the enclosure of the via edges with respect
to the common metal. You can specify either TARGET_ENC or TARGET_ENCXY
for a layer type. The tool uses this specification to control the
via enclosure but does not guarantee a particular enclosure for
the via. The enclosure values are in user units and can be zero
or a positive number. All non‑zero values must be an integral multiple
of the <span class="ph FontProperty emphasis">database precision</span>. </p>
<p class="p">For TARGET_ENC, if enc_value_long is not specified,
then enc_value is the targeted enclosure for all via edges, else,
enc_value is the targeted enclosure for short edges of the via,
and enc_value_long is the targeted enclosure for long edges of the via.</p>
<p class="p">For TARGET_ENCXY, if enc_value_y is not specified,
then enc_value is the targeted enclosure in both the x‑ and y‑direction,
else, enc_value is the targeted enclosure in the x‑direction, and
enc_value_y is the targeted enclosure in the y‑direction. The x‑
and y‑direction is defined from the top cell view.</p>
</li>
</ul>
</dd>
</dl>
</div>
<div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="id6ff4f16a-b113-4764-b682-a64967070805__id3c260930-8159-42f2-a603-b995bca1b435"><span class="keyword ParameterName Optional">GRID</span> <span class="keyword ParameterName OptionalReplaceable">value</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword that specifies the resolution
(layout grid step‑size) of via shifting movement used during DFM Via Shift.
The value is the number of database units per grid step. For example,
for a resolution of one database unit (1 dbu), specify a GRID value
of 1. Similarly, for a resolution of 2 dbu, specify a GRID value
of 2. The shifted via is aligned to the layout grid based on this
value. The default resolution is 1 dbu, which means by default, the
via can take any position on the layout grid.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id6ff4f16a-b113-4764-b682-a64967070805__id227d7aff-3e34-40a7-9e3e-881f5e5b6a46"><span class="keyword ParameterName Optional">INVALID_VIA_MIN_SPACING</span> <span class="keyword ParameterName OptionalReplaceable">invalid_space_value</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword that specifies the minimum
spacing of movable vias with invalid vias. Invalid vias are defined
as vias that do not match the user‑specified size (SIZE keyword),
as well as vias that are neither square nor rectangular. Invalid
vias are unmovable and maintain a minimum spacing with movable vias,
based on this option. The invalid_space_value is a positive number
specified in user units. By default, the minimum spacing for an
invalid via with other vias is 1 dbu, which is equal to 1/<a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Precision', 'svrf_ur'); return false;">PRECISION</a> in user units. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="id6ff4f16a-b113-4764-b682-a64967070805__id6b55be01-b512-4439-832d-a4135b546699"><span class="keyword ParameterName OptionalReplaceable">marker_layer</span>‘(’<span class="keyword ParameterName Optional">MASK</span> [<span class="keyword ParameterName OptionalReplaceable">oversize</span>] | <span class="keyword ParameterName Optional">MARKER</span> <span class="keyword ParameterName OptionalReplaceable">marker_size</span>‘)’</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument and keywords that specify
a marker region or regions. The marker_layer can be specified for
either mask or marker regions using the MASK or MARKER keywords. </p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="id6ff4f16a-b113-4764-b682-a64967070805__id8044bd0d-3f87-4215-911e-6fd5c746bbf9"><p class="p Opt">‘(’MASK
[<span class="keyword ParameterName OptionalReplaceable">oversize</span>]‘)’
— If specified, every polygon on the marker_layer creates one marker
region that is a Manhattan rectangle equal to the extent of the
polygon. If the oversize value is specified, the extents are oversized
by that value (similar to specifying the <a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Size', 'svrf_ur'); return false;">SIZE</a> operation) before
being used as marker regions. The oversize value, if specified,
must be a positive floating‑point number in user units.</p>
</li>
<li class="li ArgOption" id="id6ff4f16a-b113-4764-b682-a64967070805__idad8d62ed-f471-4c2d-b60f-6c62be52dfb9"><p class="p Opt">‘(’MARKER <span class="keyword ParameterName OptionalReplaceable">marker_size</span>‘)’
— If specified, the marker regions are squares centered at the center
point of each marker polygon. The marker_size value defines the
size of the squares and must be specified as a positive floating‑point
number in user units. </p>
</li>
</ul>
<p class="p">As part of a flow, the marker regions are used to preserve the
SRAM array consistency, such that all identical units (repeated
polygon patterns) in the array get the same via shift. The DFM Via
Shift operation takes the marker region as input and generates the
shifted via result in the marker region.</p>
<p class="p">The output of the DFM Via Shift operation contains only the vias
(or the partial vias, if clipped by a marker boundary) that are
inside the marker region after the shift. When a via moves (shifts)
into or out of a marker region, the output contains only the part
of the via that remains inside the marker region. </p>
<p class="p">The marker flow uses an external operation in the rule deck to
find the marker region in the SRAM array and then replicate the
final via shift in the marker region across the SRAM array, without
introducing MRC violations. See “<a class="xref fm:HeadingAndPage" href="#id6ff4f16a-b113-4764-b682-a64967070805__idce04abfe-1c17-4390-a341-0a1930b3a73a">Example 8 — DFM Via Shift Marker Flow</a>”.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id6ff4f16a-b113-4764-b682-a64967070805__id6dd621ef-08fc-44d2-a62f-6568564a89ae"><span class="keyword ParameterName Optional">SPEC</span> <span class="keyword ParameterName OptionalReplaceable">spec_name</span> {<span class="keyword ParameterName OptionalReplaceable">input_via_layer1</span> <span class="keyword ParameterName OptionalReplaceable">input_via_layer2</span> | ‘(’<span class="keyword ParameterName OptionalReplaceable">input_via_layer_set</span>‘)’ <span class="keyword ParameterName OptionalReplaceable">input_via_layer</span> | <span class="keyword ParameterName OptionalReplaceable">input_via_layer</span> ‘(’<span class="keyword ParameterName OptionalReplaceable">input_via_layer_set</span>‘)’ | ‘(’<span class="keyword ParameterName OptionalReplaceable">input_via_layer_set1</span>‘)’ ‘(’<span class="keyword ParameterName OptionalReplaceable">input_via_layer_set2</span>‘)’}</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set referencing the
spec_name and the input_via_layer and input_via_layer_set specifications.
An input_via_layer_set can contain one or more different input_via_layers
and ideally should be used for more than one layer. Multiple layers
in an input_via_layer_set must be space‑separated. The multi-layer
SPEC argument prevents MRC violations between different input_via_layer
types such as square and rectangular types. At least two different
input_via_layers must be specified within the DFM Via Shift command
to use the multi‑layer SPEC keyword. </p>
<p class="p">If both layer sets have more than one input_via_layer, the same
layer can be present in both layer sets, but pairs formed between
the same layers are ignored. If unmovable input_via_layers are specified
in both layer sets with multiple layers, then pairs formed between
the unmovable via layers in one set and the unmovable via layers
in another set are ignored.</p>
<p class="p">Every specified via layer should be provided as an input_via_layer
to the operation. Any number of multi‑layer SPEC keyword sets may
be specified in a single DFM Via Shift command. See “<a class="xref fm:HeadingAndPage" href="#id6ff4f16a-b113-4764-b682-a64967070805__id82d8b97c-fbeb-496f-9077-fc431d1a5851">Example 2 — DFM Via Shift Using Multiple input_via_layers</a>”.</p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="id6ff4f16a-b113-4764-b682-a64967070805__id3c822290-0d72-4391-8d7d-48bc47294ccc"><p class="p Opt">The
following are examples of syntax usage:</p>
<ul class="ul"><li class="li" id="id6ff4f16a-b113-4764-b682-a64967070805__id791cc812-3b81-4a28-a0af-9392e6fc957e"><p class="p">Specification
between vias on input_via_layer1 and input_via_layer2:</p>
<p class="p">SPEC <span class="keyword ParameterName OptionalReplaceable">spec_1</span> <span class="keyword ParameterName OptionalReplaceable">input_via_layer1</span> <span class="keyword ParameterName OptionalReplaceable">input_via_layer2</span> </p>
</li>
<li class="li" id="id6ff4f16a-b113-4764-b682-a64967070805__id5bd734f3-aad3-4868-b7c5-26102088b808"><p class="p">Specification
between vias on input_via_layer1 and input_via_layer2, and vias on
input_via_layer1 and input_via_layer3:</p>
<p class="p">SPEC <span class="keyword ParameterName OptionalReplaceable">spec_2</span> <span class="keyword ParameterName OptionalReplaceable">input_via_layer1</span> (<span class="keyword ParameterName OptionalReplaceable">input_via_layer2 </span><span class="keyword ParameterName OptionalReplaceable">input_via_layer3</span>)</p>
</li>
<li class="li" id="id6ff4f16a-b113-4764-b682-a64967070805__id594ab1db-2995-4e24-bb43-dc3aa54a3e5c"><p class="p">Specification
between vias on input_via_layer1 and input_via_layer3, and vias on
input_via_layer2 and input_via_layer3:</p>
<p class="p">SPEC <span class="keyword ParameterName OptionalReplaceable">spec_3</span> (<span class="keyword ParameterName OptionalReplaceable">input_via_layer1 </span><span class="keyword ParameterName OptionalReplaceable">input_via_layer2</span>) <span class="keyword ParameterName OptionalReplaceable">input_via_layer3</span></p>
</li>
<li class="li" id="id6ff4f16a-b113-4764-b682-a64967070805__id694a7165-143a-488a-9eed-3f9ec485aeb9"><p class="p">Specification
between vias on input_via_layer1 and input_via_layer3, vias on input_via_layer1
and input_via_layer4, vias on input_via_layer2 and input_via_layer3,
and vias on input_via_layer2 and input_via_layer4: </p>
<p class="p">SPEC <span class="keyword ParameterName OptionalReplaceable">spec_4</span> (<span class="keyword ParameterName OptionalReplaceable">input_via_layer1</span> <span class="keyword ParameterName OptionalReplaceable">input_via_layer2</span>)
(<span class="keyword ParameterName OptionalReplaceable">input_via_layer3</span> <span class="keyword ParameterName OptionalReplaceable">input_via_layer4</span>)</p>
</li>
<li class="li" id="id6ff4f16a-b113-4764-b682-a64967070805__id96cb5557-2707-4593-be2a-c300dbf9b57b"><p class="p">Specification
between all pairs of vias on input_via_layer1, input_via_layer2, and
input_via_layer3:</p>
<p class="p">SPEC <span class="keyword ParameterName OptionalReplaceable">spec_5</span> (<span class="keyword ParameterName OptionalReplaceable">input_via_layer1</span> <span class="keyword ParameterName OptionalReplaceable">input_via_layer2</span> <span class="keyword ParameterName OptionalReplaceable">input_via_layer3</span>) (<span class="keyword ParameterName OptionalReplaceable">input_via_layer1</span> <span class="keyword ParameterName OptionalReplaceable">input_via_layer2</span> <span class="keyword ParameterName OptionalReplaceable">input_via_layer3</span>)</p>
</li>
</ul>
<p class="p">If a two‑layer SPEC is defined between a movable via layer and
an unmovable via layer, and the size of the unmovable via layer
is not specified, then the suggested SPEC usage is either spec_4
or spec_5, depending on whether the movable via is square or rectangular,
respectively. If the correct SPEC is not specified, then the missing
MRC constraint values are deduced from the given SPEC.</p>
<p class="p">For example, if a movable via is square, and the provided SPEC
is SQUARE, then the missing values for LONG_SQUARE and SHORT_SQUARE
are the same as that of SQUARE. Similarly, if a movable via is rectangular,
and the provided SPEC is LONG_SQUARE and SHORT_SQUARE, then the
missing LONG_LONG, LONG_SHORT, and SHORT_SHORT values are deduced
from the maximum of the values for LONG_SQUARE and SHORT_SQUARE.</p>
<p class="p">See also “<a class="xref fm:HeadingAndPage" href="#id6ff4f16a-b113-4764-b682-a64967070805__id93488c84-f7a7-4ca5-b26d-85feaad63fbf">Example 3 — DFM Via Shift Detection of Invalid SPEC Syntax</a>”.</p>
</li>
</ul>
</dd>
</dl>
</div>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">The DFM Via Shift operation moves vias to improve enclosure by
the specified metal layers. MRC spacing constraints for the vias
are specified by a <a class="xref fm:HeadingOnly" href="Command_DFMSPECVIASHIFT_idc6e2e1a3.html#idc6e2e1a3-1d75-479d-b7aa-1d524d3901c6__Command_DFMSPECVIASHIFT_idc6e2e1a3.xml#idc6e2e1a3-1d75-479d-b7aa-1d524d3901c6" title="Specifies MRC constraints to improve via location and metal coverage, preventing MRC violations. Referenced by DFM Via Shift. Uses a Calibre YieldEnhancer license.">DFM Spec Via Shift</a> specification, which
is referenced by DFM Via Shift.</p>
<p class="p">DFM Via Shift is typically used after metal biasing and retargeting
in order to improve via placement. The biasing and retargeting process
often results in vias that are not fully enclosed by metal layers,
which can reduce via yield. DFM Via Shift is used to move the vias
without introducing MRC violations, as shown in the following figure. </p>
<div class="fig fignone" id="id6ff4f16a-b113-4764-b682-a64967070805__idad71cdb4-06f1-4eb9-8450-d58c34fbf758"><span class="figcap"><span class="fig--title-label">Figure 1. </span>Via Shifting</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/via_shift_1.png" /></div><br /></div>
<p class="p">Multiple DFM Via Shift commands with different input layers can
reference the same DFM Spec Via Shift specification. This makes
it easy to define common MRC constraints and apply them to different
via layers. </p>
<p class="p">Each input_via_layer should have only vias of the same dimensions,
and should not have any MRC violations. Only square and rectangular
vias should be provided as input.</p>
<div class="section Subsection" id="id6ff4f16a-b113-4764-b682-a64967070805__id20677aab-9efc-4696-b442-adaa5bea6bfd"><h2 class="title Subheading sectiontitle">Via
Shift Specification</h2><p class="p">The via_shift_args argument set defines the rules for shifting
vias on one layer. You can specify more than one set of via_shift_args
within a single DFM Via Shift command.</p>
<p class="p">There are two use cases when shifting vias:</p>
<ul class="ul"><li class="li" id="id6ff4f16a-b113-4764-b682-a64967070805__id179d505e-eebd-4430-a3b6-4e93a9802228"><p class="p"><span class="ph FontProperty HeadingLabel">Non‑Interacting Vias</span> —
Shifting vias on the input_via_layer does not cause MRC violations
on another via layer. In this case, only one via_shift_args argument
set is specified. See “<a class="xref fm:HeadingAndPage" href="#id6ff4f16a-b113-4764-b682-a64967070805__id92ea55a4-5a6f-46f2-b516-00d3a13fa5e4">Example 1 — DFM Via Shift Command</a>”.</p>
</li>
<li class="li" id="id6ff4f16a-b113-4764-b682-a64967070805__id99106538-a363-4627-b21e-5a63906f7d07"><p class="p"><span class="ph FontProperty HeadingLabel">Interacting Vias</span> —
Shifting vias on the input_via_layer can cause MRC violations on another
via layer. In this case, a via_shift_args argument set is specified
for each interacting via layer that is to be shifted. The DFM Via
Shift operation optimizes the via movement for each via layer while
taking the MRC constraints for each layer into account. You can
also provide a multi‑layer SPEC argument set to define the MRCs between
the interacting via layers. See “<a class="xref fm:HeadingAndPage" href="#id6ff4f16a-b113-4764-b682-a64967070805__id82d8b97c-fbeb-496f-9077-fc431d1a5851">Example 2 — DFM Via Shift Using Multiple input_via_layers</a>”.</p>
<p class="p">A shifted via layer and an unmovable via layer (max_shift=0)
fall in this category if the shifted vias can cause MRC violations
between the two via layers. </p>
</li>
</ul>
</div>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><div class="section Subsection" id="id6ff4f16a-b113-4764-b682-a64967070805__id92ea55a4-5a6f-46f2-b516-00d3a13fa5e4"><h2 class="title Subheading sectiontitle">Example
1 — DFM Via Shift Command</h2><p class="p">This example shifts vias on the via layer. Vias on this layer
do not cause MRC violations on any other via layer, so only one
input_via_layer is specified. The DFM Spec Via Shift statement name
is highlighted in green.</p>
<pre class="pre codeblock"><code>DFM SPEC VIA SHIFT <span class="ph CodeHighlight green">spec_1</span> 
	SQUARE OPPOSITE 0.08225 EXTEND BY 0.0235 SPACE 0.0725
shifted_via = DFM VIA SHIFT 
	[via(VIA 0.005) m_low(LOWER) m_up(UPPER) SPEC <span class="ph CodeHighlight green">spec_1</span>]</code></pre></div>
<div class="section Subsection" id="id6ff4f16a-b113-4764-b682-a64967070805__id82d8b97c-fbeb-496f-9077-fc431d1a5851"><h2 class="title Subheading sectiontitle">Example
2 — DFM Via Shift Using Multiple input_via_layers</h2><p class="p">This example shifts the vias on layers sq_via and bar_via, where
movement of the vias on one layer can cause MRC violations on the
other layer. The specified commands and keywords perform the following
actions:</p>
<ul class="ul"><li class="li" id="id6ff4f16a-b113-4764-b682-a64967070805__id00c04420-0179-4a8b-ab3a-945232db5a67"><p class="p">The DFM Spec Via Shift
command first defines three SPECs, sq2sq, bar2bar, and bar2sq.</p>
</li>
<li class="li" id="id6ff4f16a-b113-4764-b682-a64967070805__id2662e749-921a-4b72-bcea-7b6d46aaa167"><p class="p">The DFM Via Shift
command then specifies two input_via_layers, sq_via and bar_via, and
applies their respective SPEC names, enforcing individual constraints.</p>
</li>
<li class="li" id="id6ff4f16a-b113-4764-b682-a64967070805__id388bfd60-47b6-4ee4-a9af-d3311decc438"><p class="p">The multi‑layer
SPEC argument applies another SPEC name enforcing separate constraints
between the different vias, sq_via and bar_via. The various SPEC
names are highlighted in consistent colors.</p>
</li>
</ul>
<pre class="pre codeblock"><code>// Variable values
VARIABLE Sq2Sq_OPP 0.060
VARIABLE Sq2Sq_EXT 0.020
VARIABLE Sq2Sq_SPACE 0.055
VARIABLE Bar_OPP 0.070
VARIABLE Bar_EXT 0.025
VARIABLE Bar_SPACE 0.060
VARIABLE MAX_SHIFT 0.010</code></pre><pre class="pre codeblock"><code>// Intermediate layer derivations
sq_via = RECTANGLE via ASPECT == 1
bar_via = RECTANGLE via ASPECT == 2</code></pre><pre class="pre codeblock"><code>DFM SPEC VIA SHIFT <span class="ph CodeHighlight red">sq2sq</span>
	SQUARE OPPOSITE Sq2Sq_OPP EXTEND BY Sq2Sq_EXT SPACE Sq2Sq_SPACE
DFM SPEC VIA SHIFT <span class="ph CodeHighlight green">bar2bar</span>
	LONG_LONG OPPOSITE Bar_OPP EXTEND BY Bar_EXT SPACE Bar_SPACE
	LONG_SHORT OPPOSITE Bar_OPP EXTEND BY Bar_EXT SPACE Bar_SPACE
	SHORT_SHORT OPPOSITE Bar_OPP EXTEND BY Bar_EXT SPACE Bar_SPACE
DFM SPEC VIA SHIFT <span class="ph CodeHighlight magenta">bar2sq</span>
	LONG_SQUARE OPPOSITE Bar_OPP EXTEND BY Bar_EXT SPACE Bar_SPACE
	SHORT_SQUARE OPPOSITE Bar_OPP EXTEND BY Bar_EXT SPACE Bar_SPACE</code></pre><pre class="pre codeblock"><code>shifted_via = DFM VIA SHIFT
	[sq_via(VIA MAX_SHIFT)<span class="ph CodeHighlight red"></span>
		m1(LOWER) m2(UPPER) exclusion(EXCLUSION) SPEC <span class="ph CodeHighlight red">sq2sq</span>] 
	[bar_via(VIA MAX_SHIFT)
		m1(LOWER) m2(UPPER) exclusion(EXCLUSION) SPEC <span class="ph CodeHighlight green">bar2bar</span>] 
	SPEC <span class="ph CodeHighlight magenta">bar2sq</span> sq_via bar_via</code></pre></div>
<div class="section Subsection" id="id6ff4f16a-b113-4764-b682-a64967070805__id93488c84-f7a7-4ca5-b26d-85feaad63fbf"><h2 class="title Subheading sectiontitle">Example
3 — DFM Via Shift Detection of Invalid SPEC Syntax</h2><p class="p">The DFM Via Shift operation detects and reports scenarios during
rules compilation where vias are not defined properly (or undefined)
in a multi-layer SPEC argument. Invalid SPEC syntax can cause uncertainty
in via types (square or rectangular) and result in MRC inconsistencies. </p>
<p class="p">For example, given DFM Spec Via Shift definitions as shown,</p>
<pre class="pre codeblock"><code>DFM SPEC VIA SHIFT <span class="ph CodeHighlight green">spec_1</span>
	SQUARE OPPOSITE 0.08225 EXTEND BY 0.0235 SPACE 0.0725
DFM SPEC VIA SHIFT <span class="ph CodeHighlight red">spec_2</span>
	LONG_LONG OPPOSITE 0.06625 EXTEND BY 0.033 SPACE 0.0485
	SHORT_SHORT OPPOSITE 0.06625 EXTEND BY 0.033 SPACE 0.0485
	LONG_SHORT OPPOSITE 0.06625 EXTEND BY 0.033 SPACE 0.033
DFM SPEC VIA SHIFT <span class="ph CodeHighlight magenta">spec_3</span>
	LONG_SQUARE OPPOSITE 0.06625 EXTEND BY 0.033 SPACE 0.0485
	SHORT_SQUARE OPPOSITE 0.06625 EXTEND BY 0.033 SPACE 0.0485</code></pre><p class="p">the following examples are reported as invalid syntax:</p>
<ul class="ul"><li class="li" id="id6ff4f16a-b113-4764-b682-a64967070805__id0b9499a6-4f1e-4cae-80b1-c0aa206c512a"><p class="p">Invalid
single‑layer SPEC.</p>
<ul class="ul"><li class="li" id="id6ff4f16a-b113-4764-b682-a64967070805__id0ced3487-4016-480b-97f9-8e356e548171"><p class="p">Example:
spec_3 checks constraints between square versus rectangular vias
and cannot be a single‑layer SPEC.</p>
<pre class="pre codeblock"><code>shifted_via = DFM VIA SHIFT
	// square or slot via type?
	[via_1(VIA 0.004) m_low(LOWER) m_up(UPPER) SPEC <span class="ph CodeHighlight magenta">spec_3</span>]</code></pre></li>
</ul>
</li>
<li class="li" id="id6ff4f16a-b113-4764-b682-a64967070805__id17398904-cd6e-44df-a515-e353ee83c1c8"><p class="p">Invalid 2‑layer
SPEC.</p>
<ul class="ul"><li class="li" id="id6ff4f16a-b113-4764-b682-a64967070805__idaabbbf8b-07a4-4e9c-9f51-cc260d5234e0"><p class="p">Example:
spec_1 checks constraints between square versus square vias and
cannot check constraints between different via types (via_1 is square
type, via_2 is rectangular type).</p>
<pre class="pre codeblock"><code>shifted_via = DFM VIA SHIFT
	// square type
	[via_1(VIA 0.004) m_low(LOWER) m_up(UPPER) SPEC <span class="ph CodeHighlight green">spec_1</span>]
	// rectangular type
	[via_2(VIA 0.004) m_low(LOWER) m_up(UPPER) SPEC <span class="ph CodeHighlight red">spec_2</span>]
	SPEC <span class="ph CodeHighlight green">spec_1</span> via_1 via_2</code></pre></li>
</ul>
</li>
<li class="li" id="id6ff4f16a-b113-4764-b682-a64967070805__idfa6b7e42-a30f-4ae8-98a3-dc38a0096dbb"><p class="p">Cannot define
SPEC between unmovable layers.</p>
<ul class="ul"><li class="li" id="id6ff4f16a-b113-4764-b682-a64967070805__id415219c3-ce3c-44d2-a8bc-9d456e0226cb"><p class="p">Example:
spec_1 checks constraints between two unmovable layers.</p>
<pre class="pre codeblock"><code>shifted_via = DFM VIA SHIFT
	// square type
	[via_1(VIA 0.004) m_low(LOWER) m_up(UPPER) SPEC <span class="ph CodeHighlight green">spec_1</span>]
	[via_3(VIA 0.0)]
	[via_4(VIA 0.0)]
	SPEC <span class="ph CodeHighlight green">spec_1</span> via_3 via_4 // problematic statement</code></pre></li>
</ul>
</li>
</ul>
</div>
<div class="section Subsection" id="id6ff4f16a-b113-4764-b682-a64967070805__idcc3bbed5-b46a-4e8c-9fb4-1d0f9d62af14"><h2 class="title Subheading sectiontitle">Example
4 — Layers for Input Layout Analysis</h2><p class="p">The DFM Via Shift operation filters vias of invalid size (not
equal to SIZE) and shape (neither square nor rectangular) on the
input layer during the run. These invalid vias are unmovable and do
not participate in the shift operation, but they appear on the output
layer along with the valid vias. When certain map_option arguments
are used, the functionality outputs the invalid vias to specified
output layers that can be used for input layer analysis.</p>
<p class="p">For example, given DFM Spec Via Shift definitions as shown,</p>
<pre class="pre codeblock"><code>DFM SPEC VIA SHIFT <span class="ph CodeHighlight green">spec_1</span>
	SQUARE OPPOSITE 0.08225 EXTEND BY 0.0235 SPACE 0.0725</code></pre><p class="p">when the via parameters are the same, these commands run concurrently
and output the shifted via layer along with the invalid via layers.</p>
<pre class="pre codeblock"><code>shifted_via = DFM VIA SHIFT
	[via_sq(VIA 0.010 SIZE 0.040) cm_sq(COMMON) SPEC <span class="ph CodeHighlight green">spec_1</span>]
invalid_size_via = DFM VIA SHIFT INVALID_VIA_SIZE
	[via_sq(VIA 0.010 SIZE 0.040) cm_sq(COMMON) SPEC <span class="ph CodeHighlight green">spec_1</span>]
invalid_shape_via = DFM VIA SHIFT INVALID_VIA_SHAPE
	[via_sq(VIA 0.010 SIZE 0.040) cm_sq(COMMON) SPEC <span class="ph CodeHighlight green">spec_1</span>]</code></pre><p class="p">The map_option arguments can be used alone (with the required
DFM Via Shift arguments) to generate only the invalid via layers
(no shifted via layer) for input layout analysis. </p>
<p class="p">The INVALID_VIA_MIN_SPACING keyword option can be used with DFM
Via Shift to specify the minimum spacing of movable vias with invalid
vias.</p>
</div>
<div class="section Subsection" id="id6ff4f16a-b113-4764-b682-a64967070805__id4a0b25c4-448b-46a4-8de6-88f6acb8f34e"><h2 class="title Subheading sectiontitle">Example
5 — Via Cluster Constraints and Optimization</h2><p class="p">A via cluster is a group of vias affecting each other during
via shifting, due to the application of MRC constraints and the
maximum shift value specified. DFM Via Shift functionality optimizes
the entire cluster providing holistic coverage, providing priority
for critical vias. This algorithm may result in minor placement
degradation of less critical vias as diagrammed in <a class="xref fm:Figure" href="#id6ff4f16a-b113-4764-b682-a64967070805__id86a2f793-52c4-4ead-8878-16f47f0ee4db">Figure 2</a>.</p>
<div class="fig fignone" id="id6ff4f16a-b113-4764-b682-a64967070805__id86a2f793-52c4-4ead-8878-16f47f0ee4db"><span class="figcap"><span class="fig--title-label">Figure 2. </span>DFM Via
Shift Optimization</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/via_shift_constrained_via_cluster_a-vert.png" /></div><br /></div>
<p class="p">Clusters in this design context are represented here in <a class="xref fm:Figure" href="#id6ff4f16a-b113-4764-b682-a64967070805__id66245596-fdbf-4f1a-8735-56abff9ee0df">Figure 3</a>. The aqua color represents
the identification of the constraint area where MRC-related trade-offs
may take place.</p>
<div class="fig fignone" id="id6ff4f16a-b113-4764-b682-a64967070805__id66245596-fdbf-4f1a-8735-56abff9ee0df"><span class="figcap"><span class="fig--title-label">Figure 3. </span>Constrained
Via Clusters</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/via_shift_constrained_via_cluster-small.png" /></div><br /></div>
<p class="p">Other constraint-bound clusters result in balanced and improved
coverage while maintaining MRC requirements as seen in these two
examples, respectively, in <a class="xref fm:Figure" href="#id6ff4f16a-b113-4764-b682-a64967070805__id044b2090-53eb-4ddc-a4de-dff00fce1b7c">Figure 4</a>.</p>
<div class="fig fignone" id="id6ff4f16a-b113-4764-b682-a64967070805__id044b2090-53eb-4ddc-a4de-dff00fce1b7c"><span class="figcap"><span class="fig--title-label">Figure 4. </span>Balanced
and Increased Coverage Within Via Clusters</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/via_shift_constrained_via_cluster_b.png" /></div><br /><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/via_shift_constrained_via_cluster_c.png" /></div><br /></div>
</div>
<div class="section Subsection" id="id6ff4f16a-b113-4764-b682-a64967070805__idd6733452-c70f-43a7-9f90-c6d4fc7c54dd"><h2 class="title Subheading sectiontitle">Example
6 — Exclusion Shape Overlap With Vias</h2><p class="p">The function provided by the exclusion layer may or may not have
an effect on vias that are drawn as overlapping with an exclusion
shape. Any via drawn outside the same exclusion shape does honor
that same exclusion shape boundary. <a class="xref fm:Figure" href="#id6ff4f16a-b113-4764-b682-a64967070805__id866b18a2-089b-4a1c-94c9-7a43ae38ac55">Figure 5</a> demonstrates a shifted
via failing to honor the exclusion shape boundary (overlapping the
drawn via), and <a class="xref fm:Figure" href="#id6ff4f16a-b113-4764-b682-a64967070805__id4d959810-fd90-4938-b52f-95d7fd65b042">Figure 6</a> shows a functional use
of the exclusion layer.</p>
<div class="fig fignone" id="id6ff4f16a-b113-4764-b682-a64967070805__id866b18a2-089b-4a1c-94c9-7a43ae38ac55"><span class="figcap"><span class="fig--title-label">Figure 5. </span>Exclusion
Shape Overlapping With Drawn Via</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/via_shift_3.png" /></div><br /></div>
<div class="fig fignone" id="id6ff4f16a-b113-4764-b682-a64967070805__id4d959810-fd90-4938-b52f-95d7fd65b042"><span class="figcap"><span class="fig--title-label">Figure 6. </span>Functional
Exclusion Shape Usage</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/via_shift_4.png" /></div><br /></div>
</div>
<div class="section Subsection" id="id6ff4f16a-b113-4764-b682-a64967070805__idb03158e0-95ff-4c21-8e78-c87e4e680a97"><h2 class="title Subheading sectiontitle">Example
7 — Via Edge Resize for MRC Constraints with EXTEND BY</h2><p class="p">This example uses DFM Via Shift with the EXTEND BY keyword option
to shift vias on the input layers and apply MRC constraints to resized
edges of the shifted vias. The resized via edges are only used for
applying MRC constraints and do not affect the size of the output
via. This type of specification is useful when different targeted
via sizes and MRC constraints are needed during the wafer process
flow. The EXTEND BY keyword option can be used to set two size parameters
for each input via layer, one on the short edge and another on the
long edge. If the input layer is a square via, only the short edge
parameter is used. The values for EXTEND BY can be positive (extends
both ends of an edge), negative (retracts both ends of an edge),
or zero (no resizing of an edge). The specified commands and keywords
perform the following actions:</p>
<ul class="ul"><li class="li" id="id6ff4f16a-b113-4764-b682-a64967070805__id0aecda26-b32b-4f95-b7ae-44365ff448eb"><p class="p">The DFM Spec Via Shift
command first defines three SPECs, spec_1, spec_2, and spec_3. The
various SPEC names are highlighted in consistent colors.</p>
</li>
<li class="li" id="id6ff4f16a-b113-4764-b682-a64967070805__id80e86390-0b0d-43af-9af8-79b013625b02"><p class="p">The DFM Via Shift
command then specifies two input_via_layers, via_sq and via_rect, and
applies their respective SPEC names, enforcing individual constraints.</p>
</li>
<li class="li" id="id6ff4f16a-b113-4764-b682-a64967070805__id1102131a-f72a-453a-9447-9fdee3df7987"><p class="p">The EXTEND BY
keyword extends the edges of shifted vias by the specified parameters.
In the example, both ends of the short edges are extended for the
square via. For the rectangular via, both ends of the long edges
are extended; the short edge is unchanged because its specification
is zero. </p>
</li>
<li class="li" id="id6ff4f16a-b113-4764-b682-a64967070805__id3679fe7e-ed7e-4b21-83d3-d3d48939ca52"><p class="p">The multi‑layer
SPEC argument applies another SPEC name enforcing separate constraints
between the different input_via_layers via_sq and via_rect. </p>
</li>
</ul>
<pre class="pre codeblock"><code>// Variable values
VARIABLE MAXS 0.0100
VARIABLE SHORT_SIDE 0.0235
VARIABLE OPP 0.0723
VARIABLE EXT 0.0115
VARIABLE SPC 0.0620
VARIABLE EXTEND_SHORT_BY 0.0050
VARIABLE EXTEND_LONG_BY 0.0025</code></pre><pre class="pre codeblock"><code>// Intermediate layer derivations
via_sq = RECTANGLE via ASPECT == 1
via_rect = RECTANGLE via ASPECT == 2</code></pre><pre class="pre codeblock"><code>DFM SPEC VIA SHIFT <span class="ph CodeHighlight green">spec_1</span>
	SQUARE OPPOSITE OPP EXTEND BY EXT SPACE SPC
DFM SPEC VIA SHIFT <span class="ph CodeHighlight red">spec_2</span>
	LONG_LONG OPPOSITE OPP EXTEND BY EXT SPACE SPC
	LONG_SHORT OPPOSITE OPP EXTEND BY EXT SPACE SPC
	SHORT_SHORT OPPOSITE OPP EXTEND BY EXT SPACE SPC
DFM SPEC VIA SHIFT <span class="ph CodeHighlight magenta">spec_3</span>
	LONG_SQUARE OPPOSITE OPP EXTEND BY EXT SPACE SPC
	SHORT_SQUARE OPPOSITE OPP EXTEND BY EXT SPACE SPC</code></pre><pre class="pre codeblock"><code>shifted_via = DFM VIA SHIFT
	[via_sq(VIA MAXS <span class="ph CodeHighlight Bold">EXTEND BY</span> EXTEND_SHORT_BY) cm_sq(COMMON)
		SPEC <span class="ph CodeHighlight green">spec_1</span> ]
	[via_rect(VIA MAXS <span class="ph CodeHighlight Bold">EXTEND BY</span> 0::EXTEND_LONG_BY) cm_sl(COMMON)
		SPEC <span class="ph CodeHighlight red">spec_2</span> ]
	SPEC <span class="ph CodeHighlight magenta">spec_3</span> via_rect via_sq</code></pre><p class="p"><a class="xref fm:Figure" href="#id6ff4f16a-b113-4764-b682-a64967070805__idec1281ba-dd26-4d4a-991e-35197a06cada">Figure 7</a> shows DFM Via Shift EXTEND
BY expansions of the short and long edges of the respective shifted
vias for via_sq and via_rect. These dimensional changes are only
for measuring the MRC constraint (the size of the output shifted_via
is unchanged). The MRC constraint is measured between the resized_shifted_vias
based on the corner‑to‑corner Euclidean spacing value in spec_3
(SPACE SPC) and defined in the variable statement (VARIABLE SPC
0.0620). Relevant MRC constraints for (OPPOSITE OPP) and (EXTEND BY
EXT) in spec_3 are also shown. See DFM Spec Via Shift “<a class="xref fm:HeadingAndPage" href="Command_DFMSPECVIASHIFT_idc6e2e1a3.html#idc6e2e1a3-1d75-479d-b7aa-1d524d3901c6__idd8bbfeab-a112-48f2-abe7-4f8b2025956f">Figure 1</a>” for definitions
of the MRC constraints. All dimensions are in microns.</p>
<div class="fig fignone" id="id6ff4f16a-b113-4764-b682-a64967070805__idec1281ba-dd26-4d4a-991e-35197a06cada"><span class="figcap"><span class="fig--title-label">Figure 7. </span>DFM Via
Shift EXTEND BY</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/extend_by_via_resize_updated.png" /></div><br /></div>
</div>
<div class="section Subsection" id="id6ff4f16a-b113-4764-b682-a64967070805__idce04abfe-1c17-4390-a341-0a1930b3a73a"><h2 class="title Subheading sectiontitle">Example
8 — DFM Via Shift Marker Flow</h2><p class="p">This example uses DFM Via Shift with the marker flow to ensure
via shift results are the same across an entire SRAM array. The
following figures show the stages of the flow starting with the
input array, the marker region detail, and the replicated marker
region across the array.</p>
<div class="fig fignone" id="id6ff4f16a-b113-4764-b682-a64967070805__id25417f0a-8390-43d3-9ad3-db8cc308abd2"><span class="figcap"><span class="fig--title-label">Figure 8. </span>DFM Via
Shift Input Array With Marker Region</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/dfm_via_shift_ret_array1_w_menu.png" /></div><br /></div>
<div class="fig fignone" id="id6ff4f16a-b113-4764-b682-a64967070805__id4a62ff0d-eede-4ac9-956d-ede697242ac3"><span class="figcap"><span class="fig--title-label">Figure 9. </span>DFM Via
Shift Marker Region Detail</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/dfm_via_shift_ret_array2.w_menu.png" /></div><br /></div>
<div class="fig fignone" id="id6ff4f16a-b113-4764-b682-a64967070805__id9e175301-9b13-4f25-a87e-db61060bfcbd"><span class="figcap"><span class="fig--title-label">Figure 10. </span>DFM Via
Shift Marker Region Replicated Across Array</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/dfm_via_shift_ret_array3_w_menu.png" /></div><br /></div>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_DFMVIAShiftCommands_id47a71f56.html" title="The reference information for the Calibre DFM Via Shift commands is provided. These commands use a Calibre YieldEnhancer license.">DFM Via Shift Commands</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_yaye_ref"
                DocTitle = "Calibre® YieldAnalyzer and YieldEnhancer User’s and Reference Manual"
                PageTitle = "DFM Via Shift"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_DFMVIASHIFT_id6ff4f16a.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® YieldAnalyzer and YieldEnhancer User’s and Reference Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>