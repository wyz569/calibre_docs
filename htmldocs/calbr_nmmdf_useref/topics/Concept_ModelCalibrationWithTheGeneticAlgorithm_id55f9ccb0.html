<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Model Calibration With the Genetic Algorithm" />
<meta name="abstract" content="The genetic algorithm (GA) mimics the process of natural selection in order to obtain an optimal model. This is accomplished by using previously found optimizations as well as investigating new configurations. Model calibration with the genetic algorithm is scalable on a large number of CPUs, can specify multiple starting points, and track and report on multiple model candidates." />
<meta name="description" content="The genetic algorithm (GA) mimics the process of natural selection in order to obtain an optimal model. This is accomplished by using previously found optimizations as well as investigating new configurations. Model calibration with the genetic algorithm is scalable on a large number of CPUs, can specify multiple starting points, and track and report on multiple model candidates." />
<meta name="prodname" content="Calibre® nmModelflow™ User's and Reference Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-16" />
<meta name="Topline" content="Siemens EDA" />
<meta name="IncludeDraftCommentsInChangeLog" content="all" />
<meta name="HighlightColor" content="Pale Blue" />
<meta name="HighlightChanges" content="yes" />
<meta name="Draft" content="none" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_nmmdf_useref" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="NONE" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 2021" />
<meta name="DocumentTitle" content="Calibre® nmModelflow™ User’s and Reference Manual" />
<meta name="ConditionFiltering" content="XML" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,doc.type.documentation.ref, product.version.v2021.2,product.id.P10115,product.id.P10120" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Model Calibration With the Genetic Algorithm</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Model Calibration With the Genetic Algorithm" />
<meta name="attributes" content="doc.type.documentation.user,doc.type.documentation.ref, product.version.v2021.2,product.id.P10115,product.id.P10120" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Model Calibration
With the Genetic Algorithm</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">The genetic algorithm (GA) mimics the
process of natural selection in order to obtain an optimal model.
This is accomplished by using previously found optimizations as
well as investigating new configurations. Model calibration with
the genetic algorithm is scalable on a large number of CPUs, can
specify multiple starting points, and track and report on multiple model
candidates.</span>
</div>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">Currently, the genetic algorithm is only recommended
for negative tone development (NTD) models.</p>
</div>
<div class="section Subsections"><div class="section Subsection" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__idca9c9ca9-31c7-4a04-9e7c-f8ff47d1a6d4"><h2 class="title Subheading sectiontitle">Genetic Algorithm Search Options</h2><p class="p">Genetic algorithm search can produce more accurate resist models
and is recommended for NTD models (resist modelforms 38 to 92) The
following genetic algorithms can be selected:</p>
<ul class="ul"><li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__idf7efb7ba-17e2-48c2-b32b-28781259e87c"><p class="p"><span class="ph FontProperty HeadingLabel">ga</span> —
The genetic algorithm can be selected from the Search Algorithm
dropdown list (ga option) under the sections labeled “Optimization
Search” in the <a class="xref fm:HeadingOnly" href="GUIRefT_FlowStageWizardOptimizerSettings_idfcd4d85a.html#idfcd4d85a-ae51-4920-9e87-6892f0c8c224__GUIRefT_FlowStageWizardOptimizerSettings_idfcd4d85a.xml#idfcd4d85a-ae51-4920-9e87-6892f0c8c224" title="The Flow Stage Wizard, Optimizer Settings appears as part of the wizard sequence after you select the Calibrate option. It sets the search optimization parameters for calibration.">Flow Stage Wizard, Optimizer Settings</a>. The genetic
algorithm runs with 201 iterations by default. You can specify the
number of iterations for your search as follows:</p>
<pre class="pre codeblock"><code>mdf optimize explore 500 search ga</code></pre></li>
<li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__idf4daec0a-bbaa-4caf-9727-a24e331ac3cd"><p class="p"><span class="ph FontProperty HeadingLabel">gazoom</span> —
The gazoom option is also available in the Search Algorithm dropdown
list. It is a combination of a global search using the genetic algorithm
(ga) and local search using the zoom optimization. See the section “<a class="xref fm:HeadingAndPage" href="#id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__id8ac09432-0f05-4d9a-9d46-553d3932f6af">Using Zoom Search with the Genetic Algorithm</a>”. </p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">The epsilon parameter only appears in the Stage Wizard
when you change the Optimizer Settings control to “Modify Defaults.”</p>
</div>
</li>
</ul>
<ul class="ul"><li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__id71efe73e-1674-49c1-a873-e4c02e9dd2ee"><p class="p"><span class="ph FontProperty HeadingLabel">gagradient</span> —
Is a combination of a global search using the genetic algorithm
(ga) and local search using the gradient optimization. The former
is used to explore the search space and find multiple initial guesses
(starting points) for the latter. The number of ga generations can
be set using the explore parameter (the default is 201). The gradient search
stops when an internal convergence criterion is met. The settings
for numbers of levels and epsilon have no effect on the gagradient
search.</p>
</li>
<li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__ida09a6ba7-0790-4bcf-96ee-35d576f99a04"><p class="p"><span class="ph FontProperty HeadingLabel">gapgradient</span> —
Is a combination of a global search using the genetic algorithm
(ga) and local search using the pgradient optimization. It is similar
to gagradient, except that it uses a fixed gradient search step
and a fixed search range.</p>
</li>
<li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__id8bec4c12-5780-4f4e-9a3d-35f79eaaab2d"><p class="p"><span class="ph FontProperty HeadingLabel">pgradient</span> —
The standalone pgradient search stops when an internal convergence criterion
is met. It explores a search range for a given step size, selecting
the variable that leads to the biggest improvement with a given
permutation. It tends to return an improved RMS result compared
to the zoom search, but at a cost of higher runtime. This search
method is best used with a good starting model as input with explore
set to 0.</p>
</li>
<li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__id67a73616-5ce7-4b28-8ae9-f9cc77bac6a9"><p class="p"><span class="ph FontProperty HeadingLabel">frontpgradient</span> —
Is a combination of the front and pgradient search algorithms. The front
part establishes an initial starting position based on a scan of
the search space. The number of front iterations is determined by
the explicitly specified explore or its default value. The pgradient
search stops when an internal convergence criterion is met. The settings
for numbers of levels have no effect on the frontpgradient search.</p>
</li>
<li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__idb7bba810-30c5-4205-9ca9-6e1bd36f1f83"><p class="p"><span class="ph FontProperty HeadingLabel">fastga</span> —
Is a combination of a global search using the genetic algorithm
(ga) for a fast convergence rate and a local step-based pgradient
optimization. The ga part explores the search space and finds multiple
initial guesses (starting points) for the local pgradient search. </p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">The fastga search method is the default for NTD resist
model calibration.</p>
</div>
<ul class="ul"><li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__id2731af9c-d507-407c-9d12-a064dc38dd51"><p class="p">The number
of ga generations is determined by the explore parameter. The default
is 501.</p>
</li>
<li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__idfcd481d9-927f-447b-9a82-8671c8e5515e"><p class="p">The pgradient
search stops when an internal convergence criterion is met. </p>
</li>
<li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__id433415db-05f8-420d-aae1-478b3eb8dafd"><p class="p">The numbers
of levels and epsilon parameters are not used in the fastga search. </p>
</li>
</ul>
</li>
<li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__idab7c0228-5417-4a29-944b-9101810b410f"><div class="p"><span class="ph FontProperty HeadingLabel">moga</span> —
Is a Multi-Objective Genetic Algorithm. After selecting the moga
Search Algorithm (1) select the search methods with the primary
objective Cost Function (2) and Secondary Objective (3) picked from
the list.<br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/moga_resist.png" /></div><br /></div>
<p class="p">When a stage using the moga search algorithm is
calibrated successfully, additional entries (<span class="ph uicontrol">Plots</span> category, <span class="ph uicontrol">IterStatsPareto</span> subcategoryt and <span class="ph uicontrol">Iterstats</span> category, <span class="ph uicontrol">IterStats Pareto Table</span> subcategory)
appear in the <a class="xref fm:HeadingOnly" href="GUIRefT_CalibrationJobRecordDialogBox_id3fd518f4.html#id3fd518f4-200f-470a-9999-3c489097795c__GUIRefT_CalibrationJobRecordDialogBox_id3fd518f4.xml#id3fd518f4-200f-470a-9999-3c489097795c" title="The Calibration Job Record dialog box shows the results of a calibration run.">Calibration Job Record Dialog Box</a>. The specialized Iterstats list sorts the primary objective and
secondary objective separately.</p>
</li>
</ul>
<p class="p">You can also use the following commands to control genetic algorithm
searches:</p>
<ul class="ul"><li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__id2443401a-d941-4d2c-bd9c-a3e7e3e6092b"><p class="p">“mdf optimize
set_resist ga_objective_limit <span class="ph FontProperty emphasis">value</span>”
to set a specific objective limit to stop the genetic algorithm
search.</p>
</li>
<li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__id88438386-791b-4d31-8601-1fd2c36db8b0"><p class="p">“mdf optimize
set_resist ga_convergence_generation_threshold” and “mdf optimize set_resist
ga_convergence_objective_tolerance” as a pair of commands to stop
the search when the total objective value improvement is less than
the specified tolerance for more than the specified number of generations.</p>
</li>
</ul>
</div>
<div class="section Subsection" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__id0bb58f0b-f31f-4c70-976b-f868ebb1852f"><h2 class="title Subheading sectiontitle">Cache
Memory Size Settings</h2><p class="p">Calibre nmModelflow requires adequate cache memory in order to
perform genetic algorithm calibration. Two methods are available
to set the cache memory size for genetic algorithm optimizations:</p>
<ul class="ul"><li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__idc70f0f86-77c2-45e2-be5d-44c172efc910"><p class="p">The environment
variable CM1_CALIBRATION_CACHE_SIZE</p>
<p class="p">This environment variable accepts values in megabytes; the default
value is 512.</p>
</li>
<li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__ide0378ae0-3abf-455c-9564-54435d829f9a"><p class="p">The “mdf optimizer
set memcache” command, available in the Command pane</p>
<p class="p">This command accepts values in megabytes; the default value is
8192 (8 GB).</p>
</li>
</ul>
<p class="p">The two methods interact according to the following table.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__id73a97c9a-6630-4380-b1fe-0f257b7dcfeb" class="table" frame="border" border="1" rules="cols"><caption><span class="tablecap"><span class="table--title-label">Table 1. </span>CM1_CALIBRATION_CACHE_SIZE
and optimizer memcache Interaction</span></caption><colgroup><col style="width:2.219in" /><col style="width:1.589in" /><col style="width:2.367in" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d27532e313"><p class="p">CACHE_SIZE Environment Variable Set?</p>
</th>
<th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d27532e316"><p class="p">memcache command Set?</p>
</th>
<th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d27532e319"><p class="p">Resulting Cache Setting</p>
</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e313 "><p class="p">No</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e316 "><p class="p">No</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e319 "><p class="p">8192</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e313 "><p class="p">Yes</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e316 "><p class="p">No</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e319 "><p class="p">Use environment variable setting</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e313 "><p class="p">No</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e316 "><p class="p">Yes</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e319 "><p class="p">Use memcache command setting</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e313 "><p class="p">Yes</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e316 "><p class="p">Yes</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e319 "><p class="p">Use memcache command setting (environment
variable setting is ignored)</p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p">To calculate the cache memory needed to compute all the resist
model terms for all the gauges and save them to the cache in the
first iteration, the following approximation can be used:</p>
<pre class="pre codeblock"><code>[500*(number of gauges)*(number of terms)*250 bytes]/2<span class="ph FontProperty LiteralSuperScript">20<span class="ph FontProperty LiteralSuperScript"></span></span></code></pre><p class="p">The result is the required cache memory in megabytes. </p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">If the total allocated cache size is smaller than the required
size, Calibre nmModelflow issues a warning during calibration detailing
the suggested cache size.</p>
</div>
<p class="p">The number of terms required to run a calibration with the genetic
algorithm for various model forms is shown in the following table:</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__id810b4fcb-3c32-4d22-a7fd-7c057db05e76" class="table" frame="border" border="1" rules="cols"><caption><span class="tablecap"><span class="table--title-label">Table 2. </span>Number
of Terms for each Model Form</span></caption><colgroup><col style="width:1.119in" /><col style="width:1.480in" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d27532e385"><p class="p">Model Form</p>
</th>
<th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d27532e388"><p class="p">Number of Terms</p>
</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e385 "><p class="p">mf21</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e388 "><p class="p">7</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e385 "><p class="p">mf22</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e388 "><p class="p">8</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e385 "><p class="p">mf42</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e388 "><p class="p">9</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e385 "><p class="p">mf43</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e388 "><p class="p">9</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e385 "><p class="p">mf44</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e388 "><p class="p">10</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e385 "><p class="p">mf48</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e388 "><p class="p">19</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e385 "><p class="p">mf58</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e388 "><p class="p">20</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e385 "><p class="p">mf78</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e388 "><p class="p">27</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e385 "><p class="p">mf88</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d27532e388 "><p class="p">29</p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p">The population size varies as evolution proceeds, but will not
exceed 1000. The number of models that a generation contains after
the first iteration cannot be decided beforehand. The genetic algorithm
will automatically load the starting model and use it in the first
generation of optimizations. The genetic algorithm will generate
a few models on top of the model with the best RMS fit error. They
all have similar RMS fit error, but very different model parameters. These
models are called niche models. If the best model is not desired,
the model can be switched to one of the niche models. </p>
</div>
<div class="section Subsection" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__idea4eecb5-5e09-469d-9444-a15f552f33f9"><h2 class="title Subheading sectiontitle">Genetic
Algorithm Results Selection</h2><p class="p">The five best models are output to the last five rows in the <span class="ph filepath">iterstats.csv</span> file
with the first having the worst fitness value of the five and the
last having the best RMS fitness value. </p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">The default behavior is to save all intermediate models
to the <span class="ph filepath">iterstats.csv</span> file. You can restrict which
models are saved to the CSV file by ignoring any models with an
RMS value greater than a given threshold value with this command:</p>
<pre class="pre codeblock"><code>mdf optimize set_resist save_iterstats_threshold <span class="keyword ParameterName OptionalReplaceable">value</span></code></pre></div>
<p class="p">In addition to the <span class="ph filepath">iterstats.csv</span> file, the
following output is generated: </p>
<ul class="ul"><li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__id8f56ba37-71b9-410d-b4fb-f4f127ba9470"><p class="p">In the <span class="ph filepath">optimizeinfo</span> folder
in the job run directory, <span class="ph filepath">index.html</span> contains
the entry “CONSISTENCY REPORT” for all the niche models. </p>
</li>
<li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__id5d323d8e-f718-462b-bb9d-abc974105911"><p class="p">In the job
run directory, the <span class="ph filepath">stagesiminfo</span> and <span class="ph filepath">outputsiminfo</span> directories
contain information for the best model, and the file <span class="keyword ParameterName OptionalReplaceable">gaugesfinal.csv</span> that
contains the final gauges from the calibration.</p>
</li>
<li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__idf0354eb2-fd92-4f34-a98a-6898ca29f964"><p class="p">Folders with
names “<span class="ph filepath">outputsiminfo_&lt;sampleID&gt;</span>” contain
information for the other niche models. </p>
</li>
<li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__id09dec782-5582-473e-ae58-87dc75ad3b13"><p class="p">If the Save
GA Niches option in the Flow Stage Wizard Optimizer was selected,
or if you issued the “mdf optimize set_resist save_ga_niches on”
command, additional files for each of the best five niche models
are written to the run directory:</p>
<ul class="ul"><li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__idca6be318-3627-464e-9195-c1fda78c2df3"><p class="p"><span class="ph filepath">gaugesfinal_&lt;niche_ID&gt;.csv</span></p>
</li>
<li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__id2afb87e9-5542-4365-be89-ff7040078629"><p class="p"><span class="ph filepath">miscparams_&lt;niche_ID&gt;.csv</span></p>
</li>
<li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__idaaef8bc3-6d0c-4f44-b698-72bc5d202644"><p class="p"><span class="ph filepath">metricparams_&lt;niche_ID&gt;.csv</span></p>
</li>
<li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__idc5c7681f-d68d-41d0-8e73-11653d73d86f"><p class="p"><span class="ph filepath">modelparams_&lt;niche_ID&gt;.csv</span></p>
</li>
</ul>
<p class="p">These niche model files are not generated by default.</p>
</li>
<li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__id914fc2ed-fb35-4e8b-b31e-ea9ca0a5b2cc"><p class="p">Setting the
environment variable</p>
<pre class="pre codeblock"><code>setenv MDF_OPTIMIZE_ITERSTAT_NICHE_COLUMN 1</code></pre><p class="p">before running Calibre nmModelflow adds the file <span class="ph filepath">iterstats_niche.csv</span> to
the <span class="ph filepath">optimizeinfo</span> folder. This file contains
niche group IDs for all the niche models. The best model is given
the ID of 0, the next best model is given the ID of 1, and so on.
A model that does not fit into any niche is given an ID of -1.</p>
</li>
</ul>
<p class="p">The Optimize vs Try report as well as all the related information
for the solution models can be generated by running the following
command:</p>
<pre class="pre codeblock"><code>mdf job report -costobjectivefile costobjective</code></pre><p class="p">Note that this command is automatically generated when the job
is created using the Calibration Job Wizard. </p>
<p class="p">After running the genetic algorithm, the results can be viewed
in the Calibration Job dialog box under the Best IterStats, Show
Niche Models tree entry. Four of the five niche models are displayed,
with the global best model excluded. These four niche models are
highlighted in the main Iterstats table, where all five niches can
be compared, as shown in <a class="xref fm:Figure" href="#id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__idab568e45-9323-4062-991f-6b36b07de955">Figure 1</a>. Each niche model can
be selected and accepted by right-clicking on the highlighted row.
Accepting a niche model makes the model active in the GUI.</p>
<div class="fig fignone" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__idab568e45-9323-4062-991f-6b36b07de955"><span class="figcap"><span class="fig--title-label">Figure 1. </span>Accepting
Niche Models in Calibration Job Dialog Box</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/Show_Niche_models.png" /></div><br /></div>
</div>
<div class="section Subsection" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__id8ac09432-0f05-4d9a-9d46-553d3932f6af"><h2 class="title Subheading sectiontitle">Using
Zoom Search with the Genetic Algorithm</h2><p class="p">The Zoom search can be run on all five best niche models identified
by the genetic algorithm by running the following command:</p>
<pre class="pre codeblock"><code>mdf optimizer explore <span class="keyword ParameterName OptionalReplaceable">generations</span> search gazoom</code></pre><p class="p">The command runs the genetic algorithm on the specified number
of generations and then runs Zoom search, which evaluates all the
niche models in parallel. The convergence of Zoom search is controlled
by epsilon in the following command:</p>
<pre class="pre codeblock"><code>mdf optimizer set epsilon <span class="keyword ParameterName OptionalReplaceable">value</span></code></pre><p class="p">The smaller the epsilon value, the greater the number of zoom
iterations required for convergence. Epsilon is automatically set
to the default value of 0.001. The total run time of the Zoom search
is dependent on the number of iterations required for each niche
model.</p>
</div>
<div class="section Subsection" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__id10db8c25-a231-41b3-946c-d5337a6ade31"><h2 class="title Subheading sectiontitle">Explore
and Totaliteration Setting Differences for the Genetic Algorithm</h2><p class="p">The genetic algorithm optimization search options (ga and gazoom)
use the “explore” and “totaliteration” settings in Calibre nmModelflow
(in the Flow Stage Wizard for a resist model on the Optimizer Settings
with Resist screen) to set the number of search experiments to perform.
However, these settings are also used by other search algorithms
and have different meanings.</p>
<br /><div class="imagecenter"><img class="image imagecenter fmdpi:102" src="../graphics/ga_explore_totaliterations.png" /></div><br /><p class="p">For the “explore” parameter:</p>
<ul class="ul"><li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__idc95348ba-4257-495f-8473-d6e1de69784f"><p class="p">full and
front use “explore” as the number if iterations to run.</p>
</li>
<li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__ide4a36980-9ab8-4e3a-9e94-39b0b23945cf"><p class="p">frontzoom and
zoom use “explore” as the number of iterations for the exploration
phase to arrive at a coarse estimate.</p>
</li>
<li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__id4f633a8a-b2cb-4843-b3df-291d48db91d3"><p class="p">ga and gazoom
use “explore” as the number of generations to optimize, where one generation
includes up to 1000 models. </p>
</li>
</ul>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">In the Calibre nmModelflow interface, “explore” is set
using the “Explore Iterations” field, found on the <a class="xref fm:HeadingOnly" href="GUIRefT_FlowStageWizardOptimizerSettings_idfcd4d85a.html#idfcd4d85a-ae51-4920-9e87-6892f0c8c224__GUIRefT_FlowStageWizardOptimizerSettings_idfcd4d85a.xml#idfcd4d85a-ae51-4920-9e87-6892f0c8c224" title="The Flow Stage Wizard, Optimizer Settings appears as part of the wizard sequence after you select the Calibrate option. It sets the search optimization parameters for calibration.">Flow Stage Wizard, Optimizer Settings</a> page.</p>
</div>
<p class="p">For the “totaliteration” parameter: </p>
<ul class="ul"><li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__idef486fb5-3300-4751-8384-e1812bfb211f"><p class="p">frontzoom
and zoom use “totaliteration” as the maximum amount of iterations
allowed to complete the search.</p>
</li>
<li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__id82c47974-f16f-47d1-abc7-187ed9bbd26f"><p class="p">gazoom uses
“totaliteration” to control the additional number of model evaluations
used in a zoom search, where totaliteration equals the number of
ga generations plus the number of zoom iterations. </p>
</li>
<li class="li" id="id55f9ccb0-81ae-48d7-8c0a-0243f66b39a6__idf0a36e05-f55d-4133-87e9-74bb9b62d10d"><p class="p">front, full,
and ga do not use “totaliteration.”</p>
</li>
</ul>
<p class="p">The setting for “totaliteration” is optional, but if it is specified,
it must be greater than the setting for “explore.”</p>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_StageCreation_idbf6d670c.html" title="After you have litho models, gauges, and layouts in your database, you create stages to operate on them. Multiple types of stages are available in Calibre nmModelflow.">Stage Creation</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_nmmdf_useref"
                DocTitle = "Calibre® nmModelflow™ User’s and Reference Manual"
                PageTitle = "Model Calibration With the Genetic Algorithm"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_ModelCalibrationWithTheGeneticAlgorithm_id55f9ccb0.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® nmModelflow™ User’s and Reference Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>