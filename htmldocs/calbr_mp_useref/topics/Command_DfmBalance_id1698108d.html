<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="DFM BALANCE" />
<meta name="abstract" content="Calls the DFM SPEC BALANCE statement for each balanced mask to output." />
<meta name="description" content="Calls the DFM SPEC BALANCE statement for each balanced mask to output." />
<meta name="prodname" content="Calibre Multi-Patterning User's and Reference Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014" />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-02-18" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_mp_useref" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="NONE" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 17, 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® Multi-Patterning User’s and Reference Manual" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.ref,doc.type.documentation.user,product.version.v2021.2,product.id.P10115" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="HighlightChanges" content="yes" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="IncludeDraftCommentsInChangeLog" content="All" />
<meta name="ConditionFiltering" content="XML" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id1698108d-7df2-4f19-9289-7faea1c39cf6" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>DFM BALANCE</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="DFM BALANCE" />
<meta name="attributes" content="doc.type.documentation.ref,doc.type.documentation.user,product.version.v2021.2,product.id.P10115" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="id1698108d-7df2-4f19-9289-7faea1c39cf6">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">DFM BALANCE</h1>
<div class="body refbody CommandRefBody"><div class="abstract CommandRefAbstract"><p class="p ContextMGC"><a class="xref fm:HeadingOnly" href="Contain_MultiPatterningSVRFCommands_id2565a2fa.html#id2565a2fa-34a4-4ef5-bcff-f3cd6d51901e__Contain_MultiPatterningSVRFCommands_id2565a2fa.xml#id2565a2fa-34a4-4ef5-bcff-f3cd6d51901e" title="A typical SVRF rule file containing double-, triple-, and quadruple-patterning may also contain other SVRF commands that declare input layers, perform preliminary layer manipulation, and save output layers.">Multi-Patterning SVRF Commands</a></p>
<p class="shortdesc">Calls the DFM SPEC BALANCE statement
for each balanced mask to output.</p>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName RequiredReplaceable">balanced_mask</span> = <span class="keyword ParameterName Required">DFM BALANCE</span> <span class="keyword ParameterName RequiredReplaceable">name</span> [[<span class="keyword ParameterName Optional">FULL</span>] <span class="keyword ParameterName Optional">MASK</span> <span class="keyword ParameterName OptionalReplaceable">color</span>]</p>
<p class="lines UsageLine"><span class="keyword ParameterName RequiredReplaceable">analysis_windows</span> = <span class="keyword ParameterName Required">DFM BALANCE</span> <span class="keyword ParameterName RequiredReplaceable">name</span> [<span class="keyword ParameterName Optional">UNMERGED</span> [<span class="keyword ParameterName Optional">FAILED</span>]]</p>
</div>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id0952d8e8-b5e7-4273-8606-a6c998182d19"><span class="keyword ParameterName RequiredReplaceable">name</span></dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument referencing
the specifications named within the <a class="xref fm:HeadingOnly" href="Command_DfmSpecBalance_id50447379.html#id50447379-b16c-4664-9bd1-0d6a7abd8a0c__Command_DfmSpecBalance_id50447379.xml#id50447379-b16c-4664-9bd1-0d6a7abd8a0c" title="Specifies multi-pattern mask balancing criterion. Called by the DFM BALANCE command.">DFM SPEC BALANCE</a> statement. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id3d5c36ba-8ab3-4bf4-8f0e-9c4e63b39404">[<span class="keyword ParameterName Optional">FULL</span>] <span class="keyword ParameterName Optional">MASK</span> <span class="keyword ParameterName OptionalReplaceable">color</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional
keyword that outputs all mask shapes with the specified color that
have had their color changed or that have been promoted through hierarchy.
If FULL is specified, the entirety of the mask in addition to those
areas satisfying the density threshold are output.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__idc0844108-ebed-4212-b066-edbe76ef948d"><span class="keyword ParameterName Optional">UNMERGED</span> [<span class="keyword ParameterName Optional">FAILED</span>]</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword specifying
the type of layer output for analysis. UNMERGED outputs an unmerged
layer with analysis windows updated with annotation properties.
As an option to UNMERGED, FAILED outputs only those unmerged windows
failing balancing requirements. </p>
<p class="p">If neither keyword is specified,
the output is a merged layer of all analysis windows that pass or
fail balancing requirements.</p>
</dd>
</dl>
</div>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">The DFM BALANCE command calls
the DFM SPEC BALANCE statement within the same SVRF file. You must
specify a DFM BALANCE command to output each balanced mask. In some
cases, writing SVRF statements prior to DFM BALANCE prepares design
layers for optimal balancing. See the examples for prebalancing
considerations. For important exceptions regarding layer derivation
support see “<a class="xref fm:HeadingAndPage" href="Concept_GuidelinesForDerivingGoodSeparatorAndActionLayers_id5c46d151.html#id5c46d151-7108-4fc6-bf1c-2a97bde0a201__Concept_GuidelinesForDerivingGoodSeparatorAndActionLayers_id5c46d151.xml#id5c46d151-7108-4fc6-bf1c-2a97bde0a201" title="Separator and action layers are used to convey color relationships between one or more polygons and require careful assignment.">Guidelines for Deriving Good Separator and Action Layers</a>”.</p>
<div class="section Subsection" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id1ef28ffc-0087-42c9-ba11-13e6d1355291"><h2 class="title Subheading sectiontitle">Recommended
DFM BALANCE Flow</h2><p class="p">Although flexible in its implementation, specific DFM BALANCE
flows provide optimum results. Siemens EDA recommends using
DFM BALANCE as shown in <a class="xref fm:Figure" href="#id1698108d-7df2-4f19-9289-7faea1c39cf6__id841a892d-a15b-4d6b-9c43-b1620f1bd146">Figure 1</a>.</p>
<div class="fig fignone" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id841a892d-a15b-4d6b-9c43-b1620f1bd146"><span class="figcap"><span class="fig--title-label">Figure 1. </span>DFM BALANCE
Recommended Flow</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:132" src="../graphics/dfm_balance_flow2.png" /></div><br /></div>
<ol class="ol"><li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id4d6f51e7-8075-4ef4-a508-0eb31b327e64"><p class="p">Input Design</p>
<ul class="ul"><li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id58eecb7b-defc-49ee-86e4-9bf1af74caa4"><p class="p">DFM BALANCE
may be applied to IP, block or full chip designs.</p>
</li>
<li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id5f7747fa-b6af-41eb-a38a-2ed6f9371502"><p class="p">Layouts may
contain precolored or anchored polygons.</p>
</li>
<li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id33453291-6e17-4c5c-9a6d-eec4861327b1"><p class="p">Layouts may
contain fill shapes.</p>
</li>
</ul>
</li>
<li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__idc1b96238-fd9e-4b0d-bd9f-7a366780293a"><p class="p">dpStitch</p>
<ul class="ul"><li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__idf957aedf-14f9-4235-9ae8-db2585fe9b35"><p class="p">Stitching
is provided for odd-cycle resolution.</p>
</li>
<li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__idf7fabb58-969f-4dad-84e2-5faeae60762a"><p class="p">Stitching is
provided to facilitate density balancing.</p>
</li>
</ul>
</li>
<li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id506a3abd-61ac-4910-ab91-2a9187fdbea9"><p class="p">nmDPC</p>
<ul class="ul"><li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id8ff54ecd-2ba1-44fd-abe8-38697ce94106"><p class="p">Directed
algorithms color an uncolored layout.</p>
</li>
<li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id9c61d6f1-7def-48c7-9eff-1660c665314a"><p class="p">Employs a native
tick-tock balancing algorithm and custom long-range separators for
local density balancing.</p>
</li>
<li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id904941dd-ab89-4897-9fa4-236f20abfd8d"><p class="p">Odd-cycle stitch
minimization is provided.</p>
</li>
<li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__idd4270404-cb10-4d6f-bab4-df80e32e79ca"><p class="p">Density balancing
stitch maximization is provided.</p>
</li>
</ul>
</li>
<li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id917d54bb-0e97-44fc-9cf9-ab801012e4fc"><p class="p">DFM Fill</p>
<ul class="ul"><li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id838fb572-005c-45cc-be2b-ff28065221ea"><p class="p">Arbitrary
and differing-color fill is performed within open areas.</p>
</li>
<li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id5d7b65e2-ca87-42d2-9db0-3a5cd1deca49"><p class="p">Differing-color
fill is performed within large polygons.</p>
</li>
</ul>
</li>
<li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__ida34c65c4-eebf-45e1-9a4b-967b5c5f101d"><p class="p">DFM BALANCE</p>
<ul class="ul"><li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id3ed833b4-b3b6-41cb-b217-571fa5657702"><p class="p">Pre-DFM
balancing considerations may include:</p>
<ul class="ul"><li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id3e2c5336-940b-41f9-97ad-e776d206c71f"><p class="p">Detect
and isolate used stitches and replace them with edge-pair required
separators.</p>
</li>
<li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__ide5f16107-d7a6-42ea-9d00-29624cd7f3b9"><p class="p">Construct required
balancing separators.</p>
</li>
<li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id6e38b702-981e-4a5b-8f1f-3ffe7cb714f4"><p class="p">Consider colored
polygon interaction with drawn anchors and anchor seed shapes while
constructing mutable and anchors layers.</p>
</li>
</ul>
</li>
</ul>
<ul class="ul"><li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id990c027d-06f8-46fb-b0fa-37f069d86a4a"><p class="p">DFM BALANCE
algorithmic provisions include:</p>
<ul class="ul"><li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id54741674-3849-4b78-8fba-23adf1141244"><p class="p">Arbitrarily-colorable
polygon (ACP) and connected component (CC) color alternation.</p>
</li>
<li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id3ab30262-2c60-4f76-8850-1bb85e5c42ab"><p class="p">Window-based
area-aware density balancing with change minimization.</p>
</li>
<li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__idb859da74-49a3-4146-9245-53a7875648ee"><p class="p">Built-in error
reporting of regions failing density balancing constraints.</p>
</li>
</ul>
</li>
</ul>
</li>
<li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id324eb542-c386-4358-9a5c-984408d0163b"><p class="p">Output Design</p>
<ul class="ul"><li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__ideba1bd4e-1b74-46dd-b7f8-681bfb1a5e15"><p class="p">Layout
is locally and globally density-optimized.</p>
</li>
</ul>
</li>
</ol>
</div>
<div class="section Subsection" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__idcc54d628-34b6-49f9-ad08-f6bc00e55070"><h2 class="title Subheading sectiontitle">DFM
BALANCE Layer Interactions</h2><p class="p">DFM BALANCE provides and restricts various layer interactions.</p>
<ul class="ul"><li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id2b659cd6-4575-4a9c-a685-ab87b2877bb2"><p class="p">ANCHOR
and MUTABLE polygons of different colors are permitted to overlap
but not abut.</p>
</li>
<li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id3a4f6873-263b-4222-8055-fd8026965bb0"><p class="p">MUTABLE polygons
touching separators may be colored differently to achieve density
balancing.</p>
</li>
<li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__idd9a9bf5d-b6cb-4236-b0e2-de4396702e9e"><p class="p">MUTABLE polygons
connected with ANCHOR polygons by a SEPARATOR are considered as
ANCHOR shapes, and are immutable (their color cannot be reassigned).</p>
</li>
<li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__ide972f999-a10f-404e-ae53-8a84ad18a2a1"><p class="p">ANCHOR polygons
of different colors are permitted to overlap or abut.</p>
</li>
<li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id2be82ad1-9775-484b-bc22-7f1e07a8a09d"><p class="p">MUTABLE polygons
of different color are not permitted to overlap.</p>
</li>
<li class="li" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id3300d73d-e425-41a1-a18f-3ef73a1673ea"><p class="p">UNCOLORED polygons
are not permitted to touch or overlap ANCHOR or MUTABLE polygons,
or any SEPARATOR edge pair.</p>
</li>
</ul>
<p class="p"><a class="xref fm:Table" href="#id1698108d-7df2-4f19-9289-7faea1c39cf6__idac8ad591-5b34-4098-b096-798d40811daa">Table 1</a> charts all layer interactions.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__idac8ad591-5b34-4098-b096-798d40811daa" class="table" frame="border" border="1" rules="cols"><caption><span class="tablecap"><span class="table--title-label">Table 1. </span>DFM BALANCE
Layer Interaction</span></caption><colgroup><col style="width:1.248in" /><col style="width:1.601in" /><col style="width:1.202in" /><col style="width:1.573in" /><col style="width:1.202in" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d137e393"><p class="p">Layers:</p>
</th>
<th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d137e396"><p class="p">Anchors<span class="ph FontProperty LiteralSubScript">mask1</span></p>
</th>
<th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d137e401"><p class="p">Separators</p>
</th>
<th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d137e404"><p class="p">Mutable<span class="ph FontProperty LiteralSubScript">mask1</span></p>
</th>
<th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d137e409"><p class="p">Uncolored</p>
</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d137e393 "><p class="p"><span class="ph FontProperty shellcommand">Anchors</span><span class="ph FontProperty LiteralSubScript">mask0</span></p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d137e396 "><p class="p">Allowed</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d137e401 "><p class="p">Allowed</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d137e404 "><p class="p">Overlap yes; abut no</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d137e409 "><p class="p">Not allowed</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d137e393 "><p class="p"><span class="ph FontProperty shellcommand">Separators</span></p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d137e396 "><p class="p">Allowed</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d137e401 "><p class="p">Allowed</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d137e404 "><p class="p">Allowed</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d137e409 "><p class="p">Not allowed</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d137e393 "><p class="p"><span class="ph FontProperty shellcommand">Mutable</span><span class="ph FontProperty LiteralSubScript">mask0</span></p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d137e396 "><p class="p">Overlap yes; abut no</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d137e401 "><p class="p">Allowed</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d137e404 "><p class="p">Overlap yes; abut no</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d137e409 "><p class="p">Not allowed</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d137e393 "><p class="p"><span class="ph FontProperty shellcommand">Uncolored</span></p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d137e396 "><p class="p">Not allowed</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d137e401 "><p class="p">Not allowed</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d137e404 "><p class="p">Not allowed</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d137e409 "><p class="p">Allowed</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">Prior to Calibre release 2016.3, ANCHOR-to-MUTABLE and
MUTABLE-to-MUTABLE layer interactions were not allowed.</p>
</div>
</div>
<div class="section Subsection" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id495f14cb-f981-4555-b563-e19e8d57ef29"><h2 class="title Subheading sectiontitle">DFM
BALANCE Stitch Implementation</h2><p class="p">DFM BALANCE can solve balancing issues for previously stitched
masks. As depicted in <a class="xref fm:Figure" href="#id1698108d-7df2-4f19-9289-7faea1c39cf6__idef777e54-59d3-45a0-b5d9-35827f013692">Figure 2</a>, multiple solutions are
possible.</p>
<div class="fig fignone" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__idef777e54-59d3-45a0-b5d9-35827f013692"><span class="figcap"><span class="fig--title-label">Figure 2. </span>DFM BALANCE
Stitch Solutions</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:132" src="../graphics/DFMBalance_stitch_solutions.png" /></div><br /></div>
</div>
<div class="section Subsection" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id8e4cce48-1e29-41c4-becd-00ada27fce40"><h2 class="title Subheading sectiontitle">DFM
BALANCE Statistics</h2><p class="p">DFM BALANCE can print processing statistics. To invoke DFM BALANCE
statistical output, you set an environment variable (Bourne shell
shown):</p>
<pre class="pre codeblock"><code>CALIBRE_DFM_BALANCE_STATISTICS=1
export CALIBRE_DFM_BALANCE_STATISTICS</code></pre><p class="p">In the following example, the changes to shapes belonging to
each mask are recorded.</p>
<h2 class="title Subheading sectiontitle">Example of DFM BALANCE
Statistical Output for Triple-Patterning</h2><pre class="pre codeblock leveled"><code><span class="ph FontProperty P9">DFM Balance Statistics : -----------------------------------------------------
DFM Balance Statistics : SPEC - stat_test
DFM Balance Statistics : MASK 1 - FULL_MASK1, CHANGED_MASK1
DFM Balance Statistics :   Initial polygons: 1202 - mutable: 1202, anchored: 0
DFM Balance Statistics :   To other masks: 70 (5.8%) - MASK 2: 38, MASK 3: 32
DFM Balance Statistics :   From other masks: 48 (4.0%) - MASK 2: 25, MASK 3: 23
DFM Balance Statistics :   From OVERLAY: 5 (0.4%)
DFM Balance Statistics :   Final polygons: 1248
DFM Balance Statistics :   Promoted polygons: 16 (1.3%)
DFM Balance Statistics : MASK 2 - FULL_MASK2, CHANGED_MASK2
DFM Balance Statistics :   Initial polygons: 1134 - mutable: 1134, anchored: 0
DFM Balance Statistics :   To other masks: 66 (5.8%) - MASK 1: 25, MASK 3: 41
DFM Balance Statistics :   From other masks: 48 (4.2%) - MASK 1: 38, MASK 3: 10
DFM Balance Statistics :   From OVERLAY: 41 (3.6%)
DFM Balance Statistics :   Final polygons: 1280
DFM Balance Statistics :   Promoted polygons: 12 (1.1%)
DFM Balance Statistics : MASK 3 - FULL_MASK3, CHANGED_MASK3
DFM Balance Statistics :   Initial polygons: 1098 - mutable: 1098, anchored: 0
DFM Balance Statistics :   To other masks: 33 (3.0%) - MASK 1: 23, MASK 2: 10
DFM Balance Statistics :   From other masks: 73 (6.6%) - MASK 1: 32, MASK 2: 41
DFM Balance Statistics :   From OVERLAY: 42 (3.8%)
DFM Balance Statistics :   Final polygons: 1306
DFM Balance Statistics :   Promoted polygons: 0 (0.0%)
DFM Balance Statistics : ------------------------------------------------------</span></code></pre></div>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><div class="section Subsection" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id12819a8b-cc52-4d3c-bd28-39e06924d62e"><h2 class="title Subheading sectiontitle">Example 1 — Command
Variations</h2><pre class="pre codeblock leveled"><code>DFM SPEC BALANCE met1_balance 2 WITH DENSITY &gt;= 0.45 ... 
 
balanced_mask1 = DFM BALANCE met1_balance MASK 1 
failed_windows_unmerged = DFM BALANCE met1_balance UNMERGED 
failed_windows_merged = DFM BALANCE met1_balance </code></pre></div>
<div class="section Subsection" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id946a3623-fba0-4aae-b411-cda6687d9eaf"><h2 class="title Subheading sectiontitle">Example 2 — Commands
as Checks</h2><pre class="pre codeblock leveled"><code>Balanced_mask1 {@ Balanced Mask1 polygons
	DFM BALANCE met1_balance MASK 1
} 
Failed_windows_unmerged { 
	DFM RDB (DFM BALANCE met1_balance UNMERGED FAILED) 
		"density_results.rdb" 
		CHECKNAME "Failed_windows_unmerged" 
		COMMENT "windows that fail density balancing requirements"
} 
Analysis_windows_merged {@ Merged passing and failing density windows
	DFM BALANCE met1_balance
}</code></pre></div>
<div class="section Subsection" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__idbe3240fb-e5b7-403f-bc4a-7013405b7c71"><h2 class="title Subheading sectiontitle">Example
3 - Prebalancing Statements (enables optimal balancing)</h2><pre class="pre codeblock"><code>// 1. Detect and isolate used stitches
used_stitches = M1_mask1 AND M1_mask0
used_stitches_separators =(used_stitches NOT COINCIDENT EDGE M1_target)
	INTERNAL &lt;= 0.100

// 2. Construct balancing separators
balance_separators = DFM COPY used_stitch_separators M1_separators

// 3. Consider colored polygons interacting with anchors or 
//		anchor seeds but not stitches
anchor_mask0_all = ((M1_mask0 NOT used_stitches) NOT anchor_mask1)
	INTERACT anchor_mask0
anchor_mask1_all = ((M1_mask1 NOT used_stitches) NOT anchor_mask0)
	INTERACT anchor_mask1</code></pre><pre class="pre codeblock"><code>// 4. Remove stitches from mutable polygons
Mutable_mask0_without_stitching = (M1_mask0 NOT used_stitches)
	NOT INTERACT anchor_mask0_all
Mutable_mask1_without_stitching = (M1_mask1 NOT used_stitches)
	NOT INTERACT anchor_mask1_all

// 5. Derive final mutable masks
Mutable_mask0 = Mutable_mask0_without_stitching
	NOT INTERACT anchor_mask0_all
Mutable_mask1 = Mutable_mask1_without_stitching
	NOT INTERACT anchor_mask1_all</code></pre><pre class="pre codeblock leveled"><code>DFM SPEC BALANCE Mutable_mask0 2 WITH DENSITY &gt;= 0.45 ... 
balanced_mask0 = DFM BALANCE Mutable_mask0 MASK 1 
failed_windows_unmerged = DFM BALANCE Mutable_mask0 UNMERGED 
failed_windows_merged = DFM BALANCE Mutable_mask0 </code></pre></div>
<div class="section Subsection" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id0a80ecfe-c364-4aa4-bdc3-ee7fa7daf089"><h2 class="title Subheading sectiontitle">Example
4 - Double-Patterning</h2><pre class="pre codeblock"><code>VARIABLE delta_den 0.4
VARIABLE window_size 0.2
VARIABLE window_step 0.1</code></pre><pre class="pre codeblock"><code>Anchor_mask0_all = M1_DP_mask0 INTERACT Anchor_mask0
Anchor_mask1_all = M1_DP_mask1 INTERACT Anchor_mask1</code></pre><pre class="pre codeblock"><code>Mutable_mask0 = M1_DP_mask0 NOT INTERACT Anchor_mask0_all
Mutable_mask1 = M1_DP_mask1 NOT INTERACT Anchor_mask1_all</code></pre><pre class="pre codeblock"><code>DFM SPEC BALANCE "DP_spec" 2
	ANCHOR Anchor_mask0_all Anchor_mask1_all
	MUTABLE Mutable_mask0 Mutable_mask1
	SEPARATOR M1_Separators
	WITH DENSITY MIN_COLOR_OVER_TOTAL_COLOR &gt;= delta_den
	BACKUP INSIDE OF EXTENT WINDOW window_size STEP window_step</code></pre><pre class="pre codeblock"><code>DB_Balanced_mask0 = DFM BALANCE "DP_spec" FULL MASK 0
DB_Balanced_mask1 = DFM BALANCE "DP_spec" FULL MASK 1</code></pre><pre class="pre codeblock"><code>DB_FailedWindows = DFM BALANCE "DP_spec" UNMERGED  </code></pre></div>
<div class="section Subsection" id="id1698108d-7df2-4f19-9289-7faea1c39cf6__id977a26bf-0c35-4882-b265-1891656098af"><h2 class="title Subheading sectiontitle">Example
5 - Triple-Patterning</h2><pre class="pre codeblock"><code>VARIABLE delta_den 0.3
VARIABLE window_size 0.2
VARIABLE window_step 0.1</code></pre><pre class="pre codeblock"><code>Anchor_mask1_all = M1_TP_mask1 INTERACT Anchor_mask1
Anchor_mask2_all = M1_TP_mask2 INTERACT Anchor_mask2
Anchor_mask3_all = M1_TP_mask3 INTERACT Anchor_mask3</code></pre><pre class="pre codeblock"><code>Mutable_mask1 = M1_TP_mask1 NOT INTERACT Anchor_mask1_all
Mutable_mask2 = M1_TP_mask2 NOT INTERACT Anchor_mask2_all
Mutable_mask3 = M1_TP_mask3 NOT INTERACT Anchor_mask3_all</code></pre><pre class="pre codeblock"><code>DFM SPEC BALANCE "TP_spec" 3
	ANCHOR Anchor_mask1_all Anchor_mask2_all Anchor_mask3_all
	MUTABLE Mutable_mask1 Mutable_mask2 Mutable_mask3
	SEPARATOR balance_separators
	WITH DENSITY MIN_COLOR_OVER_TOTAL_COLOR &gt;= delta_den
	BACKUP INSIDE OF EXTENT WINDOW window_size STEP window_step</code></pre><pre class="pre codeblock"><code>DB_full_mask1 = DFM BALANCE "TP_spec" FULL MASK 1
DB_full_mask2 = DFM BALANCE "TP_spec" FULL MASK 2
DB_full_mask3 = DFM BALANCE "TP_spec" FULL MASK 3</code></pre><pre class="pre codeblock"><code>DB_FailedWindows = DFM BALANCE "TP_spec" UNMERGED  </code></pre></div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_MultiPatterningSVRFCommands_id2565a2fa.html" title="A typical SVRF rule file containing double-, triple-, and quadruple-patterning may also contain other SVRF commands that declare input layers, perform preliminary layer manipulation, and save output layers.">Multi-Patterning SVRF Commands</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_mp_useref"
                DocTitle = "Calibre® Multi-Patterning User’s and Reference Manual"
                PageTitle = "DFM BALANCE"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_DfmBalance_id1698108d.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Multi-Patterning User’s and Reference Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>