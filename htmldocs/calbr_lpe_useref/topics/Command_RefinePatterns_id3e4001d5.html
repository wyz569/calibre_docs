<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="refine_patterns" />
<meta name="abstract" content="Identifies repair regions with identical input and processes them as one instance. Requires refine_process hier." />
<meta name="description" content="Identifies repair regions with identical input and processes them as one instance. Requires refine_process hier." />
<meta name="DC.subject" content="Pattern matching, Refine_patterns keyword" />
<meta name="keywords" content="Pattern matching, Refine_patterns keyword" />
<meta name="prodname" content="Calibre LPE User's and Reference Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Calibre LPE User's and Reference Manual" />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-18" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="2" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_lpe_useref" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="IncludeDraftCommentsinChangeLog" content="All" />
<meta name="HighlightColor" content="Light Blue" />
<meta name="HighlightChanges" content="yes" />
<meta name="EclipsePluginName" content="NONE" />
<meta name="DraftDate" content="March 20, 2021" />
<meta name="Draft" content="NONE" />
<meta name="DocumentTitle" content="Calibre® Local Printability Enhancement User’s and Reference Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,doc.type.documentation.ref,product.version.v2021.2,product.id.P10115" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id3e4001d5-2dfc-4f0d-af36-4ab2cb5985da" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>refine_patterns</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="refine_patterns" />
<meta name="attributes" content="doc.type.documentation.user,doc.type.documentation.ref,product.version.v2021.2,product.id.P10115" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="id3e4001d5-2dfc-4f0d-af36-4ab2cb5985da">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">refine_patterns</h1>
<div class="body refbody CommandRefBody"><div class="abstract CommandRefAbstract"><p class="p ContextMGC">Type: <a class="xref fm:HeadingOnly" href="Contain_LithoSetupFileCommands_idf8488858.html#idf8488858-d704-4170-bff8-4bdfecceaa4d__Contain_LithoSetupFileCommands_idf8488858.xml#idf8488858-d704-4170-bff8-4bdfecceaa4d" title="This section lists commands that can appear in a Calibre LPE setup file.">Litho Setup File Commands</a></p>
<p class="shortdesc">Identifies repair regions with
identical input and processes them as one instance. Requires refine_process
hier.</p>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName Required">refine_patterns </span>{<span class="keyword ParameterName Required">layer </span><span class="keyword ParameterName RequiredReplaceable">layer_in</span>}… [<span class="keyword ParameterName OptionalReplaceable">transform</span>] </p>
</div>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="id3e4001d5-2dfc-4f0d-af36-4ab2cb5985da__ided18cb43-3c35-4e94-8c5a-9b256baea9b4"><span class="keyword ParameterName Required">layer</span> <span class="keyword ParameterName RequiredReplaceable">layer_in</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument indicating
the input layer. At least one input layer must be specified. The
first layer must be of type “correction” or “opc”. (The opc layer
is recommended.) Subsequent layers can be of type correction, opc,
or hidden.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id3e4001d5-2dfc-4f0d-af36-4ab2cb5985da__id495fa7ed-2799-4405-a805-3a3cc0e44ec1"><span class="keyword ParameterName OptionalReplaceable">transform</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument specifying
valid transformations for a region to be considered a duplicate.
The following keywords are valid: </p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="id3e4001d5-2dfc-4f0d-af36-4ab2cb5985da__idcb0b9414-ddf7-47b4-a913-1e4f66eec5fa" class="table" frame="void" border="0" rules="none"><colgroup><col style="width:1.213in" /><col style="width:1.213in" /><col style="width:1.213in" /><col style="width:1.213in" /><col style="width:1.000in" /></colgroup><tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">all</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">reflect x</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">reflect 45</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">rotate 90</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">identity</p>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p"><span class="keyword ParameterName OptionalDefault">auto</span></p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">reflect y</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">reflect -45</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">rotate -90</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;"><p class="p">rotate 180</p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p">The keywords all and auto cannot
be specified with any other <span class="keyword ParameterName OptionalReplaceable">transform</span> keywords.
The other eight keywords can be specified in combination, and are
defined in <a class="xref fm:Figure" href="#id3e4001d5-2dfc-4f0d-af36-4ab2cb5985da__idd3cc41ad-a843-489d-a8ba-af63fa51af73">Figure 1</a>.</p>
<div class="fig fignone" id="id3e4001d5-2dfc-4f0d-af36-4ab2cb5985da__idd3cc41ad-a843-489d-a8ba-af63fa51af73"><span class="figcap"><span class="fig--title-label">Figure 1. </span>Transformations for
Pattern Matching</span><br /><div class="imagecenter"><img class="image imagecenter" height="259" src="../graphics/reference09a.png" width="401" /></div><br /></div>
<p class="p">The default behavior is “auto”.
This setting automatically determines applicable transformations
based on the optical model of the first pxopc or opcverify <a class="xref fm:HeadingOnly" href="Command_RefineExec_id68475ca4.html#id68475ca4-20eb-4995-90bb-f6b387f3d9d5__Command_RefineExec_id68475ca4.xml#id68475ca4-20eb-4995-90bb-f6b387f3d9d5" title="Required. Calls the various operations to enhance printability in the marked regions. This command must be used instead of “setlayer pxopc” or “setlayer denseopc”.">refine_exec</a> statement. The “all” keyword specifies
all transformations, even if they are not valid with the particular
optical model. The recommended setting is “auto”.</p>
</dd>
</dl>
</div>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">An optional command that activates
pattern classification to recognize repair regions with identical
input layers. It requires hierarchical repair regions, which you
enable with <a class="xref fm:HeadingOnly" href="Command_RefineProcess_idf0987578.html#idf0987578-1e12-4255-be15-fdb6c9c82f47__Command_RefineProcess_idf0987578.xml#idf0987578-1e12-4255-be15-fdb6c9c82f47" title="Preserves the layout hierarchy in repair regions.">refine_process</a> hier. If refine_patterns is in
the recipe without refine_process hier, the run exits with the following
error:</p>
<pre class="pre codeblock leveled"><code>RET REFINE - Specify refine_process hier to use refine_patterns.</code></pre><p class="p">Matching regions are processed once,
instead of each being processed independently. For designs with
repetitive patterns such as memory, pattern classification reduces
run time and memory consumption.</p>
<p class="p">After optimization, the same
core and context results are pasted into all matching repair regions. In
order to catch any individual MRC issues, it is best to run refine_patterns
as part of an iterative repair flow. (See “<a class="xref fm:HeadingOnly" href="#id3e4001d5-2dfc-4f0d-af36-4ab2cb5985da__ide294850b-dc87-4c21-8df3-2775e211c3c9">Example 2 — Recommended Combination</a>.”)</p>
<p class="p">The refine_patterns command does
not require the marker to be identically placed relative to the pattern.
The pattern is constructed from the first unique region the algorithm
encounters, generally the bottom left of the layout. It maps the
relative position of the vertices of the shapes on <span class="keyword ParameterName RequiredReplaceable">layer_in</span> within
the repair region.</p>
<p class="p">All other repair regions are
compared to discovered patterns. If all vertices within the region
on the layer have the same geometrical configuration, the regions
are considered a match. If the marker is significantly offset, parts
of the <span class="keyword ParameterName RequiredReplaceable">layer_in</span> shapes
may project beyond the repair region. In this case a match will
not be made, even if the overlapping regions are otherwise identical.</p>
<div class="fig fignone" id="id3e4001d5-2dfc-4f0d-af36-4ab2cb5985da__id0ba7852f-ce0c-4763-b660-d33cf25b939d"><span class="figcap"><span class="fig--title-label">Figure 2. </span>Matching Repair Regions</span><br /><div class="imagecenter"><img class="image imagecenter" height="138" src="../graphics/reference10a.png" width="462" /></div><br /></div>
<div class="section Subsection" id="id3e4001d5-2dfc-4f0d-af36-4ab2cb5985da__id3c201ffe-3197-4ff1-bac7-8192982154b4"><h2 class="title Subheading sectiontitle">Double
Pattern Classification</h2><p class="p">If the <span class="keyword ParameterName RequiredReplaceable">layer_in</span> is
a target layer (that is, it is of type “opc”), pattern matching
is done with double pattern classification. This method uses the
target layer in pxOPC operations, and the correction layer for other
refine_exec operations. The reason that the verification operations
use the correction layer is that shapes in the visible region could
cause MRC violations.</p>
<p class="p">Automatic MRC repair is automatically
applied when results are copied to the original matching regions,
before running the verification refine_exec operations. The repair
is based on the correction layer of the initial pattern. Automatic
MRC repair is written to the transcript as the “reassemble” process. </p>
</div>
<div class="section Subsection" id="id3e4001d5-2dfc-4f0d-af36-4ab2cb5985da__id88915717-a824-4baf-ab10-4b48d3a4a997"><h2 class="title Subheading sectiontitle">Transcript
Additions</h2><p class="p">When refine_patterns is included
in the LPE setup file, the following sections are added to the transcript.</p>
<pre class="pre codeblock leveled"><code>refine_patterns enabled for the following transforms:

		IDENTITY (TRANSLATION)
		...</code></pre><p class="p">Depending on the specified <span class="keyword ParameterName OptionalReplaceable">transform</span>s,
there may be additional transformations listed.</p>
<p class="p">The next section depends on whether
the <span class="keyword ParameterName RequiredReplaceable">layer_in</span> is
a correction layer (regular pattern matching) or an opc layer (double
pattern classification). For regular pattern matching, the transcript
shows the following:</p>
<pre class="pre codeblock leveled"><code>refine_patterns activated with correction layer:
	The correction layer is to be used for the pattern matching
	There is no second pattern matching in this case</code></pre><p class="p">For double pattern classification,
the transcript shows instead:</p>
<pre class="pre codeblock leveled"><code>refine_patterns activated with target layer:
	The target layer is to be used for the first pattern matching
	The correction layer is to be used for the second pattern matching
	The first pattern matching will be used for pxopc execution
	The second pattern matching will be used for the execution of the rest of the operations.</code></pre><p class="p">Last is a report of the time
required for pattern matching. </p>
<pre class="pre codeblock leveled"><code>RET REFINE the pattern matching finished: CPU TIME ...</code></pre></div>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><div class="section Subsection" id="id3e4001d5-2dfc-4f0d-af36-4ab2cb5985da__iddb44bced-ea63-4392-aceb-20b5cf9edd19"><h2 class="title Subheading sectiontitle">Example 1 — Minimum
Command Syntax</h2><pre class="pre codeblock leveled"><code>refine_patterns layer input1
refine_process hier</code></pre><p class="p">The minimum command specifies one
input layer, and reads the optical model to determine what types
of transformation are valid. Optical model information is reported
in the transcript in a line beginning “//-- INFO: WORST OPTICAL
MODEL SOURCE SYMMETRY”.</p>
</div>
<div class="section Subsection" id="id3e4001d5-2dfc-4f0d-af36-4ab2cb5985da__ide294850b-dc87-4c21-8df3-2775e211c3c9"><h2 class="title Subheading sectiontitle">Example 2 — Recommended
Combination</h2><p class="p">When using refine_patterns, it is
best to include it in an iterative flow, as shown in the following code.</p>
<pre class="pre codeblock leveled"><code><a class="xref fm:HeadingOnly" href="Command_LithoFile_idb1216fa1.html#idb1216fa1-4867-4f9e-b215-02334f9754f6__Command_LithoFile_idb1216fa1.xml#idb1216fa1-4867-4f9e-b215-02334f9754f6" title="Specifies a Litho setup file in the SVRF rule file for use by Calibre Litho/RET tools.">LITHO FILE</a> lpe.setup [/*

# Layers
<a class="xref fm:HeadingOnly" href="Command_Layer_idcaf412ac.html#idcaf412ac-2854-4120-972c-d1b2544d56ba__Command_Layer_idcaf412ac.xml#idcaf412ac-2854-4120-972c-d1b2544d56ba" title="Required. Specifies input layers that correspond to the layers in the RET REFINE command.">layer</a> target  opc         # drawn target
layer init1   correction  # layer with earlier OPC corrections
layer markers hidden      # hotspot indicators
...
refine_patterns target
refine_process hier
...
# Commands for iterative flow
<a class="xref fm:HeadingOnly" href="Command_RefineStopIterations_ida8240350.html#ida8240350-72de-40b4-bea8-65ddb1b4d61d__Command_RefineStopIterations_ida8240350.xml#ida8240350-72de-40b4-bea8-65ddb1b4d61d" title="Specifies how many iterations at most to perform. The default is 1.">refine_stop_iterations</a> 2
<a class="xref fm:HeadingOnly" href="Command_RefineStopLayer_id6bc517fc.html#id6bc517fc-5fa6-4fa5-8aad-557e0fda3d12__Command_RefineStopLayer_id6bc517fc.xml#id6bc517fc-5fa6-4fa5-8aad-557e0fda3d12" title="Identifies the refine_exec output layer that contains any hot spots after each iteration.">refine_stop_layer</a> hotspots

# Execution
<a class="xref fm:HeadingOnly" href="Command_RefineExec_id68475ca4.html#id68475ca4-20eb-4995-90bb-f6b387f3d9d5__Command_RefineExec_id68475ca4.xml#id68475ca4-20eb-4995-90bb-f6b387f3d9d5" title="Required. Calls the various operations to enhance printability in the marked regions. This command must be used instead of “setlayer pxopc” or “setlayer denseopc”.">refine_exec</a> iter1  = pxopc target file pxopc1.in file pxopc2.in map x1
refine_exec space  = mrc iter1 map spacing
refine_exec bridge = opcverify target iter1 file opcv.in map bridge
refine_exec pinch  = opcverify target iter1 file opcv.in map pinch
refine_exec hotspots = or bridge pinch space
...
*/]</code></pre></div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_LithoSetupFileCommands_idf8488858.html" title="This section lists commands that can appear in a Calibre LPE setup file.">Litho Setup File Commands</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../topics/Command_RefineProcess_idf0987578.html#idf0987578-1e12-4255-be15-fdb6c9c82f47__" title="Preserves the layout hierarchy in repair regions.">refine_process</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_lpe_useref"
                DocTitle = "Calibre® Local Printability Enhancement User’s and Reference Manual"
                PageTitle = "refine_patterns"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_RefinePatterns_id3e4001d5.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Local Printability Enhancement User’s and Reference Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>