<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="fragment_corner" />
<meta name="abstract" content="Fragmentation control: Used for fragmentation at corners." />
<meta name="description" content="Fragmentation control: Used for fragmentation at corners." />
<meta name="DC.subject" content="fragment_corner" />
<meta name="keywords" content="fragment_corner" />
<meta name="prodname" content="Calibre nmMPC and Calibre nmCLMPC User's and Reference Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-25" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="2" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_nmmpc_useref" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® nmMPC™ and Calibre® nmCLMPC User’s and Reference Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,doc.type.documentation.ref, product.version.v2021.2,product.id.P10101" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="NONE" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="no" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="ConditionFiltering" content="XML" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id1daa4327-96ad-483a-bfb5-9ca03faa5e30" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>fragment_corner</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="fragment_corner" />
<meta name="attributes" content="doc.type.documentation.user,doc.type.documentation.ref, product.version.v2021.2,product.id.P10101" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">fragment_corner</h1>
<div class="body refbody CommandRefBody"><div class="abstract CommandRefAbstract"><p class="p ContextMGC"><a class="xref fm:HeadingOnly" href="General_MpcDenseopcOptionsCommands_ida79cb58c.html#ida79cb58c-92b5-48b0-987b-92c4ae7c47f2__General_MpcDenseopcOptionsCommands_ida79cb58c.xml#ida79cb58c-92b5-48b0-987b-92c4ae7c47f2" title="The OPTION opt_name argument specifies an inlined denseopc_options sub-parameter block (within the LITHO FILE block) containing a lowercase only command initialization block consisting of the following keywords, specified one per line:">MPC denseopc_options Commands</a> </p>
<p class="shortdesc">Fragmentation control: Used
for fragmentation at corners.</p>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName Required">fragment_corner </span><span class="keyword ParameterName RequiredReplaceable">edge_spec</span><span class="keyword ParameterName Required"> </span>[fragment] <span class="keyword ParameterName RequiredReplaceable">rule</span> [corner2 [fragment] <span class="keyword ParameterName OptionalReplaceable">rule</span>] <br />
[{breakinhalf | alwaysbreakinhalf} [enforce]]</p>
<p class="lines UsageLine">where:</p>
<p class="lines UsageLine"><span class="keyword ParameterName RequiredReplaceable">edge_spec</span> = {<span class="keyword ParameterName RequiredReplaceable">corner_type</span> [<span class="keyword ParameterName OptionalReplaceable">corner_subtype</span>] [<span class="keyword ParameterName OptionalReplaceable">corner_type</span>_next [<span class="keyword ParameterName OptionalReplaceable">corner_subtype</span>]]}<br />
 [<span class="keyword ParameterName OptionalReplaceable">corner_type</span> [<span class="keyword ParameterName OptionalReplaceable">corner_subtype</span>] [<span class="keyword ParameterName OptionalReplaceable">corner_type</span>_next [<span class="keyword ParameterName OptionalReplaceable">corner_subtype</span>]]] [length <span class="keyword ParameterName OptionalReplaceable">constraint</span>] <br />
[length1 <span class="keyword ParameterName OptionalReplaceable">constraint</span>] [length1_next <span class="keyword ParameterName OptionalReplaceable">constraint</span>] <br />
[length2 <span class="keyword ParameterName OptionalReplaceable">constraint</span>] [length2_next <span class="keyword ParameterName OptionalReplaceable">constraint</span>]<br />
[jog_tol <span class="keyword ParameterName OptionalReplaceable">distance</span>]</p>
<p class="lines UsageLine"><span class="keyword ParameterName RequiredReplaceable">corner_type</span> = {concave | convex}</p>
<p class="lines UsageLine"><span class="keyword ParameterName OptionalReplaceable">corner_subtype</span> = {end_adjacent | non_end_adjacent | angle_90 | angle_non90}</p>
<p class="lines UsageLine"><span class="keyword ParameterName RequiredReplaceable">rule</span> = [split <span class="keyword ParameterName OptionalReplaceable">n</span> [force]] | <br />
[<span class="keyword ParameterName OptionalReplaceable">len1…lenN </span>  [priority] [rem <span class="keyword ParameterName OptionalReplaceable">r</span>]] [applyratio] [allowtrim <span class="keyword ParameterName OptionalReplaceable">amount</span>] <br />
[repeat <span class="keyword ParameterName OptionalReplaceable">length</span> [<span class="keyword ParameterName OptionalReplaceable">max_length</span>] [force]] </p>
</div>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><p class="p"><span class="ph FontProperty HeadingLabel">Top Level Arguments</span></p>
<dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__idae53432c-32a1-4cbb-9db3-c691a0056097">fragment </dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword that can
be used to separate the fragmentation rule from the edge specification.
You can also use this option with the length1/length2 keywords so
that the length value is separated from the fragmentation values.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id37cd7c9d-01a8-41db-9e58-25136161fef5">corner2</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword that can
only be used if there are two corners defined, and the definitions
are unambiguously different. (For example, concave convex or concave angle_90
concave angle_non90.) </p>
<p class="p">If corner2 is specified, it
must be followed by a fragmentation rule for the second endpoint.</p>
<p class="p">In cases where a single-corner rule and a two-corner rule both
apply to a corner, the two-corner rule is used.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id31d6b6f0-be4e-4d3e-8655-1ef8200a9d75">breakinhalf [enforce]</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword that splits
the middle fragment of edges in half when ripples are specified
(<span class="keyword ParameterName OptionalReplaceable">len1</span>…<span class="keyword ParameterName OptionalReplaceable">lenN</span> or
repeat <span class="keyword ParameterName OptionalReplaceable">length</span>)
but cannot be placed due to constraints. The halves of the split
fragment must be greater than fragment_min.</p>
<p class="p">Notice that by default, <span class="ph FontProperty emphasis">breakinhalf does not enforce the rem value of the rule</span>.
Instead, it ignores the rem value and enforces the fragment_min
value for the layer. If you need to have the rem value enforced
over the fragment_min value, use the enforce option.</p>
<p class="p">If enforce is not specified,
splitting only occurs if it does not cause the remaining fragments to
be smaller than the fragment_layer’s fragment_min value. See “<a class="xref fm:HeadingOnly" href="#id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id35903cda-aa99-4c2b-bcde-356d987bc6e4">Example 2: breakinhalf</a>” and <a class="xref fm:HeadingOnly" href="#id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id0a5f5c08-5c3d-48ab-b614-35f3edfdb969">Example 3: breakinhalf enforce</a>.</p>
<p class="p">The enforce option may only
be specified immediately following breakinhalf.</p>
</dd>
</dl>
<p class="p"><span class="keyword ParameterName RequiredReplaceable">edge_spec</span> <span class="ph FontProperty HeadingLabel">Arguments</span></p>
<dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__ida66a8d36-eca7-4112-a5a0-6dccc16238c9"><span class="keyword ParameterName RequiredReplaceable">corner_type</span>   <span class="keyword ParameterName OptionalReplaceable">corner_type</span>_next</dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument indicating whether a
corner is concave or convex. At least one corner must be defined
in the <span class="keyword ParameterName RequiredReplaceable">edge_spec</span>.
You can specify up to four corners using the _next suffix, for example:</p>
<pre class="pre codeblock"><code>fragment_corner convex concave_next convex concave_next …</code></pre><p class="p">(The rule would apply to the edge between two convex corners
that both have concave corners as their other neighbors. See “<a class="xref fm:HeadingAndPage" href="#id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id78b4f82d-b429-4742-8670-26f2874977a3">Example 6: Using corner_next</a>”.)</p>
<p class="p">The concave_next and convex_next keywords can only be specified
after a <span class="keyword ParameterName RequiredReplaceable">corner_type</span> [<span class="keyword ParameterName OptionalReplaceable">corner_subtype</span>].</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">If concave_next or convex_next is used, the corresponding
length1/length2 values must be specified to prevent differences
between flat and hierarchical runs. (The length1 and length2 values
should provide an upper bound.)</p>
</div>
<p class="p">For example, </p>
<pre class="pre codeblock"><code>fragment_corner convex convex_next fragment 0.1</code></pre><p class="p">produces the warning message </p>
<pre class="pre codeblock"><code>fragment_corner length1 must be specified and &lt; <span class="keyword ParameterName OptionalReplaceable">value</span> when a corner1_next corner or length1_next is specified in order to limit fragmentation inconsistencies.</code></pre></dd>
<dt class="dt ArgumentName dlterm" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id3651613b-db17-416b-81b5-a5ff3673c088">corner_subtype</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument further differentiating
the corner. You can specify one per <span class="keyword ParameterName RequiredReplaceable">corner_type</span>.
The same subtypes are used for both convex and concave. Valid values
are the following:</p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id94340910-ee16-4bbc-997b-029a672fa19a"><p class="p Opt">end_adjacent — the corner satisfies the
line-end or space-end adjacent criteria. (See line end fragment
and space-end fragment in the glossary for line-end and space-end criteria.)</p>
</li>
<li class="li ArgOption" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id2b60c120-ceeb-40bc-9e0d-0a6880bb4df3"><p class="p Opt">non_end_adjacent
— the corner is not end-adjacent.</p>
</li>
<li class="li ArgOption" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id2d41b380-b64f-4533-85d3-e718805fc0af"><p class="p Opt">angle_90
— the corner is a 90 or 270 degree angle.</p>
</li>
<li class="li ArgOption" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id47d496a4-ae6a-44d0-babf-8b0f8a305bc1"><p class="p Opt">angle_non90
— the corner is not a right angle.</p>
</li>
</ul>
</dd>
<dt class="dt ArgumentName dlterm" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id7edb2d6b-fe81-4c7e-adad-98ad9b129778">length <span class="keyword ParameterName OptionalReplaceable">constraint</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument specifying
the length of the edge. The constraint takes the form of a DRC constraint
and the value is specified in microns. For example:</p>
<pre class="pre codeblock"><code>length &gt; 0.1 &lt;= 0.2
length &gt; 0.2
length == 0.3</code></pre></dd>
<dt class="dt ArgumentName dlterm" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id09d2b1f0-d778-4177-99e9-f484e78fb40b">[length1 <span class="keyword ParameterName OptionalReplaceable">constraint</span> [length1_next <span class="keyword ParameterName OptionalReplaceable">constraint</span>]]   [length2 <span class="keyword ParameterName OptionalReplaceable">constraint</span> [length2_next <span class="keyword ParameterName OptionalReplaceable">constraint</span>]]</dt>
<dd class="dd ArgumentDescription"><p class="p">Optional keywords that specify
the length of the edges at corner 1 and corner 2, and the lengths
of the edges on either side of length1 and length2, respectively
as illustrated in <a class="xref fm:FigureAndPage" href="#id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id29c9963d-79f2-4d2b-ad25-93f69b5ac906">Figure 2</a>.
The constraint takes the form of a DRC constraint and the value
is specified in microns. </p>
<p class="p">Both length1 and length2 may
be specified without the other. For example:</p>
<pre class="pre codeblock"><code>length1 &lt;= 0.15
length1 &gt; 0.2 length2 &gt; 0.2
length2 &lt; 0.24</code></pre><p class="p">When the rule includes a “corner corner_next”, the corresponding
length1 or length2 must be specified, but length1_next and length2_next
are completely optional. The length1_next and length2_next can only
be specified after a length1 or length2.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__idaa11b549-22e6-4319-921e-ed9edd41c2ce">jog_tol <span class="keyword ParameterName OptionalReplaceable">distance</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument that causes jogs less
than or equal to <span class="keyword ParameterName OptionalReplaceable">distance</span> to
be ignored for length1, length1_next, length2, and length2_next.
The <span class="keyword ParameterName OptionalReplaceable">distance</span> value
is in microns.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">Jogs on the primary edge, measured by “length <span class="keyword ParameterName OptionalReplaceable">constraint</span>”,
are <span class="ph FontProperty emphasis">not</span> ignored.
The jog_tol option only ignores jogs on neighboring edges.</p>
</div>
<p class="p">If jog_tol is not specified, jogs are handled like a corner.</p>
</dd>
</dl>
<p class="p"><span class="keyword ParameterName RequiredReplaceable">rule</span> <span class="ph FontProperty HeadingLabel">Arguments</span></p>
<dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id26e5d6f0-d2db-4769-abde-750ac425f0da">split <span class="keyword ParameterName OptionalReplaceable">n</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">An
optional argument specifying to break the fragment into <span class="keyword ParameterName OptionalReplaceable">n</span> equal
parts. For example, if the following command is applied to a 0.4
micron edge, the edge is split into four 0.1 micron fragments:</p>
<pre class="pre codeblock leveled"><code>fragment_corner convex length &lt;= 0.685 split 4</code></pre><p class="p">The <span class="keyword ParameterName OptionalReplaceable">n</span> value
must be an integer between 2 and 40, inclusive. If the resulting
fragments violate fragment_min, the command generates an error.
The preceding example would likely generate an error because lengths
of 0 would be split into four fragments. You can prevent this by
providing a lower bound:</p>
<pre class="pre codeblock leveled"><code>fragment_min 0.050
fragment_corner convex length &gt;= 0.200 &lt;= 0.685 split 4</code></pre><p class="p">The split <span class="keyword ParameterName OptionalReplaceable">n</span> argument
cannot be specified with any of the other <span class="keyword ParameterName RequiredReplaceable">rule</span> arguments
except force.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id5e93418b-0300-4b64-b669-20c3f87d3570">force </dt>
<dd class="dd ArgumentDescription"><p class="p">An optional keyword for use
with split. It overrides the fragment_min error. Use only when you
are certain that violating fragment_min will not cause an error. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id902f7bea-2241-451d-a74c-9a729591152b"><span class="keyword ParameterName OptionalReplaceable">len1</span><span class="keyword ParameterName Required"></span></dt>
<dd class="dd ArgumentDescription"><p class="p">The distance in microns from
a corner to the first fragmentation vertex that will be produced.
The distance must be greater than fragment_min or the run halts
with the following message:</p>
<pre class="pre codeblock"><code>intrafeature fragment is less than MinEdgeLength (value = <span class="ph FontProperty equationvariable">len</span>)</code></pre></dd>
<dt class="dt ArgumentName dlterm" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id103aaa6f-4e5f-4771-940a-67ec85d0fd7f"><span class="keyword ParameterName OptionalReplaceable">lenN</span></dt>
<dd class="dd ArgumentDescription"><p class="p">The distance in microns from
the previous fragmentation vertex to the next fragmentation vertex,
measured sequentially from the corner inward. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__ide2ae35a4-1136-483a-8d3b-7d4516aef33d">priority<span class="keyword ParameterName Required"></span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional flag for two-corner
rules indicating which corner has priority over the other. Typically,
there is no fragmentation if the remainder (<span class="keyword ParameterName Optional">rem </span><span class="keyword ParameterName OptionalReplaceable">r</span>)
is violated after the first fragment at each corner is created.
With the priority option, the fragment at the priority corner is
created if the remainder (<span class="keyword ParameterName Optional">rem </span><span class="keyword ParameterName OptionalReplaceable">r</span>)
is not violated.</p>
<p class="p">Intrafeature
fragmentation selects an edge and attempts to create ripples on
it, working inward from the corners. After the first ripple is created
at each corner, the priority flag will no longer have any effect.
Afterward, as ripples are created, intrafeature fragmentation will continue
working inward toward the center of the edge, creating ripples.
It continues until no ripples can be inserted without violating <span class="keyword ParameterName Optional">rem</span> or
fragment_min. It does this symmetrically from both corners, attempting
to insert a ripple from each corner simultaneously in order to retain
symmetry.</p>
<p class="p">In summary, the priority flag
is a “special case” handler for extremely short edges where it is
not possible to insert even one ripple from each corner. If only
one ripple from one corner can be inserted, the priority flag will
allow you to choose which one. It is ignored outside of that case. </p>
<p class="p">There are cases where using
the priority argument in corner fragmentation can result in a “remainder
violation” at non-priority corners. When priority is used, an edge
is fragmented based on priority of corner A if the remainder length
after <span class="keyword ParameterName OptionalReplaceable">A_fragment_1st</span> is
larger than rem_A or has satisfied the following condition:</p>
<p class="p"><span class="keyword ParameterName OptionalReplaceable">A_fragment_2nd</span> +
... <span class="keyword ParameterName OptionalReplaceable">A_fragment_nth</span> + <span class="keyword ParameterName OptionalReplaceable">rem_A</span> &lt;= <span class="keyword ParameterName OptionalReplaceable">remainder_length</span> &lt; <span class="keyword ParameterName OptionalReplaceable">B_fragment_1st</span> + <span class="keyword ParameterName OptionalReplaceable">rem_B</span></p>
<p class="p">This might result in a length
violation of the remainder at non-priority corners if the length setting
of <span class="keyword ParameterName OptionalReplaceable">rem_B</span> is
larger than for <span class="keyword ParameterName OptionalReplaceable">rem_A</span>,
given the priority keyword.</p>
<p class="p">For example, you have an MPC
recipe with the following corner fragment setting that applies to
an edge length of 0.180 with convex and concave corners:</p>
<pre class="pre codeblock leveled"><code>fragment_corner convex 0.065 0.060 rem 0.050 priority
fragment_corner concave 0.080 0.070 0.060 rem 0.060</code></pre><p class="p">The edge fragment result is
based on the convex corner only with “0.065 0.060 0.055”. The remainder
of the concave corner is only 0.055, which already violates the <span class="keyword ParameterName Optional">rem</span> setting
of 0.060 for concave corners.</p>
<p class="p">To avoid remainder violations,
set the same remainder (<span class="keyword ParameterName Optional">rem </span><span class="keyword ParameterName OptionalReplaceable">r</span>)
for both convex and concave corners for edge length less than (<span class="keyword ParameterName OptionalReplaceable">A_fragment_1st</span> + <span class="keyword ParameterName OptionalReplaceable">B_fragment_1st</span> + <span class="keyword ParameterName OptionalReplaceable">rem</span>)
before further fragmentation of convex and concave corners.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id3d7a7f1e-420f-4216-bac8-5d42ed492c66">rem <span class="keyword ParameterName Required"></span><span class="keyword ParameterName OptionalReplaceable">r</span></dt>
<dd class="dd ArgumentDescription"><p class="p">An optional
argument specifying the minimum allowed remainder. If fragmentation produces
a fragment with length smaller than <span class="keyword ParameterName OptionalReplaceable">r</span>,
then it will not fragment the edge. The default value is fragment_min.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id45deba77-e673-4642-8f24-dc840689e7e4">applyratio</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument specifying that an
attempt should be made to split the edge in two and that the ratio
of lengths for each corner should be maintained if possible. The
fragments are lengthened and shortened as necessary but not allowed
to violate fragment_min. If the edge is 2*fragment_min, both fragments
are kept at the same (minimal) length, despite the ratio.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id377d140a-a195-4711-8c03-0bc69ca4d617">allowtrim <span class="keyword ParameterName OptionalReplaceable">amount</span> </dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument specifying an amount
of length reduction that can be done to the corner fragment in order
to make room for a third fragment of minimum length.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id96276668-0c6a-4b5b-ac3b-230ae92907ea">repeat <span class="keyword ParameterName OptionalReplaceable">length</span> [<span class="keyword ParameterName OptionalReplaceable">max_length</span>] [force]</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument specifying a target
size for repeated fragments in the remainder. The remainder is divided
into fragments of at least this length (possibly longer). This is
typically not allowed unless the rule has a length constraint with
an upper bound. </p>
<ul class="ul ArgumentOptions"><li class="li ArgOption" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__idd2376428-08aa-424e-b298-9a1dfe5111b1"><p class="p Opt"><span class="keyword ParameterName OptionalReplaceable">max_length</span> —
An optional argument in microns specifying the maximum length to which
the fragments can be adjusted. The remainder is split into equal-length fragments
of a size between <span class="keyword ParameterName OptionalReplaceable">length</span> and <span class="keyword ParameterName OptionalReplaceable">max_length</span>.</p>
</li>
<li class="li ArgOption" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id0d4e529d-d2d9-4e57-b06e-60fc279836f8"><p class="p Opt">force
— An optional keyword that causes fragments to be exactly <span class="keyword ParameterName OptionalReplaceable">length</span>.</p>
</li>
</ul>
<p class="p">If force is specified and allowtrim is present, an attempt is
made to trim the ends in order to allow the repeated fragments to
have exactly the specified length. If possible, the end fragments
are trimmed in an attempt to avoid creating fragments longer than
this length.</p>
</dd>
</dl>
</div>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">This keyword is an optional fragmentation
parameter. This keyword gives you precise control over the number
and length of intrafeature fragmented edges at concave or convex
corners. The fragmentation process occurs automatically before MPC
begins. </p>
<p class="p">In intrafeature fragmentation,
the edges connected to corners are broken up according to fragment_corner
parameters. The following figure shows how the intrafeature fragmentation parameters
are applied to produce fragmentation vertices.</p>
<div class="fig fignone" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id1c322049-0d35-4873-b75d-ed83ab29d18d"><span class="figcap"><span class="fig--title-label">Figure 1. </span>Intrafeature Fragmentation
Example</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:120" src="../graphics/reference29a.png" /></div><br /></div>
<p class="p">The
end_adjacent subtype applies to both line-end adjacent and space-end
adjacent corners.</p>
<div class="section Subsection" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__ida537afc4-b01b-49ae-a6a9-ed6ae340fd2d"><h2 class="title Subheading sectiontitle">Note
About Promotion Radius in Hierarchical Mode</h2><p class="p">When an edge is longer than the promotion radius, it may cross
a hierarchy boundary. When this occurs the type of corner for both
corners cannot be reliably determined.</p>
<p class="p">The workaround is when fragmenting long edges is to specify fragment_corner
twice, one with an upper bound of the promotion radius and the other
with it as a lower bound. See “<a class="xref fm:HeadingAndPage" href="#id1daa4327-96ad-483a-bfb5-9ca03faa5e30__ided6affb9-31a9-454a-835b-10845a609199">Example 5: Handling Long Edges</a>”.</p>
</div>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><div class="section Subsection" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id0c382f6c-2dee-4cf8-bf93-cfb7a38b18b2"><h2 class="title Subheading sectiontitle">Example
1: Declaration Order</h2><p class="p">The declaration order has an impact
on the results. Each intrafeature command affects all the edges
which meet its constraints. Therefore, more specific commands should
be placed ahead of general commands. The one exception is when “fragment_layer_order
full” is set. (See “Examples” in fragment_layer_order.) </p>
<p class="p">For example, to specify different
fragmentation parameters for short edges with 1 convex and 1 concave
corner:</p>
<p class="p">Incorrect Usage:</p>
<pre class="pre codeblock leveled"><code>fragment_min 0.03
fragment_max 0.4
fragment_corner convex  0.035 0.05
fragment_corner concave 0.055
fragment_corner convex not_end_adjacent concave not_end_adjacent \
	length &gt; 0.13 &lt;= 0.15 0.040 corner2 0.05</code></pre><p class="p">The last command would not work since
any corner it would affect would have already been fragmented by
one of the first 2 fragment_corner commands.</p>
<p class="p">Correct Usage:</p>
<pre class="pre codeblock leveled"><code>fragment_min 0.03
fragment_max 0.4
fragment_corner convex not_end_adjacent concave  not_end_adjacent \
	length &gt; 0.13 &lt;= 0.15 0.040 corner2 0.05
fragment_corner convex  0.035 0.05
fragment_corner concave 0.055</code></pre></div>
<div class="section Subsection" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id35903cda-aa99-4c2b-bcde-356d987bc6e4"><h2 class="title Subheading sectiontitle">Example
2: breakinhalf</h2><p class="p">By default, breakinhalf respects the fragment_min setting. Consider
a 0.12 micron long fragment with a corner at one end. </p>
<pre class="pre codeblock"><code>fragment_min 0.04
fragment_corner concave 0.05 0.05 </code></pre><p class="p">If a rule that specifies two ripples of 0.05 with a fragment_min
of 0.04 is applied, the fragment would not be changed because the
ripples would leave a fragment of 0.02. If “breakinhalf” is added
to the rule, the fragment is broken into two fragments of 0.06 each.</p>
</div>
<div class="section Subsection" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id0a5f5c08-5c3d-48ab-b614-35f3edfdb969"><h2 class="title Subheading sectiontitle">Example
3: breakinhalf enforce</h2><p class="p">Consider a long edge with</p>
<ul class="ul"><li class="li" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id2254e4fe-8108-4828-b0c5-eaaebe8fb53d"><p class="p">a 50-nm
center fragment</p>
</li>
<li class="li" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id22bb0f45-dacc-44c8-ad32-65b706994dc3"><p class="p">a 25-nm fragment_min</p>
</li>
<li class="li" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__ide893c55a-d0d0-4329-b47b-76d2b8e8b176"><p class="p">a 35-nm remainder
(rem 0.035)</p>
<pre class="pre codeblock"><code>fragment_corner … rem 0.035 breakinhalf</code></pre></li>
</ul>
<p class="p">The 50-nm center fragment would
still be broken to two 25-nm parts. This is because fragment_min
is used to determine the minimum fragment length rather than the
rem value. To enforce the rem value, use enforce:</p>
<pre class="pre codeblock"><code>		fragment_corner … rem 0.035 breakinhalf enforce</code></pre><p class="p">If “breakinhalf enforce” is
used, the center fragment is not broken, due to the two 25 nm fragments
created being less than the rem value, which would not be allowed.</p>
</div>
<div class="section Subsection" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id2e73b630-58d4-4735-ab0c-9b099b2560af"><h2 class="title Subheading sectiontitle">Example
4: Controlling the Size of Fragments in a Central Remainder</h2><p class="p">You can combine the repeat and allowtrim arguments to create
a fixed size for the middle fragment of an edge whose length is
suitable for three fragments. It requires setting the corner fragments
(<span class="keyword ParameterName OptionalReplaceable">len1</span>)
to the maximum desirable length, with the allowtrim <span class="keyword ParameterName OptionalReplaceable">amount</span> set
to the difference between the maximum and minimum fragment length.</p>
<p class="p">For example, consider an edge of 0.2 microns, a grid size of
1 nm, and the following code:</p>
<pre class="pre codeblock"><code>fragment_corner concave not_end_adjacent concave not_end_adjacent \
					length &gt;= 0.100 &lt; 0.500 \
					fragment 0.048 rem 0.033 allowtrim .016 repeat 0.034 0.038</code></pre><p class="p">This sets the maximum length of the first fragment to 48 nm,
but because of “allowtrim 0.016” the first fragments could be adjusted
to as small as 32 nm if desirable.  The initial pass leaves a center
fragment of 104 nm. The “repeat 0.034 0.038” indicates the central
fragment should be split into equal-length fragments from 34 to
38 nm long.</p>
<p class="p">Three 34-nm fragments would consume 102 nm of the 104 nm. To
keep the repeated fragments equal, the central fragment needs to
be increased in multiples of 3 nm. With allowtrim, the final edge
fragmentation is initial fragments reduced to 45 nm, and the central
fragment further split into three 36 nm pieces. </p>
</div>
<div class="section Subsection" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__ided6affb9-31a9-454a-835b-10845a609199"><h2 class="title Subheading sectiontitle">Example
5: Handling Long Edges</h2><p class="p">Fragment_corner rules that operate on edges longer than the promotion
radius can cause errors when the corners cannot “see” each other.
For example, consider a promotion radius of 0.9 and this rule:</p>
<pre class="pre codeblock"><code>#This is a bad rule:
fragment_corner concave concave length &gt; 0.8 fragment 0.15 0.15</code></pre><p class="p">Edges longer than 0.9 microns cause an error because the rule
requires checking both corners. The safe way to handle these edges
is to use a two-corner rule for edges less than the promotion radius,
and a one-corner rule for edges longer than that, like so:</p>
<pre class="pre codeblock"><code>#This works better:
fragment_corner concave concave length &gt;0.8 &lt;=0.9 fragment 0.15 0.15
fragment_corner concave         length &gt;0.9       fragment 0.15 0.15</code></pre><p class="p">This division permits correct fragmentation despite hierarchy
boundaries, and will generate the same results in hierarchical and
flat runs.</p>
</div>
<div class="section Subsection" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id78b4f82d-b429-4742-8670-26f2874977a3"><h2 class="title Subheading sectiontitle">Example
6: Using corner_next</h2><p class="p">The length options and corner options can be combined to allow
highly specific edge selection without accidentally selecting other
edges or using the tagging commands. For the shape shown, the following
code produces fragmentation where indicated by the red dots on the
rightmost edge:</p>
<div class="fig fignone" id="id1daa4327-96ad-483a-bfb5-9ca03faa5e30__id29c9963d-79f2-4d2b-ad25-93f69b5ac906"><span class="figcap"><span class="fig--title-label">Figure 2. </span>corner_next and length_next</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:120" src="../graphics/fragment_corner_next.png" /></div><br /></div>
<pre class="pre codeblock"><code>fragment_corner convex convex_next convex concave_next length == 0.2 \
   length1 == 0.4 length1_next == 0.5 length2 == 0.1 length2_next == 0.3 \
   fragment 0.025</code></pre></div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_MpcCorrectionCommands_idd4dfbecb.html" title="The following table lists all the commands used for MPC Correction.">MPC Correction Commands</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_nmmpc_useref"
                DocTitle = "Calibre® nmMPC™ and Calibre® nmCLMPC User’s and Reference Manual"
                PageTitle = "fragment_corner"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_FragmentCorner_id1daa4327.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® nmMPC™ and Calibre® nmCLMPC User’s and Reference Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>