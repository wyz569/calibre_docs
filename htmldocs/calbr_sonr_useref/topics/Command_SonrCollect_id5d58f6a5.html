<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="SONR_COLLECT" />
<meta name="abstract" content="denseopc only. Collects features vectors and writes them to a database for creating a hotspot prediction model." />
<meta name="description" content="denseopc only. Collects features vectors and writes them to a database for creating a hotspot prediction model." />
<meta name="DC.subject" content="SONR_COLLECT, Vector Capture, hotspot prediction, Hotspot Predict, vector capture" />
<meta name="keywords" content="SONR_COLLECT, Vector Capture, hotspot prediction, Hotspot Predict, vector capture" />
<meta name="prodname" content="Calibre SONR" />
<meta name="version" content="v12.2" />
<meta name="release" content="2016_01" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software" />
<meta name="DC.Date.Created" content="2016-08-02" />
<meta name="DC.Date.Modified" content="2021-03-27" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_sonr_useref" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="IncludeInInventory" content="Yes" />
<meta name="IncludeDraftCommentsInChangeLog" content="all" />
<meta name="HighlightColor" content="mgc_light_blue" />
<meta name="HighlightChanges" content="Yes" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="EclipsePluginName" content="none" />
<meta name="Draft" content="NONE" />
<meta name="DraftDate" content="March 19, 2021" />
<meta name="DocumentTitle" content="Calibre® SONR™ User’s and Reference Manual" />
<meta name="CSHelp" content="none" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10115,product.id.P10108,doc.type.documentation.ref" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id5d58f6a5-ec78-463b-afb9-807d25270606" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>SONR_COLLECT</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="SONR_COLLECT" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P10115,product.id.P10108,doc.type.documentation.ref" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="id5d58f6a5-ec78-463b-afb9-807d25270606">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent">
<h1 class="title topictitle1">SONR_COLLECT</h1>



<div class="body refbody CommandRefBody"><div class="abstract CommandRefAbstract"><p class="p ContextMGC">Type: External setup file command</p>

<p class="shortdesc">denseopc only. Collects features vectors and writes them
to a database for creating a hotspot prediction model.</p>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2>
<div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName Required">SONR_COLLECT</span> <span class="keyword ParameterName Required">‑tag</span> <span class="keyword ParameterName RequiredReplaceable">name</span> <span class="keyword ParameterName Required">‑mod</span> <span class="keyword ParameterName RequiredReplaceable">model</span> [<span class="keyword ParameterName Optional">-addlayer</span> <span class="keyword ParameterName OptionalReplaceable">name</span> [<span class="keyword ParameterName Optional">‑mttag</span> <span class="keyword ParameterName OptionalReplaceable">name</span>]]… <br />
[<span class="keyword ParameterName Optional">‑append</span> [<span class="keyword ParameterName OptionalReplaceable">database</span>]] [<span class="keyword ParameterName Optional">‑basemodel</span> <span class="keyword ParameterName OptionalReplaceable">optical</span>] [<span class="keyword ParameterName Optional">‑density</span> <span class="keyword ParameterName OptionalReplaceable">name</span>]… [<span class="keyword ParameterName Optional">‑density</span>Layer <span class="keyword ParameterName OptionalReplaceable">layer</span>]  <br />
[<span class="keyword ParameterName Optional">‑dist</span> <span class="keyword ParameterName OptionalReplaceable">dbus</span>] [<span class="keyword ParameterName Optional">‑layer</span> <span class="keyword ParameterName OptionalReplaceable">name</span>]  [<span class="keyword ParameterName Optional">‑prop</span> <span class="keyword ParameterName OptionalReplaceable">layer</span>] [<span class="keyword ParameterName Optional">‑quantize</span> <span class="keyword ParameterName OptionalReplaceable">number</span>] [‑record <span class="keyword ParameterName OptionalReplaceable">values</span>]… <br />
[<span class="keyword ParameterName Optional">‑reduction</span> <span class="keyword ParameterName OptionalReplaceable">factor</span>] [<span class="keyword ParameterName Optional">‑outdb</span> <span class="keyword ParameterName OptionalReplaceable">name</span>] [<span class="keyword ParameterName Optional">‑outlayer</span> <span class="keyword ParameterName OptionalReplaceable">name</span>]  </p>
</div>
</div>

<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2>
<div class="section ArgumentSet"><dl class="dl ArgumentList">
<dt class="dt ArgumentName dlterm" id="id5d58f6a5-ec78-463b-afb9-807d25270606__id360d57a3-7db4-4a54-b3b6-8977ac894922"><span class="keyword ParameterName Required">‑tag</span> <span class="keyword ParameterName RequiredReplaceable">name</span></dt>

<dd class="dd ArgumentDescription"><p class="p">A required argument identifying a tagged
set of fragments that are considered when constructing feature vectors.
These fragments should be on the layer with the mask geometry. If
‑layer is not specified, SONR_COLLECT uses the layer of type “opc.”</p>

<p class="p">By default, only fragments that are part of the tag set contribute
to the feature vectors. You can include tagged fragments on other
layers in the feature vectors by using the ‑addlayer argument.</p>
</dd>

<dt class="dt ArgumentName dlterm" id="id5d58f6a5-ec78-463b-afb9-807d25270606__id69142ec4-5cd8-48bf-a421-f54da6e9b4cd"><span class="keyword ParameterName Required">‑mod</span> <span class="keyword ParameterName RequiredReplaceable">model</span></dt>

<dd class="dd ArgumentDescription"><p class="p">A required argument identifying
the list of features to extract, typically named <span class="ph filepath">phv.mod</span>. This
serves as a template for the model. Ask your Siemens representative
for a “seed model” reflecting the most recent best practices.</p>

<p class="p">The <span class="keyword ParameterName RequiredReplaceable">model</span> identifier
should match the name supplied in an “<a class="xref Link" href="../../calbr_nmopc_useref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'ml_featurevector_load', 'calbr_nmopc_useref'); return false;">ml_featurevector_load</a> <span class="keyword ParameterName RequiredReplaceable">name</span> <span class="keyword ParameterName RequiredReplaceable">file</span>”
command. (This command is documented in the <cite class="cite">Calibre nmOPC
User’s and Reference Manual</cite>.) Do not use the SONR Layout
Analyze “model” command.</p>
</dd>

<dt class="dt ArgumentName dlterm" id="id5d58f6a5-ec78-463b-afb9-807d25270606__idafc114a2-8546-4117-b439-c7bf020a164d"><span class="keyword ParameterName Optional">-addlayer</span> <span class="keyword ParameterName OptionalReplaceable">name</span> <span class="keyword ParameterName Optional">[‑mttag</span> <span class="keyword ParameterName OptionalReplaceable">name</span>]</dt>

<dd class="dd ArgumentDescription"><p class="p">An optional argument
to include tagged fragments from additional layers when collecting the
feature vectors. These layers can be any layer type and should also
appear in <a class="xref fm:HeadingOnly" href="Command_SonrAuxLayer_id29fd57f7.html#id29fd57f7-6403-4778-aa00-3097e10b6b31__Command_SonrAuxLayer_id29fd57f7.xml#id29fd57f7-6403-4778-aa00-3097e10b6b31" title="denseopc only. Defines auxiliary layers for SONR_COLLECT and SONR_PREDICT.">SONR_AUX_LAYER</a> commands.</p>

<ul class="ul ArgumentOptions">
<li class="li ArgOption" id="id5d58f6a5-ec78-463b-afb9-807d25270606__id799a1e0a-ede0-4af6-9fcf-f04ba6eae4fe"><p class="p Opt"><span class="keyword ParameterName Optional">‑mttag</span> <span class="keyword ParameterName OptionalReplaceable">name</span> —
Identifies a tag set on the layer. Fragments in the tag set along
with fragments from <span class="keyword ParameterName Required">‑tag</span> <span class="keyword ParameterName RequiredReplaceable">name</span> are
used in constructing the feature vectors. If ‑mttag is not specified,
all fragments on the additional layer are used.</p>
</li>
</ul>
</dd>

<dt class="dt ArgumentName dlterm" id="id5d58f6a5-ec78-463b-afb9-807d25270606__ide6c8a7c7-8e55-4328-84a8-f81149a585d2"><span class="keyword ParameterName Optional">‑append</span> [<span class="keyword ParameterName OptionalReplaceable">database</span>]</dt>

<dd class="dd ArgumentDescription"><p class="p">An optional argument that adds data from
the current run to an existing database and writes the sum to ‑outdb.
(Any existent data in the database specified by ‑outdb is overwritten.)</p>

<p class="p">The outcomes of the possible combinations are as follows:</p>

<ul class="ul"><li class="li" id="id5d58f6a5-ec78-463b-afb9-807d25270606__idb44eb449-1474-44b1-b70c-a90773fa22f9"><p class="p">‑append
A.db ‑outdb B.db</p>

<p class="p">If <span class="ph filepath">A.db</span> is a pre-existing database, the
new data is appended to <span class="ph filepath">A.db.</span> <span class="ph filepath">B.db</span> is
a superset of <span class="ph filepath">A.db</span>. If <span class="ph filepath">A.db</span> does
not exist, <span class="ph filepath">B.db</span> contains only the data from
the current run.</p>

<div class="note note"><span class="notetitle">Note:</span> <p class="p">Be careful to not reuse a database name in
‑outdb when ‑append specifies a database; the original <span class="ph filepath">B.db</span> is
overwritten with <span class="ph filepath">A.db</span> and the new run.</p>
</div>
</li>

<li class="li" id="id5d58f6a5-ec78-463b-afb9-807d25270606__id905140b1-1440-48cb-8ff7-71ec69adffe0"><p class="p">‑append ‑outdb
C.db</p>

<p class="p"><span class="ph filepath">C.db</span> is treated as the existing data. After
the run, <span class="ph filepath">C.db </span>contains both the original data and
the new data. </p>
</li>
</ul>
</dd>

<dt class="dt ArgumentName dlterm" id="id5d58f6a5-ec78-463b-afb9-807d25270606__id77eeb34b-5f2f-4856-8021-bfcac703aea4"><span class="keyword ParameterName Optional">‑basemodel</span> <span class="keyword ParameterName OptionalReplaceable">optical</span></dt>

<dd class="dd ArgumentDescription"><p class="p">An optional argument that identifies the
optical model used for this process layer. If this argument is not
specified, SONR_COLLECT uses the nominal optical model listed in
the <span class="ph filepath">Lithomodel</span> file.</p>
</dd>

<dt class="dt ArgumentName dlterm" id="id5d58f6a5-ec78-463b-afb9-807d25270606__id656810f4-4ef6-4b78-9cbe-aa2a4abee760"><span class="keyword ParameterName Optional">‑density</span> <span class="keyword ParameterName OptionalReplaceable">name</span></dt>

<dd class="dd ArgumentDescription"><p class="p">An optional argument that identifies a PNG
file from which to read precomputed density convolution values,
typically for EUV flare. The file must also be named in a <a class="xref fm:HeadingOnly" href="Command_DensityImageLoad_id229c58f0.html#id229c58f0-dac3-4962-9739-f2abc604253b__Command_DensityImageLoad_id229c58f0.xml#id229c58f0-dac3-4962-9739-f2abc604253b" title="Loads a PNG file with precomputed density convolution.">density_image_load</a> command.</p>

<p class="p">The ‑density option can be specified more than once, though each
name should be unique. Values are included in the feature vector.</p>
</dd>

<dt class="dt ArgumentName dlterm" id="id5d58f6a5-ec78-463b-afb9-807d25270606__id7922c78b-474d-4e59-9b81-0bb177235785"><span class="keyword ParameterName Optional">‑density</span>Layer <span class="keyword ParameterName OptionalReplaceable">layer</span></dt>

<dd class="dd ArgumentDescription"><p class="p">An optional argument that specifies an input
layer from which to calculate density. By default, the layer specified
by ‑layer is used. </p>
</dd>

<dt class="dt ArgumentName dlterm" id="id5d58f6a5-ec78-463b-afb9-807d25270606__iddbf773d6-9d92-4bd6-9c22-daa84bb466b8"><span class="keyword ParameterName Optional">‑dist</span> <span class="keyword ParameterName OptionalReplaceable">dbus</span></dt>

<dd class="dd ArgumentDescription"><p class="p">An optional argument that specifies how
far from the fragment to search for the DFM property marker. Units
are in dbu. The default distance is 60 dbu.</p>

<p class="p">This argument has no effect when ‑prop is not specified.</p>
</dd>

<dt class="dt ArgumentName dlterm" id="id5d58f6a5-ec78-463b-afb9-807d25270606__idbeb930e5-c6be-4541-b78a-2f5abecac3bf"><span class="keyword ParameterName Optional">‑layer</span> <span class="keyword ParameterName OptionalReplaceable">name</span></dt>

<dd class="dd ArgumentDescription"><p class="p">An optional argument that identifies the
layer containing the geometries from which to collect the feature
vectors. If this argument is not specified, SONR_COLLECT uses the layer
of type “opc.” (See “<a class="xref Link" href="../../calbr_nmopc_useref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'layer (for denseopc_options Block)', 'calbr_nmopc_useref'); return false;">layer (for denseopc_options Block)</a>”
in the <cite class="cite">Calibre nmOPC User’s and Reference Manual</cite>.)</p>
</dd>

<dt class="dt ArgumentName dlterm" id="id5d58f6a5-ec78-463b-afb9-807d25270606__id4af53d67-3e9b-44eb-b5a0-5df4d5aed9ef"><span class="keyword ParameterName Optional">‑prop</span> <span class="keyword ParameterName OptionalReplaceable">layer</span></dt>

<dd class="dd ArgumentDescription"><p class="p"><span class="keyword ParameterName Optional">An optional argument that </span>reads
DFM properties from a layer. The properties are included as columns
in the CSV and database files. All DFM properties on the layer are
collected. The <span class="keyword ParameterName OptionalReplaceable">layer</span> must
match the <span class="keyword ParameterName RequiredReplaceable">layer</span> declared
in a <a class="xref Link" href="../../calbr_nmopc_useref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'read_layer_properties', 'calbr_nmopc_useref'); return false;">read_layer_properties</a> command.
(See <cite class="cite">Calibre nmOPC User’s and Reference Manual</cite>.)</p>
</dd>

<dt class="dt ArgumentName dlterm" id="id5d58f6a5-ec78-463b-afb9-807d25270606__id6d6c74f3-59fc-488f-a635-a27ccf4d41fb"><span class="keyword ParameterName Optional">‑quantize</span> <span class="keyword ParameterName OptionalReplaceable">number</span></dt>

<dd class="dd ArgumentDescription"><p class="p">An optional argument
that combines features with similar measurements to reduce the amount
of memory used.  The value indicates how many distinct feature values
are retained; lower numbers reduce the memory used more than higher
numbers. </p>

<p class="p">Use this argument when collecting feature vectors
for training data on a large data set. A good initial value is 100.</p>
</dd>

<dt class="dt ArgumentName dlterm" id="id5d58f6a5-ec78-463b-afb9-807d25270606__id6346162a-af88-4527-9a9c-515d4c8c8bf0">‑record <span class="keyword ParameterName OptionalReplaceable">values</span></dt>

<dd class="dd ArgumentDescription"><p class="p">An optional argument that adds one or more
columns to the CSV and database files. The columns contain data
from an annotated tag set. The ‑record argument can be specified multiple
times.</p>

<p class="p">There are two different syntaxes for <span class="keyword ParameterName OptionalReplaceable">values</span>:</p>

<ul class="ul ArgumentOptions">
<li class="li ArgOption" id="id5d58f6a5-ec78-463b-afb9-807d25270606__id66e43d0d-ef35-4eb6-878f-b8416b27df22"><p class="p Opt"><span class="keyword ParameterName OptionalReplaceable">column_name</span> <span class="keyword ParameterName OptionalReplaceable">tag</span> —
The keyword ‑record followed by the name for a column and the name
of the tag set from which to populate it. Only a single column name-tag
pair can be specified per ‑record keyword.</p>
</li>

<li class="li ArgOption" id="id5d58f6a5-ec78-463b-afb9-807d25270606__id2bb2914d-0559-42ab-a3b1-497523119bac"><p class="p Opt">(<span class="keyword ParameterName OptionalReplaceable">column_name</span> <span class="keyword ParameterName OptionalReplaceable">tag</span> <span class="keyword ParameterName OptionalReplaceable">column_name</span> <span class="keyword ParameterName OptionalReplaceable">tag</span> ...)
— The keyword ‑record followed by parentheses enclosing a list of
column name-tag pairs. There can be any number of pairs.</p>
</li>
</ul>

<p class="p">These syntaxes can be combined. For example, any of these could
be used:</p>

<pre class="pre codeblock"><code>-record angle aTag -record angle_prev a1Tag -record angle_next a2Tag</code></pre>
<pre class="pre codeblock"><code>-record angle aTag -record (angle_prev a1Tag angle_next a2Tag)</code></pre>
<pre class="pre codeblock"><code>-record (angle aTag angle_prev a1Tag angle_next a2Tag)</code></pre>
<p class="p">The columns contain property values from the specified tag set.
If a fragment is not in <span class="keyword ParameterName OptionalReplaceable">tag</span>,
it receives a value of 0 in the column.</p>
</dd>

<dt class="dt ArgumentName dlterm" id="id5d58f6a5-ec78-463b-afb9-807d25270606__id8801a235-81e0-4d2d-905d-0bc4329e0b6d"><span class="keyword ParameterName Optional">‑reduction</span> <span class="keyword ParameterName OptionalReplaceable">factor</span></dt>

<dd class="dd ArgumentDescription"><p class="p">An optional argument specifying to simplify
the model. Larger values reduce the computational load. </p>

<ul class="ul ArgumentOptions">
<li class="li ArgOption" id="id5d58f6a5-ec78-463b-afb9-807d25270606__id753cf10c-a54d-4b22-9694-5a41a0b92812"><p class="p Opt">0
— No reduction. This is the default.</p>
</li>

<li class="li ArgOption" id="id5d58f6a5-ec78-463b-afb9-807d25270606__ida3371b82-6742-4f1e-9beb-e3722de96fcc"><p class="p Opt">1
— Half reduction.</p>
</li>

<li class="li ArgOption" id="id5d58f6a5-ec78-463b-afb9-807d25270606__id9afab7a3-aafe-4ef1-a64d-9cc5da253ab2"><p class="p Opt">2
— Quarter reduction.</p>
</li>
</ul>

<p class="p">Only the values 0, 1, and 2 are supported.</p>
</dd>

<dt class="dt ArgumentName dlterm" id="id5d58f6a5-ec78-463b-afb9-807d25270606__ida1d5ef29-3c73-40c1-ac4c-a5494bdbb933"><span class="keyword ParameterName Optional">‑outdb</span> <span class="keyword ParameterName OptionalReplaceable">name</span></dt>

<dd class="dd ArgumentDescription"><p class="p">An optional argument
that writes the collected feature vectors to a database named “<span class="keyword ParameterName OptionalReplaceable">name</span>.” The
default database name is <span class="ph filepath">sonr_collect_out.db</span>.</p>

<p class="p">If the name specified in ‑outdb already exists, the file is overwritten.</p>
</dd>

<dt class="dt ArgumentName dlterm" id="id5d58f6a5-ec78-463b-afb9-807d25270606__id7b3a72d1-10f3-4ff2-aac5-12fec9add05d">‑outlayer <span class="keyword ParameterName OptionalReplaceable">name</span></dt>

<dd class="dd ArgumentDescription"><p class="p">An optional argument
that writes the results to a layer that can be returned via setlayer denseopc
… MAP <span class="keyword ParameterName OptionalReplaceable">name</span>. </p>
</dd>
</dl>
</div>
</div>

<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2>
<p class="p">The SONR_COLLECT command captures the feature
vector information for a layer. The results are saved to a database
file for use in training the machine learning model for hotspot prediction.
SONR_COLLECT also creates a seed model (<span class="ph filepath">phvo.mod</span>)
for use with <a class="xref fm:HeadingOnly" href="Command_SonrCluster_id34c39d93.html#id34c39d93-3f28-45c6-b534-70569bb93133__Command_SonrCluster_id34c39d93.xml#id34c39d93-3f28-45c6-b534-70569bb93133" title="Creates clusters of feature vectors, which can be used to select representative features or generate a sonr model.">sonr --cluster</a>.</p>

<p class="p">When collecting data for hotspot prediction models, use <a class="xref fm:HeadingOnly" href="Command_SONRVectorCapture_id7e2c4f64.html#id7e2c4f64-6f4b-1014-8106-d96f649aea64__Command_SONRVectorCapture_id7e2c4f64.xml#id7e2c4f64-6f4b-1014-8106-d96f649aea64" title="Invokes Calibre SONR to collect data about the layout.">SONR Vector Capture</a> to
call an external setup file that includes SONR_COLLECT and setlayer
denseopc instead of setlayer sonr_vector_capture. The external setup
file includes Calibre nmOPC commands, but requires a Calibre SONR
license and will not function when called from Litho DenseOPC. </p>
</div>

<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2>
<div class="section Subsection" id="id5d58f6a5-ec78-463b-afb9-807d25270606__id9be704ae-c09a-4833-bc2b-abe7e9faedf5"><h2 class="title Subheading sectiontitle">Example
1</h2>
<p class="p">This example creates a database named <span class="ph filepath">hp_single.db</span> from
all the fragments on the opc layer, using the feature vectors listed
in <span class="ph filepath">phv.mod</span>. </p>

<pre class="pre codeblock"><code>## Most keywords in this file are documented in the 
## Calibre nmOPC User’s and Reference Manual (calbr_nmopc_useref.pdf) or
## Calibre OPCverify User’s and Reference Manual (calbr_opcv_useref.pdf)
modelpath ./models
tilemicrons 15

layer target
layer marker

ml_featurevector_load nmod ./phv.mod</code></pre>
<pre class="pre codeblock"><code>denseopc_options SONR_OPT {
    version 1
    layer target opc    mask_layer 0
    layer marker hidden mask_layer 0

    image lmod

    fragment_min 0.010
    fragment_max 0.030</code></pre>
<pre class="pre codeblock"><code>#### In a real setup file, there is typically custom fragmentation
#### rules and tagging here. </code></pre>
<pre class="pre codeblock"><code>    NEWTAG all target -out allFrags
    OUTPUT_SHAPE fragment allFrags allFrags 0.001 0.002</code></pre>
<pre class="pre codeblock"><code><span class="ph CodeHighlight Bold">    SONR_COLLECT -tag allFrags -mod nmod -outdb hp_single.db</span>
}

setlayer collect = denseopc target marker MAP target OPTIONS SONR_OPT</code></pre></div>

<div class="section Subsection" id="id5d58f6a5-ec78-463b-afb9-807d25270606__id083e4c02-d50f-48f0-a509-bc5fda9a7dc2"><h2 class="title Subheading sectiontitle">Example
2</h2>
<p class="p">This example shows how to include multiple layers, such as you
might use for a multi-patterning layout. The layers target1, target2,
and target3 represent a triple-patterning mask. They are all of
type opc, as shown in the denseopc_options layer list:</p>

<pre class="pre codeblock"><code>layer target1 opc mask_layer 0 pattern 0
layer target2 opc mask_layer 0 pattern 1
layer target3 opc mask_layer 0 pattern 2</code></pre>
<p class="p">After fragmentation (not shown), the fragments are added to tag
sets:</p>

<pre class="pre codeblock"><code>NEWTAG all target1 -out allFrags1
NEWTAG all target2 -out allFrags2
NEWTAG all target3 -out allFrags3</code></pre>
<p class="p">Typically more tag-based operations occur after this, such as
creating tag sets of fragments within a hotspot marker or annotating
a tag set with hotspot categories.</p>

<p class="p">Before running SONR_COLLECT, the layers that will contribute
to the feature vectors other than the main layer are identified
with SONR_AUX_LAYER:</p>

<pre class="pre codeblock"><code>SONR_AUX_LAYER -layer target2 -tag hsFrags2 -mod nmod -basemodel optical2
SONR_AUX_LAYER -layer target3 -tag hsFrags3 -mod nmod -basemodel optical3 </code></pre>
<p class="p">The SONR_COLLECT command then identifies the primary layer (‑layer)
and the additional fragments (‑mttag and ‑addlayer) to create feature
vectors, and that the output should be written to a database <span class="ph filepath">multilayer.db</span> as
well as the out_frags layer in the OASIS output.</p>

<pre class="pre codeblock"><code>SONR_COLLECT -layer target1 -tag hsFrags1 -mod nmod \
	-mttag hsFrags2 -mttag hsFrags3 -addlayer target2 -addlayer target3 \
	-outdb multilayer.db ‑outlayer out_frags</code></pre></div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_LithoSetupFileCommands_id7e32363f.html" title="The “FILE name” argument to SONR LAYOUT ANALYZE and SONR VECTOR CAPTURE specifies a litho setup file containing a command initialization block. Commands in this block are lowercase only, and must be specified one per line.">Litho Setup File Commands</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../topics/Command_SonrAuxLayer_id29fd57f7.html" title="denseopc only. Defines auxiliary layers for SONR_COLLECT and SONR_PREDICT.">SONR_AUX_LAYER</a></div>
<div><a class="link" href="../../calbr_nmopc_useref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'manual title', 'calbr_nmopc_useref'); return false;">Calibre nmOPC User’s
and Reference Manual</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_sonr_useref"
                DocTitle = "Calibre® SONR™ User’s and Reference Manual"
                PageTitle = "SONR_COLLECT"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_SonrCollect_id5d58f6a5.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® SONR™ User’s and Reference Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>