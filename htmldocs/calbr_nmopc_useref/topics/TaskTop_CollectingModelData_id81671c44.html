<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Collecting Model Data" />
<meta name="abstract" content="The first step is to populate a model template with data from a known-good rule file and layout." />
<meta name="description" content="The first step is to populate a model template with data from a known-good rule file and layout." />
<meta name="prodname" content="Calibre nmOPC User's and Reference Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-17" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_nmopc_useref" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="None" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 16, 2021" />
<meta name="Draft" content="NONE" />
<meta name="DocumentTitle" content="Calibre® nmOPC™ User’s and Reference Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,doc.type.documentation.ref,product.id.P10115" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="NONE" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="YES" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id81671c44-3cfc-444e-8c86-f295577521c4" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Collecting Model Data</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Collecting Model Data" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,doc.type.documentation.ref,product.id.P10115" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id81671c44-3cfc-444e-8c86-f295577521c4">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Collecting Model Data</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><span class="shortdesc">The first step is to populate a model template
with data from a known-good rule file and layout.</span>
</div>
<div class="section prereq Prerequisites p"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Prerequisites</h2></div><ul class="ul"><li class="li" id="id81671c44-3cfc-444e-8c86-f295577521c4__id12d708b3-6398-48dc-acd4-a8b2b2f58062"><p class="p">Production-level
Calibre nmOPC rule file.</p>
</li>
<li class="li" id="id81671c44-3cfc-444e-8c86-f295577521c4__iddb63e53e-18e6-41fa-a27a-0a8603fca447"><p class="p">Layout with
representative arrangements of main features and SRAFs.</p>
</li>
<li class="li" id="id81671c44-3cfc-444e-8c86-f295577521c4__id79404693-fa89-4d32-9f13-6147316de0f2"><p class="p">Model template
(.<span class="ph filepath">mod</span> file).</p>
</li>
</ul>
<p class="p">See “<a class="xref fm:HeadingAndPage" href="General_CalibreMlopcRequirements_ide40a8908.html#ide40a8908-d2d8-4838-ad1c-1d74bc89f543__General_CalibreMlopcRequirements_ide40a8908.xml#ide40a8908-d2d8-4838-ad1c-1d74bc89f543" title="Calibre mlOPC requires a product license and certain files, as well as Calibre version 2018.4 or newer.">Calibre mlOPC Requirements</a>” for
more information on these.</p>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand" id="id81671c44-3cfc-444e-8c86-f295577521c4__idc53113b8-083a-4d57-aa41-25c300e78124"><span class="ph cmd">If necessary,
modify the production rule file to run retargeting separately from
OPC, and save the layout with the retargeted layer.</span></li>
<li class="li step stepexpand" id="id81671c44-3cfc-444e-8c86-f295577521c4__id5d866489-b03e-4bf3-8862-24b1332bbf6e"><span class="ph cmd">In the
SVRF file, change “LITHO DENSEOPC” to “LITHO ML DENSEOPC”.</span></li>
<li class="li step stepexpand" id="id81671c44-3cfc-444e-8c86-f295577521c4__id3ae132dc-9fbc-4cf3-8c1d-73eb1d50dad7"><span class="ph cmd">In the
litho setup file called by the LITHO ML DENSEOPC statement, add
the model template as follows:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock"><code>ml_featurevector_load nmod phv.mod</code></pre><p class="p">where “nmod” is the reference used by the rest of the commands
for the model, and <span class="ph filepath">phv.mod</span> is the filename
of the model template. </p>
</div></li>
<li class="li step stepexpand" id="id81671c44-3cfc-444e-8c86-f295577521c4__id7ad34529-4c4e-4fc0-95fe-f657d0a4027f"><span class="ph cmd">In the
denseopc_options block, identify the section that performs the OPC.
Add ML_VECTOR_CAPTURE_INIT and ML_VECTOR_CAPTURE_END to capture information
about the fragments of interest.</span><div class="itemgroup info StepInfo"><p class="p">Any fragment modification such as splitting or aligning
should be done before ML_VECTOR_CAPTURE_INIT. Small frozen jogs
should not be included in the tag set.</p>
</div></li>
<li class="li step stepexpand" id="id81671c44-3cfc-444e-8c86-f295577521c4__idbb5e4bd5-4bf7-48a9-a0cc-705a1f81ad3e"><span class="ph cmd">If the
setup file uses PW OPC (a ‑PW keyword in OPC_ITERATION), be sure
each PW OPC iteration is followed by a PW_RETARGET statement so
that the retargeting is captured.</span></li>
<li class="li step stepexpand" id="id81671c44-3cfc-444e-8c86-f295577521c4__id7cff2080-01f6-446c-853d-495c876f9ab8"><span class="ph cmd">Save the
modified rule file and run it with your usual invocation.</span></li>
</ol>
<div class="section result"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Results</h2></div><p class="p">After the run, the following files are available:</p>
<ul class="ul"><li class="li" id="id81671c44-3cfc-444e-8c86-f295577521c4__idb4a884eb-612e-4631-b6e0-2be824dfa2c2"><p class="p"><span class="ph filepath">phv0.mod</span></p>
<p class="p">This is the calibrated model file. (The model still has to be
trained.) Do not modify it by hand; treat it as any other model
file.</p>
</li>
<li class="li" id="id81671c44-3cfc-444e-8c86-f295577521c4__ide78d609e-10ee-478f-b403-ab7ee9123f15"><p class="p"><span class="ph filepath">calibration_vectors.csv</span> or
name specified in ML_VECTOR_CAPTURE_END</p>
<p class="p">This is the calibration file, also called the normalized file.
It contains feature vectors used in model training.</p>
</li>
</ul>
<p class="p">If you later determine that the training data needs additional
features, you can add them to the calibration and model files by
adding ‑old and ‑oldmodel to ML_VECTOR_CAPTURE_END and re-running
with a different layout.</p>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><p class="p">In the following example, the modified parts are shown in bold.</p>
<pre class="pre codeblock"><code>modelpath /shared/models:models:.
<span class="ph CodeHighlight Bold">ml_featurevector_load nmod phv.mod</span>       # Step 3 </code></pre><pre class="pre codeblock"><code>layer for_opc</code></pre><pre class="pre codeblock"><code>denseopc_options opc_opts {
	version 1
	layer for_opc   opc mask_layer 0
	layer opc.curve hidden
	...
	retarget_layer opc.curve  
	image lmod                            # Loads optical and resist models
	...</code></pre><pre class="pre codeblock"><code>	fragment_layer for_opc {
		...
	}</code></pre><pre class="pre codeblock"><code>	mrc_rule internal for_opc {
		...
	}</code></pre><pre class="pre codeblock"><code>	...
	sraf_sites_create
	NEWTAG all for_opc -out allFrags
	NEWTAG edge allFrags len &gt;=0.1 &lt;0.14 corner1 convex corner2 convex \
								-out fat_le 
	NEWTAG external allFrags fat_le opposite range &gt;=0.05 &lt;0.1 \
								-out fat_le_opposite
	SITES_DELETE fat_le_opposite</code></pre><pre class="pre codeblock"><code>	<span class="ph CodeHighlight Bold">ML_VECTOR_CAPTURE_INIT allFrags nmod duv</span>  # Step 4</code></pre><pre class="pre codeblock"><code>	NEWTAG edge allFrags...
	...
	FEEDBACK -keep line_end_adj -0.2</code></pre><pre class="pre codeblock"><code>	OPC_ITERATION 4
	OPC_ITERATION 3 -PW ...
	sraf_print_avoidance ...
	OPC_ITERATION 5 -PW...
	PW_RETARGET 
	OUTPUT_RETARGET for_opc -out pw_retarget</code></pre><pre class="pre codeblock"><code>	<span class="ph CodeHighlight Bold">ML_VECTOR_CAPTURE_END allFrags</span>           # Step 4
	}</code></pre><pre class="pre codeblock"><code>setlayer opc_out = denseopc ... map for_opc OPTIONS opc_opts</code></pre></div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCAppe_CalibreMlopc_id18487cb8.html" title="The Calibre mlOPC license unlocks the machine learning API for use with Calibre nmOPC runs. The machine learning API uses models generated from trained neural nets to reduce OPC runtime with no loss of accuracy.">Calibre mlOPC</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../topics/Command_MlFeaturevectorLoad_idb32ff2ba.html" title="Loads the model metadata.">ml_featurevector_load</a></div>
<div><a class="link" href="../topics/Command_MlVectorCaptureInit_idad1dd348.html" title="Marks the beginning of the data capture segment of the setup file used for machine learning.">ML_VECTOR_CAPTURE_INIT</a></div>
<div><a class="link" href="../topics/Command_MlVectorCaptureEnd_idfbcf6a90.html" title="Marks the end of the data capture segment of the setup file used for machine learning.">ML_VECTOR_CAPTURE_END</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_nmopc_useref"
                DocTitle = "Calibre® nmOPC™ User’s and Reference Manual"
                PageTitle = "Collecting Model Data"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_CollectingModelData_id81671c44.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® nmOPC™ User’s and Reference Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>