<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Using the Trained Model" />
<meta name="abstract" content="The trained machine learning model replaces many OPC iterations by providing an initial fragment displacement. This is then tuned with a few standard OPC iterations." />
<meta name="description" content="The trained machine learning model replaces many OPC iterations by providing an initial fragment displacement. This is then tuned with a few standard OPC iterations." />
<meta name="prodname" content="Calibre nmOPC User's and Reference Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-17" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_nmopc_useref" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="None" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 16, 2021" />
<meta name="Draft" content="NONE" />
<meta name="DocumentTitle" content="Calibre® nmOPC™ User’s and Reference Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,doc.type.documentation.ref,product.id.P10115" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="NONE" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="YES" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id0c68dcc8-aabd-493b-9ccb-883b9b11b32a" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Using the Trained Model</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Using the Trained Model" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,doc.type.documentation.ref,product.id.P10115" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id0c68dcc8-aabd-493b-9ccb-883b9b11b32a">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Using the Trained Model</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><span class="shortdesc">The trained machine learning model replaces
many OPC iterations by providing an initial fragment displacement.
This is then tuned with a few standard OPC iterations.</span>
</div>
<div class="section Restrictions"><h2 class="title Subheading sectiontitle">Restrictions and Limitations</h2><ul class="ul"><li class="li" id="id0c68dcc8-aabd-493b-9ccb-883b9b11b32a__id5aeec34a-a8cb-4cad-95d1-f14226d5db8d"><p class="p">Machine
learning models should only be used for the technology process that
they were trained on.</p>
</li>
<li class="li" id="id0c68dcc8-aabd-493b-9ccb-883b9b11b32a__idd6d38a51-a1b0-4755-82ae-a12ed1ef3b97"><p class="p">The RET Flow
Tool in Calibre WORKbench is not supported. Run the modified rule
file from the command line in batch mode.</p>
</li>
</ul>
</div>
<div class="section prereq Prerequisites p"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Prerequisites</h2></div><ul class="ul"><li class="li" id="id0c68dcc8-aabd-493b-9ccb-883b9b11b32a__idaa3844bf-2c38-4a53-8dcd-d2761fed6689"><p class="p">Trained
machine learning model files, generally named <span class="ph filepath">frozen_model.pb</span> and <span class="ph filepath">phv0.mod</span>.</p>
</li>
<li class="li" id="id0c68dcc8-aabd-493b-9ccb-883b9b11b32a__id9bb3d1b3-f720-437c-aed5-20c0ea1d7be4"><p class="p">The same production-level
Calibre nmOPC rule file that was used in “<a class="xref fm:HeadingAndPage" href="TaskTop_CollectingModelData_id81671c44.html#id81671c44-3cfc-444e-8c86-f295577521c4__TaskTop_CollectingModelData_id81671c44.xml#id81671c44-3cfc-444e-8c86-f295577521c4" title="The first step is to populate a model template with data from a known-good rule file and layout.">Collecting Model Data</a>”.</p>
</li>
</ul>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand" id="id0c68dcc8-aabd-493b-9ccb-883b9b11b32a__id4a351ec5-ea62-45f7-975c-15ed776800f0"><span class="ph cmd">In the
SVRF file, change “LITHO DENSEOPC” to “LITHO ML DENSEOPC”.</span></li>
<li class="li step stepexpand" id="id0c68dcc8-aabd-493b-9ccb-883b9b11b32a__id586d5050-f59e-45cb-9145-ab1e2a24001d"><span class="ph cmd">In the
litho setup file, add the machine learning model files using <a class="xref fm:HeadingOnly" href="Command_MlModelLoad_ida62526e7.html#ida62526e7-07e5-464c-a17d-db421660804f__Command_MlModelLoad_ida62526e7.xml#ida62526e7-07e5-464c-a17d-db421660804f" title="Loads the machine learning model.">ml_model_load</a> and <a class="xref fm:HeadingOnly" href="Command_MlFeaturevectorLoad_idb32ff2ba.html#idb32ff2ba-d32a-4e03-bfad-d3e405ac8257__Command_MlFeaturevectorLoad_idb32ff2ba.xml#idb32ff2ba-d32a-4e03-bfad-d3e405ac8257" title="Loads the model metadata.">ml_featurevector_load</a>. For
example:</span><div class="itemgroup info StepInfo"><pre class="pre codeblock"><code>LITHO FILE opc.in [ /*
  modelpath ./
  ml_model_load          nmod frozen_model.pb
  ml_feature_vector_load nmod phv0.mod</code></pre><p class="p">It is important that both commands give the same name to the
model; in this case, “nmod.”</p>
<p class="p">If the rule file uses PW OPC and PW_RETARGET, there are models
for both displacement and retargeting. In that case, the lines might
look like this:</p>
<pre class="pre codeblock"><code>LITHO FILE opc.in [ /*
  modelpath ./
  ml_model_load          nmod_disp disp_dir/frozen_model.pb
  ml_model_load          nmod_rtrg rtrg_dir/frozen_model.pb
  ml_feature_vector_load nmod_disp phv0.mod
  ml_feature_vector_load nmod_rtrg phv0.mod</code></pre><p class="p">The same feature vector file is used by both the nmod_disp and
nmod_rtrg models.</p>
</div></li>
<li class="li step stepexpand" id="id0c68dcc8-aabd-493b-9ccb-883b9b11b32a__id76f8c132-06e5-4c9f-9fcb-7f2f27488492"><span class="ph cmd">Find where
the OPC iterations are called and add the <a class="xref fm:HeadingOnly" href="Command_MlOpc_id69bd7194.html#id69bd7194-4fa4-461d-9a35-9fffa3e1b50a__Command_MlOpc_id69bd7194.xml#id69bd7194-4fa4-461d-9a35-9fffa3e1b50a" title="Moves or retargets fragments using machine learning models.">ML_OPC</a> command
just before it. This should also be after all fragmentation changes,
such as splitting or deleting.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock"><code>ML_OPC all_frags nmod </code></pre><p class="p">The example command applies the model “nmod” to all fragments. </p>
<p class="p">OPC iterations are performed by OPC_ITERATION, OPC_XMEEF_ITERATION,
or FRAGMENT_MOVE.</p>
</div></li>
<li class="li step stepexpand" id="id0c68dcc8-aabd-493b-9ccb-883b9b11b32a__id8ee42091-b0bd-4f2d-9c9e-94b58fe8ec7f"><span class="ph cmd">If the
models include both displacement and retargeting, also add a PW_RETARGET statement
after the ML_OPC statement.</span></li>
<li class="li step stepexpand" id="id0c68dcc8-aabd-493b-9ccb-883b9b11b32a__id7bb302c5-29f4-4c48-b589-c618ef5e1be2"><span class="ph cmd">Reduce
the number of OPC iterations by the standard command to 2 or 3.
Keep the OPC_ITERATION or OPC_XMEEF_ITERATION -PW iterations if
applicable.</span></li>
<li class="li step stepexpand" id="id0c68dcc8-aabd-493b-9ccb-883b9b11b32a__ide5932eaa-852e-42f5-83ae-67ae5a0402bf"><span class="ph cmd">For those
fragments being placed by the machine learning model, remove the DISPLACEMENT,
FRAGMENT_SET_DISPLACEMENT, TDBIAS, and FEEDBACK commands.</span></li>
<li class="li step stepexpand" id="id0c68dcc8-aabd-493b-9ccb-883b9b11b32a__ida37ab4c5-4f23-438e-bd26-7a388991c285"><span class="ph cmd">(Optional)
To see the output at different stages, use <a class="xref fm:HeadingOnly" href="Command_OutputOpc_id1a530af4.html#id1a530af4-bdf7-4d94-8b24-89cff68498e0__Command_OutputOpc_id1a530af4.xml#id1a530af4-bdf7-4d94-8b24-89cff68498e0" title="Outputs OPC layout of specified layer.">OUTPUT_OPC</a>.</span></li>
<li class="li step stepexpand" id="id0c68dcc8-aabd-493b-9ccb-883b9b11b32a__id653e1f61-c38f-410e-b9c9-69c0a634b606"><span class="ph cmd">Save the
files and run from the command line.</span></li>
</ol>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCAppe_CalibreMlopc_id18487cb8.html" title="The Calibre mlOPC license unlocks the machine learning API for use with Calibre nmOPC runs. The machine learning API uses models generated from trained neural nets to reduce OPC runtime with no loss of accuracy.">Calibre mlOPC</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_nmopc_useref"
                DocTitle = "Calibre® nmOPC™ User’s and Reference Manual"
                PageTitle = "Using the Trained Model"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_UsingTheTrainedModel_id0c68dcc8.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® nmOPC™ User’s and Reference Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>