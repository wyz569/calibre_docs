<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Configuring the Calibre MTflex File for Calibre DRA" />
<meta name="abstract" content="This procedure includes the additional statements and arguments used to customize your Calibre MTflex configuration file for executing Calibre jobs with Calibre DRA." />
<meta name="description" content="This procedure includes the additional statements and arguments used to customize your Calibre MTflex configuration file for executing Calibre jobs with Calibre DRA." />
<meta name="prodname" content="Calibre Dynamic Resource Allocator (DRA) User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-26" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="2" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_dra_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® Dynamic Resource Allocator (DRA) User’s Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,doc.type.documentation.sys,product.version.v2021.2,product.id.P10101" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="2021.1" />
<meta name="HighlightChanges" content="yes" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id3e643ae0-ac37-4713-9227-e149482506e4" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Configuring the Calibre MTflex File for Calibre DRA</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Configuring the Calibre MTflex File for Calibre DRA" />
<meta name="attributes" content="doc.type.documentation.user,doc.type.documentation.sys,product.version.v2021.2,product.id.P10101" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id3e643ae0-ac37-4713-9227-e149482506e4">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Configuring
the Calibre MTflex File for Calibre DRA</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><p class="shortdesc">This procedure includes the additional
statements and arguments used to customize your Calibre MTflex configuration
file for executing Calibre jobs with Calibre DRA. </p>
<p class="p">Refer to the following sections of the <span class="ph FontProperty ManualTitle">Calibre Administrators’s Guide</span> for
the exact syntax and a complete description of the Calibre MTflex
configuration file:</p>
<ul class="ul"><li class="li" id="id0db2b181-ed2b-4149-8940-bedda206849b"><p class="p"><a class="xref Link" href="../../calbr_admin_gd/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Distributed Calibre: Creating a Configuration File', 'calbr_admin_gd'); return false;">Distributed Calibre: Creating a Configuration File</a> — Information on creating the Calibre
MTflex configuration file.</p>
</li>
<li class="li" id="ida5b9172b-4705-4361-975d-b15d47581d53"><p class="p"><a class="xref Link" href="../../calbr_admin_gd/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Distributed Calibre: Executing and Monitoring', 'calbr_admin_gd'); return false;">Distributed Calibre: Executing and Monitoring</a>— Information and scenarios for running Calibre
MTflex in different environments and launch modes.</p>
</li>
<li class="li" id="id7f643078-c44c-4bf2-bd84-e6285e0c04b1"><p class="p"><a class="xref Link" href="../../calbr_admin_gd/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', '-remotefile', 'calbr_admin_gd'); return false;">-remotefile</a> — Information
on the argument specifying the path to the Calibre MTflex configuration
file.</p>
</li>
</ul>
</div>
<div class="section prereq Prerequisites p"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Prerequisites</h2></div><ul class="ul"><li class="li" id="id3e643ae0-ac37-4713-9227-e149482506e4__id57459678-5a81-412f-8025-4ea4fc48a9ce"><p class="p">The MGC_HOME
environment variable must be set to the location of a Calibre software
tree. This software tree must be accessible by the remote hosts
and the same version of Calibre must be used throughout the network.
See “<a class="xref fm:HeadingAndPage" href="Concept_CalibreDraRequirements_id023312d3.html#id023312d3-3922-4678-a560-37e654c32ee3__id745598da-9406-497c-b07b-465bf2488db1">Environment Variables</a>” for more
information.</p>
</li>
<li class="li" id="id3e643ae0-ac37-4713-9227-e149482506e4__id65d9bb45-3fc3-42cf-852c-3cf19ff9b5aa"><p class="p">LM_LICENSE_FILE or MGLS_LICENSE_FILE must
be set to the location of a license file. See “<a class="xref Link" href="../../calbr_admin_gd/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Mentor Standard Licensing (MSL)', 'calbr_admin_gd'); return false;">Mentor Standard Licensing (MSL)</a>” in the <span class="ph FontProperty ManualTitle">Calibre Administrator’s Guide</span> for
more information.</p>
</li>
</ul>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand" id="id3e643ae0-ac37-4713-9227-e149482506e4__id0bf99e4c-658b-49a7-95c8-087aff7b2daf"><span class="ph cmd">In an ASCII
editor, add statements to your Calibre MTflex configuration file
to enable system level monitoring of the local and remote hosts,
for example,</span><div class="itemgroup info StepInfo"><pre class="pre codeblock"><code>//Monitoring
MONITOR UTILITY
MONITOR SYSTEM INTERVAL 300 HEARTBEAT 4 PRINT
MONITOR LOCAL LOAD INTERVAL 120
</code></pre><p class="p">These statements are used to monitor the system for unresponsive
remote hosts at a calculated time period (INTERVAL value x HEARTBEAT
value) and print to standard output (stdout) when no response is
received. If the time period is exceeded, the connection between
the local and the remote host is dropped.</p>
<p class="p">These settings can be overridden with certain Calibre DRA command
line arguments. Refer to “<a class="xref fm:HeadingAndPage" href="Command_CalibreDra_id2b5ebaae.html#id2b5ebaae-b77c-422c-a447-e0938a9e523b__Command_CalibreDra_id2b5ebaae.xml#id2b5ebaae-b77c-422c-a447-e0938a9e523b" title="You use the calibre_dra command to obtain status information and to adjust the resources for a Calibre job that is running.">calibre_dra</a>”.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">The MONITOR UTILITY statement is mandatory for correct
Calibre DRA usage. It instructs Calibre to compute a CPU demand
for the job, which is reported when using the calibre_dra -status
command — see “Allocating Resources with Calibre DRA”, Step <a class="xref fm:NumberOnlyStepAndSubstep" href="TaskTop_AllocatingResourcesWithCalibreDra_ida187486c.html#ida187486c-0260-4aba-aeeb-64457464ad71__id966c45a6-33db-4d37-887f-becfce826084">2</a></p>
</div>
</div></li>
<li class="li step stepexpand" id="id3e643ae0-ac37-4713-9227-e149482506e4__id25f44d97-9426-4b47-adc9-4297d5a4e707"><span class="ph cmd">Add a statement
to your Calibre MTflex configuration file to set the parameters
for the connection of the local host to the remote hosts, for example,</span><div class="itemgroup info StepInfo"><pre class="pre codeblock"><code>LAUNCH AUTOMATIC COUNT 4 MAXCOUNT 1000</code></pre><p class="p">This statement includes the COUNT and the MAXCOUNT parameters.
The MAXCOUNT &lt;<span class="keyword ParameterName OptionalReplaceable">m</span>&gt;
parameter is mandatory and is used to specify the maximum number of
remote processes that can be added during the job. The COUNT &lt;<span class="keyword ParameterName OptionalReplaceable">n</span>&gt;
parameter specifies the <span class="ph FontProperty emphasis">initial</span> number
of remote processes needed to launch the job. The COUNT parameter
is required when LAUNCH CLUSTER is used and not required when individual
REMOTE HOST specifications are used with the LAUNCH AUTOMATIC mode.</p>
<p class="p">See <a class="xref Link" href="../../calbr_admin_gd/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'LAUNCH CLUSTER', 'calbr_admin_gd'); return false;">LAUNCH CLUSTER</a>, <a class="xref Link" href="../../calbr_admin_gd/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'REMOTE HOST', 'calbr_admin_gd'); return false;">REMOTE HOST</a>, and <a class="xref Link" href="../../calbr_admin_gd/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'LAUNCH AUTOMATIC', 'calbr_admin_gd'); return false;">LAUNCH AUTOMATIC</a> in
the <span class="ph FontProperty ManualTitle">Calibre Administrator’s Guide</span> for
additional parameter descriptions.</p>
</div></li>
<li class="li step stepexpand" id="id3e643ae0-ac37-4713-9227-e149482506e4__id75b69feb-4de3-4923-87bb-4a3dc34f942e"><span class="ph cmd">Add a statement
to your Calibre MTflex configuration file to provide the information
for launching the remote host, for example,</span><div class="itemgroup info StepInfo"><pre class="pre codeblock"><code>REMOTE HOST hostxyz 5</code></pre></div></li>
<li class="li step stepexpand" id="id3e643ae0-ac37-4713-9227-e149482506e4__idb9a76f0c-ce22-4db0-b49b-936027fcdd18"><span class="ph cmd">Add the
following statement to specify the method to launch the Calibre
MTflex server on a remote host. This statement also specifies the
path to the file on the local host containing the commands for invoking
a remote server on the remote host, for example,</span><div class="itemgroup info StepInfo"><pre class="pre codeblock"><code>REMOTE COMMAND DYNAMIC <span class="ph filepath">remote_launch_script</span> ARGUMENTS [%N %H:%P]</code></pre><p class="p">The REMOTE COMMAND
DYNAMIC statement is specific to Calibre DRA usage and is required
in order to add or remove CPU resources. This statement has similar parameters
as specified for the <a class="xref Link" href="../../calbr_admin_gd/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'REMOTE COMMAND', 'calbr_admin_gd'); return false;">REMOTE COMMAND</a> statement
in the <span class="ph FontProperty ManualTitle">Calibre Administrator’s Guide</span>. </p>
<p class="p">See “<a class="xref Link" href="../../calbr_admin_gd/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Using the LAUNCH CLUSTER and REMOTE COMMAND Statements', 'calbr_admin_gd'); return false;">Using the LAUNCH CLUSTER and REMOTE COMMAND Statements</a>” for examples of an rsh <span class="keyword ParameterName OptionalReplaceable">remote_launch_script</span> and
the ARGUMENTS specification.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">When you run Calibre DRA stand-alone, you specify the remote
hosts for dynamic allocation in a <span class="keyword ParameterName OptionalReplaceable">remote_launch_script</span>.
Depending on your environment, it can be preferable to use the LSF <span class="ph FontProperty emphasis">bsub</span> or
Grid Engine <span class="ph FontProperty emphasis">qsub</span> commands
to handle the dynamic aspect of Calibre DRA.</p>
</div>
<p class="p">See “<a class="xref fm:HeadingAndPage" href="General_CalibreDRAStandAloneConfigurationExample_id3d86484e.html#id3d86484e-f92b-45aa-b590-ab53862d9438__General_CalibreDRAStandAloneConfigurationExample_id3d86484e.xml#id3d86484e-f92b-45aa-b590-ab53862d9438" title="This example shows the configuration for using Calibre DRA stand‑alone. In this case, the user is responsible to provide the exact host names as specified in REMOTE COMMAND DYNAMIC or the status output, including full qualification, the CPU counts, and the commands for interacting with the running Calibre job.">Calibre DRA Stand-Alone Configuration Example</a>” for
an example of using Calibre DRA stand‑alone.</p>
</div></li>
</ol>
<div class="section result"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Results</h2></div><p class="p">You have now added statements to configure the Calibre MTflex
file for executing your Calibre job with Calibre DRA.</p>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><div class="section Subsection" id="id3e643ae0-ac37-4713-9227-e149482506e4__ide441b0bb-896a-4937-b70e-4a79ada3a191"><h2 class="title Subheading sectiontitle">Example
1</h2><p class="p">Here is an example of specifying the Calibre MTflex configuration
file that sets up the Calibre MTflex run for a Calibre job with
Calibre DRA.</p>
<pre class="pre codeblock"><code>calibre -dra -remotefile mtflex.dra -drc -hier -turbo rules.svrf &gt;&amp; \
	 calibre.log &amp;</code></pre></div>
<div class="section Subsection" id="id3e643ae0-ac37-4713-9227-e149482506e4__id0b84977c-6be9-4456-aaef-2449f13c298d"><h2 class="title Subheading sectiontitle">Example
2</h2><p class="p">Here is an example of a Calibre MTflex configuration file that
connects initially to named remote hosts and then uses the LSF <span class="ph FontProperty emphasis">bsub</span> command
to choose which additional remote hosts are made available for dynamic
CPU allocation for Calibre DRA during the Calibre job. The <a class="xref Link" href="../../calbr_admin_gd/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'rcalibre', 'calbr_admin_gd'); return false;">rcalibre</a> utility is used
to initiate the Calibre MTflex run on the remote hosts as described
in the <span class="ph FontProperty ManualTitle">Calibre Administrator’s Guide</span>.</p>
<pre class="pre codeblock"><code>
// -----------------------------------------------
// Monitoring
// -----------------------------------------------
MONITOR UTILITY
MONITOR SYSTEM INTERVAL 300 HEARTBEAT 4 PRINT
MONITOR LOCAL LOAD INTERVAL 120
// -----------------------------------------------
// Launch Mode
// -----------------------------------------------
LAUNCH AUTOMATIC MAXCOUNT 1000
REMOTE HOST node1 4
// -----------------------------------------------
// DRA Setup
// -----------------------------------------------
REMOTE COMMAND DYNAMIC bsub ARGUMENTS [-J calibre_dra[1-%C] \
	 -o calibre_dra_%J[%I].log &lt;<span class="keyword ParameterName OptionalReplaceable">MGC_HOME</span>&gt;/bin/rcalibre /tmp 0 \
	 -mtflex %H:%P] -f</code></pre></div>
<div class="section Subsection" id="id3e643ae0-ac37-4713-9227-e149482506e4__idf5d863e1-33ad-4854-8dc5-9cd6b780cfb7"><h2 class="title Subheading sectiontitle">Example
3</h2><p class="p">Here is an example of a Calibre MTflex configuration file that
uses the LSF <span class="ph FontProperty emphasis">bsub</span> command
to choose initial remote hosts and additional remote hosts for dynamic
CPU allocation for Calibre DRA during the Calibre job. The REMOTE
COMMAND INITIAL statement is specific to Calibre DRA usage and is
used to launch the initial remote hosts from the start of the dynamic jobs.
This statement has similar parameters as specified for the <a class="xref Link" href="../../calbr_admin_gd/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'REMOTE COMMAND', 'calbr_admin_gd'); return false;">REMOTE COMMAND</a> statement
in the <span class="ph FontProperty ManualTitle">Calibre Administrator’s Guide</span>.
The <a class="xref Link" href="../../calbr_admin_gd/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'rcalibre', 'calbr_admin_gd'); return false;">rcalibre</a> utility
is used to initiate the Calibre MTflex run on the remote hosts and
is also described in the <span class="ph FontProperty ManualTitle">Calibre Administrator’s Guide</span>.</p>
<pre class="pre codeblock"><code>// -----------------------------------------------
// Monitoring
// -----------------------------------------------
MONITOR UTILITY
MONITOR SYSTEM INTERVAL 300 HEARTBEAT 4 PRINT
MONITOR LOCAL LOAD INTERVAL 120
// -----------------------------------------------
// Launch Mode
// -----------------------------------------------
LAUNCH CLUSTER COUNT 4 MAXCOUNT 1000
REMOTE COMMAND INITIAL bsub ARGUMENTS [-J calibre_dra[1-%C] \
-o calibre_dra_%J[%I].log &lt;<span class="keyword ParameterName OptionalReplaceable">MGC_HOME</span>&gt;/bin/rcalibre /tmp 0 \
-mtflex %H:%P] -f
// -----------------------------------------------
// DRA Setup
// -----------------------------------------------
REMOTE COMMAND DYNAMIC bsub ARGUMENTS [-J calibre_dra[1-%C] \
-o calibre_dra_%J[%I].log &lt;<span class="keyword ParameterName OptionalReplaceable">MGC_HOME</span>&gt;/bin/rcalibre /tmp 0 \
-mtflex %H:%P] -f</code></pre><p class="p">The number of initial CPUs launched is 4, specified by the “COUNT
4” option in the LAUNCH CLUSTER statement. The value of 4 is passed
through the %C variable to the REMOTE COMMAND INITIAL statement.
During the job, the user can decide whether to launch additional
CPUs from the command line. For example:</p>
<pre class="pre ShellCommand">$MGC_HOME/bin/calibre_dra -add 25</pre>
<p class="p">The value of 25 is also passed through the %C variable to the
REMOTE COMMAND DYNAMIC statement. </p>
<p class="p">Other variable substitutions used in the example, including %H
(hostname) and %P (port number), are available and specified in
the <a class="xref LinkItalic" href="../../calbr_admin_gd/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'manual title', 'calbr_admin_gd'); return false;">Calibre Administrator’s Guide</a>.</p>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCChap_RunningCalibreDra_id3e2d945a.html" title="This section covers how to create a customized Calibre MTflex file, invoke Calibre DRA, and then use it to access the resources and status of your running Calibre job.">Running Calibre DRA</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_dra_user"
                DocTitle = "Calibre® Dynamic Resource Allocator (DRA) User’s Manual"
                PageTitle = "Configuring the Calibre MTflex File for Calibre DRA"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_ConfiguringTheCalibreMTflexFileForCalibreDRA_id3e643ae0.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Dynamic Resource Allocator (DRA) User’s Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>