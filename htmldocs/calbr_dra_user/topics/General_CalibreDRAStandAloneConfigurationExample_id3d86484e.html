<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="GeneralRefTopic" />
<meta name="DC.Title" content="Calibre DRA Stand-Alone Configuration Example" />
<meta name="abstract" content="This example shows the configuration for using Calibre DRA stand‑alone. In this case, the user is responsible to provide the exact host names as specified in REMOTE COMMAND DYNAMIC or the status output, including full qualification, the CPU counts, and the commands for interacting with the running Calibre job." />
<meta name="description" content="This example shows the configuration for using Calibre DRA stand‑alone. In this case, the user is responsible to provide the exact host names as specified in REMOTE COMMAND DYNAMIC or the status output, including full qualification, the CPU counts, and the commands for interacting with the running Calibre job." />
<meta name="prodname" content="Calibre Dynamic Resource Allocator (DRA) User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-26" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="2" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_dra_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® Dynamic Resource Allocator (DRA) User’s Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,doc.type.documentation.sys,product.version.v2021.2,product.id.P10101" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeDraftCommentsInChangeLog" content="2021.1" />
<meta name="HighlightChanges" content="yes" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id3d86484e-f92b-45aa-b590-ab53862d9438" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Calibre DRA Stand-Alone Configuration Example</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Calibre DRA Stand-Alone Configuration Example" />
<meta name="attributes" content="doc.type.documentation.user,doc.type.documentation.sys,product.version.v2021.2,product.id.P10101" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="default" id="id3d86484e-f92b-45aa-b590-ab53862d9438">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Calibre DRA Stand-Alone
Configuration Example</h1>
<div class="body refbody GeneralRefBody"><div class="abstract GeneralRefAbstract"><p class="shortdesc">This example shows the configuration
for using Calibre DRA stand‑alone. In this case, the user is responsible
to provide the exact host names as specified in REMOTE COMMAND DYNAMIC
or the status output, including full qualification, the CPU counts,
and the commands for interacting with the running Calibre job.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">These are the minimum requirements to configure Calibre
DRA for stand‑alone use. Refer to the <a class="xref LinkItalic" href="../../calbr_admin_gd/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'manual title', 'calbr_admin_gd'); return false;">Calibre Administrator’s Guide</a> for more information on Calibre MTflex statements and remote
launch scripts.</p>
</div>
</div>
<div class="section Subsections"><div class="section Subsection" id="id3d86484e-f92b-45aa-b590-ab53862d9438__idb8346e17-f863-4076-9c02-a954eeb3ce22"><h2 class="title Subheading sectiontitle">Calibre
DRA MTflex File</h2><p class="p">In the following example configuration file, the MONITOR UTILITY
statement is mandatory for the Calibre CPU demand computation. The
MAXCOUNT and the REMOTE COMMAND DYNAMIC statements are required
for Calibre DRA.</p>
<pre class="pre codeblock"><code>MONITOR UTILITY
LAUNCH AUTOMATIC MAXCOUNT 1000
REMOTE HOST node123 5
REMOTE COMMAND DYNAMIC &lt;<span class="keyword ParameterName OptionalReplaceable">full_path</span>&gt;/dra_launch_remotes.tcl \
	 ARGUMENTS [%N %H:%P]</code></pre></div>
<div class="section Subsection" id="id3d86484e-f92b-45aa-b590-ab53862d9438__id7c98a16d-d58e-46c9-be5a-b6adf0dcd958"><h2 class="title Subheading sectiontitle">Calibre
DRA Launch Remotes Script</h2><p class="p">The following example script is used by the REMOTE COMMAND DYNAMIC
statement to allocate the hosts for Calibre DRA. This Tcl script
uses the rcalibre utility, which is described in more detail in
“<a class="xref Link" href="../../calbr_admin_gd/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'rcalibre', 'calbr_admin_gd'); return false;">rcalibre</a>” in the <span class="ph FontProperty ManualTitle">Calibre Administrator’s Guide</span>.</p>
<pre class="pre codeblock"><code>#!/usr/bin/tclsh
# This script will be executed by Calibre MTFlex REMOTE COMMAND 
# DYNAMIC to add new remote CPUs. Syntax: 
# REMOTE COMMAND DYNAMIC dra_launch_remotes.tcl ARGUMENTS [%N %H:%P]
# %N, %H, %P are MTFlex variables that Calibre will replace with:
# %N    is the list of remote hosts and number of processes  
# %H:%P is the primary host and port for primary/remotes communication
array set hostnameCount {}
foreach part [split [lindex $argv 0] ":"] {
  set host_parts [split $part "#"]
  set name [lindex $host_parts 0]  ;# Example: node123
  set count [lindex $host_parts 1] ;# Example: 5
  if {$count == ""} { set count 1 }
  set hostnameCount($name) $count
}
set primary_communication [lindex $argv 1] ;# Example: primary123:40665
set mgc_home "&lt;<span class="keyword ParameterName OptionalReplaceable">full_path_to_MGC_HOME_used_by_primary</span>&gt;"
foreach name [array names hostnameCount] {
  set num $hostnameCount($name)
  for {set x 0} {$x&lt;$num} {incr x} {
    # Launch a remote Calibre process
    # Syntax is documented in Calibre Admin Guide, "rcalibre utility"
    # $MGC_HOME/bin/rcalibre [rundir] \
    #    env_var_count {[env_var_1] [env_var_value]} ... \
    #    -mtflex primaryhost:port_number [-v] [-f]
    set    cmd "${mgc_home}/bin/rcalibre /tmp "
    append cmd "1 MGC_HOME $mgc_home "
    append cmd "-mtflex $primary_communication "    
    exec rsh $name -n $cmd &amp;
  }
}</code></pre></div>
<div class="section Subsection" id="id3d86484e-f92b-45aa-b590-ab53862d9438__id9a752112-47fd-4f3d-be9f-d107ff58a75a"><h2 class="title Subheading sectiontitle">Add
Resources Command</h2><p class="p">Specifying the following command adds two remote CPU resources
to the running Calibre job, for example,</p>
<pre class="pre codeblock"><code>calibre_dra -log calibre.log -add node<span class="keyword ParameterName OptionalReplaceable">456</span>#<span class="keyword ParameterName OptionalReplaceable">2</span></code></pre><p class="p">The Calibre transcript shows the effect of the add command. </p>
<pre class="pre codeblock"><code>//  Connected to CPU on remote host node456.&lt;<span class="keyword ParameterName OptionalReplaceable">domain_name</span>&gt;,
//  logfile = /tmp/CalibreRemoteLog.primary123….node456.&lt;<span class="keyword ParameterName OptionalReplaceable">domain_name</span>&gt;…
//  Connected to CPU on remote host node456.&lt;<span class="keyword ParameterName OptionalReplaceable">domain_name</span>&gt;,
//  logfile = /tmp/CalibreRemoteLog.primary123….node456.&lt;<span class="keyword ParameterName OptionalReplaceable">domain_name</span>&gt;…
//  Applying licensing policy...
//  calibrehdrc license acquired.
//  calibredrc license acquired.
//  calresourceman license acquired.
//  calmtopcpro license acquired.
//  &lt;DCA 52 0 60 N node456.&lt;<span class="keyword ParameterName OptionalReplaceable">domain_name</span>&gt;
//  R 4 0 2 2 2 T 10 6 0 A 0 0 16251(P) 16253(P)&gt;</code></pre></div>
<div class="section Subsection" id="id3d86484e-f92b-45aa-b590-ab53862d9438__idff7e7d59-9608-4add-82b7-d7a9951fb13b"><h2 class="title Subheading sectiontitle">Status
Command</h2><p class="p">Specifying the status command shows information for the connected
remote hosts, for example,</p>
<pre class="pre codeblock"><code>calibre_dra -log calibre.log -status</code></pre><p class="p">The information is printed to the terminal window.</p>
<pre class="pre codeblock"><code>REPORT REMOTES
  NAME: node123  CPU: 4/8  IP: xxx.xxx.xx.xx
  NAME: node<span class="keyword ParameterName OptionalReplaceable">456</span>.&lt;<span class="keyword ParameterName OptionalReplaceable">domain_name</span>&gt;  CPU: 2/4  IP: xxx.xxx.xx.xx
  PENDING: 0/0
  TOTAL: 4/12
END</code></pre></div>
<div class="section Subsection" id="id3d86484e-f92b-45aa-b590-ab53862d9438__id532eaf58-dda0-46ec-90e9-9d2489a87ec3"><h2 class="title Subheading sectiontitle">Remove
Resources Command</h2><p class="p">Specifying the following command removes two remote CPU resources
from the running Calibre job, for example,</p>
<pre class="pre codeblock"><code>calibre_dra -log calibre.log -remove node<span class="keyword ParameterName OptionalReplaceable">456</span>.&lt;<span class="keyword ParameterName OptionalReplaceable">domain_name</span>&gt;#<span class="keyword ParameterName OptionalReplaceable">2</span></code></pre><p class="p">The removal of the two remote CPU resources can be confirmed
by checking the Calibre transcript and rerunning the status command.</p>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCChap_RunningCalibreDra_id3e2d945a.html" title="This section covers how to create a customized Calibre MTflex file, invoke Calibre DRA, and then use it to access the resources and status of your running Calibre job.">Running Calibre DRA</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_dra_user"
                DocTitle = "Calibre® Dynamic Resource Allocator (DRA) User’s Manual"
                PageTitle = "Calibre DRA Stand-Alone Configuration Example"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/General_CalibreDRAStandAloneConfigurationExample_id3d86484e.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Dynamic Resource Allocator (DRA) User’s Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>