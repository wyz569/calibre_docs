<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Example Calibre YieldServer Scripts" />
<meta name="abstract" content="Calibre YieldServer example scripts. All YieldServer scripts are written in Tcl." />
<meta name="description" content="Calibre YieldServer example scripts. All YieldServer scripts are written in Tcl." />
<meta name="prodname" content="Calibre YieldServer Reference Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-08" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_ys_ref" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2;show" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="HighlightChanges" content="yes" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® YieldServer Reference Manual" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P11347,product.id.P11426,product.id.P11713,product.id.P10087,product.id.P11493" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id5d226941-0bbd-42b9-bd58-d81f653659a2" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Example Calibre YieldServer Scripts</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Example Calibre YieldServer Scripts" />
<meta name="attributes" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P11347,product.id.P11426,product.id.P11713,product.id.P10087,product.id.P11493" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id5d226941-0bbd-42b9-bd58-d81f653659a2">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Example Calibre YieldServer Scripts</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">Calibre YieldServer
example scripts. All YieldServer scripts are written in Tcl.</span>
</div>
<div class="section Subsections"><div class="section Subsection" id="id5d226941-0bbd-42b9-bd58-d81f653659a2__id2737f536-da1b-4b2b-8749-7cc68cf9b3d1"><h2 class="title Subheading sectiontitle">Example 1</h2><p class="p">This
script returns the net names and node numbers associated with layers
M1 and M2. Connectivity extraction information must be available
in the database, which it is by default if the rule file uses connectivity
statements. The script assumes a DFM database is not open at the time
of execution. If one is, the dfm::open_db and dfm::close_db statements
are not needed.</p>
<pre class="pre codeblock leveled"><code><a class="xref fm:HeadingOnly" href="Command_DfmopenDb_id924ab6d5.html#id924ab6d5-15f6-4921-904c-8f98069f3e52__Command_DfmopenDb_id924ab6d5.xml#id924ab6d5-15f6-4921-904c-8f98069f3e52" title="Opens a DFM database. Only one database can be open at the same time.">dfm::open_db</a> dfmdb 
set iter_M1 [<a class="xref fm:HeadingOnly" href="Command_DfmgetGeometries_id3ce6e6b8.html#id3ce6e6b8-2bab-41a0-9ed7-b9390e570352__Command_DfmgetGeometries_id3ce6e6b8.xml#id3ce6e6b8-2bab-41a0-9ed7-b9390e570352" title="Returns a geometry iterator referencing shapes on a layer. By default, shapes are referenced hierarchically.">dfm::get_geometries</a> M1] 
set iter_M2 [dfm::get_geometries M2] 
 
puts "\nNet names and node numbers associated with M1:" 
puts "\n\nnet name\tnode number\n--------\t-----------" 
while {$iter_M1 ne ""} { 
    set net_name [<a class="xref fm:HeadingOnly" href="Command_DfmgetData_id46ad7fb1.html#id46ad7fb1-10e3-4b6d-9c29-9155a5b7e16e__Command_DfmgetData_id46ad7fb1.xml#id46ad7fb1-10e3-4b6d-9c29-9155a5b7e16e" title="Returns the specified type of data for the current database object. Data from port iterators is also accessible from dfm::get_port_data, which has a more comprehensive set of options for ports.">dfm::get_data</a> $iter_M1 -net_name] 
    set node_number [dfm::get_data $iter_M1 -node] 
    puts "$net_name\t\t$node_number" 
    <a class="xref fm:HeadingOnly" href="Command_Dfminc_id6091e5e7.html#id6091e5e7-30b0-4168-bc7f-bff0dc2bd669__Command_Dfminc_id6091e5e7.xml#id6091e5e7-30b0-4168-bc7f-bff0dc2bd669" title="Increments the specified iterator or SVRF layer trace object.">dfm::inc</a> iter_M1 
} 
puts "\nNet names and node numbers associated with M2:" 
puts "\n\nnet name\tnode number\n--------\t-----------" 
while {$iter_M2 ne ""} { 
    set net_name [dfm::get_data $iter_M2 -net_name] 
    set node_number [dfm::get_data $iter_M2 -node] 
    puts "$net_name\t\t$node_number" 
    dfm::inc iter_M2 
} 
puts "\n" 
<a class="xref fm:HeadingOnly" href="Command_DfmcloseDb_id637361cd.html#id637361cd-992c-4b6d-8124-ab9c5d1ab700__Command_DfmcloseDb_id637361cd.xml#id637361cd-992c-4b6d-8124-ab9c5d1ab700" title="Closes the current database.">dfm::close_db</a> 
exit -force </code></pre><h2 class="title Subheading sectiontitle">Example 2</h2><p class="p">This script writes the contents of a DFM
database to an OASIS<sup>®</sup>  file. Error and edge layers are converted to
polygon layers before being written out with properties.</p>
<pre class="pre codeblock leveled"><code># Load the DFM database 
dfm::open_db dfmdb 
 
# set up list variables 
set type3_layer [list] 
set type2_layer [list] 
 
# Write the layers to an RDB file. 
set layers [<a class="xref fm:HeadingOnly" href="Command_DfmgetLayers_id3b24883a.html#id3b24883a-572c-4b16-ae74-cbc5cab4dfec__Command_DfmgetLayers_id3b24883a.xml#id3b24883a-572c-4b16-ae74-cbc5cab4dfec" title="Returns a layer iterator.">dfm::get_layers</a>] 
while {$layers ne "" } { 
  set name [dfm::get_data $layers -layer_name] 
  puts "\nwriting layer $name" 
 
  # get list of derived error layers to convert to polygon 
  # or write out if polygons 
  set type  [dfm::get_data $layers -layer_type]  
  puts "type is $type" 
  if {$type == 3 } { 
    lappend type3_layer $name 
  } elseif {$type == 2 } { 
    lappend type2_layer $name 
  } else { 
    <a class="xref fm:HeadingOnly" href="Command_DfmwriteOas_id386ce239.html#id386ce239-8dc9-48ae-9035-830eedac486f__Command_DfmwriteOas_id386ce239.xml#id386ce239-8dc9-48ae-9035-830eedac486f" title="Writes specified layers to an OASIS database file. The various options configure the structure of the database.">dfm::write_oas</a> -layer_info [list $name 300 0 ] -write_properties \ 
      -file ${name}.oas 
  } 
  dfm::inc layers 
} </code></pre><pre class="pre codeblock leveled"><code># write out derived error layers as polygons 
set typ3_iter 1 
foreach type3 $type3_layer { 
  puts "Writing out type 3 $type3" 
  <a class="xref fm:HeadingOnly" href="Command_DfmnewLayer_idec43bb49.html#idec43bb49-f6ce-4ff5-9665-37610b9b5e80__Command_DfmnewLayer_idec43bb49.xml#idec43bb49-f6ce-4ff5-9665-37610b9b5e80" title="Creates a new layer as the result of processing a rule script. SVRF and TVF syntax are supported for the rules.">dfm::new_layer</a> -svrf "reg2$typ3_iter = DFM COPY \"$type3\" REGION" 
  dfm::write_oas -layer_info "reg2$typ3_iter 300 0"  -write_properties \ 
    -file ${type3}.oas 
  incr typ3_iter 
} 
# write out derived edge layers as polygons using EXPAND EDGE 
set typ2_iter 1 
foreach type2 $type2_layer { 
  puts "Writing out type 2 $type2" 
  dfm::new_layer -svrf "regt2$typ2_iter = EXPAND EDGE \"$type2\" \ 
    OUTSIDE BY 0.004 CORNER FILL" 
  dfm::write_oas -layer_info "regt2$typ2_iter 300 0"  -write_properties \ 
    -file ${type2}.oas 
  incr typ2_iter 
} 
dfm::close_db 
exit -force </code></pre><p class="p">See “<a class="xref fm:HeadingAndPage" href="MGCAppe_CalibreYieldserverExampleScripts_idd1002f11.html#idd1002f11-9486-4923-ad57-9235e50eb293__MGCAppe_CalibreYieldserverExampleScripts_idd1002f11.xml#idd1002f11-9486-4923-ad57-9235e50eb293" title="These scripts generate iterators, step through iterators, obtain data from iterator objects, traverse hierarchy, and output information. The methods employed are applicable in solving other problems.">Calibre YieldServer Example Scripts</a>” for additional
examples.</p>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCChap_IntroductionCalibreYieldserver_id4c471e2c.html" title="Calibre YieldServer processes layout design and rule file data after a calibre -dfm run.YieldServer scripts post process design data in a DFM database. Specifically, YieldServer allows retrieval of layer, polygon, edge, connectivity, property, device, and other information in a DFM database. Annotations and DFM properties facilitate detailed data analysis.">Introduction to Calibre YieldServer</a></div>
</div>
</div></div>
<div class="fn"><sup>1</sup>  OASIS<sup>®</sup> is
a registered trademark of Thomas Grebinski and licensed for use
to SEMI<sup>®</sup>, San Jose. SEMI<sup>®</sup> is
a registered trademark of Semiconductor Equipment and Materials
International.</div></div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_ys_ref"
                DocTitle = "Calibre® YieldServer Reference Manual"
                PageTitle = "Example Calibre YieldServer Scripts"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_ExampleCalibreYieldserverScripts_id5d226941.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® YieldServer Reference Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>