<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="GeneralRefTopic" />
<meta name="DC.Title" content="Example: Generating a Regression Layout from a DFM Database" />
<meta name="abstract" content="Calibre YieldServer scripts are frequently useful in regression flows. One such application is to generate an OASIS layout from a DFM Database. OASIS layouts have the convenience of storing layer names intrinsically in the database. Such layer names can correspond to rule checks. By using that capability, rule check output can be saved under its own layer name to a physical design for regression testing." />
<meta name="description" content="Calibre YieldServer scripts are frequently useful in regression flows. One such application is to generate an OASIS layout from a DFM Database. OASIS layouts have the convenience of storing layer names intrinsically in the database. Such layer names can correspond to rule checks. By using that capability, rule check output can be saved under its own layer name to a physical design for regression testing." />
<meta name="prodname" content="Calibre YieldServer Reference Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-08" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_ys_ref" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="IncludeDraftCommentsInChangeLog" content="21.2;show" />
<meta name="HighlightColor" content="mgc_yellow_129_50" />
<meta name="HighlightChanges" content="yes" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="CalibreÂ® YieldServer Reference Manual" />
<meta name="CSHelp" content="NO" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P11347,product.id.P11426,product.id.P11713,product.id.P10087,product.id.P11493" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id6c6d6a01-626f-476c-a399-0caab5ac6074" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Example: Generating a Regression Layout from a DFM Database</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Example: Generating a Regression Layout from a DFM Database" />
<meta name="attributes" content="doc.type.documentation.ref,product.version.v2021.2,product.id.P11347,product.id.P11426,product.id.P11713,product.id.P10087,product.id.P11493" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="default" id="id6c6d6a01-626f-476c-a399-0caab5ac6074">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Example: Generating a Regression
Layout from a DFM Database</h1>
<div class="body refbody GeneralRefBody"><div class="abstract GeneralRefAbstract"><span class="shortdesc">Calibre YieldServer
scripts are frequently useful in regression flows. One such application
is to generate an OASIS layout from a DFM Database. OASIS layouts
have the convenience of storing layer names intrinsically in the
database. Such layer names can correspond to rule checks. By using
that capability, rule check output can be saved under its own layer
name to a physical design for regression testing.</span>
</div>
<div class="section Subsections"><div class="section Subsection" id="id6c6d6a01-626f-476c-a399-0caab5ac6074__idceaaea85-c592-492a-9a22-803bfd718ef0"><pre class="pre codeblock"><code># Calibre YieldServer script for generating OASIS layout data from a
# DFM Database.
# Upstream of this script, a DFM Database file must be generated
# containing layout shapes.
# The output is an OASIS file with layers generated from rule checks in 
# the DFM Database.
# Edge and error cluster data are expanded to polygons.

# path of the output file.
set out_layout "out.oas"

# check names in the database.
set checks [dfm::list_checks]

# layer info string for final layout dump command.
set linfo ""

# SVRF commands to convert edge/error output to polygon.
set svrf ""

# initial layer number for output results.
set layer_nbr 1</code></pre><pre class="pre codeblock"><code># generate SVRF code for writing layers.
foreach check [lsort $checks] {
  puts "  CHECK: $check"
# get related check layer
  append svrf "// check $check \n"
  set i 0
  foreach layer [dfm::list_layers -no_ids -check $check] {
    puts "\tLAYER: $layer"
    incr i
# ignore window output from density, dfm analyze etc.
    if [regexp {_detail$} $layer ] {
      continue
    }</code></pre><pre class="pre codeblock"><code># get layer type:
# 1: polygon
# 2: edge layer
# 3: error cluster
    set type [dfm::get_data $layer -layer_type]
    set outlayer0 $layer
    set outlayer1 $layer
    if {$type == 3} {
# converting error clusters to edges
      set outlayer0 ${check}::&lt;$i&gt;_edge
      append svrf "'$outlayer0' =  DFM COPY '$layer' EDGE \n"
    }
    if {($type == 3) || ($type == 2)} {
# expanding edges
      set outlayer1 ${check}::&lt;$i&gt;_eedge
      append svrf "'$outlayer1' =  EXPAND EDGE '$outlayer0' BY \
                               (4/\$PRECISION) \n"
    }
# attach dummy property to force layer creation even with 
# concurrent alias layers.
# drv.tcl script relies on layer name format: check::&lt;nbr&gt;_p  
    set outlayer ${check}::&lt;$i&gt;_p
    append svrf "'$outlayer' =  DFM PROPERTY '$outlayer1' \
                 \[check = '$check'\] \n"
    append linfo " -layer_info \{\"$outlayer\" $layer_nbr 0 \}"
  }
  incr layer_nbr
}

# if there were any non-polygon error layers, execute related svrf.
if [llength $linfo] {
  dfm::new_layer -svrf $svrf -keep_all_layers
}

# dump the output layout
eval "dfm::write_oas $linfo -file \{$out_layout\}" 
exit -force</code></pre><p class="p">This script can be called from within Calibre
YieldServer using the -exec command line option. A DFM Database
with layout data should be loaded at the same time. The output is
based upon your design layout. The output design, <span class="ph filepath">out.oas</span>,
has layer names of this form: &lt;check_name&gt;::&lt;n&gt;_p, where &lt;check_name&gt;
is both the name of a rule check and the layer it generates, and
&lt;n&gt; is an integer. These layers correspond to check names that
were active in the rule file. </p>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCAppe_CalibreYieldserverExampleScripts_idd1002f11.html" title="These scripts generate iterators, step through iterators, obtain data from iterator objects, traverse hierarchy, and output information. The methods employed are applicable in solving other problems.">Calibre YieldServer Example Scripts</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter">Â </div><div class="Footer" id="Footer">Â </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_ys_ref"
                DocTitle = "CalibreÂ® YieldServer Reference Manual"
                PageTitle = "Example: Generating a Regression Layout from a DFM Database"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/General_ExampleXorComparisonRuleCheckResultsAgainstReferenceLayout_id6c6d6a01.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">CalibreÂ® YieldServer Reference Manual,Â v2021.2<br />Unpublished work. Â©Â 2021Â Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>