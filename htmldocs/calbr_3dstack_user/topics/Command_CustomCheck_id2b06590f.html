<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="custom_check" />
<meta name="abstract" content="Defines custom checks using TVF format for the 3DSTACK+ syntax." />
<meta name="description" content="Defines custom checks using TVF format for the 3DSTACK+ syntax." />
<meta name="prodname" content="Calibre 3DSTACK User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-23" />
<meta name="Topline" content="Siemens EDA" />
<meta name="GenerateOnlyChangedTopics" content="no" />
<meta name="IncludeDraftCommentsInChangeLog" content="all;show" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="HighlightChanges" content="yes" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_3dstack_user" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="14" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® 3DSTACK User’s Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,product.version.v2021.2,product.id.P11716,product.id.P10089,product.id.P10099" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id2b06590f-462c-4488-885a-8aa7e92ba1cb" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>custom_check</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="custom_check" />
<meta name="attributes" content="doc.type.documentation.user,product.version.v2021.2,product.id.P11716,product.id.P10089,product.id.P10099" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="usa-arg" id="id2b06590f-462c-4488-885a-8aa7e92ba1cb">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">custom_check</h1>
<div class="body refbody CommandRefBody"><div class="abstract CommandRefAbstract"><p class="p ContextMGC">Used in the 3DSTACK+ extended
syntax file. Cannot be used in the standard rule file.</p>
<p class="shortdesc">Defines custom checks using TVF format for the 3DSTACK+
syntax.</p>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Usage</h2><div class="section UsageSet"><p class="lines UsageLine"><span class="keyword ParameterName Required">custom_check</span> <br />
<span class="keyword ParameterName Required">-check_name</span> <span class="keyword ParameterName RequiredReplaceable">check_name</span> <br />
<span class="keyword ParameterName Required">-layer_type1 </span>‘<span class="keyword ParameterName Required">{</span>’ <span class="keyword ParameterName RequiredReplaceable">placed_layer_type1</span>… [<span class="keyword ParameterName Optional">-merge</span>] ‘<span class="keyword ParameterName Required">}</span>’ <br />
[-layer_type2 ‘{’ <span class="keyword ParameterName OptionalReplaceable">placed_layer_type2</span> … [<span class="keyword ParameterName Optional">-merge</span>] ‘}’] <br />
<span class="keyword ParameterName Required">-tvf</span> ‘<span class="keyword ParameterName Required">{</span>’ <span class="keyword ParameterName RequiredReplaceable">tvf_body</span> ‘<span class="keyword ParameterName Required">}</span>’<br />
[<span class="keyword ParameterName Optional">-direction</span> {<span class="keyword ParameterName OptionalDefault">up</span> | <span class="keyword ParameterName Optional">down</span> | <span class="keyword ParameterName Optional">both</span>}] <br />
[<span class="keyword ParameterName Optional">-stack</span> {<span class="keyword ParameterName OptionalReplaceable">stack_list</span>}]</p>
</div>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="id2b06590f-462c-4488-885a-8aa7e92ba1cb__id483a0429-99bb-4162-b81d-a35cf90ae922"><span class="keyword ParameterName Required">-check_name</span> <span class="keyword ParameterName RequiredReplaceable">check_name</span></dt>
<dd class="dd ArgumentDescription"><p class="p">Required argument set that specifies the
check name. The check name must be unique in the rule file. The
check name is used in the output result database. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="id2b06590f-462c-4488-885a-8aa7e92ba1cb__id0a082575-bf09-4418-8893-cc1f7a1a2881"><span class="keyword ParameterName Required">-layer_type1 </span>‘<span class="keyword ParameterName Required">{</span>’ <span class="keyword ParameterName RequiredReplaceable">placed_layer_type1</span> … [<span class="keyword ParameterName Optional">-merge</span>] ‘<span class="keyword ParameterName Required">}</span>’</dt>
<dd class="dd ArgumentDescription"><p class="p">A required argument set that specifies the
layer type(s) the check applies to. If ‑merge is specified all layers
of the specified type(s) are merged before the check is applied. </p>
</dd>
<dt class="dt ArgumentName dlterm" id="id2b06590f-462c-4488-885a-8aa7e92ba1cb__idd1503214-c424-4a31-8d31-f247327f89fd">-layer_type2 ‘{’ <span class="keyword ParameterName OptionalReplaceable">placed_layer_type2</span> … [<span class="keyword ParameterName Optional">-merge</span>] ‘}’</dt>
<dd class="dd ArgumentDescription"><p class="p">An optional argument set that specifies
one or more layer types used for a second layer argument in the
rule check. The check is applied to layers of layer_type1 and layer_type2 that
interact. If ‑merge is specified all layers of the specified type(s)
are merged before the check is applied.</p>
</dd>
<dt class="dt ArgumentName dlterm" id="id2b06590f-462c-4488-885a-8aa7e92ba1cb__id56f58dfa-e94c-4c20-b324-51a00e06f5ac"><span class="keyword ParameterName Required">-tvf</span> ‘<span class="keyword ParameterName Required">{</span>’ <span class="keyword ParameterName RequiredReplaceable">tvf_body</span> ‘<span class="keyword ParameterName Required">}</span>’</dt>
<dd class="dd ArgumentDescription"><p class="p">Required argument set that specifies a block
of TVF statements that define a rule check. See the “Description”
section for more information on writing the rule check body. </p>
<p class="p">If a list is used within the command body, braces ({…}) should
be used to enclose the list to ensure correct evaluation. Do not
use the list syntax ([list …]). </p>
</dd>
<dt class="dt ArgumentName dlterm" id="id2b06590f-462c-4488-885a-8aa7e92ba1cb__id7ed61a22-8ee4-47d3-9b0e-c617f761ec76"><span class="keyword ParameterName Optional">-direction</span> {<span class="keyword ParameterName OptionalDefault">up</span> | <span class="keyword ParameterName Optional">down</span> | <span class="keyword ParameterName Optional">both</span>}</dt>
<dd class="dd ArgumentDescription"><p class="p">Optional argument set specifying the direction
of the check if two layer types are specified. </p>
<ul class="ul"><li class="li" id="id2b06590f-462c-4488-885a-8aa7e92ba1cb__id773804c9-02c4-4daf-a8a7-6dbb86683e66"><p class="p"><span class="keyword ParameterName OptionalDefault">up</span> —
Apply check from bottom to top (default).</p>
</li>
<li class="li" id="id2b06590f-462c-4488-885a-8aa7e92ba1cb__idd042000e-602e-422e-8e22-8732ea475f5a"><p class="p">down — Apply
the check from top to bottom. </p>
</li>
<li class="li" id="id2b06590f-462c-4488-885a-8aa7e92ba1cb__idb046e3e4-a897-457f-9b60-0eb12e63abfa"><p class="p">both — Apply
the check in both directions.</p>
</li>
</ul>
</dd>
<dt class="dt ArgumentName dlterm" id="id2b06590f-462c-4488-885a-8aa7e92ba1cb__idce605475-6ef4-48c3-8169-bedae72d3b5b"><span class="keyword ParameterName Optional">-stack</span> <span class="keyword ParameterName OptionalReplaceable">stack_list</span></dt>
<dd class="dd ArgumentDescription"><p class="p">Optional argument set that specifies the
stack(s) the check is applied to. The check is applied to all stacks
if this argument is not specified. </p>
</dd>
</dl>
</div>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">The custom_check command defines a custom rule check using TVF
statements. Internally, the tool generates a set of TVF blocks with
the correct layer arguments depending on the layer types specified
with ‑layer_type1 and ‑layer_type2. </p>
<p class="p">If custom_check is defined with only the <span class="keyword ParameterName RequiredReplaceable">‑layer_type1</span> argument,
then a set of TVF rule checks is generated for all layers corresponding
to <span class="keyword ParameterName RequiredReplaceable">placed_layer_type1</span>.
If ‑merge is specified all matching layers are merged and only one
rule check is generated for the merged layer. </p>
<p class="p">If both <span class="keyword ParameterName RequiredReplaceable">‑layer_type1</span> and <span class="keyword ParameterName OptionalReplaceable">‑layer_type2</span> are
specified, then a set of TVF rule checks is generated using interacting
layer pairs of type <span class="keyword ParameterName RequiredReplaceable">placed_layer_type1</span> and <span class="keyword ParameterName OptionalReplaceable">placed_layer_type2</span>.
If ‑merge is specified all matching layers are merged and only one
rule check is generated for the merged layer.</p>
<div class="section Subsection" id="id2b06590f-462c-4488-885a-8aa7e92ba1cb__id57b1f828-da15-43a8-a62f-914b17f6c255"><h2 class="title Subheading sectiontitle">Rule
Check Construction</h2><p class="p">The rule check body (<span class="keyword ParameterName RequiredReplaceable">tvf_body</span>)
is constructed with tvf::SETLAYER and tvf::OUTLAYER statements.
Each rule check body must have at least one TVF::OUTLAYER statement
defining the output layer of the rule check. Use multiple tvf::OUTLAYER
statements to output more than one layer. </p>
<p class="p">The TVF::OUTLAYER statement can have only one argument, the output
layer name, when used in Calibre 3DSTACK. Use the TVF::SETLAYER
statement for layer derivations. For example, the following construction
causes an error:</p>
<pre class="pre codeblock"><code># INCORRECT, multiple arguments to OUTLAYER cause error
TVF::OUTLAYER EXT via &lt; 0.35 ABUT &lt; 90 SINGULAR</code></pre><p class="p">The output layer for the preceding example is correctly specified
as follows:</p>
<pre class="pre codeblock"><code># CORRECT, use SETLAYER for derivation and OUTLAYER with one argument
TVF::SETLAYER out = EXT via &lt; 0.35 ABUT &lt; 90 SINGULAR
TVF::OUTLAYER out</code></pre><p class="p">Comments may be specified with tvf::COMMENT; check text comments
are specified with tvf::@. See “<a class="xref Link" href="../../svrf_ur/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Rule Checks in Compile-Time TVF', 'svrf_ur'); return false;">Rule checks in Compile-Time TVF</a>” for details. </p>
<h2 class="title Subheading sectiontitle">Tcl Coding Guidelines for custom_check</h2><p class="p">The tool performs command substitution and evaluates Tcl variables
before evaluating the code within the rule check body. Use the following
guidelines when using Tcl within the <span class="keyword ParameterName RequiredReplaceable">tvf_body</span>:</p>
<ul class="ul"><li class="li" id="id2b06590f-462c-4488-885a-8aa7e92ba1cb__ida47dee18-cc3a-41d0-9df3-752f4167bc70"><p class="p">Do not
change the value of global Tcl variables. Global variables may be
used within the rule check body, but any changes are local in scope.
Therefore, modification of such Tcl variables within the <span class="keyword ParameterName RequiredReplaceable">tvf_body</span> may
result in undefined or undesired behavior.</p>
</li>
<li class="li" id="id2b06590f-462c-4488-885a-8aa7e92ba1cb__id254c0fb1-5829-446d-89b5-7e9e082f39db"><p class="p">Do not declare
Tcl variables within the <span class="keyword ParameterName RequiredReplaceable">tvf_body</span>.
Usage of locally declared variables results in an error. </p>
</li>
<li class="li" id="id2b06590f-462c-4488-885a-8aa7e92ba1cb__id3926e215-2d74-446c-b196-51b929182f4a"><p class="p">Use the {A B …}
list construction. Do not use the list command because command substitution
takes place and the list command is evaluated. </p>
<p class="p">For example, the command [list A B] is evaluated and replaced
by “A B” (without quotes), which is generally not the intent, as
it is no longer a list. Use the {A B} list construction for proper
evaluation. </p>
</li>
</ul>
<p class="p">The following actions take place when the custom_check code body
is evaluated:</p>
<ol class="ol"><li class="li" id="id2b06590f-462c-4488-885a-8aa7e92ba1cb__id21393398-16e3-4203-afc2-498159afa500"><p class="p">Command
substitution and Tcl variable evaluation takes place. Use the preceding coding
guidelines to ensure correct evaluation. </p>
</li>
<li class="li" id="id2b06590f-462c-4488-885a-8aa7e92ba1cb__id2a2fe1bf-1aaa-443e-b8b1-610c8e22ab7f"><p class="p">The evaluated
custom_check code body is passed to the generated 3DSTACK rule file, along
with other commands converted from 3DSTACK+ to standard 3DSTACK. </p>
<p class="p">No syntax checking is done for the 3DSTACK commands within the
custom_check, therefore any errors are reported during the 3DSTACK
rule file compilation or at runtime, not during the 3DSTACK+ rule
file compilation step.</p>
</li>
</ol>
</div>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><div class="section Subsection" id="id2b06590f-462c-4488-885a-8aa7e92ba1cb__id61fa2ea7-1139-4748-a3c9-c25baeb24e31"><h2 class="title Subheading sectiontitle">Example
1</h2><p class="p">A custom check between two interacting pad layers.</p>
<pre class="pre codeblock"><code>custom_check –check_name c1 –layer_type1 pad –layer_type2 pad -tvf {
	tvf::@ Internal between layers $_layer_type1 and $_layer_type2
	tvf::@ RVE Highlight Color: red
	tvf::SETLAYER c1 = INT $_layer_type1 $_layer_type2 &lt; 0.4
	tvf::OUTLAYER c1
}</code></pre></div>
<div class="section Subsection" id="id2b06590f-462c-4488-885a-8aa7e92ba1cb__id7b01f577-0e8f-46c8-b40a-a76b0c2f3c3c"><h2 class="title Subheading sectiontitle">Example
2</h2><p class="p">A custom check that checks the ratio of the die area to package
area.</p>
<pre class="pre codeblock not-leveled"><code>die –die_name die1 –layout {-path ./die1.gds} \
	-layer_info {-type pad1 -layer 1}
die –die_name die2 –layout {-path ./die2.gds} \
	-layer_info {-type pad2 -layer 1}
die –die_name pack –layout {-path ./pack.gds} \
	-layer_info {-type ext -layer 2}</code></pre><pre class="pre codeblock not-leveled"><code>stack -die {-name pack} \
	-tier {
		-die {-name die1 –invert}
		-die {-name die2 –placement 1000 0 –invert}
	}</code></pre><pre class="pre codeblock not-leveled"><code>custom_check -check_name area_die_pack \
	-layer_type1 ext \
	-layer_type2 {pad1 pad2 –merge} \
	-tvf {
		tvf::@ ratio of interacting tiers greater than 60 percent
		tvf::SETLAYER out = \
			DFM PROPERTY $_layer_type1 $_layer_type2 \
			OVERLAP [-= AREA($_layer_type2) / AREA($_layer_type1)] &lt;= 0.6
		tvf::OUTLAYER out
	}</code></pre></div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_RuleCheckCommands_ida491cdb9.html" title="Rule check commands perform specific checks on your design during a verification run.">Rule Check Commands</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_3dstack_user"
                DocTitle = "Calibre® 3DSTACK User’s Manual"
                PageTitle = "custom_check"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_CustomCheck_id2b06590f.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® 3DSTACK User’s Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>