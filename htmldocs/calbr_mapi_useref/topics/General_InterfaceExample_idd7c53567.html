<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2021" />
<meta name="DC.rights.owner" content="(C) Copyright 2021" />
<meta name="DC.Type" content="GeneralRefTopic" />
<meta name="DC.Title" content="Interface Example" />
<meta name="abstract" content="The following is a detailed listing of all available interfaces for Calibre MAPI." />
<meta name="description" content="The following is a detailed listing of all available interfaces for Calibre MAPI." />
<meta name="prodname" content="Calibre Metrology API (MAPI) User's and Reference Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Siemens Industry Software 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2021-03-18" />
<meta name="Topline" content="Siemens EDA" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="3" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="calbr_mapi_useref" />
<meta name="SoftwareVersionNum" content="2021.2" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="calbr_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="March 2021" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Calibre® Metrology API (MAPI) User’s and Reference Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.user,doc.type.documentation.ref, product.version.v2021.2,product.id.P10101" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ChecklinksRelease" content="calibre" />
<meta name="BookcaseHandle" content="NONE" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="ConditionFiltering" content="XML" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idd7c53567-d053-41b4-9bdd-78223a854ee7" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Interface Example</title>
<link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles-disw/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles-disw/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles-disw/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Interface Example" />
<meta name="attributes" content="doc.type.documentation.user,doc.type.documentation.ref, product.version.v2021.2,product.id.P10101" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.3.000" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="default" id="idd7c53567-d053-41b4-9bdd-78223a854ee7">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Interface Example</h1>
<div class="body refbody GeneralRefBody"><div class="abstract GeneralRefAbstract"><span class="shortdesc">The following
is a detailed listing of all available interfaces for Calibre MAPI.</span>
</div>
<div class="section Subsections"><div class="section Subsection" id="idd7c53567-d053-41b4-9bdd-78223a854ee7__iddc534540-8823-4f3e-982e-4ada5762b664"><pre class="pre codeblock"><code>#*****************************************************************CPY11*# 
#*Copyright Mentor Graphics Corporation 2009  All Rights Reserved. CPY12*# 
#*                                                                       CPY13*# 
#* THIS WORK CONTAINS TRADE SECRET AND PROPRIETARY INFORMATION    CPY14*# 
#* WHICH IS THE PROPERTY OF MENTOR GRAPHICS CORPORATION OR ITS    CPY15*# 
#*   LICENSORS AND IS SUBJECT TO LICENSE TERMS.                    CPY16*# 
#*****************************************************************CPY17*# 
 
# 
# mdp_mapi.itcl: MAPI class and function declarations.  These specify the 
# public interface. 
# 
# 
 
# 
# Measurement site representation. 
# 
  
###################################################################### 
# 
# CLASS:	MAPI_Site 
# 
# PURPOSE :	A generalized "site". 
# 
###################################################################### 
class MAPI_Site { 
     
    public variable _center_x               ;# Center point X coordinate. 
    public variable _center_y               ;# Center point Y coordinate. 
       
    # Possible values are "cdh" || "cdv" || "box" || "angle value {-90 ---&gt; 90} 
    # for horizontal(0), vertical(90 || -90), square(box) and any 
    # arbitrary angle CDs respectively.  
    public variable _cd_orientation 
    # To supported rotated box, _feature_type is introduced.  
</code></pre><pre class="pre codeblock leveled"><code>    # Its possible values are "cd" ||"box" 
    # In this case, the rotation angle is specified with _cd_orientation  
    public variable _feature_type  "" 
    public variable _cd_type     ;# CD type. Possible values are 
                                  # "width" || "space" 
    public variable _cd_opacity  ;# CD tone. Possible values are 
                                  # "dark" || "clear"  
    public variable _cd_min                 ;# Minimum CD value. 
    public variable _cd_max                 ;# Maximum CD value.  
    public variable _units "dbu"            ;# Units, Default is dbu. 
    public variable _cd_h                   ;# CD horizontal dimension. 
    public variable _cd_v                   ;# CD vertical dimension. 
    public variable _validate_flag  
    public variable _reason_not_validated ""  ;# reason for validation
                                               # failure 
    public variable _image_acquisition "NO" ;
                                 # Whether to acquire and image or not 
    public variable _metrology_algorithm "" ;
                                 # What Algorithm is used for measurment 
     
    public variable _automatically_adjust_center_point 1 
     
    # A variable to attach whatever property 
    # Expected format a list of { propName1 propVal1 propName2 propVal2} 
    # Or could be used with full freedom to the users. 
    public variable _properties  
     
    ## Image Mapping Information 
    ## These are mainly used for AMAT format. 
    public variable _image_content_gds_clip_path   "" 
    public variable _image_content_mask_name    "TEST" 
    public variable _image_content_layer_number "" 
    public variable _image_content_design_type  "DesignPreOPC" 
    public variable _image_content_fov_w      "35" 
    public variable _image_content_fov_h      "35" 
    public variable _image_content_fov_llx    "20" 
    public variable _image_content_fov_lly    "30" 
 
    ## Different CD's for different layers     
    public variable _target_cd                 0 
    public variable _mask_cd                   0 
    public variable _sim_cd                    0 
    public variable _drawn_cd                  0 
     
    public variable _row                       0 
    public variable _col                       0 
    public variable _space_pitch               0 
     
    public variable _sa_out_cd 
     
    public variable siteID;		# A general purpose index. 
    public variable groupID;		# A general purpose group index. 
     
    # Specify site status. 
    # Possible values are  "input" || "output" . Default value is "none". 
    public variable _status  
 
    constructor {} { 
	set _status "none" 
    } 
    destructor {} 
 
    ###################################################################### 
    # 
    # PROC:	MAPI_Site::cdSpec 
    # 
    # INPUTS:	cd_orietation, cd_opacity, cd_min, cd_max, x, y	 
    # 
    # PURPOSE :	Specify a basic subset of the class fields. 
    # 
    ###################################################################### 
    method cdSpec {args} 
} 
 
 
 
 
# 
# Site processing infrastructure. 
# 
 
###################################################################### 
# 
# PROC:		MAPI_ProcessSites 
# 
# Inputs:	siteList........A list of MAPI_Site objects. 
#		processor.......A MAPI_ProcessSite object. 
#		L...............An EGDS layout. 
#		outputMap.......A MAPI_Output object. 
#  
# Output:	void 
# 
# Purpose:	A computational wrapper for CD site processing. 
# 
# 
###################################################################### 
# proc MAPI_ProcessSites { siteList processor L {outputMap ""}}  
 
###################################################################### 
# 
# CLASS:	MAPI_ProcessSite 
#  
# Purpose :	Do application-specific processing of a given site. 
# 
# 
###################################################################### 
class MAPI_ProcessSite { 
    constructor {} {} 
    destructor {} 
     
    method ProcessSite {site L outputMap} {} 
} 
 
 
###################################################################### 
# 
# CLASS:	MAPI_CD_Extraction 
#  
# Purpose :	It is a derived class from MAPI_ProcessSite base  
#               class to search for certain CDs inside the layout. 
#  
# 
###################################################################### 
class MAPI_CD_Extraction { 
    inherit MAPI_ProcessSite 
     
    public { 
	variable over_size ""         ;# over size value in dbu.  
	variable over_size2 ""        ;
    # over size value in dbu on the right side, default is over_size. 
	variable clear_space ""       ;# clear space value in dbu. 
        variable clear_space2 ""      ;
    # clear space value in dbu at the top. default is clear_space. 
	variable feature_length ""    ;# site min feature length in dbu. 
	variable search_area_w ""     ;# search area width in dbu. 
	variable search_area_h ""     ;# search area height in dbu. 
	variable search_area_w_div "" 
	variable search_area_h_div "" 
	variable cd_count_limit ""    ;# max. number of output sites 
	variable cd_pick_mode ""      ;
    # picking criteria, can be first||random||uniform. 
	variable layer_num "" 
    } 
     
    private { 
	variable _mode 0 
	variable _fid "" 
	variable _fid_gds "" 
	variable _fileName "" 
	variable _fileNameGds "" 
    } 
     
     
    constructor {args} { 
	eval configure $args 
	CheckArgs 
    } 
    destructor {} 
     
    private method CheckArgs {} 
    public method ProcessSite { site L outputMap } 
} 
 
###################################################################### 
# 
# CLASS:	MAPI_CD_Validate 
#  
# Purpose :	It is a derived class from MAPI_ProcessSite class  
#               to validate the existance of certain CDs inside the layout. 
#  
# 
###################################################################### 
class MAPI_CD_Validate { 
    inherit MAPI_ProcessSite 
     
    public variable over_size ""      ;# over size value in dbu.  
    public variable over_size2 ""     ;
      # over size value in dbu on the right side, default is over_size. 
    public variable clear_space ""    ;# clear space value in dbu. 
    public variable clear_space2  ""  ;
      # clear space value in dbu at the top. default is clear_space. 
    public variable feature_length ""  ;# site min feature length in dbu. 
    public variable cell_name ""      ;# top cell name 
    public variable layer_num  ""     ;# layer number to validate 
     
     
    constructor {args} { 
        eval configure $args 
	CheckArgs 
    } 
 
    private method CheckArgs {} 
    method ProcessSite {site L outputMap} 
} 
 
 
 
 
###################################################################### 
# 
# CLASS:		MAPI_GetCdDirectionAndValue 
# 
# Purpose :	Around a site center (x,y) get the CD value 
#               and direction of measurment and updates the input site  
#               with the cd value and orientation. 
# 
# 
###################################################################### 
class MAPI_GetCdDirectionAndValue { 
    inherit MAPI_ProcessSite  
 
    public variable layoutLayer "" 
    public variable searchRadius 3000  ;# in dbu. 
 
    constructor { args } { eval configure $args } 
 
    public method ProcessSite {site L outputMap} 
} 
 
 
# 
# Output infrastructure. 
#  
 
#################################################################### 
# 
# CLASS:      MAPI_Output 
#  
# Purpose :   An abstract output class. 
# 
###################################################################### 
class MAPI_Output { 
    constructor {} {} 
    destructor {} 
     
    method OutputSite {site} {} 
} 
 
 
#################################################################### 
# 
# CLASS:     MAPI_Output_File 
#  
# Purpose :  A derived output class to output sites to a text file. 
# 
# 
###################################################################### 
class MAPI_Output_File { 
    inherit MAPI_Output 
     
    public variable _fileName ""     ;# Output file name 
    public variable _fileNameGds ""  ;# Output gds file name 
 
    private variable fh ""  
     
    constructor { {fileName ""} {fileNameGds ""} } { 
        if {$fileName == ""} { error "No input file specified"  
	} else { set _fileName $fileName } 
        set fh [open $_fileName w] 
    
        ## Add file header   
        puts $fh "units: microns" 
        puts $fh [format "center_x\t\tcenter_y\t\tcd_orientation\t\ttarget_cd_h\ttarget_cd_v\topacity\t\twidth/space\t\tfeature_type"] 
        flush $fh 
    }  
     
    destructor { close $fh }  
     
    method OutputSite { site } 
} 
 
 
#################################################################### 
# 
# CLASS:     MAPI_Output_List 
#  
# Purpose:   A derived output class to output the sites into a Tcl list.                
#                           
# 
######################################################################   
class MAPI_Output_List { 
    inherit MAPI_Output 
     
    private variable _outSitesList 
     
    constructor {} { set _outSitesList [list] } 
    destructor {} 
     
    method GetOutList {}  
    method OutputSite { site } 
} 
 
############################################################################# 
# 
# CLASS:     MAPI_OutputAMAT 
#  
# Purpose:   A derived output class to write AMAT XML files from site objects.                
#                           
# 
#############################################################################   
class MAPI_OutputAMAT { 
    inherit MAPI_Output 
 
    public  variable file_name "" 
     
     
    private variable fd  
    private variable version 
    private variable precision 
    private variable transform_object 
    private variable repeated_dies_object  
    private variable gss_object "" 
     
    private variable gds_layers "" 
    private variable gds_mask_names "" 
    private variable gds_DI_types "" 
     
    ## Specific Info for the AMAT XML format 
    private variable dbm_target_list "" 
 
    constructor {fileName toolVersion layoutPrecision \
      {masterMaskNames "TEST"}\
		{gssfilename ""} {keyValueList ""} {transformObj ""} {repeatObj ""}} { 
               
       ## Open the file 
       set file_name $fileName 
       set fd [open $file_name "w"] 
       set version   $toolVersion 
       set precision $layoutPrecision 
       set transform_object $transformObj 
       set repeated_dies_object $repeatObj 
    
       ## Create gss output file 
       set gssFileName [lindex $gssfilename 0] 
       set opentype [lindex $gssfilename 1] 
       if {$gssFileName != ""} {set gss_object \
                [namespace current]::[Metro_OutputGSS \
		#auto $gssFileName $keyValueList -opentype $opentype]} 
      
       ## Write the file header 
       puts $fd {&lt;DBMProfile \
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;} 
       puts $fd "&lt;DBMProfileVersion&gt;$version&lt;/DBMProfileVersion&gt;" 
       puts $fd {&lt;ProductName&gt;OPC-Check&lt;/ProductName&gt;} 
       puts $fd {&lt;CoordinateSystems&gt;} 
       puts $fd {&lt;CoordSysList&gt;} 
       puts $fd {&lt;CoordSys&gt;} 
       puts $fd {&lt;ToolName&gt;Calibre&lt;/ToolName&gt;} 
       puts $fd {&lt;CoordSysName&gt;Chip&lt;/CoordSysName&gt;} 
       puts $fd {&lt;UnitsXY&gt;microns&lt;/UnitsXY&gt;} 
       puts $fd {&lt;BoundaryXY&gt;} 
       puts $fd {&lt;MinX&gt;-20000&lt;/MinX&gt;} 
       puts $fd {&lt;MinY&gt;-20000&lt;/MinY&gt;} 
       puts $fd {&lt;MaxX&gt;20000&lt;/MaxX&gt;} 
       puts $fd {&lt;MaxY&gt;20000&lt;/MaxY&gt;} 
       puts $fd {&lt;/BoundaryXY&gt;} 
       puts $fd {&lt;CoordSysMaskSet&gt;} 
    
       foreach maskName $masterMaskNames { 
          puts $fd {&lt;MaskAliasNameDefinition&gt;} 
          puts $fd "&lt;MaskAliasName&gt;[lindex $maskName 0]&lt;/MaskAliasName&gt;" 
          puts $fd "&lt;MasterMaskName&gt;[lindex $maskName 0]&lt;/MasterMaskName&gt;" 
          puts $fd {&lt;/MaskAliasNameDefinition&gt;} 
          lappend gds_mask_names [lindex $maskName 0] 
          lappend gds_layers     [lindex $maskName 1] 
          lappend gds_DI_types   [lindex $maskName 2] 
       } 
 
       puts $fd {&lt;/CoordSysMaskSet&gt;} 
       puts $fd {&lt;/CoordSys&gt;} 
       puts $fd {&lt;/CoordSysList&gt;} 
       puts $fd {&lt;/CoordinateSystems&gt;} 
      
       puts $fd {&lt;MasterMaskSet&gt;} 
       foreach maskName $masterMaskNames { 
          puts $fd "&lt;MasterMaskName&gt;[lindex $maskName 0]&lt;/MasterMaskName&gt;" 
       } 
       puts $fd {&lt;/MasterMaskSet&gt;} 
    }           
    
    destructor {} 
   
    public { 
       method OutputSite {site} 
    } 
} 
 
############################################################################# 
# 
# CLASS:     MAPI_OutputHitachi  
#  
# Purpose: A derived output class to write HITACHI files from site 
# objects.                
#                           
# 
#############################################################################   
class MAPI_OutputHitachi { 
    inherit MAPI_Output 
     
    public  variable file_name "" 
    public variable  design_data_name "" 
     
    private variable fd  
    private variable eps_info  
    private variable orig_header 
    private variable site_counter 1 
    private variable max_mp_count 1 
    private variable header_till_mpcount "" 
    private variable header_from_mpcount "" 
    private variable transform_object "" 
    private variable repeated_dies_object "" 
    private variable precision "" 
    private variable gss_object "" 
     
    constructor {fileDir designDataName toolName \
      layoutPrecision topCellName \
		{layoutInfo "TEST"} {gssFileName ""} {idw ""} {keyValueList ""} {transformObj ""} \
		{repeatObj ""}} { 
       ## Open the file 
       set design_data_name $designDataName 
       set file_name [file join $fileDir ${design_data_name}_HSS_IDP.csv] 
       set fd [open $file_name "w"] 
       set transform_object $transformObj 
       set repeated_dies_object $repeatObj 
       set precision $layoutPrecision 
      
       ## Now, Create the XML_BLD file and the IDD_Template 
       OutputXMLBLD [file tail $idw]           
       OutputIDD $layoutInfo $toolName $topCellName 
        
       ## Only if GSS file name is supplied create a gss object 
       if { $gssFileName != "" } { 
          set gss_object [namespace current]::[Metro_OutputGSS 
          #auto $gssFileName $keyValueList] 
       } 
      
       ## Create the epsInfo Header 
       ## The header here will have every single piece of info 
       ## except for the extra MP's 
       set header_till_mpcount [list #EPS_ID EPS_Template \
           EPS_Name AP1_Template AP2_Template EP_Template \ 
                               Type Move_X Move_Y Mode \ 
			 	 Type AP1_X AP1_Y AP1_Mag AP1_Rot Type AP1_AF_X \
				 AP1_AF_Y AP1_AF_Mag Type AP1_AST_X \
				 AP1_AST_Y AP1_AST_Mag \ 
			 	 Type AP2_X AP2_Y AP2_Mag AP2_Rot Type \
				 AP2_AF_X AP2_AF_Y AP2_AF_Mag Type \
				 AP2_AST_X AP2_AST_Y AP2_AST_Mag \ 
			 	 Type EP_X EP_Y EP_Mag_X EP_Mag_Y EP_Rot Type \
				 EP_AF_X EP_AF_Y EP_AF_Mag Type EP_AST_X\
				 EP_AST_Y EP_AST_Mag Type EP_ABCC_X EP_ABCC_Y] 
    
       		set header_from_mpcount  [list MP1_Template Type MP1_X MP1_Y MP1_DNo1 MP1_DNo2 MP1_Name \
		MP1_Object MP1_Type MP1_OutputData MP1_TargetCD \
			MP1_Edge MP1_PosOffset_X MP1_PosOffset_Y \
		MP1_SA_In MP1_SA_Out \ 
		MP1_Direction MP1_SumLines MP1_MeaPoints \
			MP1_MeaLeng MP1_Diameters MP1_SumArea] 
			        
       set eps_info(header) [join "$header_till_mpcount MP_Count $header_from_mpcount" ,] 
       set eps_info(body) {}			     
    
       ## Write the header 
       OutputHeader 
    }  
     
    destructor {} 
     
    public { 
       method OutputXMLBLD {idw} 
       method OutputIDD    {layoutInfo toolName topCellName} 
       method OutputHeader {} 
        
       method OutputSite   {site} 
    } 
}     
 
 
 
# 
# Transform. 
# 
 
###################################################################### 
# 
# CLASS:		MAPI_Transform 
#  
# Purpose :	Consistent implementation of affine transforms. 
#		Any derived class should still use the "_statePacket" 
#		member to represent the internal transform. 
# 
# Notes:		After the constructor, the variables correpsonding  
#		to the transform specification parameters are no 
#		longer guaranteed to be valid. 
# 
# 
###################################################################### 
class MAPI_Transform { 
    public variable shiftx 0 
    public variable shifty 0 
    public variable rotate 0 
    public variable scale 1 
    public variable mirror "none" ;#  possible value "x", "y", "xy", and "none" 
 
    protected variable _statePacket 
 
    constructor { args } { 
	eval configure $args 
        Init 
    } 
    destructor {} 
 
    method Init { } 
    method Transform { x y } 
    method Compose { X XC {sx 0} {sy 0} } 
 
    protected method GetState { } 
    protected method SetState { statePacket } 
} 
 
 
 
# 
# Image acquisition. 
# 
 
###################################################################### 
# 
# CLASS:	MAPI_Image 
# 
# Purpose :	Generate a rectangular digital image from a layout extent. 
# 
# 
###################################################################### 
class MAPI_Image { 
    public variable image_format gif  ;# gif, png, etc. 
    public variable layout_db ""      ;# layout data base handle 
    public variable halo_dbu ""       ;# image physical size (width &amp; height) in dbu.   
    public variable layer_num ""      ;# layer number to be captured 
    public variable image_width  400  ;# In pixels  
    public variable image_height 400  ;# In pixels  
     
    protected variable units_mult "" 
     
    constructor {args} { eval configure $args } 
    destructor {} 
     
    ###################################################################### 
    # 
    # PROC:	Image 
    # 
    # Inputs:	x,y...............The image center point in db units. 
    #	        imageFileName.....The name of the output file. 
    # 
    # Output:	none 
    # 
    # Purpose :	Form a digital image around the point (x,y) in the  
    #		top cell of the layout. 
    # 
    # Example:  set L [layout create lab.gds] 
    #		MAPI_Image mimage -layout_db $L -layer_num 2 -halo_dbu 10 
    #		mimage  Image 87399 112347 ab.gif 
    # 
    ###################################################################### 
    method Image { x y imageFileName } 
} 
 
 
###################################################################### 
# 
# CLASS:		MAPI_Aerial_Image 
# 
# Purpose :	Form a square digital image of the aerial image in an extent. 
# 
# 
###################################################################### 
class MAPI_Aerial_Image { 
    inherit MAPI_Image 
 
    public common _maxSimulationFrame 100000   ;# Max size of sim rect side, in dbu 
    public variable appearance 2               ;
# Depreciated variable only "2" is accepted 
    public variable intens_min 0.0             ;# Minimum Intensity value 
    public variable intens_max 1.2             ;# Maximum Intensity value 
    public variable color_contrast 0.5         ;# Gamma Factor 
    public variable setup ""                   ;
# LITHO Setup file used for Simulation. 
    public variable simpixsz_dbu ""            ;
# Simulation pixel size in dbu (if not specified will                                                 
# use the image pixel size for simulation) 
 
    constructor {args} { eval configure $args } 
    destructor {} 
     
    private method clipLayout { mode layout_src rect \
		{layout_dst tmp_layout} } 
 
 
    ###################################################################### 
    # 
    # PROC:	Image 
    # 
    # Inputs:	x,y..............The center point of the desired image, 
    # db units.  
    #		imageFileName....The name of the output image file. 
    # 
    # Output:	none 
    # 
    # Purpose:	Form an aerial image around the point (x,y) in the  
    #		top cell of the layout. 
    # 
    # Example:  set L [layout create gds/lab5.gds] 
    #		MAPI_Aerial_Image mimage -layout $L -halo_dbu 4.0 -setup setup/
    # lab5.in -simpizsz_dbu 5 
    #		mimage  Image 9 10 am.gif 
    # 
    ###################################################################### 
    method Image { x y imageFileName } 
} 
 
 
 
# 
# Direct layout query. 
# 
 
###################################################################### 
# 
# CLASS:		MAPI_Egds_Query 
# 
# Purpose :	Get geometric data inside a rectangular extent 
#		and write it to a GDS file. 
# 
# 
###################################################################### 
 
class MAPI_Egds_Query { 
    public variable layout_db ""  ;# layout data base handle 
    public variable layer_num ""  ;# layer number to query into. 
 
    constructor {args} { eval configure $args } 
    destructor {} 
 
    ###################################################################### 
    # 
    # PROC:	Query 
    # 
    # Inputs:	region.........A TCL list containing the lower left and upper 
    # right corners of the query extent in dbu, in the format 
    # "x1 y1 x2 y2". 
    #		fileName.......Name of the output GDS file to be created. 
    #		topCellName....The name of the starting layout cell for the query. 
    # The default is "TOP". 
    # 
    # Output:	none 
    # 
    # Purpose :	Get geometric data inside a rectangular extent 
    #		and write it to a GDS file. 
    # 
    # Example:  set L [layout create lab.gds] 
    #		MAPI_Egds_Query mquery -layout_db $L -layer_num 1 
    #		set rect "300000 753000 301000 755000" 
    #		set outputGdsFile "simple.gds" 
    #		mquery  Query $rect $outputGdsFile 
    # 
    # 
    ###################################################################### 
    method Query { region fileName { topCellName "TOP" } } 
} 
 
 
 
# 
# Database flattening and related functionality. 
# 
 
###################################################################### 
# 
# CLASS:		MAPI_RefFilter 
# 
# Purpose :	An interface class for processing flattened placements. 
# 
# 
###################################################################### 
class MAPI_RefFilter { 
     
    ###################################################################### 
    # 
    # PROC:	FilterRef 
    # 
    # Inputs:	cell.....EGDS cell name. 
    #		xform....MAPI transform from the cell coordinate system 
    #			 to the output coordinate system. 
    # 
    # Output:	boolean: if true, do not flatten subhierarchy. 
    # 
    # Purpose :	Filter and generate application-specific output for  
    #		flattened EGDS references. 
    # 
    # 
    ###################################################################### 
    method FilterRef { cell xform } { return false } 
} 
 
 
###################################################################### 
# 
# PROC:		MAPI_Flatten 
# 
# Inputs:	db......A WB layout object. 
#		cell....The starting cell. 
#		X.......The starting transform. 
#		filter..A placement filter object. 
# 
# Output:	void 
# 
# Purpose :	Recursively flatten the layout.  This function can 
#		be modified by the choice of 'filter'. 
# 
# 
###################################################################### 
# proc MAPI_Flatten { db cell X filter }  
 
 
 
# 
# Filter class hierarchy. 
# 
 
###################################################################### 
# 
# CLASS:		MAPI_SiteFilter 
# 
# Purpose :	Base class for selecting subsets of site lists. 
# 
# 
###################################################################### 
class MAPI_SiteFilter { 
     
    ###################################################################### 
    # 
    # PROC:	FilterSites 
    # 
    # Inputs:	siteList......A TCL list of sites. 
    # 
    # Output:	A list containing a subset of 'siteList'. 
    # 
    # Purpose :	Select a subset of 'siteList'. 
    # 
    # 
    ###################################################################### 
    public method FilterSites { siteList }  
} 
 
###################################################################### 
# 
# CLASS:		MAPI_SiteFilter_grid 
# 
# Purpose :	Select the closest site to each grid point.  Some 
#		grid points may have no associated site. 
# 
# 
###################################################################### 
class MAPI_SiteFilter_grid { 
    inherit MAPI_SiteFilter 
 
    public { 
	variable gridOriginX   ;# grid origin x coordinate 
	variable gridOriginY   ;# grid origin y coordinate 
	variable nCols         ;# number of columns in the grid 
	variable nRows         ;# number of rows in the grid 
	variable xPitch        ;# grid separation in x direction 
	variable yPitch        ;# grid separation in y direction 
    } 
 
    constructor { args } { eval configure $args } 
 
    # Use the "_center_[xy]" members of the site as the site location. 
    public method FilterSites { siteList }  
} 
 
 
 
 
###################################################################### 
# 
# CLASS:		MAPI_SiteFilter_randomSample 
# 
# Purpose :	Select a random subsample of 'siteList'. 
# 
# 
###################################################################### 
class MAPI_SiteFilter_randomSample { 
    inherit MAPI_SiteFilter 
 
    public variable nSamples 0       ;
# Desired number of samples in the output. 
    public variable randomSeed 0     ;
# If non-zero, use as seed; else the used seed is written here. 
     
    constructor { args } { eval configure $args } 
 
    public method FilterSites { siteList }  
} 
 
 
###################################################################### 
# 
# CLASS:		MAPI_SiteFilter_interact 
# 
# Purpose :	Select only sites which interact with the given, 
#		optionally sized layout layer. 
# 
# 
###################################################################### 
class MAPI_SiteFilter_interact { 
    inherit MAPI_SiteFilter 
 
    public variable layoutDB        ;# layout data base handle 
    public variable layoutLayer     ;# layer number 
    public variable sizeValue 0     ;# Size value in EGDS database units. 
     
    constructor { args } { eval configure $args } 
 
    public method FilterSites { siteList } 
} 
 
 
###################################################################### 
# 
# CLASS:		MAPI_SiteFilter_cluster 
# 
# Purpose :	Attempt to cluster the sites according to the given 
#		parameters.  Annotate the sites with the cluster number 
#		using the "group id" field.  Return all sites  
#		that fell withing the final clustering. 
# 
# 
###################################################################### 
class MAPI_SiteFilter_cluster { 
    inherit MAPI_SiteFilter 
 
    public variable maxClusterCount            ;
# Actual number of clusters found may be less. 
    public variable maxClusterDiameter "" {     
# L-inf norm, database units. 
        if { $maxClusterDiameter &lt; 4 } { error "Diamter too small." } 
    } 
     
    protected variable clusterCenters 
 
    constructor { args } { eval configure $args } 
 
    public method FilterSites { siteList } 
} 
 
 
 
# 
# Alignment point selection. 
# 
 
###################################################################### 
# 
# CLASS:		MAPI_SelectAlignmentPoint 
# 
# Purpose :	Find a suitable 2-D geometry configuration on the 
#		given layout layer withing a given extent. 
# 
# 
###################################################################### 
class MAPI_FindAlignment { 
    public variable layoutDB ""      ;# layout data base handle 
    public variable layoutLayer ""   ;# layer number 
     
    constructor { args } { eval configure $args } 
 
    ###################################################################### 
    # PROC:	FindPoint 
    # 
    # Inputs:	[xy][12]......The search extent in database units. 
    # 
    # Output:	A two-element list containing the point, or "false". 
    # 
    # Purpose :	Returns the 2-D point around which the alignment region should be 
    #		centered, or "false" if no such point could be found. 
    #  
    ###################################################################### 
    public method FindPoint { x1 y1 x2 y2 } 
} </code></pre></div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCAppe_MapiInterfaces_id81942161.html" title="All Calibre MAPI interfaces can be found in the mdp_mapi.itcl file distributed with the Calibre MAPI product.">MAPI Interfaces</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "calbr_mapi_useref"
                DocTitle = "Calibre® Metrology API (MAPI) User’s and Reference Manual"
                PageTitle = "Interface Example"
                Copyright = "2021"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/General_InterfaceExample_idd7c53567.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Calibre® Metrology API (MAPI) User’s and Reference Manual, v2021.2<br />Unpublished work. © 2021 Siemens 
                <br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>